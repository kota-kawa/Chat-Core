"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "scripts_entries_chat_ts";
exports.ids = ["scripts_entries_chat_ts"];
exports.modules = {

/***/ "./scripts/chat/chat_controller.ts":
/*!*****************************************!*\
  !*** ./scripts/chat/chat_controller.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// chat_controller.ts – 送信ボタン／バックエンド通信\n// --------------------------------------------------\n/* 送信ボタン or Enter 押下 */ function sendMessage() {\n    if (!window.userInput) return;\n    const message = window.userInput.value.trim();\n    if (!message) return;\n    const aiModel = window.aiModelSelect ? window.aiModelSelect.value : \"gemini-2.5-flash\";\n    window.showTypingIndicator?.();\n    generateResponse(message, aiModel);\n    window.userInput.value = \"\";\n    window.userInput.style.height = \"auto\";\n}\n/* サーバー POST → Bot 応答を描画 */ function generateResponse(message, aiModel) {\n    if (!window.chatMessages) return;\n    // ユーザーメッセージを即描画\n    window.renderUserMessage?.(message);\n    // Bot 側スピナー\n    const spinnerWrap = document.createElement(\"div\");\n    spinnerWrap.className = \"message-wrapper bot-message-wrapper\";\n    const spinner = document.createElement(\"div\");\n    spinner.className = \"bot-message\";\n    spinner.innerHTML = '<div class=\"spinner\"></div>';\n    spinnerWrap.appendChild(spinner);\n    window.chatMessages.appendChild(spinnerWrap);\n    if (window.scrollMessageToTop) window.scrollMessageToTop(spinnerWrap);\n    fetch(\"/api/chat\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            message,\n            chat_room_id: window.currentChatRoomId,\n            model: aiModel\n        })\n    }).then((r)=>r.json()).then((data)=>{\n        window.hideTypingIndicator?.();\n        spinnerWrap.remove();\n        if (data && data.response) {\n            window.animateBotMessage?.(data.response);\n        } else if (data && data.error) {\n            window.animateBotMessage?.(\"エラー: \" + data.error);\n        } else {\n            window.animateBotMessage?.(\"エラー: 予期しないエラーが発生しました。\");\n        }\n    }).catch((err)=>{\n        window.hideTypingIndicator?.();\n        spinnerWrap.remove();\n        window.animateBotMessage?.(\"エラー: \" + err.toString());\n    });\n}\n// ---- window へ公開 ------------------------------\nwindow.sendMessage = sendMessage;\nwindow.generateResponse = generateResponse;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHRzL2NoYXQvY2hhdF9jb250cm9sbGVyLnRzIiwibWFwcGluZ3MiOiI7QUFBQSxzQ0FBc0M7QUFDdEMscURBQXFEO0FBRXJELHFCQUFxQixHQUNyQixTQUFTQTtJQUNQLElBQUksQ0FBQ0MsT0FBT0MsU0FBUyxFQUFFO0lBQ3ZCLE1BQU1DLFVBQVVGLE9BQU9DLFNBQVMsQ0FBQ0UsS0FBSyxDQUFDQyxJQUFJO0lBQzNDLElBQUksQ0FBQ0YsU0FBUztJQUNkLE1BQU1HLFVBQVVMLE9BQU9NLGFBQWEsR0FBR04sT0FBT00sYUFBYSxDQUFDSCxLQUFLLEdBQUc7SUFDcEVILE9BQU9PLG1CQUFtQjtJQUMxQkMsaUJBQWlCTixTQUFTRztJQUMxQkwsT0FBT0MsU0FBUyxDQUFDRSxLQUFLLEdBQUc7SUFDekJILE9BQU9DLFNBQVMsQ0FBQ1EsS0FBSyxDQUFDQyxNQUFNLEdBQUc7QUFDbEM7QUFFQSx5QkFBeUIsR0FDekIsU0FBU0YsaUJBQWlCTixPQUFlLEVBQUVHLE9BQWU7SUFDeEQsSUFBSSxDQUFDTCxPQUFPVyxZQUFZLEVBQUU7SUFDMUIsZ0JBQWdCO0lBQ2hCWCxPQUFPWSxpQkFBaUIsR0FBR1Y7SUFFM0IsWUFBWTtJQUNaLE1BQU1XLGNBQWNDLFNBQVNDLGFBQWEsQ0FBQztJQUMzQ0YsWUFBWUcsU0FBUyxHQUFHO0lBQ3hCLE1BQU1DLFVBQVVILFNBQVNDLGFBQWEsQ0FBQztJQUN2Q0UsUUFBUUQsU0FBUyxHQUFHO0lBQ3BCQyxRQUFRQyxTQUFTLEdBQUc7SUFDcEJMLFlBQVlNLFdBQVcsQ0FBQ0Y7SUFFeEJqQixPQUFPVyxZQUFZLENBQUNRLFdBQVcsQ0FBQ047SUFDaEMsSUFBSWIsT0FBT29CLGtCQUFrQixFQUFFcEIsT0FBT29CLGtCQUFrQixDQUFDUDtJQUV6RFEsTUFBTSxhQUFhO1FBQ2pCQyxRQUFRO1FBQ1JDLFNBQVM7WUFBRSxnQkFBZ0I7UUFBbUI7UUFDOUNDLE1BQU1DLEtBQUtDLFNBQVMsQ0FBQztZQUNuQnhCO1lBQ0F5QixjQUFjM0IsT0FBTzRCLGlCQUFpQjtZQUN0Q0MsT0FBT3hCO1FBQ1Q7SUFDRixHQUNHeUIsSUFBSSxDQUFDLENBQUNDLElBQU1BLEVBQUVDLElBQUksSUFDbEJGLElBQUksQ0FBQyxDQUFDRztRQUNMakMsT0FBT2tDLG1CQUFtQjtRQUMxQnJCLFlBQVlzQixNQUFNO1FBQ2xCLElBQUlGLFFBQVFBLEtBQUtHLFFBQVEsRUFBRTtZQUN6QnBDLE9BQU9xQyxpQkFBaUIsR0FBR0osS0FBS0csUUFBUTtRQUMxQyxPQUFPLElBQUlILFFBQVFBLEtBQUtLLEtBQUssRUFBRTtZQUM3QnRDLE9BQU9xQyxpQkFBaUIsR0FBRyxVQUFVSixLQUFLSyxLQUFLO1FBQ2pELE9BQU87WUFDTHRDLE9BQU9xQyxpQkFBaUIsR0FBRztRQUM3QjtJQUNGLEdBQ0NFLEtBQUssQ0FBQyxDQUFDQztRQUNOeEMsT0FBT2tDLG1CQUFtQjtRQUMxQnJCLFlBQVlzQixNQUFNO1FBQ2xCbkMsT0FBT3FDLGlCQUFpQixHQUFHLFVBQVVHLElBQUlDLFFBQVE7SUFDbkQ7QUFDSjtBQUVBLGlEQUFpRDtBQUNqRHpDLE9BQU9ELFdBQVcsR0FBR0E7QUFDckJDLE9BQU9RLGdCQUFnQixHQUFHQTtBQUVoQiIsInNvdXJjZXMiOlsid2VicGFjazovL3N0cmlrZS1mcm9udGVuZC8uL3NjcmlwdHMvY2hhdC9jaGF0X2NvbnRyb2xsZXIudHM/NmRhYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjaGF0X2NvbnRyb2xsZXIudHMg4oCTIOmAgeS/oeODnOOCv+ODs++8j+ODkOODg+OCr+OCqOODs+ODiemAmuS/oVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyog6YCB5L+h44Oc44K/44OzIG9yIEVudGVyIOaKvOS4iyAqL1xuZnVuY3Rpb24gc2VuZE1lc3NhZ2UoKSB7XG4gIGlmICghd2luZG93LnVzZXJJbnB1dCkgcmV0dXJuO1xuICBjb25zdCBtZXNzYWdlID0gd2luZG93LnVzZXJJbnB1dC52YWx1ZS50cmltKCk7XG4gIGlmICghbWVzc2FnZSkgcmV0dXJuO1xuICBjb25zdCBhaU1vZGVsID0gd2luZG93LmFpTW9kZWxTZWxlY3QgPyB3aW5kb3cuYWlNb2RlbFNlbGVjdC52YWx1ZSA6IFwiZ2VtaW5pLTIuNS1mbGFzaFwiO1xuICB3aW5kb3cuc2hvd1R5cGluZ0luZGljYXRvcj8uKCk7XG4gIGdlbmVyYXRlUmVzcG9uc2UobWVzc2FnZSwgYWlNb2RlbCk7XG4gIHdpbmRvdy51c2VySW5wdXQudmFsdWUgPSBcIlwiO1xuICB3aW5kb3cudXNlcklucHV0LnN0eWxlLmhlaWdodCA9IFwiYXV0b1wiO1xufVxuXG4vKiDjgrXjg7zjg5Djg7wgUE9TVCDihpIgQm90IOW/nOetlOOCkuaPj+eUuyAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVSZXNwb25zZShtZXNzYWdlOiBzdHJpbmcsIGFpTW9kZWw6IHN0cmluZykge1xuICBpZiAoIXdpbmRvdy5jaGF0TWVzc2FnZXMpIHJldHVybjtcbiAgLy8g44Om44O844K244O844Oh44OD44K744O844K444KS5Y2z5o+P55S7XG4gIHdpbmRvdy5yZW5kZXJVc2VyTWVzc2FnZT8uKG1lc3NhZ2UpO1xuXG4gIC8vIEJvdCDlgbTjgrnjg5Tjg4rjg7xcbiAgY29uc3Qgc3Bpbm5lcldyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBzcGlubmVyV3JhcC5jbGFzc05hbWUgPSBcIm1lc3NhZ2Utd3JhcHBlciBib3QtbWVzc2FnZS13cmFwcGVyXCI7XG4gIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBzcGlubmVyLmNsYXNzTmFtZSA9IFwiYm90LW1lc3NhZ2VcIjtcbiAgc3Bpbm5lci5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cInNwaW5uZXJcIj48L2Rpdj4nO1xuICBzcGlubmVyV3JhcC5hcHBlbmRDaGlsZChzcGlubmVyKTtcblxuICB3aW5kb3cuY2hhdE1lc3NhZ2VzLmFwcGVuZENoaWxkKHNwaW5uZXJXcmFwKTtcbiAgaWYgKHdpbmRvdy5zY3JvbGxNZXNzYWdlVG9Ub3ApIHdpbmRvdy5zY3JvbGxNZXNzYWdlVG9Ub3Aoc3Bpbm5lcldyYXApO1xuXG4gIGZldGNoKFwiL2FwaS9jaGF0XCIsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBtZXNzYWdlLFxuICAgICAgY2hhdF9yb29tX2lkOiB3aW5kb3cuY3VycmVudENoYXRSb29tSWQsXG4gICAgICBtb2RlbDogYWlNb2RlbFxuICAgIH0pXG4gIH0pXG4gICAgLnRoZW4oKHIpID0+IHIuanNvbigpKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICB3aW5kb3cuaGlkZVR5cGluZ0luZGljYXRvcj8uKCk7XG4gICAgICBzcGlubmVyV3JhcC5yZW1vdmUoKTtcbiAgICAgIGlmIChkYXRhICYmIGRhdGEucmVzcG9uc2UpIHtcbiAgICAgICAgd2luZG93LmFuaW1hdGVCb3RNZXNzYWdlPy4oZGF0YS5yZXNwb25zZSk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEgJiYgZGF0YS5lcnJvcikge1xuICAgICAgICB3aW5kb3cuYW5pbWF0ZUJvdE1lc3NhZ2U/LihcIuOCqOODqeODvDogXCIgKyBkYXRhLmVycm9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5hbmltYXRlQm90TWVzc2FnZT8uKFwi44Ko44Op44O8OiDkuojmnJ/jgZfjgarjgYTjgqjjg6njg7zjgYznmbrnlJ/jgZfjgb7jgZfjgZ/jgIJcIik7XG4gICAgICB9XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgd2luZG93LmhpZGVUeXBpbmdJbmRpY2F0b3I/LigpO1xuICAgICAgc3Bpbm5lcldyYXAucmVtb3ZlKCk7XG4gICAgICB3aW5kb3cuYW5pbWF0ZUJvdE1lc3NhZ2U/LihcIuOCqOODqeODvDogXCIgKyBlcnIudG9TdHJpbmcoKSk7XG4gICAgfSk7XG59XG5cbi8vIC0tLS0gd2luZG93IOOBuOWFrOmWiyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbndpbmRvdy5zZW5kTWVzc2FnZSA9IHNlbmRNZXNzYWdlO1xud2luZG93LmdlbmVyYXRlUmVzcG9uc2UgPSBnZW5lcmF0ZVJlc3BvbnNlO1xuXG5leHBvcnQge307XG4iXSwibmFtZXMiOlsic2VuZE1lc3NhZ2UiLCJ3aW5kb3ciLCJ1c2VySW5wdXQiLCJtZXNzYWdlIiwidmFsdWUiLCJ0cmltIiwiYWlNb2RlbCIsImFpTW9kZWxTZWxlY3QiLCJzaG93VHlwaW5nSW5kaWNhdG9yIiwiZ2VuZXJhdGVSZXNwb25zZSIsInN0eWxlIiwiaGVpZ2h0IiwiY2hhdE1lc3NhZ2VzIiwicmVuZGVyVXNlck1lc3NhZ2UiLCJzcGlubmVyV3JhcCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInNwaW5uZXIiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsInNjcm9sbE1lc3NhZ2VUb1RvcCIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2hhdF9yb29tX2lkIiwiY3VycmVudENoYXRSb29tSWQiLCJtb2RlbCIsInRoZW4iLCJyIiwianNvbiIsImRhdGEiLCJoaWRlVHlwaW5nSW5kaWNhdG9yIiwicmVtb3ZlIiwicmVzcG9uc2UiLCJhbmltYXRlQm90TWVzc2FnZSIsImVycm9yIiwiY2F0Y2giLCJlcnIiLCJ0b1N0cmluZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scripts/chat/chat_controller.ts\n");

/***/ }),

/***/ "./scripts/chat/chat_history.ts":
/*!**************************************!*\
  !*** ./scripts/chat/chat_history.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// chat_history.ts – 履歴のロード／保存\n// --------------------------------------------------\n/* サーバーから履歴取得 */ function loadChatHistory() {\n    if (!window.currentChatRoomId) {\n        if (window.chatMessages) window.chatMessages.innerHTML = \"\";\n        return;\n    }\n    fetch(`/api/get_chat_history?room_id=${window.currentChatRoomId}`).then((r)=>r.json()).then((data)=>{\n        if (data.error) {\n            console.error(\"get_chat_history:\", data.error);\n            return;\n        }\n        if (!window.chatMessages) return;\n        window.chatMessages.innerHTML = \"\";\n        const msgs = Array.isArray(data.messages) ? data.messages : [];\n        msgs.forEach((m)=>{\n            if (window.displayMessage) window.displayMessage(m.message, m.sender);\n        });\n        if (window.chatMessages.lastElementChild && window.scrollMessageToTop) window.scrollMessageToTop(window.chatMessages.lastElementChild);\n        localStorage.setItem(`chatHistory_${window.currentChatRoomId}`, JSON.stringify(msgs.map((m)=>({\n                text: m.message,\n                sender: m.sender\n            }))));\n    }).catch((err)=>console.error(\"履歴取得失敗:\", err));\n}\n/* ローカルストレージから履歴読み込み */ function loadLocalChatHistory() {\n    if (!window.currentChatRoomId || !window.chatMessages) return;\n    const key = `chatHistory_${window.currentChatRoomId}`;\n    let history = [];\n    try {\n        const stored = localStorage.getItem(key);\n        history = stored ? JSON.parse(stored) : [];\n    } catch  {\n        history = [];\n    }\n    window.chatMessages.innerHTML = \"\";\n    history.forEach((item)=>{\n        if (window.displayMessage) window.displayMessage(item.text, item.sender);\n    });\n    if (window.chatMessages.lastElementChild && window.scrollMessageToTop) window.scrollMessageToTop(window.chatMessages.lastElementChild);\n}\n/* メッセージ1件をローカル保存 */ function saveMessageToLocalStorage(text, sender) {\n    if (!window.currentChatRoomId) return;\n    const key = `chatHistory_${window.currentChatRoomId}`;\n    let history = [];\n    try {\n        const stored = localStorage.getItem(key);\n        history = stored ? JSON.parse(stored) : [];\n    } catch  {\n        history = [];\n    }\n    history.push({\n        text,\n        sender\n    });\n    localStorage.setItem(key, JSON.stringify(history));\n}\n// ---- window へ公開 ------------------------------\nwindow.loadChatHistory = loadChatHistory;\nwindow.loadLocalChatHistory = loadLocalChatHistory;\nwindow.saveMessageToLocalStorage = saveMessageToLocalStorage;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VyxLQUFLLENBQUNGLFVBQVUsRUFBRTtJQUM1QyxFQUFFLE9BQU07UUFDTkQsVUFBVSxFQUFFO0lBQ2Q7SUFDQUEsUUFBUU0sSUFBSSxDQUFDO1FBQUVYO1FBQU1SO0lBQU87SUFDNUJHLGFBQWFDLE9BQU8sQ0FBQ1EsS0FBS1AsS0FBS0MsU0FBUyxDQUFDTztBQUMzQztBQUVBLGlEQUFpRDtBQUNqRGhDLE9BQU9ELGVBQWUsR0FBR0E7QUFDekJDLE9BQU84QixvQkFBb0IsR0FBR0E7QUFDOUI5QixPQUFPcUMseUJBQXlCLEdBQUdBO0FBRXpCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RyaWtlLWZyb250ZW5kLy4vc2NyaXB0cy9jaGF0L2NoYXRfaGlzdG9yeS50cz82Y2EzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNoYXRfaGlzdG9yeS50cyDigJMg5bGl5q2044Gu44Ot44O844OJ77yP5L+d5a2YXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKiDjgrXjg7zjg5Djg7zjgYvjgonlsaXmrbTlj5blvpcgKi9cbmZ1bmN0aW9uIGxvYWRDaGF0SGlzdG9yeSgpIHtcbiAgaWYgKCF3aW5kb3cuY3VycmVudENoYXRSb29tSWQpIHtcbiAgICBpZiAod2luZG93LmNoYXRNZXNzYWdlcykgd2luZG93LmNoYXRNZXNzYWdlcy5pbm5lckhUTUwgPSBcIlwiO1xuICAgIHJldHVybjtcbiAgfVxuICBmZXRjaChgL2FwaS9nZXRfY2hhdF9oaXN0b3J5P3Jvb21faWQ9JHt3aW5kb3cuY3VycmVudENoYXRSb29tSWR9YClcbiAgICAudGhlbigocikgPT4gci5qc29uKCkpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGlmIChkYXRhLmVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJnZXRfY2hhdF9oaXN0b3J5OlwiLCBkYXRhLmVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCF3aW5kb3cuY2hhdE1lc3NhZ2VzKSByZXR1cm47XG4gICAgICB3aW5kb3cuY2hhdE1lc3NhZ2VzLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICBjb25zdCBtc2dzID0gQXJyYXkuaXNBcnJheShkYXRhLm1lc3NhZ2VzKSA/IGRhdGEubWVzc2FnZXMgOiBbXTtcbiAgICAgIG1zZ3MuZm9yRWFjaCgobTogeyBtZXNzYWdlOiBzdHJpbmc7IHNlbmRlcjogc3RyaW5nIH0pID0+IHtcbiAgICAgICAgaWYgKHdpbmRvdy5kaXNwbGF5TWVzc2FnZSkgd2luZG93LmRpc3BsYXlNZXNzYWdlKG0ubWVzc2FnZSwgbS5zZW5kZXIpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICh3aW5kb3cuY2hhdE1lc3NhZ2VzLmxhc3RFbGVtZW50Q2hpbGQgJiYgd2luZG93LnNjcm9sbE1lc3NhZ2VUb1RvcClcbiAgICAgICAgd2luZG93LnNjcm9sbE1lc3NhZ2VUb1RvcCh3aW5kb3cuY2hhdE1lc3NhZ2VzLmxhc3RFbGVtZW50Q2hpbGQgYXMgSFRNTEVsZW1lbnQpO1xuXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcbiAgICAgICAgYGNoYXRIaXN0b3J5XyR7d2luZG93LmN1cnJlbnRDaGF0Um9vbUlkfWAsXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KG1zZ3MubWFwKChtOiB7IG1lc3NhZ2U6IHN0cmluZzsgc2VuZGVyOiBzdHJpbmcgfSkgPT4gKHsgdGV4dDogbS5tZXNzYWdlLCBzZW5kZXI6IG0uc2VuZGVyIH0pKSlcbiAgICAgICk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihcIuWxpeattOWPluW+l+WkseaVlzpcIiwgZXJyKSk7XG59XG5cbi8qIOODreODvOOCq+ODq+OCueODiOODrOODvOOCuOOBi+OCieWxpeattOiqreOBv+i+vOOBvyAqL1xuZnVuY3Rpb24gbG9hZExvY2FsQ2hhdEhpc3RvcnkoKSB7XG4gIGlmICghd2luZG93LmN1cnJlbnRDaGF0Um9vbUlkIHx8ICF3aW5kb3cuY2hhdE1lc3NhZ2VzKSByZXR1cm47XG4gIGNvbnN0IGtleSA9IGBjaGF0SGlzdG9yeV8ke3dpbmRvdy5jdXJyZW50Q2hhdFJvb21JZH1gO1xuICBsZXQgaGlzdG9yeTogeyB0ZXh0OiBzdHJpbmc7IHNlbmRlcjogc3RyaW5nIH1bXSA9IFtdO1xuICB0cnkge1xuICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgaGlzdG9yeSA9IHN0b3JlZCA/IEpTT04ucGFyc2Uoc3RvcmVkKSA6IFtdO1xuICB9IGNhdGNoIHtcbiAgICBoaXN0b3J5ID0gW107XG4gIH1cbiAgd2luZG93LmNoYXRNZXNzYWdlcy5pbm5lckhUTUwgPSBcIlwiO1xuICBoaXN0b3J5LmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICBpZiAod2luZG93LmRpc3BsYXlNZXNzYWdlKSB3aW5kb3cuZGlzcGxheU1lc3NhZ2UoaXRlbS50ZXh0LCBpdGVtLnNlbmRlcik7XG4gIH0pO1xuXG4gIGlmICh3aW5kb3cuY2hhdE1lc3NhZ2VzLmxhc3RFbGVtZW50Q2hpbGQgJiYgd2luZG93LnNjcm9sbE1lc3NhZ2VUb1RvcClcbiAgICB3aW5kb3cuc2Nyb2xsTWVzc2FnZVRvVG9wKHdpbmRvdy5jaGF0TWVzc2FnZXMubGFzdEVsZW1lbnRDaGlsZCBhcyBIVE1MRWxlbWVudCk7XG59XG5cbi8qIOODoeODg+OCu+ODvOOCuDHku7bjgpLjg63jg7zjgqvjg6vkv53lrZggKi9cbmZ1bmN0aW9uIHNhdmVNZXNzYWdlVG9Mb2NhbFN0b3JhZ2UodGV4dDogc3RyaW5nLCBzZW5kZXI6IHN0cmluZykge1xuICBpZiAoIXdpbmRvdy5jdXJyZW50Q2hhdFJvb21JZCkgcmV0dXJuO1xuICBjb25zdCBrZXkgPSBgY2hhdEhpc3RvcnlfJHt3aW5kb3cuY3VycmVudENoYXRSb29tSWR9YDtcbiAgbGV0IGhpc3Rvcnk6IHsgdGV4dDogc3RyaW5nOyBzZW5kZXI6IHN0cmluZyB9W10gPSBbXTtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgIGhpc3RvcnkgPSBzdG9yZWQgPyBKU09OLnBhcnNlKHN0b3JlZCkgOiBbXTtcbiAgfSBjYXRjaCB7XG4gICAgaGlzdG9yeSA9IFtdO1xuICB9XG4gIGhpc3RvcnkucHVzaCh7IHRleHQsIHNlbmRlciB9KTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShoaXN0b3J5KSk7XG59XG5cbi8vIC0tLS0gd2luZG93IOOBuOWFrOmWiyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbndpbmRvdy5sb2FkQ2hhdEhpc3RvcnkgPSBsb2FkQ2hhdEhpc3Rvcnk7XG53aW5kb3cubG9hZExvY2FsQ2hhdEhpc3RvcnkgPSBsb2FkTG9jYWxDaGF0SGlzdG9yeTtcbndpbmRvdy5zYXZlTWVzc2FnZVRvTG9jYWxTdG9yYWdlID0gc2F2ZU1lc3NhZ2VUb0xvY2FsU3RvcmFnZTtcblxuZXhwb3J0IHt9O1xuIl0sIm5hbWVzIjpbImxvYWRDaGF0SGlzdG9yeSIsIndpbmRvdyIsImN1cnJlbnRDaGF0Um9vbUlkIiwiY2hhdE1lc3NhZ2VzIiwiaW5uZXJIVE1MIiwiZmV0Y2giLCJ0aGVuIiwiciIsImpzb24iLCJkYXRhIiwiZXJyb3IiLCJjb25zb2xlIiwibXNncyIsIkFycmF5IiwiaXNBcnJheSIsIm1lc3NhZ2VzIiwiZm9yRWFjaCIsIm0iLCJkaXNwbGF5TWVzc2FnZSIsIm1lc3NhZ2UiLCJzZW5kZXIiLCJsYXN0RWxlbWVudENoaWxkIiwic2Nyb2xsTWVzc2FnZVRvVG9wIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtYXAiLCJ0ZXh0IiwiY2F0Y2giLCJlcnIiLCJsb2FkTG9jYWxDaGF0SGlzdG9yeSIsImtleSIsImhpc3RvcnkiLCJzdG9yZWQiLCJnZXRJdGVtIiwicGFyc2UiLCJpdGVtIiwic2F2ZU1lc3NhZ2VUb0xvY2FsU3RvcmFnZSIsInB1c2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./scripts/chat/chat_history.ts\n");

/***/ }),

/***/ "./scripts/chat/chat_messages.ts":
/*!***************************************!*\
  !*** ./scripts/chat/chat_messages.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// chat_messages.ts – メッセージ描画／コピー／ボットアニメ\n// --------------------------------------------------\n// ※ DOMPurify を必ず先にロードしておくこと\n// <script src=\"https://unpkg.com/dompurify@2.4.0/dist/purify.min.js\" defer></script>\n////////////////////////////////////////////////////////////////////////////////\n// メッセージ描画\n////////////////////////////////////////////////////////////////////////////////\n/* ユーザーメッセージを即時描画 */ function renderUserMessage(text) {\n    if (!window.chatMessages) return;\n    const wrapper = document.createElement(\"div\");\n    wrapper.className = \"message-wrapper user-message-wrapper\";\n    const msg = document.createElement(\"div\");\n    msg.className = \"user-message\";\n    // テキスト → <br> 置換後、<br> だけ許可してサニタイズ描画\n    const htmlText = text.replace(/\\n/g, \"<br>\");\n    window.renderSanitizedHTML?.(msg, htmlText, [\n        \"br\"\n    ]);\n    msg.style.animation = \"floatUp 0.5s ease-out\";\n    const copyBtn = window.createCopyBtn ? window.createCopyBtn(()=>text) : document.createElement(\"button\");\n    wrapper.append(copyBtn, msg);\n    window.chatMessages.appendChild(wrapper);\n    if (window.scrollMessageToTop) window.scrollMessageToTop(wrapper);\n    // ローカル保存は <br> 付き HTML で互換維持\n    if (window.saveMessageToLocalStorage) window.saveMessageToLocalStorage(htmlText, \"user\");\n}\n/* Bot メッセージをタイプアニメーションで描画 */ function animateBotMessage(originalText) {\n    if (!window.chatMessages) return;\n    const wrapper = document.createElement(\"div\");\n    wrapper.className = \"message-wrapper bot-message-wrapper\";\n    const msg = document.createElement(\"div\");\n    msg.className = \"bot-message\";\n    const copyBtn = window.createCopyBtn ? window.createCopyBtn(()=>msg.dataset.fullText || \"\") : document.createElement(\"button\");\n    wrapper.append(copyBtn, msg);\n    window.chatMessages.appendChild(wrapper);\n    if (window.scrollMessageToTop) window.scrollMessageToTop(wrapper);\n    let raw = \"\";\n    let idx = 0;\n    const chunk = 7;\n    const interval = 100;\n    const timer = setInterval(()=>{\n        if (idx >= originalText.length) {\n            clearInterval(timer);\n            if (window.renderSanitizedHTML && window.formatLLMOutput) {\n                window.renderSanitizedHTML(msg, window.formatLLMOutput(raw));\n            }\n            if (window.saveMessageToLocalStorage) window.saveMessageToLocalStorage(raw, \"bot\");\n            return;\n        }\n        raw += originalText.substr(idx, chunk);\n        idx += chunk;\n        if (window.renderSanitizedHTML && window.formatLLMOutput) {\n            window.renderSanitizedHTML(msg, window.formatLLMOutput(raw));\n        }\n        msg.dataset.fullText = raw;\n    }, interval);\n}\n/* ローカル／サーバ履歴共通描画 */ function displayMessage(text, sender) {\n    if (!window.chatMessages) return;\n    const wrapper = document.createElement(\"div\");\n    const copyBtn = window.createCopyBtn ? window.createCopyBtn(()=>text) : document.createElement(\"button\");\n    if (sender === \"user\") {\n        wrapper.className = \"message-wrapper user-message-wrapper\";\n        const msg = document.createElement(\"div\");\n        msg.className = \"user-message\";\n        // 既存履歴は <br> が含まれているため、<br> だけ許可して描画\n        if (text.includes(\"<\")) {\n            window.renderSanitizedHTML?.(msg, text, [\n                \"br\"\n            ]);\n        } else {\n            window.setTextWithLineBreaks?.(msg, text);\n        }\n        wrapper.append(copyBtn, msg);\n    } else {\n        wrapper.className = \"message-wrapper bot-message-wrapper\";\n        const msg = document.createElement(\"div\");\n        msg.className = \"bot-message\";\n        // Bot はマークアップ済み → 広めのタグ許可でサニタイズ\n        if (window.renderSanitizedHTML && window.formatLLMOutput) {\n            window.renderSanitizedHTML(msg, window.formatLLMOutput(text));\n        }\n        wrapper.append(copyBtn, msg);\n    }\n    window.chatMessages.appendChild(wrapper);\n}\n// ---- window へ公開 ------------------------------\nwindow.renderUserMessage = renderUserMessage;\nwindow.animateBotMessage = animateBotMessage;\nwindow.displayMessage = displayMessage;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFVBQVVaLE9BQU9hLGFBQWEsR0FBR2IsT0FBT2EsYUFBYSxDQUFDLElBQU1kLFFBQVFJLFNBQVNDLGFBQWEsQ0FBQztJQUVqRyxJQUFJNkIsV0FBVyxRQUFRO1FBQ3JCL0IsUUFBUUcsU0FBUyxHQUFHO1FBQ3BCLE1BQU1DLE1BQU1ILFNBQVNDLGFBQWEsQ0FBQztRQUNuQ0UsSUFBSUQsU0FBUyxHQUFHO1FBRWhCLHFDQUFxQztRQUNyQyxJQUFJTixLQUFLbUMsUUFBUSxDQUFDLE1BQU07WUFDdEJsQyxPQUFPUyxtQkFBbUIsR0FBR0gsS0FBS1AsTUFBTTtnQkFBQzthQUFLO1FBQ2hELE9BQU87WUFDTEMsT0FBT21DLHFCQUFxQixHQUFHN0IsS0FBS1A7UUFDdEM7UUFFQUcsUUFBUVksTUFBTSxDQUFDRixTQUFTTjtJQUMxQixPQUFPO1FBQ0xKLFFBQVFHLFNBQVMsR0FBRztRQUNwQixNQUFNQyxNQUFNSCxTQUFTQyxhQUFhLENBQUM7UUFDbkNFLElBQUlELFNBQVMsR0FBRztRQUVoQixnQ0FBZ0M7UUFDaEMsSUFBSUwsT0FBT1MsbUJBQW1CLElBQUlULE9BQU84QixlQUFlLEVBQUU7WUFDeEQ5QixPQUFPUyxtQkFBbUIsQ0FBQ0gsS0FBS04sT0FBTzhCLGVBQWUsQ0FBQy9CO1FBQ3pEO1FBQ0FHLFFBQVFZLE1BQU0sQ0FBQ0YsU0FBU047SUFDMUI7SUFDQU4sT0FBT0MsWUFBWSxDQUFDYyxXQUFXLENBQUNiO0FBQ2xDO0FBRUEsaURBQWlEO0FBQ2pERixPQUFPRixpQkFBaUIsR0FBR0E7QUFDM0JFLE9BQU9rQixpQkFBaUIsR0FBR0E7QUFDM0JsQixPQUFPZ0MsY0FBYyxHQUFHQTtBQUVkIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RyaWtlLWZyb250ZW5kLy4vc2NyaXB0cy9jaGF0L2NoYXRfbWVzc2FnZXMudHM/OWFkMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjaGF0X21lc3NhZ2VzLnRzIOKAkyDjg6Hjg4Pjgrvjg7zjgrjmj4/nlLvvvI/jgrPjg5Tjg7zvvI/jg5zjg4Pjg4jjgqLjg4vjg6Fcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyDigLsgRE9NUHVyaWZ5IOOCkuW/heOBmuWFiOOBq+ODreODvOODieOBl+OBpuOBiuOBj+OBk+OBqFxuLy8gPHNjcmlwdCBzcmM9XCJodHRwczovL3VucGtnLmNvbS9kb21wdXJpZnlAMi40LjAvZGlzdC9wdXJpZnkubWluLmpzXCIgZGVmZXI+PC9zY3JpcHQ+XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyDjg6Hjg4Pjgrvjg7zjgrjmj4/nlLtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8qIOODpuODvOOCtuODvOODoeODg+OCu+ODvOOCuOOCkuWNs+aZguaPj+eUuyAqL1xuZnVuY3Rpb24gcmVuZGVyVXNlck1lc3NhZ2UodGV4dDogc3RyaW5nKSB7XG4gIGlmICghd2luZG93LmNoYXRNZXNzYWdlcykgcmV0dXJuO1xuICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgd3JhcHBlci5jbGFzc05hbWUgPSBcIm1lc3NhZ2Utd3JhcHBlciB1c2VyLW1lc3NhZ2Utd3JhcHBlclwiO1xuXG4gIGNvbnN0IG1zZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIG1zZy5jbGFzc05hbWUgPSBcInVzZXItbWVzc2FnZVwiO1xuXG4gIC8vIOODhuOCreOCueODiCDihpIgPGJyPiDnva7mj5vlvozjgIE8YnI+IOOBoOOBkeioseWPr+OBl+OBpuOCteODi+OCv+OCpOOCuuaPj+eUu1xuICBjb25zdCBodG1sVGV4dCA9IHRleHQucmVwbGFjZSgvXFxuL2csIFwiPGJyPlwiKTtcbiAgd2luZG93LnJlbmRlclNhbml0aXplZEhUTUw/Lihtc2csIGh0bWxUZXh0LCBbXCJiclwiXSk7XG4gIG1zZy5zdHlsZS5hbmltYXRpb24gPSBcImZsb2F0VXAgMC41cyBlYXNlLW91dFwiO1xuXG4gIGNvbnN0IGNvcHlCdG4gPSB3aW5kb3cuY3JlYXRlQ29weUJ0biA/IHdpbmRvdy5jcmVhdGVDb3B5QnRuKCgpID0+IHRleHQpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblxuICB3cmFwcGVyLmFwcGVuZChjb3B5QnRuLCBtc2cpO1xuICB3aW5kb3cuY2hhdE1lc3NhZ2VzLmFwcGVuZENoaWxkKHdyYXBwZXIpO1xuICBpZiAod2luZG93LnNjcm9sbE1lc3NhZ2VUb1RvcCkgd2luZG93LnNjcm9sbE1lc3NhZ2VUb1RvcCh3cmFwcGVyKTtcblxuICAvLyDjg63jg7zjgqvjg6vkv53lrZjjga8gPGJyPiDku5jjgY0gSFRNTCDjgafkupLmj5vntq3mjIFcbiAgaWYgKHdpbmRvdy5zYXZlTWVzc2FnZVRvTG9jYWxTdG9yYWdlKSB3aW5kb3cuc2F2ZU1lc3NhZ2VUb0xvY2FsU3RvcmFnZShodG1sVGV4dCwgXCJ1c2VyXCIpO1xufVxuXG4vKiBCb3Qg44Oh44OD44K744O844K444KS44K/44Kk44OX44Ki44OL44Oh44O844K344On44Oz44Gn5o+P55S7ICovXG5mdW5jdGlvbiBhbmltYXRlQm90TWVzc2FnZShvcmlnaW5hbFRleHQ6IHN0cmluZykge1xuICBpZiAoIXdpbmRvdy5jaGF0TWVzc2FnZXMpIHJldHVybjtcbiAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHdyYXBwZXIuY2xhc3NOYW1lID0gXCJtZXNzYWdlLXdyYXBwZXIgYm90LW1lc3NhZ2Utd3JhcHBlclwiO1xuXG4gIGNvbnN0IG1zZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIG1zZy5jbGFzc05hbWUgPSBcImJvdC1tZXNzYWdlXCI7XG5cbiAgY29uc3QgY29weUJ0biA9IHdpbmRvdy5jcmVhdGVDb3B5QnRuID8gd2luZG93LmNyZWF0ZUNvcHlCdG4oKCkgPT4gbXNnLmRhdGFzZXQuZnVsbFRleHQgfHwgXCJcIikgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICB3cmFwcGVyLmFwcGVuZChjb3B5QnRuLCBtc2cpO1xuICB3aW5kb3cuY2hhdE1lc3NhZ2VzLmFwcGVuZENoaWxkKHdyYXBwZXIpO1xuICBpZiAod2luZG93LnNjcm9sbE1lc3NhZ2VUb1RvcCkgd2luZG93LnNjcm9sbE1lc3NhZ2VUb1RvcCh3cmFwcGVyKTtcblxuICBsZXQgcmF3ID0gXCJcIjtcbiAgbGV0IGlkeCA9IDA7XG4gIGNvbnN0IGNodW5rID0gNztcbiAgY29uc3QgaW50ZXJ2YWwgPSAxMDA7XG4gIGNvbnN0IHRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIGlmIChpZHggPj0gb3JpZ2luYWxUZXh0Lmxlbmd0aCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG5cbiAgICAgIGlmICh3aW5kb3cucmVuZGVyU2FuaXRpemVkSFRNTCAmJiB3aW5kb3cuZm9ybWF0TExNT3V0cHV0KSB7XG4gICAgICAgIHdpbmRvdy5yZW5kZXJTYW5pdGl6ZWRIVE1MKG1zZywgd2luZG93LmZvcm1hdExMTU91dHB1dChyYXcpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHdpbmRvdy5zYXZlTWVzc2FnZVRvTG9jYWxTdG9yYWdlKSB3aW5kb3cuc2F2ZU1lc3NhZ2VUb0xvY2FsU3RvcmFnZShyYXcsIFwiYm90XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByYXcgKz0gb3JpZ2luYWxUZXh0LnN1YnN0cihpZHgsIGNodW5rKTtcbiAgICBpZHggKz0gY2h1bms7XG5cbiAgICBpZiAod2luZG93LnJlbmRlclNhbml0aXplZEhUTUwgJiYgd2luZG93LmZvcm1hdExMTU91dHB1dCkge1xuICAgICAgd2luZG93LnJlbmRlclNhbml0aXplZEhUTUwobXNnLCB3aW5kb3cuZm9ybWF0TExNT3V0cHV0KHJhdykpO1xuICAgIH1cbiAgICBtc2cuZGF0YXNldC5mdWxsVGV4dCA9IHJhdztcbiAgfSwgaW50ZXJ2YWwpO1xufVxuXG4vKiDjg63jg7zjgqvjg6vvvI/jgrXjg7zjg5DlsaXmrbTlhbHpgJrmj4/nlLsgKi9cbmZ1bmN0aW9uIGRpc3BsYXlNZXNzYWdlKHRleHQ6IHN0cmluZywgc2VuZGVyOiBzdHJpbmcpIHtcbiAgaWYgKCF3aW5kb3cuY2hhdE1lc3NhZ2VzKSByZXR1cm47XG4gIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjb25zdCBjb3B5QnRuID0gd2luZG93LmNyZWF0ZUNvcHlCdG4gPyB3aW5kb3cuY3JlYXRlQ29weUJ0bigoKSA9PiB0ZXh0KSA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cbiAgaWYgKHNlbmRlciA9PT0gXCJ1c2VyXCIpIHtcbiAgICB3cmFwcGVyLmNsYXNzTmFtZSA9IFwibWVzc2FnZS13cmFwcGVyIHVzZXItbWVzc2FnZS13cmFwcGVyXCI7XG4gICAgY29uc3QgbXNnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBtc2cuY2xhc3NOYW1lID0gXCJ1c2VyLW1lc3NhZ2VcIjtcblxuICAgIC8vIOaXouWtmOWxpeattOOBryA8YnI+IOOBjOWQq+OBvuOCjOOBpuOBhOOCi+OBn+OCgeOAgTxicj4g44Gg44GR6Kix5Y+v44GX44Gm5o+P55S7XG4gICAgaWYgKHRleHQuaW5jbHVkZXMoXCI8XCIpKSB7XG4gICAgICB3aW5kb3cucmVuZGVyU2FuaXRpemVkSFRNTD8uKG1zZywgdGV4dCwgW1wiYnJcIl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cuc2V0VGV4dFdpdGhMaW5lQnJlYWtzPy4obXNnLCB0ZXh0KTtcbiAgICB9XG5cbiAgICB3cmFwcGVyLmFwcGVuZChjb3B5QnRuLCBtc2cpO1xuICB9IGVsc2Uge1xuICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gXCJtZXNzYWdlLXdyYXBwZXIgYm90LW1lc3NhZ2Utd3JhcHBlclwiO1xuICAgIGNvbnN0IG1zZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbXNnLmNsYXNzTmFtZSA9IFwiYm90LW1lc3NhZ2VcIjtcblxuICAgIC8vIEJvdCDjga/jg57jg7zjgq/jgqLjg4Pjg5fmuIjjgb8g4oaSIOW6g+OCgeOBruOCv+OCsOioseWPr+OBp+OCteODi+OCv+OCpOOCulxuICAgIGlmICh3aW5kb3cucmVuZGVyU2FuaXRpemVkSFRNTCAmJiB3aW5kb3cuZm9ybWF0TExNT3V0cHV0KSB7XG4gICAgICB3aW5kb3cucmVuZGVyU2FuaXRpemVkSFRNTChtc2csIHdpbmRvdy5mb3JtYXRMTE1PdXRwdXQodGV4dCkpO1xuICAgIH1cbiAgICB3cmFwcGVyLmFwcGVuZChjb3B5QnRuLCBtc2cpO1xuICB9XG4gIHdpbmRvdy5jaGF0TWVzc2FnZXMuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG59XG5cbi8vIC0tLS0gd2luZG93IOOBuOWFrOmWiyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbndpbmRvdy5yZW5kZXJVc2VyTWVzc2FnZSA9IHJlbmRlclVzZXJNZXNzYWdlO1xud2luZG93LmFuaW1hdGVCb3RNZXNzYWdlID0gYW5pbWF0ZUJvdE1lc3NhZ2U7XG53aW5kb3cuZGlzcGxheU1lc3NhZ2UgPSBkaXNwbGF5TWVzc2FnZTtcblxuZXhwb3J0IHt9O1xuIl0sIm5hbWVzIjpbInJlbmRlclVzZXJNZXNzYWdlIiwidGV4dCIsIndpbmRvdyIsImNoYXRNZXNzYWdlcyIsIndyYXBwZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJtc2ciLCJodG1sVGV4dCIsInJlcGxhY2UiLCJyZW5kZXJTYW5pdGl6ZWRIVE1MIiwic3R5bGUiLCJhbmltYXRpb24iLCJjb3B5QnRuIiwiY3JlYXRlQ29weUJ0biIsImFwcGVuZCIsImFwcGVuZENoaWxkIiwic2Nyb2xsTWVzc2FnZVRvVG9wIiwic2F2ZU1lc3NhZ2VUb0xvY2FsU3RvcmFnZSIsImFuaW1hdGVCb3RNZXNzYWdlIiwib3JpZ2luYWxUZXh0IiwiZGF0YXNldCIsImZ1bGxUZXh0IiwicmF3IiwiaWR4IiwiY2h1bmsiLCJpbnRlcnZhbCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJsZW5ndGgiLCJjbGVhckludGVydmFsIiwiZm9ybWF0TExNT3V0cHV0Iiwic3Vic3RyIiwiZGlzcGxheU1lc3NhZ2UiLCJzZW5kZXIiLCJpbmNsdWRlcyIsInNldFRleHRXaXRoTGluZUJyZWFrcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scripts/chat/chat_messages.ts\n");

/***/ }),

/***/ "./scripts/chat/chat_rooms.ts":
/*!************************************!*\
  !*** ./scripts/chat/chat_rooms.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// chat_rooms.ts – ルーム一覧・作成／削除／改名\n// --------------------------------------------------\n/* サイドバーにルーム一覧を描画 */ function loadChatRooms() {\n    fetch(\"/api/get_chat_rooms\").then((r)=>r.json()).then((data)=>{\n        if (data.error) {\n            console.error(\"get_chat_rooms:\", data.error);\n            return;\n        }\n        if (!window.chatRoomListEl) return;\n        const rooms = Array.isArray(data.rooms) ? data.rooms : [];\n        window.chatRoomListEl.innerHTML = \"\";\n        rooms.forEach((room)=>{\n            const card = createRoomCard(room);\n            window.chatRoomListEl.appendChild(card);\n        });\n    }).catch((err)=>console.error(\"ルーム一覧取得失敗:\", err));\n}\n/* ルームカード生成（内部 util） */ function createRoomCard(room) {\n    const card = document.createElement(\"div\");\n    card.className = \"chat-room-card\";\n    if (room.id === window.currentChatRoomId) card.classList.add(\"active\");\n    const title = document.createElement(\"span\");\n    title.textContent = room.title || \"新規チャット\";\n    // 3点アイコン\n    const icon = document.createElement(\"i\");\n    icon.className = \"bi bi-three-dots-vertical room-actions-icon\";\n    icon.style.cursor = \"pointer\";\n    icon.style.fontSize = \"18px\";\n    // メニュー\n    const menu = buildRoomActionsMenu(room);\n    icon.addEventListener(\"click\", (e)=>{\n        e.stopPropagation();\n        document.querySelectorAll(\".room-actions-menu\").forEach((m)=>{\n            if (m !== menu) m.style.display = \"none\";\n        });\n        menu.style.display = menu.style.display === \"block\" ? \"none\" : \"block\";\n    });\n    // クリックでルーム切替\n    card.addEventListener(\"click\", (e)=>{\n        const target = e.target;\n        if (target?.closest(\".room-actions-icon\") || target?.closest(\".room-actions-menu\")) return;\n        switchChatRoom(room.id);\n    });\n    // 右側コンテナ\n    const right = document.createElement(\"div\");\n    right.style.display = \"flex\";\n    right.style.alignItems = \"center\";\n    right.style.position = \"relative\";\n    right.style.marginLeft = \"auto\";\n    right.append(icon, menu);\n    card.append(title, right);\n    return card;\n}\n/* アクションメニュー生成（内部 util） */ function buildRoomActionsMenu(room) {\n    const menu = document.createElement(\"div\");\n    menu.className = \"room-actions-menu\";\n    Object.assign(menu.style, {\n        position: \"absolute\",\n        top: \"50%\",\n        right: \"0\",\n        transform: \"translateY(-50%)\",\n        background: \"#fff\",\n        border: \"1px solid #ddd\",\n        borderRadius: \"6px\",\n        boxShadow: \"0 2px 4px rgba(0,0,0,.1)\",\n        zIndex: \"10\",\n        minWidth: \"140px\",\n        overflow: \"hidden\",\n        display: \"none\"\n    });\n    // 名前変更\n    const rename = document.createElement(\"div\");\n    rename.className = \"menu-item\";\n    rename.innerHTML = '<i class=\"bi bi-pencil-square\" style=\"margin-right:6px;\"></i> 名前変更';\n    decorateMenuItem(rename, \"#007bff\", \"#e6f0ff\");\n    rename.addEventListener(\"click\", (e)=>{\n        e.stopPropagation();\n        menu.style.display = \"none\";\n        const name = prompt(\"新しいチャットルーム名\", room.title);\n        if (name && name.trim()) renameChatRoom(room.id, name.trim());\n    });\n    // 削除\n    const del = document.createElement(\"div\");\n    del.className = \"menu-item\";\n    del.innerHTML = '<i class=\"bi bi-trash\" style=\"margin-right:6px;\"></i> 削除';\n    decorateMenuItem(del, \"#dc3545\", \"#ffe6e6\");\n    del.addEventListener(\"click\", (e)=>{\n        e.stopPropagation();\n        menu.style.display = \"none\";\n        if (confirm(`「${room.title}」を削除しますか？`)) deleteChatRoom(room.id);\n    });\n    menu.append(rename, del);\n    return menu;\n}\n/* メニュー項目スタイル util */ function decorateMenuItem(el, color, hover) {\n    Object.assign(el.style, {\n        padding: \"8px 16px\",\n        cursor: \"pointer\",\n        display: \"flex\",\n        alignItems: \"center\",\n        fontSize: \"14px\",\n        color: color,\n        background: \"#f9f9f9\",\n        borderBottom: \"1px solid #ddd\"\n    });\n    el.addEventListener(\"mouseover\", ()=>el.style.backgroundColor = hover);\n    el.addEventListener(\"mouseout\", ()=>el.style.backgroundColor = \"#f9f9f9\");\n}\n/* ルーム切替 */ function switchChatRoom(roomId) {\n    window.currentChatRoomId = roomId;\n    localStorage.setItem(\"currentChatRoomId\", roomId);\n    window.showChatInterface?.();\n    loadChatRooms();\n    window.loadLocalChatHistory?.();\n    window.loadChatHistory?.();\n}\n/* ルーム作成 */ function createNewChatRoom(roomId, title) {\n    return fetch(\"/api/new_chat_room\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            id: roomId,\n            title\n        })\n    }).then((r)=>r.json()).then((data)=>{\n        if (data.error) return Promise.reject(data.error);\n        return data;\n    });\n}\n/* ルーム削除 */ function deleteChatRoom(roomId) {\n    fetch(\"/api/delete_chat_room\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            room_id: roomId\n        })\n    }).then((r)=>r.json()).then((data)=>{\n        if (data.error) alert(\"削除失敗: \" + data.error);\n        else {\n            if (roomId === window.currentChatRoomId) {\n                window.currentChatRoomId = null;\n                if (window.chatMessages) window.chatMessages.innerHTML = \"\";\n                localStorage.removeItem(\"currentChatRoomId\");\n            }\n            loadChatRooms();\n        }\n    }).catch((err)=>alert(\"削除失敗: \" + err));\n}\n/* ルーム名変更 */ function renameChatRoom(roomId, newTitle) {\n    fetch(\"/api/rename_chat_room\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            room_id: roomId,\n            new_title: newTitle\n        })\n    }).then((r)=>r.json()).then((data)=>{\n        if (data.error) alert(\"名前変更失敗: \" + data.error);\n        else loadChatRooms();\n    }).catch((err)=>alert(\"名前変更失敗: \" + err));\n}\n// ---- window へ公開 ------------------------------\nwindow.loadChatRooms = loadChatRooms;\nwindow.switchChatRoom = switchChatRoom;\nwindow.createNewChatRoom = createNewChatRoom;\nwindow.deleteChatRoom = deleteChatRoom;\nwindow.renameChatRoom = renameChatRoom;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxJQUFNQSxFQUFFQyxJQUFJLElBQ2xCRixJQUFJLENBQUMsQ0FBQ0c7UUFDTCxJQUFJQSxLQUFLQyxLQUFLLEVBQUVxRixNQUFNLFdBQVd0RixLQUFLQyxLQUFLO2FBQ3RDO1lBQ0wsSUFBSXNFLFdBQVdwRSxPQUFPaUIsaUJBQWlCLEVBQUU7Z0JBQ3ZDakIsT0FBT2lCLGlCQUFpQixHQUFHO2dCQUMzQixJQUFJakIsT0FBT29GLFlBQVksRUFBRXBGLE9BQU9vRixZQUFZLENBQUMvRSxTQUFTLEdBQUc7Z0JBQ3pEZ0UsYUFBYWdCLFVBQVUsQ0FBQztZQUMxQjtZQUNFN0Y7UUFDRjtJQUNGLEdBQ0NtQixLQUFLLENBQUMsQ0FBQ0MsTUFBUXVFLE1BQU0sV0FBV3ZFO0FBQ3JDO0FBRUEsVUFBVSxHQUNWLFNBQVM4QyxlQUFlVSxNQUFjLEVBQUVrQixRQUFnQjtJQUN0RDdGLE1BQU0seUJBQXlCO1FBQzdCa0YsUUFBUTtRQUNSQyxTQUFTO1lBQUUsZ0JBQWdCO1FBQW1CO1FBQzlDQyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7WUFBRUcsU0FBU2Q7WUFBUW1CLFdBQVdEO1FBQVM7SUFDOUQsR0FDRzVGLElBQUksQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxJQUFJLElBQ2xCRixJQUFJLENBQUMsQ0FBQ0c7UUFDTCxJQUFJQSxLQUFLQyxLQUFLLEVBQUVxRixNQUFNLGFBQWF0RixLQUFLQyxLQUFLO2FBQ3hDTjtJQUNQLEdBQ0NtQixLQUFLLENBQUMsQ0FBQ0MsTUFBUXVFLE1BQU0sYUFBYXZFO0FBQ3ZDO0FBRUEsaURBQWlEO0FBQ2pEWixPQUFPUixhQUFhLEdBQUdBO0FBQ3ZCUSxPQUFPb0MsY0FBYyxHQUFHQTtBQUN4QnBDLE9BQU8wRSxpQkFBaUIsR0FBR0E7QUFDM0IxRSxPQUFPNkQsY0FBYyxHQUFHQTtBQUN4QjdELE9BQU8wRCxjQUFjLEdBQUdBO0FBRWQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHJpa2UtZnJvbnRlbmQvLi9zY3JpcHRzL2NoYXQvY2hhdF9yb29tcy50cz85MzI5Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNoYXRfcm9vbXMudHMg4oCTIOODq+ODvOODoOS4gOimp+ODu+S9nOaIkO+8j+WJiumZpO+8j+aUueWQjVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxudHlwZSBDaGF0Um9vbSA9IHtcbiAgaWQ6IHN0cmluZztcbiAgdGl0bGU/OiBzdHJpbmc7XG59O1xuXG4vKiDjgrXjgqTjg4njg5Djg7zjgavjg6vjg7zjg6DkuIDopqfjgpLmj4/nlLsgKi9cbmZ1bmN0aW9uIGxvYWRDaGF0Um9vbXMoKSB7XG4gIGZldGNoKFwiL2FwaS9nZXRfY2hhdF9yb29tc1wiKVxuICAgIC50aGVuKChyKSA9PiByLmpzb24oKSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgaWYgKGRhdGEuZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcImdldF9jaGF0X3Jvb21zOlwiLCBkYXRhLmVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCF3aW5kb3cuY2hhdFJvb21MaXN0RWwpIHJldHVybjtcbiAgICAgIGNvbnN0IHJvb21zOiBDaGF0Um9vbVtdID0gQXJyYXkuaXNBcnJheShkYXRhLnJvb21zKSA/IGRhdGEucm9vbXMgOiBbXTtcbiAgICAgIHdpbmRvdy5jaGF0Um9vbUxpc3RFbC5pbm5lckhUTUwgPSBcIlwiO1xuXG4gICAgICByb29tcy5mb3JFYWNoKChyb29tKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVSb29tQ2FyZChyb29tKTtcbiAgICAgICAgd2luZG93LmNoYXRSb29tTGlzdEVsLmFwcGVuZENoaWxkKGNhcmQpO1xuICAgICAgfSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihcIuODq+ODvOODoOS4gOimp+WPluW+l+WkseaVlzpcIiwgZXJyKSk7XG59XG5cbi8qIOODq+ODvOODoOOCq+ODvOODieeUn+aIkO+8iOWGhemDqCB1dGls77yJICovXG5mdW5jdGlvbiBjcmVhdGVSb29tQ2FyZChyb29tOiBDaGF0Um9vbSkge1xuICBjb25zdCBjYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgY2FyZC5jbGFzc05hbWUgPSBcImNoYXQtcm9vbS1jYXJkXCI7XG4gIGlmIChyb29tLmlkID09PSB3aW5kb3cuY3VycmVudENoYXRSb29tSWQpIGNhcmQuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcblxuICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICB0aXRsZS50ZXh0Q29udGVudCA9IHJvb20udGl0bGUgfHwgXCLmlrDopo/jg4Hjg6Pjg4Pjg4hcIjtcblxuICAvLyAz54K544Ki44Kk44Kz44OzXG4gIGNvbnN0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaVwiKTtcbiAgaWNvbi5jbGFzc05hbWUgPSBcImJpIGJpLXRocmVlLWRvdHMtdmVydGljYWwgcm9vbS1hY3Rpb25zLWljb25cIjtcbiAgaWNvbi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgaWNvbi5zdHlsZS5mb250U2l6ZSA9IFwiMThweFwiO1xuXG4gIC8vIOODoeODi+ODpeODvFxuICBjb25zdCBtZW51ID0gYnVpbGRSb29tQWN0aW9uc01lbnUocm9vbSk7XG4gIGljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PihcIi5yb29tLWFjdGlvbnMtbWVudVwiKS5mb3JFYWNoKChtKSA9PiB7XG4gICAgICBpZiAobSAhPT0gbWVudSkgbS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfSk7XG4gICAgbWVudS5zdHlsZS5kaXNwbGF5ID0gbWVudS5zdHlsZS5kaXNwbGF5ID09PSBcImJsb2NrXCIgPyBcIm5vbmVcIiA6IFwiYmxvY2tcIjtcbiAgfSk7XG5cbiAgLy8g44Kv44Oq44OD44Kv44Gn44Or44O844Og5YiH5pu/XG4gIGNhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgRWxlbWVudCB8IG51bGw7XG4gICAgaWYgKHRhcmdldD8uY2xvc2VzdChcIi5yb29tLWFjdGlvbnMtaWNvblwiKSB8fCB0YXJnZXQ/LmNsb3Nlc3QoXCIucm9vbS1hY3Rpb25zLW1lbnVcIikpIHJldHVybjtcbiAgICBzd2l0Y2hDaGF0Um9vbShyb29tLmlkKTtcbiAgfSk7XG5cbiAgLy8g5Y+z5YG044Kz44Oz44OG44OKXG4gIGNvbnN0IHJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgcmlnaHQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICByaWdodC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcbiAgcmlnaHQuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG4gIHJpZ2h0LnN0eWxlLm1hcmdpbkxlZnQgPSBcImF1dG9cIjtcbiAgcmlnaHQuYXBwZW5kKGljb24sIG1lbnUpO1xuXG4gIGNhcmQuYXBwZW5kKHRpdGxlLCByaWdodCk7XG4gIHJldHVybiBjYXJkO1xufVxuXG4vKiDjgqLjgq/jgrfjg6fjg7Pjg6Hjg4vjg6Xjg7znlJ/miJDvvIjlhoXpg6ggdXRpbO+8iSAqL1xuZnVuY3Rpb24gYnVpbGRSb29tQWN0aW9uc01lbnUocm9vbTogQ2hhdFJvb20pIHtcbiAgY29uc3QgbWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIG1lbnUuY2xhc3NOYW1lID0gXCJyb29tLWFjdGlvbnMtbWVudVwiO1xuICBPYmplY3QuYXNzaWduKG1lbnUuc3R5bGUsIHtcbiAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgIHRvcDogXCI1MCVcIixcbiAgICByaWdodDogXCIwXCIsXG4gICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZVkoLTUwJSlcIixcbiAgICBiYWNrZ3JvdW5kOiBcIiNmZmZcIixcbiAgICBib3JkZXI6IFwiMXB4IHNvbGlkICNkZGRcIixcbiAgICBib3JkZXJSYWRpdXM6IFwiNnB4XCIsXG4gICAgYm94U2hhZG93OiBcIjAgMnB4IDRweCByZ2JhKDAsMCwwLC4xKVwiLFxuICAgIHpJbmRleDogXCIxMFwiLFxuICAgIG1pbldpZHRoOiBcIjE0MHB4XCIsXG4gICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gICAgZGlzcGxheTogXCJub25lXCJcbiAgfSk7XG5cbiAgLy8g5ZCN5YmN5aSJ5pu0XG4gIGNvbnN0IHJlbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHJlbmFtZS5jbGFzc05hbWUgPSBcIm1lbnUtaXRlbVwiO1xuICByZW5hbWUuaW5uZXJIVE1MID1cbiAgICAnPGkgY2xhc3M9XCJiaSBiaS1wZW5jaWwtc3F1YXJlXCIgc3R5bGU9XCJtYXJnaW4tcmlnaHQ6NnB4O1wiPjwvaT4g5ZCN5YmN5aSJ5pu0JztcbiAgZGVjb3JhdGVNZW51SXRlbShyZW5hbWUsIFwiIzAwN2JmZlwiLCBcIiNlNmYwZmZcIik7XG4gIHJlbmFtZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIG1lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGNvbnN0IG5hbWUgPSBwcm9tcHQoXCLmlrDjgZfjgYTjg4Hjg6Pjg4Pjg4jjg6vjg7zjg6DlkI1cIiwgcm9vbS50aXRsZSk7XG4gICAgaWYgKG5hbWUgJiYgbmFtZS50cmltKCkpIHJlbmFtZUNoYXRSb29tKHJvb20uaWQsIG5hbWUudHJpbSgpKTtcbiAgfSk7XG5cbiAgLy8g5YmK6ZmkXG4gIGNvbnN0IGRlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGRlbC5jbGFzc05hbWUgPSBcIm1lbnUtaXRlbVwiO1xuICBkZWwuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiYmkgYmktdHJhc2hcIiBzdHlsZT1cIm1hcmdpbi1yaWdodDo2cHg7XCI+PC9pPiDliYrpmaQnO1xuICBkZWNvcmF0ZU1lbnVJdGVtKGRlbCwgXCIjZGMzNTQ1XCIsIFwiI2ZmZTZlNlwiKTtcbiAgZGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgbWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgaWYgKGNvbmZpcm0oYOOAjCR7cm9vbS50aXRsZX3jgI3jgpLliYrpmaTjgZfjgb7jgZnjgYvvvJ9gKSkgZGVsZXRlQ2hhdFJvb20ocm9vbS5pZCk7XG4gIH0pO1xuXG4gIG1lbnUuYXBwZW5kKHJlbmFtZSwgZGVsKTtcbiAgcmV0dXJuIG1lbnU7XG59XG5cbi8qIOODoeODi+ODpeODvOmgheebruOCueOCv+OCpOODqyB1dGlsICovXG5mdW5jdGlvbiBkZWNvcmF0ZU1lbnVJdGVtKGVsOiBIVE1MRWxlbWVudCwgY29sb3I6IHN0cmluZywgaG92ZXI6IHN0cmluZykge1xuICBPYmplY3QuYXNzaWduKGVsLnN0eWxlLCB7XG4gICAgcGFkZGluZzogXCI4cHggMTZweFwiLFxuICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXG4gICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICBmb250U2l6ZTogXCIxNHB4XCIsXG4gICAgY29sb3I6IGNvbG9yLFxuICAgIGJhY2tncm91bmQ6IFwiI2Y5ZjlmOVwiLFxuICAgIGJvcmRlckJvdHRvbTogXCIxcHggc29saWQgI2RkZFwiXG4gIH0pO1xuICBlbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsICgpID0+IChlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBob3ZlcikpO1xuICBlbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgKCkgPT4gKGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2Y5ZjlmOVwiKSk7XG59XG5cbi8qIOODq+ODvOODoOWIh+abvyAqL1xuZnVuY3Rpb24gc3dpdGNoQ2hhdFJvb20ocm9vbUlkOiBzdHJpbmcpIHtcbiAgd2luZG93LmN1cnJlbnRDaGF0Um9vbUlkID0gcm9vbUlkO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRDaGF0Um9vbUlkXCIsIHJvb21JZCk7XG4gIHdpbmRvdy5zaG93Q2hhdEludGVyZmFjZT8uKCk7XG4gIGxvYWRDaGF0Um9vbXMoKTtcbiAgd2luZG93LmxvYWRMb2NhbENoYXRIaXN0b3J5Py4oKTtcbiAgd2luZG93LmxvYWRDaGF0SGlzdG9yeT8uKCk7XG59XG5cbi8qIOODq+ODvOODoOS9nOaIkCAqL1xuZnVuY3Rpb24gY3JlYXRlTmV3Q2hhdFJvb20ocm9vbUlkOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGZldGNoKFwiL2FwaS9uZXdfY2hhdF9yb29tXCIsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGlkOiByb29tSWQsIHRpdGxlIH0pXG4gIH0pXG4gICAgLnRoZW4oKHIpID0+IHIuanNvbigpKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBpZiAoZGF0YS5lcnJvcikgcmV0dXJuIFByb21pc2UucmVqZWN0KGRhdGEuZXJyb3IpO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSk7XG59XG5cbi8qIOODq+ODvOODoOWJiumZpCAqL1xuZnVuY3Rpb24gZGVsZXRlQ2hhdFJvb20ocm9vbUlkOiBzdHJpbmcpIHtcbiAgZmV0Y2goXCIvYXBpL2RlbGV0ZV9jaGF0X3Jvb21cIiwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcm9vbV9pZDogcm9vbUlkIH0pXG4gIH0pXG4gICAgLnRoZW4oKHIpID0+IHIuanNvbigpKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBpZiAoZGF0YS5lcnJvcikgYWxlcnQoXCLliYrpmaTlpLHmlZc6IFwiICsgZGF0YS5lcnJvcik7XG4gICAgICBlbHNlIHtcbiAgICAgIGlmIChyb29tSWQgPT09IHdpbmRvdy5jdXJyZW50Q2hhdFJvb21JZCkge1xuICAgICAgICB3aW5kb3cuY3VycmVudENoYXRSb29tSWQgPSBudWxsO1xuICAgICAgICBpZiAod2luZG93LmNoYXRNZXNzYWdlcykgd2luZG93LmNoYXRNZXNzYWdlcy5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImN1cnJlbnRDaGF0Um9vbUlkXCIpO1xuICAgICAgfVxuICAgICAgICBsb2FkQ2hhdFJvb21zKCk7XG4gICAgICB9XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gYWxlcnQoXCLliYrpmaTlpLHmlZc6IFwiICsgZXJyKSk7XG59XG5cbi8qIOODq+ODvOODoOWQjeWkieabtCAqL1xuZnVuY3Rpb24gcmVuYW1lQ2hhdFJvb20ocm9vbUlkOiBzdHJpbmcsIG5ld1RpdGxlOiBzdHJpbmcpIHtcbiAgZmV0Y2goXCIvYXBpL3JlbmFtZV9jaGF0X3Jvb21cIiwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcm9vbV9pZDogcm9vbUlkLCBuZXdfdGl0bGU6IG5ld1RpdGxlIH0pXG4gIH0pXG4gICAgLnRoZW4oKHIpID0+IHIuanNvbigpKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBpZiAoZGF0YS5lcnJvcikgYWxlcnQoXCLlkI3liY3lpInmm7TlpLHmlZc6IFwiICsgZGF0YS5lcnJvcik7XG4gICAgICBlbHNlIGxvYWRDaGF0Um9vbXMoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBhbGVydChcIuWQjeWJjeWkieabtOWkseaVlzogXCIgKyBlcnIpKTtcbn1cblxuLy8gLS0tLSB3aW5kb3cg44G45YWs6ZaLIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxud2luZG93LmxvYWRDaGF0Um9vbXMgPSBsb2FkQ2hhdFJvb21zO1xud2luZG93LnN3aXRjaENoYXRSb29tID0gc3dpdGNoQ2hhdFJvb207XG53aW5kb3cuY3JlYXRlTmV3Q2hhdFJvb20gPSBjcmVhdGVOZXdDaGF0Um9vbTtcbndpbmRvdy5kZWxldGVDaGF0Um9vbSA9IGRlbGV0ZUNoYXRSb29tO1xud2luZG93LnJlbmFtZUNoYXRSb29tID0gcmVuYW1lQ2hhdFJvb207XG5cbmV4cG9ydCB7fTtcbiJdLCJuYW1lcyI6WyJsb2FkQ2hhdFJvb21zIiwiZmV0Y2giLCJ0aGVuIiwiciIsImpzb24iLCJkYXRhIiwiZXJyb3IiLCJjb25zb2xlIiwid2luZG93IiwiY2hhdFJvb21MaXN0RWwiLCJyb29tcyIsIkFycmF5IiwiaXNBcnJheSIsImlubmVySFRNTCIsImZvckVhY2giLCJyb29tIiwiY2FyZCIsImNyZWF0ZVJvb21DYXJkIiwiYXBwZW5kQ2hpbGQiLCJjYXRjaCIsImVyciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImlkIiwiY3VycmVudENoYXRSb29tSWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0aXRsZSIsInRleHRDb250ZW50IiwiaWNvbiIsInN0eWxlIiwiY3Vyc29yIiwiZm9udFNpemUiLCJtZW51IiwiYnVpbGRSb29tQWN0aW9uc01lbnUiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJtIiwiZGlzcGxheSIsInRhcmdldCIsImNsb3Nlc3QiLCJzd2l0Y2hDaGF0Um9vbSIsInJpZ2h0IiwiYWxpZ25JdGVtcyIsInBvc2l0aW9uIiwibWFyZ2luTGVmdCIsImFwcGVuZCIsIk9iamVjdCIsImFzc2lnbiIsInRvcCIsInRyYW5zZm9ybSIsImJhY2tncm91bmQiLCJib3JkZXIiLCJib3JkZXJSYWRpdXMiLCJib3hTaGFkb3ciLCJ6SW5kZXgiLCJtaW5XaWR0aCIsIm92ZXJmbG93IiwicmVuYW1lIiwiZGVjb3JhdGVNZW51SXRlbSIsIm5hbWUiLCJwcm9tcHQiLCJ0cmltIiwicmVuYW1lQ2hhdFJvb20iLCJkZWwiLCJjb25maXJtIiwiZGVsZXRlQ2hhdFJvb20iLCJlbCIsImNvbG9yIiwiaG92ZXIiLCJwYWRkaW5nIiwiYm9yZGVyQm90dG9tIiwiYmFja2dyb3VuZENvbG9yIiwicm9vbUlkIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInNob3dDaGF0SW50ZXJmYWNlIiwibG9hZExvY2FsQ2hhdEhpc3RvcnkiLCJsb2FkQ2hhdEhpc3RvcnkiLCJjcmVhdGVOZXdDaGF0Um9vbSIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIlByb21pc2UiLCJyZWplY3QiLCJyb29tX2lkIiwiYWxlcnQiLCJjaGF0TWVzc2FnZXMiLCJyZW1vdmVJdGVtIiwibmV3VGl0bGUiLCJuZXdfdGl0bGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./scripts/chat/chat_rooms.ts\n");

/***/ }),

/***/ "./scripts/chat/chat_ui.ts":
/*!*********************************!*\
  !*** ./scripts/chat/chat_ui.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// chat_ui.ts  – チャット画面 UI 共通ユーティリティ\n// --------------------------------------------------\n// グローバル初期化\nwindow.currentChatRoomId = window.currentChatRoomId || null;\n/* チャット画面を表示（セットアップ画面を隠す） */ function showChatInterface() {\n    if (!window.setupContainer || !window.chatContainer) return;\n    window.setupContainer.style.display = \"none\";\n    window.chatContainer.style.display = \"flex\";\n    if (!window.currentChatRoomId && localStorage.getItem(\"currentChatRoomId\")) {\n        window.currentChatRoomId = localStorage.getItem(\"currentChatRoomId\");\n    }\n}\n/* タイピングインジケータ */ function showTypingIndicator() {\n    if (!window.typingIndicator) return;\n    window.typingIndicator.style.display = \"inline-flex\";\n}\nfunction hideTypingIndicator() {\n    if (!window.typingIndicator) return;\n    window.typingIndicator.style.display = \"none\";\n}\n/* LLM 出力を HTML 整形（**太字**／改行・箇条書き） */ function formatLLMOutput(text) {\n    let formatted = text.replace(/\\*\\*(.*?)\\*\\*/g, \"<strong>$1</strong>\");\n    const lines = formatted.split(\"\\n\");\n    let result = \"\";\n    let inList = false;\n    lines.forEach((line)=>{\n        if (line.trim().startsWith(\"- \")) {\n            if (!inList) {\n                result += \"<ul>\";\n                inList = true;\n            }\n            result += \"<li>\" + line.trim().substring(2) + \"</li>\";\n        } else {\n            if (inList) {\n                result += \"</ul>\";\n                inList = false;\n            }\n            result += line + \"<br>\";\n        }\n    });\n    if (inList) result += \"</ul>\";\n    return result;\n}\n/*  サイドバートグル処理  */ function toggleSidebar() {\n    const sb = document.querySelector(\".sidebar\");\n    if (!sb) return;\n    sb.classList.toggle(\"open\");\n    document.body.classList.toggle(\"sidebar-visible\", sb.classList.contains(\"open\"));\n}\nconst initSidebarToggle = ()=>{\n    const sbBtn = document.getElementById(\"sidebar-toggle\");\n    if (sbBtn) sbBtn.addEventListener(\"click\", (e)=>{\n        e.stopPropagation();\n        toggleSidebar();\n    });\n    // オーバーレイ／リンクタップで閉じる\n    document.addEventListener(\"click\", (e)=>{\n        const target = e.target;\n        if (document.body.classList.contains(\"sidebar-visible\") && target && !target.closest(\".sidebar\") && !target.closest(\"#sidebar-toggle\")) {\n            toggleSidebar();\n        }\n    });\n};\nif (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", initSidebarToggle);\n} else {\n    initSidebarToggle();\n}\n// ---- window へ公開 -------------------------------\nwindow.showChatInterface = showChatInterface;\nwindow.showTypingIndicator = showTypingIndicator;\nwindow.hideTypingIndicator = hideTypingIndicator;\nwindow.formatLLMOutput = formatLLMOutput;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHQTtBQUVmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RyaWtlLWZyb250ZW5kLy4vc2NyaXB0cy9jaGF0L2NoYXRfdWkudHM/Yjc2OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjaGF0X3VpLnRzICDigJMg44OB44Oj44OD44OI55S76Z2iIFVJIOWFsemAmuODpuODvOODhuOCo+ODquODhuOCo1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8g44Kw44Ot44O844OQ44Or5Yid5pyf5YyWXG53aW5kb3cuY3VycmVudENoYXRSb29tSWQgPSB3aW5kb3cuY3VycmVudENoYXRSb29tSWQgfHwgbnVsbDtcblxuLyog44OB44Oj44OD44OI55S76Z2i44KS6KGo56S677yI44K744OD44OI44Ki44OD44OX55S76Z2i44KS6Zqg44GZ77yJICovXG5mdW5jdGlvbiBzaG93Q2hhdEludGVyZmFjZSgpIHtcbiAgaWYgKCF3aW5kb3cuc2V0dXBDb250YWluZXIgfHwgIXdpbmRvdy5jaGF0Q29udGFpbmVyKSByZXR1cm47XG4gIHdpbmRvdy5zZXR1cENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIHdpbmRvdy5jaGF0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgaWYgKCF3aW5kb3cuY3VycmVudENoYXRSb29tSWQgJiYgbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50Q2hhdFJvb21JZFwiKSkge1xuICAgIHdpbmRvdy5jdXJyZW50Q2hhdFJvb21JZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudENoYXRSb29tSWRcIik7XG4gIH1cbn1cblxuLyog44K/44Kk44OU44Oz44Kw44Kk44Oz44K444Kx44O844K/ICovXG5mdW5jdGlvbiBzaG93VHlwaW5nSW5kaWNhdG9yKCkge1xuICBpZiAoIXdpbmRvdy50eXBpbmdJbmRpY2F0b3IpIHJldHVybjtcbiAgd2luZG93LnR5cGluZ0luZGljYXRvci5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtZmxleFwiO1xufVxuZnVuY3Rpb24gaGlkZVR5cGluZ0luZGljYXRvcigpIHtcbiAgaWYgKCF3aW5kb3cudHlwaW5nSW5kaWNhdG9yKSByZXR1cm47XG4gIHdpbmRvdy50eXBpbmdJbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xufVxuXG4vKiBMTE0g5Ye65Yqb44KSIEhUTUwg5pW05b2i77yIKirlpKrlrZcqKu+8j+aUueihjOODu+euh+adoeabuOOBje+8iSAqL1xuZnVuY3Rpb24gZm9ybWF0TExNT3V0cHV0KHRleHQ6IHN0cmluZykge1xuICBsZXQgZm9ybWF0dGVkID0gdGV4dC5yZXBsYWNlKC9cXCpcXCooLio/KVxcKlxcKi9nLCBcIjxzdHJvbmc+JDE8L3N0cm9uZz5cIik7XG4gIGNvbnN0IGxpbmVzID0gZm9ybWF0dGVkLnNwbGl0KFwiXFxuXCIpO1xuICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgbGV0IGluTGlzdCA9IGZhbHNlO1xuXG4gIGxpbmVzLmZvckVhY2goKGxpbmUpID0+IHtcbiAgICBpZiAobGluZS50cmltKCkuc3RhcnRzV2l0aChcIi0gXCIpKSB7XG4gICAgICBpZiAoIWluTGlzdCkge1xuICAgICAgICByZXN1bHQgKz0gXCI8dWw+XCI7XG4gICAgICAgIGluTGlzdCA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXN1bHQgKz0gXCI8bGk+XCIgKyBsaW5lLnRyaW0oKS5zdWJzdHJpbmcoMikgKyBcIjwvbGk+XCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpbkxpc3QpIHtcbiAgICAgICAgcmVzdWx0ICs9IFwiPC91bD5cIjtcbiAgICAgICAgaW5MaXN0ID0gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXN1bHQgKz0gbGluZSArIFwiPGJyPlwiO1xuICAgIH1cbiAgfSk7XG4gIGlmIChpbkxpc3QpIHJlc3VsdCArPSBcIjwvdWw+XCI7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qICDjgrXjgqTjg4njg5Djg7zjg4jjgrDjg6vlh6bnkIYgICovXG5mdW5jdGlvbiB0b2dnbGVTaWRlYmFyKCkge1xuICBjb25zdCBzYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2lkZWJhclwiKTtcbiAgaWYgKCFzYikgcmV0dXJuO1xuICBzYi5jbGFzc0xpc3QudG9nZ2xlKFwib3BlblwiKTtcbiAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwic2lkZWJhci12aXNpYmxlXCIsIHNiLmNsYXNzTGlzdC5jb250YWlucyhcIm9wZW5cIikpO1xufVxuXG5jb25zdCBpbml0U2lkZWJhclRvZ2dsZSA9ICgpID0+IHtcbiAgY29uc3Qgc2JCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNpZGViYXItdG9nZ2xlXCIpO1xuICBpZiAoc2JCdG4pXG4gICAgc2JCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdG9nZ2xlU2lkZWJhcigpO1xuICAgIH0pO1xuICAvLyDjgqrjg7zjg5Djg7zjg6zjgqTvvI/jg6rjg7Pjgq/jgr/jg4Pjg5fjgafplonjgZjjgotcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgRWxlbWVudCB8IG51bGw7XG4gICAgaWYgKFxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJzaWRlYmFyLXZpc2libGVcIikgJiZcbiAgICAgIHRhcmdldCAmJlxuICAgICAgIXRhcmdldC5jbG9zZXN0KFwiLnNpZGViYXJcIikgJiZcbiAgICAgICF0YXJnZXQuY2xvc2VzdChcIiNzaWRlYmFyLXRvZ2dsZVwiKVxuICAgICkge1xuICAgICAgdG9nZ2xlU2lkZWJhcigpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5pZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJsb2FkaW5nXCIpIHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgaW5pdFNpZGViYXJUb2dnbGUpO1xufSBlbHNlIHtcbiAgaW5pdFNpZGViYXJUb2dnbGUoKTtcbn1cblxuLy8gLS0tLSB3aW5kb3cg44G45YWs6ZaLIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbndpbmRvdy5zaG93Q2hhdEludGVyZmFjZSA9IHNob3dDaGF0SW50ZXJmYWNlO1xud2luZG93LnNob3dUeXBpbmdJbmRpY2F0b3IgPSBzaG93VHlwaW5nSW5kaWNhdG9yO1xud2luZG93LmhpZGVUeXBpbmdJbmRpY2F0b3IgPSBoaWRlVHlwaW5nSW5kaWNhdG9yO1xud2luZG93LmZvcm1hdExMTU91dHB1dCA9IGZvcm1hdExMTU91dHB1dDtcblxuZXhwb3J0IHt9O1xuIl0sIm5hbWVzIjpbIndpbmRvdyIsImN1cnJlbnRDaGF0Um9vbUlkIiwic2hvd0NoYXRJbnRlcmZhY2UiLCJzZXR1cENvbnRhaW5lciIsImNoYXRDb250YWluZXIiLCJzdHlsZSIsImRpc3BsYXkiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2hvd1R5cGluZ0luZGljYXRvciIsInR5cGluZ0luZGljYXRvciIsImhpZGVUeXBpbmdJbmRpY2F0b3IiLCJmb3JtYXRMTE1PdXRwdXQiLCJ0ZXh0IiwiZm9ybWF0dGVkIiwicmVwbGFjZSIsImxpbmVzIiwic3BsaXQiLCJyZXN1bHQiLCJpbkxpc3QiLCJmb3JFYWNoIiwibGluZSIsInRyaW0iLCJzdGFydHNXaXRoIiwic3Vic3RyaW5nIiwidG9nZ2xlU2lkZWJhciIsInNiIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiYm9keSIsImNvbnRhaW5zIiwiaW5pdFNpZGViYXJUb2dnbGUiLCJzYkJ0biIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJ0YXJnZXQiLCJjbG9zZXN0IiwicmVhZHlTdGF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scripts/chat/chat_ui.ts\n");

/***/ }),

/***/ "./scripts/chat/message_utils.ts":
/*!***************************************!*\
  !*** ./scripts/chat/message_utils.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// message_utils.ts – 共通メッセージユーティリティ\n// --------------------------------------------------\n// DOMPurify など外部ライブラリは先にロードされている想定\n/**\n * HTML をサニタイズして挿入する\n * @param element   挿入先\n * @param dirtyHtml サニタイズ前 HTML\n * @param allowed   許可タグ（省略時はデフォルト）\n */ function renderSanitizedHTML(element, dirtyHtml, allowed = [\n    \"a\",\n    \"strong\",\n    \"em\",\n    \"code\",\n    \"pre\",\n    \"br\",\n    \"p\",\n    \"ul\",\n    \"ol\",\n    \"li\",\n    \"blockquote\",\n    \"img\"\n]) {\n    const clean = DOMPurify.sanitize(dirtyHtml, {\n        ALLOWED_TAGS: allowed,\n        ALLOWED_ATTR: [\n            \"href\",\n            \"src\",\n            \"alt\",\n            \"title\",\n            \"target\"\n        ]\n    });\n    element.innerHTML = clean;\n}\n/**\n * テキストを \\n→<br> に変換しつつ安全に挿入\n * @param element\n * @param text\n */ function setTextWithLineBreaks(element, text) {\n    element.textContent = \"\";\n    text.split(\"\\n\").forEach((line, idx, arr)=>{\n        element.appendChild(document.createTextNode(line));\n        if (idx < arr.length - 1) element.appendChild(document.createElement(\"br\"));\n    });\n}\n// 新しいメッセージを表示領域の先頭に配置\nfunction scrollMessageToTop(element) {\n    if (!window.chatMessages) return;\n    const offset = -1050; // px, how far from the bottom the newest message should appear\n    const max = window.chatMessages.scrollHeight - window.chatMessages.clientHeight;\n    const target = Math.min(element.offsetTop, max) - offset;\n    window.chatMessages.scrollTop = Math.max(target, 0);\n}\n// 汎用コピーアイコン\nfunction createCopyBtn(getText) {\n    const btn = document.createElement(\"button\");\n    btn.className = \"copy-btn\";\n    btn.innerHTML = '<i class=\"bi bi-clipboard\"></i>';\n    btn.addEventListener(\"click\", ()=>{\n        navigator.clipboard.writeText(getText()).then(()=>{\n            btn.innerHTML = '<i class=\"bi bi-check-lg\"></i>';\n            setTimeout(()=>btn.innerHTML = '<i class=\"bi bi-clipboard\"></i>', 2000);\n        });\n    });\n    return btn;\n}\n// ---- window へ公開 ------------------------------\nwindow.renderSanitizedHTML = renderSanitizedHTML;\nwindow.setTextWithLineBreaks = setTextWithLineBreaks;\nwindow.scrollMessageToTop = scrollMessageToTop;\nwindow.createCopyBtn = createCopyBtn;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHRzL2NoYXQvbWVzc2FnZV91dGlscy50cyIsIm1hcHBpbmdzIjoiO0FBQUEsb0NBQW9DO0FBQ3BDLHFEQUFxRDtBQUVyRCxtQ0FBbUM7QUFFbkM7Ozs7O0NBS0MsR0FDRCxTQUFTQSxvQkFDUEMsT0FBb0IsRUFDcEJDLFNBQWlCLEVBQ2pCQyxVQUFvQjtJQUFDO0lBQUs7SUFBVTtJQUFNO0lBQVE7SUFBTztJQUFNO0lBQUs7SUFBTTtJQUFNO0lBQU07SUFBYztDQUFNO0lBRTFHLE1BQU1DLFFBQVFDLFVBQVVDLFFBQVEsQ0FBQ0osV0FBVztRQUMxQ0ssY0FBY0o7UUFDZEssY0FBYztZQUFDO1lBQVE7WUFBTztZQUFPO1lBQVM7U0FBUztJQUN6RDtJQUNBUCxRQUFRUSxTQUFTLEdBQUdMO0FBQ3RCO0FBRUE7Ozs7Q0FJQyxHQUNELFNBQVNNLHNCQUFzQlQsT0FBb0IsRUFBRVUsSUFBWTtJQUMvRFYsUUFBUVcsV0FBVyxHQUFHO0lBQ3RCRCxLQUFLRSxLQUFLLENBQUMsTUFBTUMsT0FBTyxDQUFDLENBQUNDLE1BQU1DLEtBQUtDO1FBQ25DaEIsUUFBUWlCLFdBQVcsQ0FBQ0MsU0FBU0MsY0FBYyxDQUFDTDtRQUM1QyxJQUFJQyxNQUFNQyxJQUFJSSxNQUFNLEdBQUcsR0FBR3BCLFFBQVFpQixXQUFXLENBQUNDLFNBQVNHLGFBQWEsQ0FBQztJQUN2RTtBQUNGO0FBRUEsc0JBQXNCO0FBQ3RCLFNBQVNDLG1CQUFtQnRCLE9BQW9CO0lBQzlDLElBQUksQ0FBQ3VCLE9BQU9DLFlBQVksRUFBRTtJQUMxQixNQUFNQyxTQUFTLENBQUMsTUFBTSwrREFBK0Q7SUFDckYsTUFBTUMsTUFBTUgsT0FBT0MsWUFBWSxDQUFDRyxZQUFZLEdBQUdKLE9BQU9DLFlBQVksQ0FBQ0ksWUFBWTtJQUMvRSxNQUFNQyxTQUFTQyxLQUFLQyxHQUFHLENBQUMvQixRQUFRZ0MsU0FBUyxFQUFFTixPQUFPRDtJQUNsREYsT0FBT0MsWUFBWSxDQUFDUyxTQUFTLEdBQUdILEtBQUtKLEdBQUcsQ0FBQ0csUUFBUTtBQUNuRDtBQUVBLFlBQVk7QUFDWixTQUFTSyxjQUFjQyxPQUFxQjtJQUMxQyxNQUFNQyxNQUFNbEIsU0FBU0csYUFBYSxDQUFDO0lBQ25DZSxJQUFJQyxTQUFTLEdBQUc7SUFDaEJELElBQUk1QixTQUFTLEdBQUc7SUFDaEI0QixJQUFJRSxnQkFBZ0IsQ0FBQyxTQUFTO1FBQzVCQyxVQUFVQyxTQUFTLENBQUNDLFNBQVMsQ0FBQ04sV0FBV08sSUFBSSxDQUFDO1lBQzVDTixJQUFJNUIsU0FBUyxHQUFHO1lBQ2hCbUMsV0FBVyxJQUFPUCxJQUFJNUIsU0FBUyxHQUFHLG1DQUFvQztRQUN4RTtJQUNGO0lBQ0EsT0FBTzRCO0FBQ1Q7QUFFQSxpREFBaUQ7QUFDakRiLE9BQU94QixtQkFBbUIsR0FBR0E7QUFDN0J3QixPQUFPZCxxQkFBcUIsR0FBR0E7QUFDL0JjLE9BQU9ELGtCQUFrQixHQUFHQTtBQUM1QkMsT0FBT1csYUFBYSxHQUFHQTtBQUViIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RyaWtlLWZyb250ZW5kLy4vc2NyaXB0cy9jaGF0L21lc3NhZ2VfdXRpbHMudHM/MzA1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBtZXNzYWdlX3V0aWxzLnRzIOKAkyDlhbHpgJrjg6Hjg4Pjgrvjg7zjgrjjg6bjg7zjg4bjgqPjg6rjg4bjgqNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIERPTVB1cmlmeSDjgarjganlpJbpg6jjg6njgqTjg5bjg6njg6rjga/lhYjjgavjg63jg7zjg4njgZXjgozjgabjgYTjgovmg7PlrppcblxuLyoqXG4gKiBIVE1MIOOCkuOCteODi+OCv+OCpOOCuuOBl+OBpuaMv+WFpeOBmeOCi1xuICogQHBhcmFtIGVsZW1lbnQgICDmjL/lhaXlhYhcbiAqIEBwYXJhbSBkaXJ0eUh0bWwg44K144OL44K/44Kk44K65YmNIEhUTUxcbiAqIEBwYXJhbSBhbGxvd2VkICAg6Kix5Y+v44K/44Kw77yI55yB55Wl5pmC44Gv44OH44OV44Kp44Or44OI77yJXG4gKi9cbmZ1bmN0aW9uIHJlbmRlclNhbml0aXplZEhUTUwoXG4gIGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICBkaXJ0eUh0bWw6IHN0cmluZyxcbiAgYWxsb3dlZDogc3RyaW5nW10gPSBbXCJhXCIsIFwic3Ryb25nXCIsIFwiZW1cIiwgXCJjb2RlXCIsIFwicHJlXCIsIFwiYnJcIiwgXCJwXCIsIFwidWxcIiwgXCJvbFwiLCBcImxpXCIsIFwiYmxvY2txdW90ZVwiLCBcImltZ1wiXVxuKSB7XG4gIGNvbnN0IGNsZWFuID0gRE9NUHVyaWZ5LnNhbml0aXplKGRpcnR5SHRtbCwge1xuICAgIEFMTE9XRURfVEFHUzogYWxsb3dlZCxcbiAgICBBTExPV0VEX0FUVFI6IFtcImhyZWZcIiwgXCJzcmNcIiwgXCJhbHRcIiwgXCJ0aXRsZVwiLCBcInRhcmdldFwiXVxuICB9KTtcbiAgZWxlbWVudC5pbm5lckhUTUwgPSBjbGVhbjtcbn1cblxuLyoqXG4gKiDjg4bjgq3jgrnjg4jjgpIgXFxu4oaSPGJyPiDjgavlpInmj5vjgZfjgaTjgaTlronlhajjgavmjL/lhaVcbiAqIEBwYXJhbSBlbGVtZW50XG4gKiBAcGFyYW0gdGV4dFxuICovXG5mdW5jdGlvbiBzZXRUZXh0V2l0aExpbmVCcmVha3MoZWxlbWVudDogSFRNTEVsZW1lbnQsIHRleHQ6IHN0cmluZykge1xuICBlbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgdGV4dC5zcGxpdChcIlxcblwiKS5mb3JFYWNoKChsaW5lLCBpZHgsIGFycikgPT4ge1xuICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobGluZSkpO1xuICAgIGlmIChpZHggPCBhcnIubGVuZ3RoIC0gMSkgZWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIikpO1xuICB9KTtcbn1cblxuLy8g5paw44GX44GE44Oh44OD44K744O844K444KS6KGo56S66aCY5Z+f44Gu5YWI6aCt44Gr6YWN572uXG5mdW5jdGlvbiBzY3JvbGxNZXNzYWdlVG9Ub3AoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgaWYgKCF3aW5kb3cuY2hhdE1lc3NhZ2VzKSByZXR1cm47XG4gIGNvbnN0IG9mZnNldCA9IC0xMDUwOyAvLyBweCwgaG93IGZhciBmcm9tIHRoZSBib3R0b20gdGhlIG5ld2VzdCBtZXNzYWdlIHNob3VsZCBhcHBlYXJcbiAgY29uc3QgbWF4ID0gd2luZG93LmNoYXRNZXNzYWdlcy5zY3JvbGxIZWlnaHQgLSB3aW5kb3cuY2hhdE1lc3NhZ2VzLmNsaWVudEhlaWdodDtcbiAgY29uc3QgdGFyZ2V0ID0gTWF0aC5taW4oZWxlbWVudC5vZmZzZXRUb3AsIG1heCkgLSBvZmZzZXQ7XG4gIHdpbmRvdy5jaGF0TWVzc2FnZXMuc2Nyb2xsVG9wID0gTWF0aC5tYXgodGFyZ2V0LCAwKTtcbn1cblxuLy8g5rGO55So44Kz44OU44O844Ki44Kk44Kz44OzXG5mdW5jdGlvbiBjcmVhdGVDb3B5QnRuKGdldFRleHQ6ICgpID0+IHN0cmluZykge1xuICBjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBidG4uY2xhc3NOYW1lID0gXCJjb3B5LWJ0blwiO1xuICBidG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiYmkgYmktY2xpcGJvYXJkXCI+PC9pPic7XG4gIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGdldFRleHQoKSkudGhlbigoKSA9PiB7XG4gICAgICBidG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiYmkgYmktY2hlY2stbGdcIj48L2k+JztcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gKGJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJiaSBiaS1jbGlwYm9hcmRcIj48L2k+JyksIDIwMDApO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGJ0bjtcbn1cblxuLy8gLS0tLSB3aW5kb3cg44G45YWs6ZaLIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxud2luZG93LnJlbmRlclNhbml0aXplZEhUTUwgPSByZW5kZXJTYW5pdGl6ZWRIVE1MO1xud2luZG93LnNldFRleHRXaXRoTGluZUJyZWFrcyA9IHNldFRleHRXaXRoTGluZUJyZWFrcztcbndpbmRvdy5zY3JvbGxNZXNzYWdlVG9Ub3AgPSBzY3JvbGxNZXNzYWdlVG9Ub3A7XG53aW5kb3cuY3JlYXRlQ29weUJ0biA9IGNyZWF0ZUNvcHlCdG47XG5cbmV4cG9ydCB7fTtcbiJdLCJuYW1lcyI6WyJyZW5kZXJTYW5pdGl6ZWRIVE1MIiwiZWxlbWVudCIsImRpcnR5SHRtbCIsImFsbG93ZWQiLCJjbGVhbiIsIkRPTVB1cmlmeSIsInNhbml0aXplIiwiQUxMT1dFRF9UQUdTIiwiQUxMT1dFRF9BVFRSIiwiaW5uZXJIVE1MIiwic2V0VGV4dFdpdGhMaW5lQnJlYWtzIiwidGV4dCIsInRleHRDb250ZW50Iiwic3BsaXQiLCJmb3JFYWNoIiwibGluZSIsImlkeCIsImFyciIsImFwcGVuZENoaWxkIiwiZG9jdW1lbnQiLCJjcmVhdGVUZXh0Tm9kZSIsImxlbmd0aCIsImNyZWF0ZUVsZW1lbnQiLCJzY3JvbGxNZXNzYWdlVG9Ub3AiLCJ3aW5kb3ciLCJjaGF0TWVzc2FnZXMiLCJvZmZzZXQiLCJtYXgiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJ0YXJnZXQiLCJNYXRoIiwibWluIiwib2Zmc2V0VG9wIiwic2Nyb2xsVG9wIiwiY3JlYXRlQ29weUJ0biIsImdldFRleHQiLCJidG4iLCJjbGFzc05hbWUiLCJhZGRFdmVudExpc3RlbmVyIiwibmF2aWdhdG9yIiwiY2xpcGJvYXJkIiwid3JpdGVUZXh0IiwidGhlbiIsInNldFRpbWVvdXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./scripts/chat/message_utils.ts\n");

/***/ }),

/***/ "./scripts/components/chat/popup_menu.ts":
/*!***********************************************!*\
  !*** ./scripts/components/chat/popup_menu.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// components/chat/popup_menu.ts (chat-specific)\nconst chatTemplate = document.createElement(\"template\");\nchatTemplate.innerHTML = `\n  <style>\n    :host {\n      display: contents;\n    }\n\n    * {\n      box-sizing: border-box;\n      margin: 0;\n      padding: 0;\n    }\n\n    input[type=\"checkbox\"] {\n      display: none;\n    }\n\n    .btn {\n      border: none;\n      border-radius: 50%;\n      width: 50px;\n      height: 50px;\n      cursor: pointer;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      transition: transform 0.3s ease, box-shadow 0.3s ease;\n      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);\n      position: relative;\n    }\n    .btn:hover {\n      transform: scale(1.1);\n      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);\n    }\n    .btn svg {\n      width: 24px;\n      height: 24px;\n      fill: #fff;\n      transition: transform 0.3s ease;\n    }\n\n    .actions-menu {\n      position: fixed;\n      bottom: 40px;\n      right: 40px;\n      width: 60px;\n      height: 60px;\n      animation: popIn 0.6s ease;\n      z-index: 9999;\n    }\n\n    @keyframes popIn {\n      0% {\n        transform: scale(0.5) rotate(0deg);\n        opacity: 0;\n      }\n      80% {\n        transform: scale(1.05) rotate(360deg);\n        opacity: 1;\n      }\n      100% {\n        transform: scale(1) rotate(360deg);\n        opacity: 1;\n      }\n    }\n\n    .btn--menu {\n      width: 60px;\n      height: 60px;\n      background: linear-gradient(135deg, #56ab2f, #a8e063);\n      z-index: 1;\n    }\n    .btn--menu:after,\n    .btn--menu:before,\n    .btn--menu span {\n      content: \"\";\n      position: absolute;\n      width: 25px;\n      height: 3px;\n      background: #fff;\n      transition: transform 0.2s ease;\n    }\n    .btn--menu span {\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n    .btn--menu:after {\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, calc(-50% - 8px));\n    }\n    .btn--menu:before {\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, calc(-50% + 8px));\n    }\n\n    .btn--share {\n      background: linear-gradient(135deg, #3498db, #2980b9);\n    }\n    .btn--star {\n      background: linear-gradient(135deg, #2ecc71, #27ae60);\n    }\n    .btn--comment {\n      background: linear-gradient(135deg, #f1c40f, #f39c12);\n    }\n\n    .actions-menu .btn {\n      position: absolute;\n      top: 8px;\n      left: 8px;\n      opacity: 0;\n      transform: scale(0) rotate(0deg);\n    }\n    .actions-menu .btn--menu {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 60px;\n      height: 60px;\n      opacity: 1;\n      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);\n      transform: none;\n    }\n\n    #chatActionMenuButton:checked + .actions-menu > .btn {\n      opacity: 1;\n      transform: scale(1) rotate(360deg);\n      transition: all 0.6s cubic-bezier(0.645, 0.045, 0.355, 1);\n    }\n\n    #chatActionMenuButton:checked + .actions-menu > .btn--share {\n      top: -80px;\n      left: 0px;\n    }\n    #chatActionMenuButton:checked + .actions-menu > .btn--star {\n      top: -60px;\n      left: -60px;\n    }\n    #chatActionMenuButton:checked + .actions-menu > .btn--comment {\n      top: 0px;\n      left: -80px;\n    }\n\n    #chatActionMenuButton:checked + .actions-menu .btn--menu:after {\n      transform: translate(-50%, -50%) rotate(45deg);\n    }\n    #chatActionMenuButton:checked + .actions-menu .btn--menu:before {\n      transform: translate(-50%, -50%) rotate(-45deg);\n    }\n    #chatActionMenuButton:checked + .actions-menu .btn--menu span {\n      transform: translate(-50%, -50%) scale(0);\n    }\n\n    .btn--share:hover svg { transform: rotate(-20deg) scale(1.2); }\n    .btn--star:hover svg  { transform: rotate(20deg)  scale(1.2); }\n    .btn--comment:hover svg { transform: rotate(-20deg) scale(1.2); }\n\n    @media (max-width: 768px) {\n      .actions-menu {\n        bottom: 100px;\n        right: 20px;\n        width: 56px;\n        height: 56px;\n      }\n      .actions-menu .btn--menu {\n        width: 56px !important;\n        height: 56px !important;\n      }\n      .actions-menu .btn:not(.btn--menu) {\n        width: 45px;\n        height: 45px;\n      }\n      .btn svg {\n        width: 20px;\n        height: 20px;\n      }\n    }\n\n    @media (max-width: 480px) {\n      .actions-menu {\n        bottom: 90px;\n        right: 15px;\n        width: 50px;\n        height: 50px;\n      }\n      .actions-menu .btn--menu {\n        width: 50px !important;\n        height: 50px !important;\n      }\n      .actions-menu .btn:not(.btn--menu) {\n        width: 40px;\n        height: 40px;\n      }\n      .btn svg {\n        width: 18px;\n        height: 18px;\n      }\n    }\n  </style>\n\n  <input type=\"checkbox\" id=\"chatActionMenuButton\" />\n  <div class=\"actions-menu\">\n    <button class=\"btn btn--share\" onclick=\"location.href='/prompt_share'\" title=\"シェア\">\n      <svg viewBox=\"0 0 24 24\">\n        <path d=\"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7a3.048 3.048 0 0 0 0-1.39l7.13-4.17A3 3 0 1 0 14 5a3 3 0 0 0 .05.52l-7.14 4.18a3 3 0 1 0 0 4.6l7.14 4.18c-.03.17-.05.34-.05.52a3 3 0 1 0 3-2.92Z\" />\n      </svg>\n    </button>\n    <button class=\"btn btn--star\" onclick=\"location.href='/'\" title=\"スター\">\n      <svg viewBox=\"0 0 24 24\">\n        <path d=\"M12,17.27L18.18,21L16.54,13.97 L22,9.24L14.81,8.62L12,2 L9.19,8.62L2,9.24L7.45,13.97 L5.82,21L12,17.27Z\" />\n      </svg>\n    </button>\n    <button class=\"btn btn--comment\" onclick=\"location.href='/memo'\" title=\"メモ\">\n      <svg viewBox=\"0 0 24 24\">\n        <path d=\"M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9l7-7V5a2 2 0 0 0-2-2Zm-5 14v-5h5l-5 5Z\" />\n      </svg>\n    </button>\n    <label for=\"chatActionMenuButton\" class=\"btn btn--menu\"><span></span></label>\n  </div>\n`;\nclass ChatActionMenu extends HTMLElement {\n    constructor(){\n        super();\n        const shadow = this.attachShadow({\n            mode: \"open\"\n        });\n        shadow.appendChild(chatTemplate.content.cloneNode(true));\n        this.toggle = shadow.querySelector(\"#chatActionMenuButton\");\n        document.addEventListener(\"click\", (event)=>{\n            if (this.toggle?.checked && !event.composedPath().includes(this)) {\n                this.toggle.checked = false;\n            }\n        });\n    }\n}\nif (!customElements.get(\"chat-action-menu\")) {\n    customElements.define(\"chat-action-menu\", ChatActionMenu);\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHRzL2NvbXBvbmVudHMvY2hhdC9wb3B1cF9tZW51LnRzIiwibWFwcGluZ3MiOiI7QUFBQSxnREFBZ0Q7QUFDaEQsTUFBTUEsZUFBZUMsU0FBU0MsYUFBYSxDQUFDO0FBQzVDRixhQUFhRyxTQUFTLEdBQUcsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTROMUIsQ0FBQztBQUVELE1BQU1DLHVCQUF1QkM7SUFHM0JDLGFBQWM7UUFDWixLQUFLO1FBQ0wsTUFBTUMsU0FBUyxJQUFJLENBQUNDLFlBQVksQ0FBQztZQUFFQyxNQUFNO1FBQU87UUFDaERGLE9BQU9HLFdBQVcsQ0FBQ1YsYUFBYVcsT0FBTyxDQUFDQyxTQUFTLENBQUM7UUFFbEQsSUFBSSxDQUFDQyxNQUFNLEdBQUdOLE9BQU9PLGFBQWEsQ0FBQztRQUNuQ2IsU0FBU2MsZ0JBQWdCLENBQUMsU0FBUyxDQUFDQztZQUNsQyxJQUFJLElBQUksQ0FBQ0gsTUFBTSxFQUFFSSxXQUFXLENBQUNELE1BQU1FLFlBQVksR0FBR0MsUUFBUSxDQUFDLElBQUksR0FBRztnQkFDaEUsSUFBSSxDQUFDTixNQUFNLENBQUNJLE9BQU8sR0FBRztZQUN4QjtRQUNGO0lBQ0Y7QUFDRjtBQUVBLElBQUksQ0FBQ0csZUFBZUMsR0FBRyxDQUFDLHFCQUFxQjtJQUMzQ0QsZUFBZUUsTUFBTSxDQUFDLG9CQUFvQmxCO0FBQzVDO0FBRVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHJpa2UtZnJvbnRlbmQvLi9zY3JpcHRzL2NvbXBvbmVudHMvY2hhdC9wb3B1cF9tZW51LnRzPzU5OTQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY29tcG9uZW50cy9jaGF0L3BvcHVwX21lbnUudHMgKGNoYXQtc3BlY2lmaWMpXG5jb25zdCBjaGF0VGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG5jaGF0VGVtcGxhdGUuaW5uZXJIVE1MID0gYFxuICA8c3R5bGU+XG4gICAgOmhvc3Qge1xuICAgICAgZGlzcGxheTogY29udGVudHM7XG4gICAgfVxuXG4gICAgKiB7XG4gICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgbWFyZ2luOiAwO1xuICAgICAgcGFkZGluZzogMDtcbiAgICB9XG5cbiAgICBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0ge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG5cbiAgICAuYnRuIHtcbiAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgIHdpZHRoOiA1MHB4O1xuICAgICAgaGVpZ2h0OiA1MHB4O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGVhc2UsIGJveC1zaGFkb3cgMC4zcyBlYXNlO1xuICAgICAgYm94LXNoYWRvdzogMCA1cHggMjBweCByZ2JhKDAsIDAsIDAsIDAuMTUpO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cbiAgICAuYnRuOmhvdmVyIHtcbiAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTtcbiAgICAgIGJveC1zaGFkb3c6IDAgOHB4IDMwcHggcmdiYSgwLCAwLCAwLCAwLjMpO1xuICAgIH1cbiAgICAuYnRuIHN2ZyB7XG4gICAgICB3aWR0aDogMjRweDtcbiAgICAgIGhlaWdodDogMjRweDtcbiAgICAgIGZpbGw6ICNmZmY7XG4gICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcyBlYXNlO1xuICAgIH1cblxuICAgIC5hY3Rpb25zLW1lbnUge1xuICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgYm90dG9tOiA0MHB4O1xuICAgICAgcmlnaHQ6IDQwcHg7XG4gICAgICB3aWR0aDogNjBweDtcbiAgICAgIGhlaWdodDogNjBweDtcbiAgICAgIGFuaW1hdGlvbjogcG9wSW4gMC42cyBlYXNlO1xuICAgICAgei1pbmRleDogOTk5OTtcbiAgICB9XG5cbiAgICBAa2V5ZnJhbWVzIHBvcEluIHtcbiAgICAgIDAlIHtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwLjUpIHJvdGF0ZSgwZGVnKTtcbiAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgIH1cbiAgICAgIDgwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wNSkgcm90YXRlKDM2MGRlZyk7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICB9XG4gICAgICAxMDAlIHtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKSByb3RhdGUoMzYwZGVnKTtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAuYnRuLS1tZW51IHtcbiAgICAgIHdpZHRoOiA2MHB4O1xuICAgICAgaGVpZ2h0OiA2MHB4O1xuICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzU2YWIyZiwgI2E4ZTA2Myk7XG4gICAgICB6LWluZGV4OiAxO1xuICAgIH1cbiAgICAuYnRuLS1tZW51OmFmdGVyLFxuICAgIC5idG4tLW1lbnU6YmVmb3JlLFxuICAgIC5idG4tLW1lbnUgc3BhbiB7XG4gICAgICBjb250ZW50OiBcIlwiO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgd2lkdGg6IDI1cHg7XG4gICAgICBoZWlnaHQ6IDNweDtcbiAgICAgIGJhY2tncm91bmQ6ICNmZmY7XG4gICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4ycyBlYXNlO1xuICAgIH1cbiAgICAuYnRuLS1tZW51IHNwYW4ge1xuICAgICAgdG9wOiA1MCU7XG4gICAgICBsZWZ0OiA1MCU7XG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICB9XG4gICAgLmJ0bi0tbWVudTphZnRlciB7XG4gICAgICB0b3A6IDUwJTtcbiAgICAgIGxlZnQ6IDUwJTtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIGNhbGMoLTUwJSAtIDhweCkpO1xuICAgIH1cbiAgICAuYnRuLS1tZW51OmJlZm9yZSB7XG4gICAgICB0b3A6IDUwJTtcbiAgICAgIGxlZnQ6IDUwJTtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIGNhbGMoLTUwJSArIDhweCkpO1xuICAgIH1cblxuICAgIC5idG4tLXNoYXJlIHtcbiAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMzNDk4ZGIsICMyOTgwYjkpO1xuICAgIH1cbiAgICAuYnRuLS1zdGFyIHtcbiAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMyZWNjNzEsICMyN2FlNjApO1xuICAgIH1cbiAgICAuYnRuLS1jb21tZW50IHtcbiAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmMWM0MGYsICNmMzljMTIpO1xuICAgIH1cblxuICAgIC5hY3Rpb25zLW1lbnUgLmJ0biB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDhweDtcbiAgICAgIGxlZnQ6IDhweDtcbiAgICAgIG9wYWNpdHk6IDA7XG4gICAgICB0cmFuc2Zvcm06IHNjYWxlKDApIHJvdGF0ZSgwZGVnKTtcbiAgICB9XG4gICAgLmFjdGlvbnMtbWVudSAuYnRuLS1tZW51IHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogMDtcbiAgICAgIGxlZnQ6IDA7XG4gICAgICB3aWR0aDogNjBweDtcbiAgICAgIGhlaWdodDogNjBweDtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgICBib3gtc2hhZG93OiAwIDVweCAyMHB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgICAgIHRyYW5zZm9ybTogbm9uZTtcbiAgICB9XG5cbiAgICAjY2hhdEFjdGlvbk1lbnVCdXR0b246Y2hlY2tlZCArIC5hY3Rpb25zLW1lbnUgPiAuYnRuIHtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpIHJvdGF0ZSgzNjBkZWcpO1xuICAgICAgdHJhbnNpdGlvbjogYWxsIDAuNnMgY3ViaWMtYmV6aWVyKDAuNjQ1LCAwLjA0NSwgMC4zNTUsIDEpO1xuICAgIH1cblxuICAgICNjaGF0QWN0aW9uTWVudUJ1dHRvbjpjaGVja2VkICsgLmFjdGlvbnMtbWVudSA+IC5idG4tLXNoYXJlIHtcbiAgICAgIHRvcDogLTgwcHg7XG4gICAgICBsZWZ0OiAwcHg7XG4gICAgfVxuICAgICNjaGF0QWN0aW9uTWVudUJ1dHRvbjpjaGVja2VkICsgLmFjdGlvbnMtbWVudSA+IC5idG4tLXN0YXIge1xuICAgICAgdG9wOiAtNjBweDtcbiAgICAgIGxlZnQ6IC02MHB4O1xuICAgIH1cbiAgICAjY2hhdEFjdGlvbk1lbnVCdXR0b246Y2hlY2tlZCArIC5hY3Rpb25zLW1lbnUgPiAuYnRuLS1jb21tZW50IHtcbiAgICAgIHRvcDogMHB4O1xuICAgICAgbGVmdDogLTgwcHg7XG4gICAgfVxuXG4gICAgI2NoYXRBY3Rpb25NZW51QnV0dG9uOmNoZWNrZWQgKyAuYWN0aW9ucy1tZW51IC5idG4tLW1lbnU6YWZ0ZXIge1xuICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgcm90YXRlKDQ1ZGVnKTtcbiAgICB9XG4gICAgI2NoYXRBY3Rpb25NZW51QnV0dG9uOmNoZWNrZWQgKyAuYWN0aW9ucy1tZW51IC5idG4tLW1lbnU6YmVmb3JlIHtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpIHJvdGF0ZSgtNDVkZWcpO1xuICAgIH1cbiAgICAjY2hhdEFjdGlvbk1lbnVCdXR0b246Y2hlY2tlZCArIC5hY3Rpb25zLW1lbnUgLmJ0bi0tbWVudSBzcGFuIHtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpIHNjYWxlKDApO1xuICAgIH1cblxuICAgIC5idG4tLXNoYXJlOmhvdmVyIHN2ZyB7IHRyYW5zZm9ybTogcm90YXRlKC0yMGRlZykgc2NhbGUoMS4yKTsgfVxuICAgIC5idG4tLXN0YXI6aG92ZXIgc3ZnICB7IHRyYW5zZm9ybTogcm90YXRlKDIwZGVnKSAgc2NhbGUoMS4yKTsgfVxuICAgIC5idG4tLWNvbW1lbnQ6aG92ZXIgc3ZnIHsgdHJhbnNmb3JtOiByb3RhdGUoLTIwZGVnKSBzY2FsZSgxLjIpOyB9XG5cbiAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgICAgIC5hY3Rpb25zLW1lbnUge1xuICAgICAgICBib3R0b206IDEwMHB4O1xuICAgICAgICByaWdodDogMjBweDtcbiAgICAgICAgd2lkdGg6IDU2cHg7XG4gICAgICAgIGhlaWdodDogNTZweDtcbiAgICAgIH1cbiAgICAgIC5hY3Rpb25zLW1lbnUgLmJ0bi0tbWVudSB7XG4gICAgICAgIHdpZHRoOiA1NnB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIGhlaWdodDogNTZweCAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgICAgLmFjdGlvbnMtbWVudSAuYnRuOm5vdCguYnRuLS1tZW51KSB7XG4gICAgICAgIHdpZHRoOiA0NXB4O1xuICAgICAgICBoZWlnaHQ6IDQ1cHg7XG4gICAgICB9XG4gICAgICAuYnRuIHN2ZyB7XG4gICAgICAgIHdpZHRoOiAyMHB4O1xuICAgICAgICBoZWlnaHQ6IDIwcHg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDQ4MHB4KSB7XG4gICAgICAuYWN0aW9ucy1tZW51IHtcbiAgICAgICAgYm90dG9tOiA5MHB4O1xuICAgICAgICByaWdodDogMTVweDtcbiAgICAgICAgd2lkdGg6IDUwcHg7XG4gICAgICAgIGhlaWdodDogNTBweDtcbiAgICAgIH1cbiAgICAgIC5hY3Rpb25zLW1lbnUgLmJ0bi0tbWVudSB7XG4gICAgICAgIHdpZHRoOiA1MHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIGhlaWdodDogNTBweCAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgICAgLmFjdGlvbnMtbWVudSAuYnRuOm5vdCguYnRuLS1tZW51KSB7XG4gICAgICAgIHdpZHRoOiA0MHB4O1xuICAgICAgICBoZWlnaHQ6IDQwcHg7XG4gICAgICB9XG4gICAgICAuYnRuIHN2ZyB7XG4gICAgICAgIHdpZHRoOiAxOHB4O1xuICAgICAgICBoZWlnaHQ6IDE4cHg7XG4gICAgICB9XG4gICAgfVxuICA8L3N0eWxlPlxuXG4gIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImNoYXRBY3Rpb25NZW51QnV0dG9uXCIgLz5cbiAgPGRpdiBjbGFzcz1cImFjdGlvbnMtbWVudVwiPlxuICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLS1zaGFyZVwiIG9uY2xpY2s9XCJsb2NhdGlvbi5ocmVmPScvcHJvbXB0X3NoYXJlJ1wiIHRpdGxlPVwi44K344Kn44KiXCI+XG4gICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgPHBhdGggZD1cIk0xOCAxNi4wOGMtLjc2IDAtMS40NC4zLTEuOTYuNzdMOC45MSAxMi43YTMuMDQ4IDMuMDQ4IDAgMCAwIDAtMS4zOWw3LjEzLTQuMTdBMyAzIDAgMSAwIDE0IDVhMyAzIDAgMCAwIC4wNS41MmwtNy4xNCA0LjE4YTMgMyAwIDEgMCAwIDQuNmw3LjE0IDQuMThjLS4wMy4xNy0uMDUuMzQtLjA1LjUyYTMgMyAwIDEgMCAzLTIuOTJaXCIgLz5cbiAgICAgIDwvc3ZnPlxuICAgIDwvYnV0dG9uPlxuICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLS1zdGFyXCIgb25jbGljaz1cImxvY2F0aW9uLmhyZWY9Jy8nXCIgdGl0bGU9XCLjgrnjgr/jg7xcIj5cbiAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICA8cGF0aCBkPVwiTTEyLDE3LjI3TDE4LjE4LDIxTDE2LjU0LDEzLjk3IEwyMiw5LjI0TDE0LjgxLDguNjJMMTIsMiBMOS4xOSw4LjYyTDIsOS4yNEw3LjQ1LDEzLjk3IEw1LjgyLDIxTDEyLDE3LjI3WlwiIC8+XG4gICAgICA8L3N2Zz5cbiAgICA8L2J1dHRvbj5cbiAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi0tY29tbWVudFwiIG9uY2xpY2s9XCJsb2NhdGlvbi5ocmVmPScvbWVtbydcIiB0aXRsZT1cIuODoeODolwiPlxuICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgIDxwYXRoIGQ9XCJNMTkgM0g1YTIgMiAwIDAgMC0yIDJ2MTRhMiAyIDAgMCAwIDIgMmg5bDctN1Y1YTIgMiAwIDAgMC0yLTJabS01IDE0di01aDVsLTUgNVpcIiAvPlxuICAgICAgPC9zdmc+XG4gICAgPC9idXR0b24+XG4gICAgPGxhYmVsIGZvcj1cImNoYXRBY3Rpb25NZW51QnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLS1tZW51XCI+PHNwYW4+PC9zcGFuPjwvbGFiZWw+XG4gIDwvZGl2PlxuYDtcblxuY2xhc3MgQ2hhdEFjdGlvbk1lbnUgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIHByaXZhdGUgdG9nZ2xlOiBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIGNvbnN0IHNoYWRvdyA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XG4gICAgc2hhZG93LmFwcGVuZENoaWxkKGNoYXRUZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XG5cbiAgICB0aGlzLnRvZ2dsZSA9IHNoYWRvdy5xdWVyeVNlbGVjdG9yKFwiI2NoYXRBY3Rpb25NZW51QnV0dG9uXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLnRvZ2dsZT8uY2hlY2tlZCAmJiAhZXZlbnQuY29tcG9zZWRQYXRoKCkuaW5jbHVkZXModGhpcykpIHtcbiAgICAgICAgdGhpcy50b2dnbGUuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmlmICghY3VzdG9tRWxlbWVudHMuZ2V0KFwiY2hhdC1hY3Rpb24tbWVudVwiKSkge1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJjaGF0LWFjdGlvbi1tZW51XCIsIENoYXRBY3Rpb25NZW51KTtcbn1cblxuZXhwb3J0IHt9O1xuIl0sIm5hbWVzIjpbImNoYXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsIkNoYXRBY3Rpb25NZW51IiwiSFRNTEVsZW1lbnQiLCJjb25zdHJ1Y3RvciIsInNoYWRvdyIsImF0dGFjaFNoYWRvdyIsIm1vZGUiLCJhcHBlbmRDaGlsZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0b2dnbGUiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiY2hlY2tlZCIsImNvbXBvc2VkUGF0aCIsImluY2x1ZGVzIiwiY3VzdG9tRWxlbWVudHMiLCJnZXQiLCJkZWZpbmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./scripts/components/chat/popup_menu.ts\n");

/***/ }),

/***/ "./scripts/components/popup_menu.ts":
/*!******************************************!*\
  !*** ./scripts/components/popup_menu.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// components/popup_menu.ts\nconst template = document.createElement(\"template\");\ntemplate.innerHTML = `\n  <style>\n    /* ============\n       Reset / Base\n       ============ */\n    * {\n      box-sizing: border-box;\n      margin: 0;\n      padding: 0;\n    }\n\n    /* ============\n       Hidden Checkbox\n       ============ */\n    input[type=\"checkbox\"] {\n      display: none;\n    }\n\n    /* ============\n       Common Button Styles\n       ============ */\n    .btn {\n      border: none;\n      border-radius: 50%;\n      width: 50px;\n      height: 50px;\n      cursor: pointer;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      transition: transform 0.3s ease, box-shadow 0.3s ease;\n      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);\n      position: relative;\n    }\n    .btn:hover {\n      transform: scale(1.1);\n      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);\n    }\n    .btn svg {\n      width: 24px;\n      height: 24px;\n      fill: #fff;\n      transition: transform 0.3s ease;\n    }\n\n    /* ============\n       Action Menu Wrapper\n       ============ */\n    .actions-menu {\n      position: fixed;\n      bottom: 40px;\n      right: 40px;\n      width: 60px;\n      height: 60px;\n      animation: popIn 0.6s ease;\n      z-index: 9999;\n    }\n\n    :host([data-context=\"chat\"]) .actions-menu {\n      display: none;\n    }\n\n    :host([data-context=\"non-chat\"]) .actions-menu {\n      bottom: 40px; /* Align with floating prompt button on desktop */\n    }\n\n    @keyframes popIn {\n      0% {\n        transform: scale(0.5) rotate(0deg);\n        opacity: 0;\n      }\n      80% {\n        transform: scale(1.05) rotate(360deg);\n        opacity: 1;\n      }\n      100% {\n        transform: scale(1) rotate(360deg);\n        opacity: 1;\n      }\n    }\n\n    /* ============\n       Menu Button (Large)\n       ============ */\n    .btn--menu {\n      width: 60px;\n      height: 60px;\n      background: linear-gradient(135deg, #56ab2f, #a8e063);\n      z-index: 1;\n    }\n    .btn--menu:after,\n    .btn--menu:before,\n    .btn--menu span {\n      content: \"\";\n      position: absolute;\n      width: 25px;\n      height: 3px;\n      background: #fff;\n      transition: transform 0.2s ease;\n    }\n    .btn--menu span {\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n    .btn--menu:after {\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, calc(-50% - 8px));\n    }\n    .btn--menu:before {\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, calc(-50% + 8px));\n    }\n\n    /* ============\n       Action Buttons\n       ============ */\n    .btn--share {\n      background: linear-gradient(135deg, #3498db, #2980b9);\n    }\n    .btn--star {\n      background: linear-gradient(135deg, #2ecc71, #27ae60);\n    }\n    .btn--comment {\n      background: linear-gradient(135deg, #f1c40f, #f39c12);\n    }\n\n    /* ============\n       ボタンの配置\n       ============ */\n    .actions-menu .btn {\n      position: absolute;\n      top: 8px;\n      left: 8px;\n      opacity: 0;\n      transform: scale(0) rotate(0deg);\n    }\n    .actions-menu .btn--menu {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 60px;\n      height: 60px;\n      opacity: 1;\n      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);\n      transform: none;\n    }\n\n    /* ============\n       チェックが入ったら各アイコンが展開\n       ============ */\n    #actionMenuButton:checked + .actions-menu > .btn {\n      opacity: 1;\n      transform: scale(1) rotate(360deg);\n      transition: all 0.6s cubic-bezier(0.645, 0.045, 0.355, 1);\n    }\n\n    /* 展開位置 */\n    #actionMenuButton:checked + .actions-menu > .btn--share {\n      top: -80px;\n      left: 0px;\n    }\n    #actionMenuButton:checked + .actions-menu > .btn--star {\n      top: -60px;\n      left: -60px;\n    }\n    #actionMenuButton:checked + .actions-menu > .btn--comment {\n      top: 0px;\n      left: -80px;\n    }\n\n    /* ============\n       ハンバーガー変形\n       ============ */\n    #actionMenuButton:checked + .actions-menu .btn--menu:after {\n      transform: translate(-50%, -50%) rotate(45deg);\n    }\n    #actionMenuButton:checked + .actions-menu .btn--menu:before {\n      transform: translate(-50%, -50%) rotate(-45deg);\n    }\n    #actionMenuButton:checked + .actions-menu .btn--menu span {\n      transform: translate(-50%, -50%) scale(0);\n    }\n\n    /* ============\n       ホバーアニメーション\n       ============ */\n    .btn--share:hover svg { transform: rotate(-20deg) scale(1.2); }\n    .btn--star:hover svg  { transform: rotate(20deg)  scale(1.2); }\n    .btn--comment:hover svg { transform: rotate(-20deg) scale(1.2); }\n  \n  \n  /* スマホ表示時の調整（画面幅768px以下） - プロンプト投稿ボタンと同じサイズに */\n    @media (max-width: 768px) {\n      /* メニュー全体の位置とサイズ */\n      .actions-menu {\n        right: 20px;    /* プロンプト投稿ボタンの位置に合わせて調整 */\n        width: 56px;    /* プロンプト投稿ボタンと同じサイズに */\n        height: 56px;   /* プロンプト投稿ボタンと同じサイズに */\n      }\n\n      :host([data-context=\"chat\"]) .actions-menu {\n        bottom: 100px;  /* チャット入力フォームから十分離して配置 */\n      }\n\n      :host([data-context=\"non-chat\"]) .actions-menu {\n        bottom: 20px;   /* プロンプト投稿ボタンと同じ高さに配置 */\n      }\n      /* ハンバーガーボタンをプロンプト投稿ボタンと完全に同じサイズに */\n      .actions-menu .btn--menu {\n        width: 56px !important;\n        height: 56px !important;\n      }\n      /* 他のボタンのサイズ */\n      .actions-menu .btn:not(.btn--menu) {\n        width: 45px;\n        height: 45px;\n      }\n      /* アイコンサイズ調整 */\n      .btn svg {\n        width: 20px;\n        height: 20px;\n      }\n      \n    }\n\n    /* 非常に小さな画面での調整（画面幅480px以下） - プロンプト投稿ボタンと完全に同じサイズに */\n    @media (max-width: 480px) {\n      /* メニュー全体のサイズをプロンプト投稿ボタンに完全に合わせて調整 */\n      .actions-menu {\n        bottom: 90px;   /* 入力フォームから十分離して配置 */\n        right: 15px;    /* プロンプト投稿ボタンの位置に合わせて調整 */\n        width: 50px;    /* プロンプト投稿ボタンと同じサイズに */\n        height: 50px;   /* プロンプト投稿ボタンと同じサイズに */\n      }\n      /* ハンバーガーボタンをプロンプト投稿ボタンと完全に同じサイズに */\n      .actions-menu .btn--menu {\n        width: 50px !important;\n        height: 50px !important;\n      }\n      /* 他のボタンのサイズをより小さく */\n      .actions-menu .btn:not(.btn--menu) {\n        width: 40px;\n        height: 40px;\n      }\n      /* アイコンもさらに縮小 */\n      .btn svg {\n        width: 18px;\n        height: 18px;\n      }\n\n      :host([data-context=\"chat\"]) .actions-menu {\n        bottom: 90px;   /* チャット入力フォームから十分離して配置 */\n      }\n\n      :host([data-context=\"non-chat\"]) .actions-menu {\n        bottom: 15px;   /* プロンプト投稿ボタンと同じ高さに配置 */\n      }\n\n    }\n\n    </style>\n\n  <!-- チェックボックス（メニュー開閉用） -->\n  <input type=\"checkbox\" id=\"actionMenuButton\" />\n\n  <!-- アクションメニュー本体 -->\n  <div class=\"actions-menu\">\n    <button class=\"btn btn--share\" onclick=\"location.href='/prompt_share'\" title=\"シェア\">\n      <svg viewBox=\"0 0 24 24\">\n        <path d=\"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7a3.048 3.048 0 0 0 0-1.39l7.13-4.17A3 3 0 1 0 14 5a3 3 0 0 0 .05.52l-7.14 4.18a3 3 0 1 0 0 4.6l7.14 4.18c-.03.17-.05.34-.05.52a3 3 0 1 0 3-2.92Z\" />\n      </svg>\n    </button>\n    <button class=\"btn btn--star\" onclick=\"location.href='/'\" title=\"スター\">\n      <svg viewBox=\"0 0 24 24\">\n        <path d=\"M12,17.27L18.18,21L16.54,13.97 L22,9.24L14.81,8.62L12,2 L9.19,8.62L2,9.24L7.45,13.97 L5.82,21L12,17.27Z\" />\n      </svg>\n    </button>\n    <button class=\"btn btn--comment\" onclick=\"location.href='/memo'\" title=\"メモ\">\n      <svg viewBox=\"0 0 24 24\">\n        <path d=\"M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9l7-7V5a2 2 0 0 0-2-2Zm-5 14v-5h5l-5 5Z\" />\n      </svg>\n    </button>\n    <label for=\"actionMenuButton\" class=\"btn btn--menu\"><span></span></label>\n  </div>\n`;\nclass ActionMenu extends HTMLElement {\n    constructor(){\n        super();\n        const shadow = this.attachShadow({\n            mode: \"open\"\n        });\n        shadow.appendChild(template.content.cloneNode(true));\n        this.toggle = shadow.querySelector(\"#actionMenuButton\");\n        //  メニュー外クリックで自動クローズ\n        if (this.toggle) {\n            document.addEventListener(\"click\", (e)=>{\n                // メニューが開いていて，クリック先がこのコンポーネント外なら閉じる\n                if (this.toggle?.checked && !e.composedPath().includes(this)) {\n                    this.toggle.checked = false;\n                }\n            });\n        }\n        // チャット画面かどうかを検出して適切なサイズを適用\n        this.updateMenuSize();\n        // 画面の変化を監視\n        this.observeScreenChanges();\n    }\n    updateMenuSize() {\n        const chatContainer = document.getElementById(\"chat-container\");\n        const isInChatMode = Boolean(chatContainer && chatContainer.style.display === \"flex\");\n        // CSSカスタムプロパティでコンテキストを設定\n        if (isInChatMode) {\n            this.setAttribute(\"data-context\", \"chat\");\n        } else {\n            this.setAttribute(\"data-context\", \"non-chat\");\n        }\n    }\n    observeScreenChanges() {\n        const chatContainer = document.getElementById(\"chat-container\");\n        if (chatContainer) {\n            // MutationObserverでchat-containerのstyle変化を監視\n            const observer = new MutationObserver(()=>{\n                this.updateMenuSize();\n            });\n            observer.observe(chatContainer, {\n                attributes: true,\n                attributeFilter: [\n                    \"style\"\n                ]\n            });\n        }\n        // 定期的にもチェック（念のため）\n        setInterval(()=>{\n            this.updateMenuSize();\n        }, 1000);\n    }\n}\nif (!customElements.get(\"action-menu\")) {\n    customElements.define(\"action-menu\", ActionMenu);\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHRzL2NvbXBvbmVudHMvcG9wdXBfbWVudS50cyIsIm1hcHBpbmdzIjoiO0FBQUEsMkJBQTJCO0FBQzNCLE1BQU1BLFdBQVdDLFNBQVNDLGFBQWEsQ0FBQztBQUN4Q0YsU0FBU0csU0FBUyxHQUFHLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBK1J0QixDQUFDO0FBRUQsTUFBTUMsbUJBQW1CQztJQUd2QkMsYUFBYztRQUNaLEtBQUs7UUFDTCxNQUFNQyxTQUFTLElBQUksQ0FBQ0MsWUFBWSxDQUFDO1lBQUVDLE1BQU07UUFBTztRQUNoREYsT0FBT0csV0FBVyxDQUFDVixTQUFTVyxPQUFPLENBQUNDLFNBQVMsQ0FBQztRQUU5QyxJQUFJLENBQUNDLE1BQU0sR0FBR04sT0FBT08sYUFBYSxDQUFDO1FBRW5DLG9CQUFvQjtRQUNwQixJQUFJLElBQUksQ0FBQ0QsTUFBTSxFQUFFO1lBQ2ZaLFNBQVNjLGdCQUFnQixDQUFDLFNBQVMsQ0FBQ0M7Z0JBQ2xDLG1DQUFtQztnQkFDbkMsSUFBSSxJQUFJLENBQUNILE1BQU0sRUFBRUksV0FBVyxDQUFDRCxFQUFFRSxZQUFZLEdBQUdDLFFBQVEsQ0FBQyxJQUFJLEdBQUc7b0JBQzVELElBQUksQ0FBQ04sTUFBTSxDQUFDSSxPQUFPLEdBQUc7Z0JBQ3hCO1lBQ0Y7UUFDRjtRQUVBLDJCQUEyQjtRQUMzQixJQUFJLENBQUNHLGNBQWM7UUFDbkIsV0FBVztRQUNYLElBQUksQ0FBQ0Msb0JBQW9CO0lBQzNCO0lBRUFELGlCQUFpQjtRQUNmLE1BQU1FLGdCQUFnQnJCLFNBQVNzQixjQUFjLENBQUM7UUFDOUMsTUFBTUMsZUFBZUMsUUFBUUgsaUJBQWlCLGNBQStCSSxLQUFLLENBQUNDLE9BQU8sS0FBSztRQUUvRix5QkFBeUI7UUFDekIsSUFBSUgsY0FBYztZQUNoQixJQUFJLENBQUNJLFlBQVksQ0FBQyxnQkFBZ0I7UUFDcEMsT0FBTztZQUNMLElBQUksQ0FBQ0EsWUFBWSxDQUFDLGdCQUFnQjtRQUNwQztJQUNGO0lBRUFQLHVCQUF1QjtRQUNyQixNQUFNQyxnQkFBZ0JyQixTQUFTc0IsY0FBYyxDQUFDO1FBQzlDLElBQUlELGVBQWU7WUFDakIsNkNBQTZDO1lBQzdDLE1BQU1PLFdBQVcsSUFBSUMsaUJBQWlCO2dCQUNwQyxJQUFJLENBQUNWLGNBQWM7WUFDckI7WUFDQVMsU0FBU0UsT0FBTyxDQUFDVCxlQUFlO2dCQUM5QlUsWUFBWTtnQkFDWkMsaUJBQWlCO29CQUFDO2lCQUFRO1lBQzVCO1FBQ0Y7UUFFQSxrQkFBa0I7UUFDbEJDLFlBQVk7WUFDVixJQUFJLENBQUNkLGNBQWM7UUFDckIsR0FBRztJQUNMO0FBQ0Y7QUFFQSxJQUFJLENBQUNlLGVBQWVDLEdBQUcsQ0FBQyxnQkFBZ0I7SUFDdENELGVBQWVFLE1BQU0sQ0FBQyxlQUFlakM7QUFDdkM7QUFFVSIsInNvdXJjZXMiOlsid2VicGFjazovL3N0cmlrZS1mcm9udGVuZC8uL3NjcmlwdHMvY29tcG9uZW50cy9wb3B1cF9tZW51LnRzPzE1YjIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY29tcG9uZW50cy9wb3B1cF9tZW51LnRzXG5jb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbnRlbXBsYXRlLmlubmVySFRNTCA9IGBcbiAgPHN0eWxlPlxuICAgIC8qID09PT09PT09PT09PVxuICAgICAgIFJlc2V0IC8gQmFzZVxuICAgICAgID09PT09PT09PT09PSAqL1xuICAgICoge1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgIG1hcmdpbjogMDtcbiAgICAgIHBhZGRpbmc6IDA7XG4gICAgfVxuXG4gICAgLyogPT09PT09PT09PT09XG4gICAgICAgSGlkZGVuIENoZWNrYm94XG4gICAgICAgPT09PT09PT09PT09ICovXG4gICAgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuXG4gICAgLyogPT09PT09PT09PT09XG4gICAgICAgQ29tbW9uIEJ1dHRvbiBTdHlsZXNcbiAgICAgICA9PT09PT09PT09PT0gKi9cbiAgICAuYnRuIHtcbiAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgIHdpZHRoOiA1MHB4O1xuICAgICAgaGVpZ2h0OiA1MHB4O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGVhc2UsIGJveC1zaGFkb3cgMC4zcyBlYXNlO1xuICAgICAgYm94LXNoYWRvdzogMCA1cHggMjBweCByZ2JhKDAsIDAsIDAsIDAuMTUpO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cbiAgICAuYnRuOmhvdmVyIHtcbiAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTtcbiAgICAgIGJveC1zaGFkb3c6IDAgOHB4IDMwcHggcmdiYSgwLCAwLCAwLCAwLjMpO1xuICAgIH1cbiAgICAuYnRuIHN2ZyB7XG4gICAgICB3aWR0aDogMjRweDtcbiAgICAgIGhlaWdodDogMjRweDtcbiAgICAgIGZpbGw6ICNmZmY7XG4gICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcyBlYXNlO1xuICAgIH1cblxuICAgIC8qID09PT09PT09PT09PVxuICAgICAgIEFjdGlvbiBNZW51IFdyYXBwZXJcbiAgICAgICA9PT09PT09PT09PT0gKi9cbiAgICAuYWN0aW9ucy1tZW51IHtcbiAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgIGJvdHRvbTogNDBweDtcbiAgICAgIHJpZ2h0OiA0MHB4O1xuICAgICAgd2lkdGg6IDYwcHg7XG4gICAgICBoZWlnaHQ6IDYwcHg7XG4gICAgICBhbmltYXRpb246IHBvcEluIDAuNnMgZWFzZTtcbiAgICAgIHotaW5kZXg6IDk5OTk7XG4gICAgfVxuXG4gICAgOmhvc3QoW2RhdGEtY29udGV4dD1cImNoYXRcIl0pIC5hY3Rpb25zLW1lbnUge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG5cbiAgICA6aG9zdChbZGF0YS1jb250ZXh0PVwibm9uLWNoYXRcIl0pIC5hY3Rpb25zLW1lbnUge1xuICAgICAgYm90dG9tOiA0MHB4OyAvKiBBbGlnbiB3aXRoIGZsb2F0aW5nIHByb21wdCBidXR0b24gb24gZGVza3RvcCAqL1xuICAgIH1cblxuICAgIEBrZXlmcmFtZXMgcG9wSW4ge1xuICAgICAgMCUge1xuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDAuNSkgcm90YXRlKDBkZWcpO1xuICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgfVxuICAgICAgODAlIHtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KSByb3RhdGUoMzYwZGVnKTtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgIH1cbiAgICAgIDEwMCUge1xuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpIHJvdGF0ZSgzNjBkZWcpO1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qID09PT09PT09PT09PVxuICAgICAgIE1lbnUgQnV0dG9uIChMYXJnZSlcbiAgICAgICA9PT09PT09PT09PT0gKi9cbiAgICAuYnRuLS1tZW51IHtcbiAgICAgIHdpZHRoOiA2MHB4O1xuICAgICAgaGVpZ2h0OiA2MHB4O1xuICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzU2YWIyZiwgI2E4ZTA2Myk7XG4gICAgICB6LWluZGV4OiAxO1xuICAgIH1cbiAgICAuYnRuLS1tZW51OmFmdGVyLFxuICAgIC5idG4tLW1lbnU6YmVmb3JlLFxuICAgIC5idG4tLW1lbnUgc3BhbiB7XG4gICAgICBjb250ZW50OiBcIlwiO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgd2lkdGg6IDI1cHg7XG4gICAgICBoZWlnaHQ6IDNweDtcbiAgICAgIGJhY2tncm91bmQ6ICNmZmY7XG4gICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4ycyBlYXNlO1xuICAgIH1cbiAgICAuYnRuLS1tZW51IHNwYW4ge1xuICAgICAgdG9wOiA1MCU7XG4gICAgICBsZWZ0OiA1MCU7XG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICB9XG4gICAgLmJ0bi0tbWVudTphZnRlciB7XG4gICAgICB0b3A6IDUwJTtcbiAgICAgIGxlZnQ6IDUwJTtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIGNhbGMoLTUwJSAtIDhweCkpO1xuICAgIH1cbiAgICAuYnRuLS1tZW51OmJlZm9yZSB7XG4gICAgICB0b3A6IDUwJTtcbiAgICAgIGxlZnQ6IDUwJTtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIGNhbGMoLTUwJSArIDhweCkpO1xuICAgIH1cblxuICAgIC8qID09PT09PT09PT09PVxuICAgICAgIEFjdGlvbiBCdXR0b25zXG4gICAgICAgPT09PT09PT09PT09ICovXG4gICAgLmJ0bi0tc2hhcmUge1xuICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzM0OThkYiwgIzI5ODBiOSk7XG4gICAgfVxuICAgIC5idG4tLXN0YXIge1xuICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzJlY2M3MSwgIzI3YWU2MCk7XG4gICAgfVxuICAgIC5idG4tLWNvbW1lbnQge1xuICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2YxYzQwZiwgI2YzOWMxMik7XG4gICAgfVxuXG4gICAgLyogPT09PT09PT09PT09XG4gICAgICAg44Oc44K/44Oz44Gu6YWN572uXG4gICAgICAgPT09PT09PT09PT09ICovXG4gICAgLmFjdGlvbnMtbWVudSAuYnRuIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogOHB4O1xuICAgICAgbGVmdDogOHB4O1xuICAgICAgb3BhY2l0eTogMDtcbiAgICAgIHRyYW5zZm9ybTogc2NhbGUoMCkgcm90YXRlKDBkZWcpO1xuICAgIH1cbiAgICAuYWN0aW9ucy1tZW51IC5idG4tLW1lbnUge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiAwO1xuICAgICAgbGVmdDogMDtcbiAgICAgIHdpZHRoOiA2MHB4O1xuICAgICAgaGVpZ2h0OiA2MHB4O1xuICAgICAgb3BhY2l0eTogMTtcbiAgICAgIGJveC1zaGFkb3c6IDAgNXB4IDIwcHggcmdiYSgwLCAwLCAwLCAwLjIpO1xuICAgICAgdHJhbnNmb3JtOiBub25lO1xuICAgIH1cblxuICAgIC8qID09PT09PT09PT09PVxuICAgICAgIOODgeOCp+ODg+OCr+OBjOWFpeOBo+OBn+OCieWQhOOCouOCpOOCs+ODs+OBjOWxlemWi1xuICAgICAgID09PT09PT09PT09PSAqL1xuICAgICNhY3Rpb25NZW51QnV0dG9uOmNoZWNrZWQgKyAuYWN0aW9ucy1tZW51ID4gLmJ0biB7XG4gICAgICBvcGFjaXR5OiAxO1xuICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKSByb3RhdGUoMzYwZGVnKTtcbiAgICAgIHRyYW5zaXRpb246IGFsbCAwLjZzIGN1YmljLWJlemllcigwLjY0NSwgMC4wNDUsIDAuMzU1LCAxKTtcbiAgICB9XG5cbiAgICAvKiDlsZXplovkvY3nva4gKi9cbiAgICAjYWN0aW9uTWVudUJ1dHRvbjpjaGVja2VkICsgLmFjdGlvbnMtbWVudSA+IC5idG4tLXNoYXJlIHtcbiAgICAgIHRvcDogLTgwcHg7XG4gICAgICBsZWZ0OiAwcHg7XG4gICAgfVxuICAgICNhY3Rpb25NZW51QnV0dG9uOmNoZWNrZWQgKyAuYWN0aW9ucy1tZW51ID4gLmJ0bi0tc3RhciB7XG4gICAgICB0b3A6IC02MHB4O1xuICAgICAgbGVmdDogLTYwcHg7XG4gICAgfVxuICAgICNhY3Rpb25NZW51QnV0dG9uOmNoZWNrZWQgKyAuYWN0aW9ucy1tZW51ID4gLmJ0bi0tY29tbWVudCB7XG4gICAgICB0b3A6IDBweDtcbiAgICAgIGxlZnQ6IC04MHB4O1xuICAgIH1cblxuICAgIC8qID09PT09PT09PT09PVxuICAgICAgIOODj+ODs+ODkOODvOOCrOODvOWkieW9olxuICAgICAgID09PT09PT09PT09PSAqL1xuICAgICNhY3Rpb25NZW51QnV0dG9uOmNoZWNrZWQgKyAuYWN0aW9ucy1tZW51IC5idG4tLW1lbnU6YWZ0ZXIge1xuICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgcm90YXRlKDQ1ZGVnKTtcbiAgICB9XG4gICAgI2FjdGlvbk1lbnVCdXR0b246Y2hlY2tlZCArIC5hY3Rpb25zLW1lbnUgLmJ0bi0tbWVudTpiZWZvcmUge1xuICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgcm90YXRlKC00NWRlZyk7XG4gICAgfVxuICAgICNhY3Rpb25NZW51QnV0dG9uOmNoZWNrZWQgKyAuYWN0aW9ucy1tZW51IC5idG4tLW1lbnUgc3BhbiB7XG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSBzY2FsZSgwKTtcbiAgICB9XG5cbiAgICAvKiA9PT09PT09PT09PT1cbiAgICAgICDjg5vjg5Djg7zjgqLjg4vjg6Hjg7zjgrfjg6fjg7NcbiAgICAgICA9PT09PT09PT09PT0gKi9cbiAgICAuYnRuLS1zaGFyZTpob3ZlciBzdmcgeyB0cmFuc2Zvcm06IHJvdGF0ZSgtMjBkZWcpIHNjYWxlKDEuMik7IH1cbiAgICAuYnRuLS1zdGFyOmhvdmVyIHN2ZyAgeyB0cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZykgIHNjYWxlKDEuMik7IH1cbiAgICAuYnRuLS1jb21tZW50OmhvdmVyIHN2ZyB7IHRyYW5zZm9ybTogcm90YXRlKC0yMGRlZykgc2NhbGUoMS4yKTsgfVxuICBcbiAgXG4gIC8qIOOCueODnuODm+ihqOekuuaZguOBruiqv+aVtO+8iOeUu+mdouW5hTc2OHB45Lul5LiL77yJIC0g44OX44Ot44Oz44OX44OI5oqV56i/44Oc44K/44Oz44Go5ZCM44GY44K144Kk44K644GrICovXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gICAgICAvKiDjg6Hjg4vjg6Xjg7zlhajkvZPjga7kvY3nva7jgajjgrXjgqTjgrogKi9cbiAgICAgIC5hY3Rpb25zLW1lbnUge1xuICAgICAgICByaWdodDogMjBweDsgICAgLyog44OX44Ot44Oz44OX44OI5oqV56i/44Oc44K/44Oz44Gu5L2N572u44Gr5ZCI44KP44Gb44Gm6Kq/5pW0ICovXG4gICAgICAgIHdpZHRoOiA1NnB4OyAgICAvKiDjg5fjg63jg7Pjg5fjg4jmipXnqL/jg5zjgr/jg7PjgajlkIzjgZjjgrXjgqTjgrrjgasgKi9cbiAgICAgICAgaGVpZ2h0OiA1NnB4OyAgIC8qIOODl+ODreODs+ODl+ODiOaKleeov+ODnOOCv+ODs+OBqOWQjOOBmOOCteOCpOOCuuOBqyAqL1xuICAgICAgfVxuXG4gICAgICA6aG9zdChbZGF0YS1jb250ZXh0PVwiY2hhdFwiXSkgLmFjdGlvbnMtbWVudSB7XG4gICAgICAgIGJvdHRvbTogMTAwcHg7ICAvKiDjg4Hjg6Pjg4Pjg4jlhaXlipvjg5Xjgqnjg7zjg6DjgYvjgonljYHliIbpm6LjgZfjgabphY3nva4gKi9cbiAgICAgIH1cblxuICAgICAgOmhvc3QoW2RhdGEtY29udGV4dD1cIm5vbi1jaGF0XCJdKSAuYWN0aW9ucy1tZW51IHtcbiAgICAgICAgYm90dG9tOiAyMHB4OyAgIC8qIOODl+ODreODs+ODl+ODiOaKleeov+ODnOOCv+ODs+OBqOWQjOOBmOmrmOOBleOBq+mFjee9riAqL1xuICAgICAgfVxuICAgICAgLyog44OP44Oz44OQ44O844Ks44O844Oc44K/44Oz44KS44OX44Ot44Oz44OX44OI5oqV56i/44Oc44K/44Oz44Go5a6M5YWo44Gr5ZCM44GY44K144Kk44K644GrICovXG4gICAgICAuYWN0aW9ucy1tZW51IC5idG4tLW1lbnUge1xuICAgICAgICB3aWR0aDogNTZweCAhaW1wb3J0YW50O1xuICAgICAgICBoZWlnaHQ6IDU2cHggIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICAgIC8qIOS7luOBruODnOOCv+ODs+OBruOCteOCpOOCuiAqL1xuICAgICAgLmFjdGlvbnMtbWVudSAuYnRuOm5vdCguYnRuLS1tZW51KSB7XG4gICAgICAgIHdpZHRoOiA0NXB4O1xuICAgICAgICBoZWlnaHQ6IDQ1cHg7XG4gICAgICB9XG4gICAgICAvKiDjgqLjgqTjgrPjg7PjgrXjgqTjgrroqr/mlbQgKi9cbiAgICAgIC5idG4gc3ZnIHtcbiAgICAgICAgd2lkdGg6IDIwcHg7XG4gICAgICAgIGhlaWdodDogMjBweDtcbiAgICAgIH1cbiAgICAgIFxuICAgIH1cblxuICAgIC8qIOmdnuW4uOOBq+Wwj+OBleOBqueUu+mdouOBp+OBruiqv+aVtO+8iOeUu+mdouW5hTQ4MHB45Lul5LiL77yJIC0g44OX44Ot44Oz44OX44OI5oqV56i/44Oc44K/44Oz44Go5a6M5YWo44Gr5ZCM44GY44K144Kk44K644GrICovXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDQ4MHB4KSB7XG4gICAgICAvKiDjg6Hjg4vjg6Xjg7zlhajkvZPjga7jgrXjgqTjgrrjgpLjg5fjg63jg7Pjg5fjg4jmipXnqL/jg5zjgr/jg7PjgavlrozlhajjgavlkIjjgo/jgZvjgaboqr/mlbQgKi9cbiAgICAgIC5hY3Rpb25zLW1lbnUge1xuICAgICAgICBib3R0b206IDkwcHg7ICAgLyog5YWl5Yqb44OV44Kp44O844Og44GL44KJ5Y2B5YiG6Zui44GX44Gm6YWN572uICovXG4gICAgICAgIHJpZ2h0OiAxNXB4OyAgICAvKiDjg5fjg63jg7Pjg5fjg4jmipXnqL/jg5zjgr/jg7Pjga7kvY3nva7jgavlkIjjgo/jgZvjgaboqr/mlbQgKi9cbiAgICAgICAgd2lkdGg6IDUwcHg7ICAgIC8qIOODl+ODreODs+ODl+ODiOaKleeov+ODnOOCv+ODs+OBqOWQjOOBmOOCteOCpOOCuuOBqyAqL1xuICAgICAgICBoZWlnaHQ6IDUwcHg7ICAgLyog44OX44Ot44Oz44OX44OI5oqV56i/44Oc44K/44Oz44Go5ZCM44GY44K144Kk44K644GrICovXG4gICAgICB9XG4gICAgICAvKiDjg4/jg7Pjg5Djg7zjgqzjg7zjg5zjgr/jg7PjgpLjg5fjg63jg7Pjg5fjg4jmipXnqL/jg5zjgr/jg7PjgajlrozlhajjgavlkIzjgZjjgrXjgqTjgrrjgasgKi9cbiAgICAgIC5hY3Rpb25zLW1lbnUgLmJ0bi0tbWVudSB7XG4gICAgICAgIHdpZHRoOiA1MHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIGhlaWdodDogNTBweCAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgICAgLyog5LuW44Gu44Oc44K/44Oz44Gu44K144Kk44K644KS44KI44KK5bCP44GV44GPICovXG4gICAgICAuYWN0aW9ucy1tZW51IC5idG46bm90KC5idG4tLW1lbnUpIHtcbiAgICAgICAgd2lkdGg6IDQwcHg7XG4gICAgICAgIGhlaWdodDogNDBweDtcbiAgICAgIH1cbiAgICAgIC8qIOOCouOCpOOCs+ODs+OCguOBleOCieOBq+e4ruWwjyAqL1xuICAgICAgLmJ0biBzdmcge1xuICAgICAgICB3aWR0aDogMThweDtcbiAgICAgICAgaGVpZ2h0OiAxOHB4O1xuICAgICAgfVxuXG4gICAgICA6aG9zdChbZGF0YS1jb250ZXh0PVwiY2hhdFwiXSkgLmFjdGlvbnMtbWVudSB7XG4gICAgICAgIGJvdHRvbTogOTBweDsgICAvKiDjg4Hjg6Pjg4Pjg4jlhaXlipvjg5Xjgqnjg7zjg6DjgYvjgonljYHliIbpm6LjgZfjgabphY3nva4gKi9cbiAgICAgIH1cblxuICAgICAgOmhvc3QoW2RhdGEtY29udGV4dD1cIm5vbi1jaGF0XCJdKSAuYWN0aW9ucy1tZW51IHtcbiAgICAgICAgYm90dG9tOiAxNXB4OyAgIC8qIOODl+ODreODs+ODl+ODiOaKleeov+ODnOOCv+ODs+OBqOWQjOOBmOmrmOOBleOBq+mFjee9riAqL1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgPC9zdHlsZT5cblxuICA8IS0tIOODgeOCp+ODg+OCr+ODnOODg+OCr+OCue+8iOODoeODi+ODpeODvOmWi+mWieeUqO+8iSAtLT5cbiAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwiYWN0aW9uTWVudUJ1dHRvblwiIC8+XG5cbiAgPCEtLSDjgqLjgq/jgrfjg6fjg7Pjg6Hjg4vjg6Xjg7zmnKzkvZMgLS0+XG4gIDxkaXYgY2xhc3M9XCJhY3Rpb25zLW1lbnVcIj5cbiAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi0tc2hhcmVcIiBvbmNsaWNrPVwibG9jYXRpb24uaHJlZj0nL3Byb21wdF9zaGFyZSdcIiB0aXRsZT1cIuOCt+OCp+OColwiPlxuICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgIDxwYXRoIGQ9XCJNMTggMTYuMDhjLS43NiAwLTEuNDQuMy0xLjk2Ljc3TDguOTEgMTIuN2EzLjA0OCAzLjA0OCAwIDAgMCAwLTEuMzlsNy4xMy00LjE3QTMgMyAwIDEgMCAxNCA1YTMgMyAwIDAgMCAuMDUuNTJsLTcuMTQgNC4xOGEzIDMgMCAxIDAgMCA0LjZsNy4xNCA0LjE4Yy0uMDMuMTctLjA1LjM0LS4wNS41MmEzIDMgMCAxIDAgMy0yLjkyWlwiIC8+XG4gICAgICA8L3N2Zz5cbiAgICA8L2J1dHRvbj5cbiAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi0tc3RhclwiIG9uY2xpY2s9XCJsb2NhdGlvbi5ocmVmPScvJ1wiIHRpdGxlPVwi44K544K/44O8XCI+XG4gICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgPHBhdGggZD1cIk0xMiwxNy4yN0wxOC4xOCwyMUwxNi41NCwxMy45NyBMMjIsOS4yNEwxNC44MSw4LjYyTDEyLDIgTDkuMTksOC42MkwyLDkuMjRMNy40NSwxMy45NyBMNS44MiwyMUwxMiwxNy4yN1pcIiAvPlxuICAgICAgPC9zdmc+XG4gICAgPC9idXR0b24+XG4gICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tLWNvbW1lbnRcIiBvbmNsaWNrPVwibG9jYXRpb24uaHJlZj0nL21lbW8nXCIgdGl0bGU9XCLjg6Hjg6JcIj5cbiAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICA8cGF0aCBkPVwiTTE5IDNINWEyIDIgMCAwIDAtMiAydjE0YTIgMiAwIDAgMCAyIDJoOWw3LTdWNWEyIDIgMCAwIDAtMi0yWm0tNSAxNHYtNWg1bC01IDVaXCIgLz5cbiAgICAgIDwvc3ZnPlxuICAgIDwvYnV0dG9uPlxuICAgIDxsYWJlbCBmb3I9XCJhY3Rpb25NZW51QnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLS1tZW51XCI+PHNwYW4+PC9zcGFuPjwvbGFiZWw+XG4gIDwvZGl2PlxuYDtcblxuY2xhc3MgQWN0aW9uTWVudSBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgcHJpdmF0ZSB0b2dnbGU6IEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgY29uc3Qgc2hhZG93ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcbiAgICBzaGFkb3cuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xuXG4gICAgdGhpcy50b2dnbGUgPSBzaGFkb3cucXVlcnlTZWxlY3RvcihcIiNhY3Rpb25NZW51QnV0dG9uXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsO1xuXG4gICAgLy8gIOODoeODi+ODpeODvOWkluOCr+ODquODg+OCr+OBp+iHquWLleOCr+ODreODvOOCulxuICAgIGlmICh0aGlzLnRvZ2dsZSkge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIC8vIOODoeODi+ODpeODvOOBjOmWi+OBhOOBpuOBhOOBpu+8jOOCr+ODquODg+OCr+WFiOOBjOOBk+OBruOCs+ODs+ODneODvOODjeODs+ODiOWkluOBquOCiemWieOBmOOCi1xuICAgICAgICBpZiAodGhpcy50b2dnbGU/LmNoZWNrZWQgJiYgIWUuY29tcG9zZWRQYXRoKCkuaW5jbHVkZXModGhpcykpIHtcbiAgICAgICAgICB0aGlzLnRvZ2dsZS5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIOODgeODo+ODg+ODiOeUu+mdouOBi+OBqeOBhuOBi+OCkuaknOWHuuOBl+OBpumBqeWIh+OBquOCteOCpOOCuuOCkumBqeeUqFxuICAgIHRoaXMudXBkYXRlTWVudVNpemUoKTtcbiAgICAvLyDnlLvpnaLjga7lpInljJbjgpLnm6PoppZcbiAgICB0aGlzLm9ic2VydmVTY3JlZW5DaGFuZ2VzKCk7XG4gIH1cblxuICB1cGRhdGVNZW51U2l6ZSgpIHtcbiAgICBjb25zdCBjaGF0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGF0LWNvbnRhaW5lclwiKTtcbiAgICBjb25zdCBpc0luQ2hhdE1vZGUgPSBCb29sZWFuKGNoYXRDb250YWluZXIgJiYgKGNoYXRDb250YWluZXIgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPT09IFwiZmxleFwiKTtcblxuICAgIC8vIENTU+OCq+OCueOCv+ODoOODl+ODreODkeODhuOCo+OBp+OCs+ODs+ODhuOCreOCueODiOOCkuioreWumlxuICAgIGlmIChpc0luQ2hhdE1vZGUpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiZGF0YS1jb250ZXh0XCIsIFwiY2hhdFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbnRleHRcIiwgXCJub24tY2hhdFwiKTtcbiAgICB9XG4gIH1cblxuICBvYnNlcnZlU2NyZWVuQ2hhbmdlcygpIHtcbiAgICBjb25zdCBjaGF0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGF0LWNvbnRhaW5lclwiKTtcbiAgICBpZiAoY2hhdENvbnRhaW5lcikge1xuICAgICAgLy8gTXV0YXRpb25PYnNlcnZlcuOBp2NoYXQtY29udGFpbmVy44Guc3R5bGXlpInljJbjgpLnm6PoppZcbiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZU1lbnVTaXplKCk7XG4gICAgICB9KTtcbiAgICAgIG9ic2VydmVyLm9ic2VydmUoY2hhdENvbnRhaW5lciwge1xuICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFtcInN0eWxlXCJdXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyDlrprmnJ/nmoTjgavjgoLjg4Hjgqfjg4Pjgq/vvIjlv7Xjga7jgZ/jgoHvvIlcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZU1lbnVTaXplKCk7XG4gICAgfSwgMTAwMCk7XG4gIH1cbn1cblxuaWYgKCFjdXN0b21FbGVtZW50cy5nZXQoXCJhY3Rpb24tbWVudVwiKSkge1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJhY3Rpb24tbWVudVwiLCBBY3Rpb25NZW51KTtcbn1cblxuZXhwb3J0IHt9O1xuIl0sIm5hbWVzIjpbInRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiQWN0aW9uTWVudSIsIkhUTUxFbGVtZW50IiwiY29uc3RydWN0b3IiLCJzaGFkb3ciLCJhdHRhY2hTaGFkb3ciLCJtb2RlIiwiYXBwZW5kQ2hpbGQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwidG9nZ2xlIiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY2hlY2tlZCIsImNvbXBvc2VkUGF0aCIsImluY2x1ZGVzIiwidXBkYXRlTWVudVNpemUiLCJvYnNlcnZlU2NyZWVuQ2hhbmdlcyIsImNoYXRDb250YWluZXIiLCJnZXRFbGVtZW50QnlJZCIsImlzSW5DaGF0TW9kZSIsIkJvb2xlYW4iLCJzdHlsZSIsImRpc3BsYXkiLCJzZXRBdHRyaWJ1dGUiLCJvYnNlcnZlciIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJvYnNlcnZlIiwiYXR0cmlidXRlcyIsImF0dHJpYnV0ZUZpbHRlciIsInNldEludGVydmFsIiwiY3VzdG9tRWxlbWVudHMiLCJnZXQiLCJkZWZpbmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./scripts/components/popup_menu.ts\n");

/***/ }),

/***/ "./scripts/components/user_icon.ts":
/*!*****************************************!*\
  !*** ./scripts/components/user_icon.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// components/user_icon.ts\n// ────────────────────────────────────────────────\n// 右上ユーザーアイコン  +  ドロップダウンメニュー\n//  - /api/user/profile で avatar_url / username を取得\n//  - 取得失敗時はデフォルト画像・空文字にフォールバック\n// ────────────────────────────────────────────────\nconst tpl = document.createElement(\"template\");\ntpl.innerHTML = `\n  <style>\n    :host {\n      position: fixed;\n      top: 10px;\n      right: 10px;\n      z-index: 10000;\n      font-family: inherit;\n      user-select: none;\n    }\n    .btn {\n      background: transparent;\n      border: none;\n      cursor: pointer;\n      padding: .5rem;\n      border-radius: 50%;\n      transition: background-color .15s;\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n    }\n    .btn:hover { background: rgba(0,0,0,.06); }\n    .avatar {\n      width: 2.2rem;\n      height: 2.2rem;\n      border-radius: 50%;\n      object-fit: cover;\n      display: block;\n    }\n    /* ホバー時にユーザー名ツールチップ */\n    .btn:hover::after {\n      content: attr(data-username);\n      position: absolute;\n      top: 105%;\n      right: 0;\n      padding: .25rem .6rem;\n      background: #333;\n      color: #fff;\n      font-size: .75rem;\n      border-radius: 4px;\n      white-space: nowrap;\n      pointer-events: none;\n    }\n    /* ▼ dropdown */\n    .dropdown {\n      position: absolute;\n      top: 3rem;\n      right: 0;\n      background: #fff;\n      border: 1px solid #ddd;\n      border-radius: 6px;\n      box-shadow: 0 2px 8px rgba(0,0,0,.1);\n      min-width: 160px;\n      display: none;\n      flex-direction: column;\n      overflow: hidden;\n      animation: fade .15s ease-out;\n    }\n    @keyframes fade { from { opacity: 0; transform: translateY(-5px);}\n                      to   { opacity: 1; transform: translateY(0);} }\n    .item {\n      padding: .6rem 1rem;\n      font-size: .9rem;\n      text-decoration: none;\n      color: #333;\n      display: flex;\n      align-items: center;\n      gap: .5rem;\n      cursor: pointer;\n    }\n    .item:hover { background: #f5f5f5; }\n  </style>\n\n  <button class=\"btn\" title=\"ユーザー\">\n    <img class=\"avatar\" src=\"/static/user-icon.png\" alt=\"ユーザーアイコン\">\n  </button>\n\n  <div class=\"dropdown\">\n    <a class=\"item\" href=\"/settings\">⚙️ 設定</a>\n    <a class=\"item\" href=\"/logout\">🚪 ログアウト</a>\n  </div>\n`;\nclass UserIcon extends HTMLElement {\n    constructor(){\n        super();\n        this._profileLoaded = false;\n        const root = this.attachShadow({\n            mode: \"open\"\n        });\n        root.append(tpl.content.cloneNode(true));\n        const btn = root.querySelector(\".btn\");\n        const dropdown = root.querySelector(\".dropdown\");\n        const avatarImg = root.querySelector(\".avatar\");\n        if (!btn || !dropdown || !avatarImg) {\n            throw new Error(\"user-icon template is missing required elements\");\n        }\n        this.btn = btn;\n        this.dropdown = dropdown;\n        this.avatarImg = avatarImg;\n        this._handleAuthState = this._handleAuthStateInternal.bind(this);\n        // ドロップダウン開閉\n        this.btn.addEventListener(\"click\", (e)=>{\n            e.stopPropagation();\n            this.dropdown.style.display = this.dropdown.style.display === \"flex\" ? \"none\" : \"flex\";\n        });\n        // 外側クリックで閉じる\n        document.addEventListener(\"click\", ()=>{\n            this.dropdown.style.display = \"none\";\n        });\n    }\n    connectedCallback() {\n        document.addEventListener(\"authstatechange\", this._handleAuthState);\n        if (typeof window.loggedIn !== \"undefined\") {\n            this._handleAuthStateInternal({\n                detail: {\n                    loggedIn: window.loggedIn\n                }\n            });\n        }\n    }\n    disconnectedCallback() {\n        document.removeEventListener(\"authstatechange\", this._handleAuthState);\n    }\n    _handleAuthStateInternal(evt) {\n        const customEvent = evt;\n        const loggedIn = Boolean(customEvent?.detail?.loggedIn);\n        if (loggedIn) {\n            if (!this._profileLoaded) {\n                this.loadProfile();\n            }\n        } else {\n            this._profileLoaded = false;\n            this.dropdown.style.display = \"none\";\n            this.avatarImg.src = \"/static/user-icon.png\";\n            this.avatarImg.alt = \"ユーザーアイコン\";\n            this.btn.removeAttribute(\"data-username\");\n        }\n    }\n    async loadProfile() {\n        try {\n            const res = await fetch(\"/api/user/profile\", {\n                credentials: \"same-origin\"\n            });\n            if (res.status === 401) {\n                // 未ログイン時は静かに何もしない\n                this._profileLoaded = false;\n                return;\n            }\n            if (!res.ok) throw new Error(`status ${res.status}`);\n            const data = await res.json();\n            const avatar = data.avatar_url || \"/static/user-icon.png\";\n            const name = data.username || \"\";\n            this.avatarImg.src = avatar;\n            // ツールチップにユーザー名\n            this.btn.setAttribute(\"data-username\", name);\n            // alt 属性にもセット\n            this.avatarImg.alt = name ? `${name}のアイコン` : \"ユーザーアイコン\";\n            this._profileLoaded = true;\n        } catch (err) {\n            console.warn(\"user_icon: profile load failed\", err);\n            this._profileLoaded = false;\n        }\n    }\n}\nif (!customElements.get(\"user-icon\")) {\n    customElements.define(\"user-icon\", UserIcon);\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUlHLE1BQU0sS0FBSyxLQUFLO2dCQUN0QixrQkFBa0I7Z0JBQ2xCLElBQUksQ0FBQ3BDLGNBQWMsR0FBRztnQkFDdEI7WUFDRjtZQUNBLElBQUksQ0FBQ2lDLElBQUlJLEVBQUUsRUFBRSxNQUFNLElBQUkxQixNQUFNLENBQUMsT0FBTyxFQUFFc0IsSUFBSUcsTUFBTSxDQUFDLENBQUM7WUFDbkQsTUFBTUUsT0FBTyxNQUFNTCxJQUFJTSxJQUFJO1lBRTNCLE1BQU1DLFNBQVNGLEtBQUtHLFVBQVUsSUFBSTtZQUNsQyxNQUFNQyxPQUFPSixLQUFLSyxRQUFRLElBQUk7WUFFOUIsSUFBSSxDQUFDakMsU0FBUyxDQUFDb0IsR0FBRyxHQUFHVTtZQUNyQixlQUFlO1lBQ2YsSUFBSSxDQUFDakMsR0FBRyxDQUFDcUMsWUFBWSxDQUFDLGlCQUFpQkY7WUFDdkMsY0FBYztZQUNkLElBQUksQ0FBQ2hDLFNBQVMsQ0FBQ3FCLEdBQUcsR0FBR1csT0FBTyxDQUFDLEVBQUVBLEtBQUssS0FBSyxDQUFDLEdBQUc7WUFDN0MsSUFBSSxDQUFDMUMsY0FBYyxHQUFHO1FBQ3hCLEVBQUUsT0FBTzZDLEtBQUs7WUFDWkMsUUFBUUMsSUFBSSxDQUFDLGtDQUFrQ0Y7WUFDL0MsSUFBSSxDQUFDN0MsY0FBYyxHQUFHO1FBQ3hCO0lBQ0Y7QUFDRjtBQUVBLElBQUksQ0FBQ2dELGVBQWVDLEdBQUcsQ0FBQyxjQUFjO0lBQ3BDRCxlQUFlRSxNQUFNLENBQUMsYUFBYXJEO0FBQ3JDO0FBRVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHJpa2UtZnJvbnRlbmQvLi9zY3JpcHRzL2NvbXBvbmVudHMvdXNlcl9pY29uLnRzP2RkNmEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY29tcG9uZW50cy91c2VyX2ljb24udHNcbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuLy8g5Y+z5LiK44Om44O844K244O844Ki44Kk44Kz44OzICArICDjg4njg63jg4Pjg5fjg4Djgqbjg7Pjg6Hjg4vjg6Xjg7xcbi8vICAtIC9hcGkvdXNlci9wcm9maWxlIOOBpyBhdmF0YXJfdXJsIC8gdXNlcm5hbWUg44KS5Y+W5b6XXG4vLyAgLSDlj5blvpflpLHmlZfmmYLjga/jg4fjg5Xjgqnjg6vjg4jnlLvlg4/jg7vnqbrmloflrZfjgavjg5Xjgqnjg7zjg6vjg5Djg4Pjgq9cbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG5jb25zdCB0cGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG50cGwuaW5uZXJIVE1MID0gYFxuICA8c3R5bGU+XG4gICAgOmhvc3Qge1xuICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgdG9wOiAxMHB4O1xuICAgICAgcmlnaHQ6IDEwcHg7XG4gICAgICB6LWluZGV4OiAxMDAwMDtcbiAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgfVxuICAgIC5idG4ge1xuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICBib3JkZXI6IG5vbmU7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBwYWRkaW5nOiAuNXJlbTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgLjE1cztcbiAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIH1cbiAgICAuYnRuOmhvdmVyIHsgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwuMDYpOyB9XG4gICAgLmF2YXRhciB7XG4gICAgICB3aWR0aDogMi4ycmVtO1xuICAgICAgaGVpZ2h0OiAyLjJyZW07XG4gICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICBvYmplY3QtZml0OiBjb3ZlcjtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIH1cbiAgICAvKiDjg5vjg5Djg7zmmYLjgavjg6bjg7zjgrbjg7zlkI3jg4Tjg7zjg6vjg4Hjg4Pjg5cgKi9cbiAgICAuYnRuOmhvdmVyOjphZnRlciB7XG4gICAgICBjb250ZW50OiBhdHRyKGRhdGEtdXNlcm5hbWUpO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiAxMDUlO1xuICAgICAgcmlnaHQ6IDA7XG4gICAgICBwYWRkaW5nOiAuMjVyZW0gLjZyZW07XG4gICAgICBiYWNrZ3JvdW5kOiAjMzMzO1xuICAgICAgY29sb3I6ICNmZmY7XG4gICAgICBmb250LXNpemU6IC43NXJlbTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICB9XG4gICAgLyog4pa8IGRyb3Bkb3duICovXG4gICAgLmRyb3Bkb3duIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogM3JlbTtcbiAgICAgIHJpZ2h0OiAwO1xuICAgICAgYmFja2dyb3VuZDogI2ZmZjtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XG4gICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLDAsMCwuMSk7XG4gICAgICBtaW4td2lkdGg6IDE2MHB4O1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgYW5pbWF0aW9uOiBmYWRlIC4xNXMgZWFzZS1vdXQ7XG4gICAgfVxuICAgIEBrZXlmcmFtZXMgZmFkZSB7IGZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTVweCk7fVxuICAgICAgICAgICAgICAgICAgICAgIHRvICAgeyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7fSB9XG4gICAgLml0ZW0ge1xuICAgICAgcGFkZGluZzogLjZyZW0gMXJlbTtcbiAgICAgIGZvbnQtc2l6ZTogLjlyZW07XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICBjb2xvcjogIzMzMztcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgZ2FwOiAuNXJlbTtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB9XG4gICAgLml0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kOiAjZjVmNWY1OyB9XG4gIDwvc3R5bGU+XG5cbiAgPGJ1dHRvbiBjbGFzcz1cImJ0blwiIHRpdGxlPVwi44Om44O844K244O8XCI+XG4gICAgPGltZyBjbGFzcz1cImF2YXRhclwiIHNyYz1cIi9zdGF0aWMvdXNlci1pY29uLnBuZ1wiIGFsdD1cIuODpuODvOOCtuODvOOCouOCpOOCs+ODs1wiPlxuICA8L2J1dHRvbj5cblxuICA8ZGl2IGNsYXNzPVwiZHJvcGRvd25cIj5cbiAgICA8YSBjbGFzcz1cIml0ZW1cIiBocmVmPVwiL3NldHRpbmdzXCI+4pqZ77iPIOioreWumjwvYT5cbiAgICA8YSBjbGFzcz1cIml0ZW1cIiBocmVmPVwiL2xvZ291dFwiPvCfmqog44Ot44Kw44Ki44Km44OIPC9hPlxuICA8L2Rpdj5cbmA7XG5cbmNsYXNzIFVzZXJJY29uIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBwcml2YXRlIGJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgZHJvcGRvd246IEhUTUxEaXZFbGVtZW50O1xuICBwcml2YXRlIGF2YXRhckltZzogSFRNTEltYWdlRWxlbWVudDtcbiAgcHJpdmF0ZSBfcHJvZmlsZUxvYWRlZCA9IGZhbHNlO1xuICBwcml2YXRlIF9oYW5kbGVBdXRoU3RhdGU6IChldnQ/OiBFdmVudCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIGNvbnN0IHJvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xuICAgIHJvb3QuYXBwZW5kKHRwbC5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XG5cbiAgICBjb25zdCBidG4gPSByb290LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbDtcbiAgICBjb25zdCBkcm9wZG93biA9IHJvb3QucXVlcnlTZWxlY3RvcihcIi5kcm9wZG93blwiKSBhcyBIVE1MRGl2RWxlbWVudCB8IG51bGw7XG4gICAgY29uc3QgYXZhdGFySW1nID0gcm9vdC5xdWVyeVNlbGVjdG9yKFwiLmF2YXRhclwiKSBhcyBIVE1MSW1hZ2VFbGVtZW50IHwgbnVsbDtcblxuICAgIGlmICghYnRuIHx8ICFkcm9wZG93biB8fCAhYXZhdGFySW1nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1c2VyLWljb24gdGVtcGxhdGUgaXMgbWlzc2luZyByZXF1aXJlZCBlbGVtZW50c1wiKTtcbiAgICB9XG5cbiAgICB0aGlzLmJ0biA9IGJ0bjtcbiAgICB0aGlzLmRyb3Bkb3duID0gZHJvcGRvd247XG4gICAgdGhpcy5hdmF0YXJJbWcgPSBhdmF0YXJJbWc7XG4gICAgdGhpcy5faGFuZGxlQXV0aFN0YXRlID0gdGhpcy5faGFuZGxlQXV0aFN0YXRlSW50ZXJuYWwuYmluZCh0aGlzKTtcblxuICAgIC8vIOODieODreODg+ODl+ODgOOCpuODs+mWi+mWiVxuICAgIHRoaXMuYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuZHJvcGRvd24uc3R5bGUuZGlzcGxheSA9XG4gICAgICAgIHRoaXMuZHJvcGRvd24uc3R5bGUuZGlzcGxheSA9PT0gXCJmbGV4XCIgPyBcIm5vbmVcIiA6IFwiZmxleFwiO1xuICAgIH0pO1xuICAgIC8vIOWkluWBtOOCr+ODquODg+OCr+OBp+mWieOBmOOCi1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmRyb3Bkb3duLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJhdXRoc3RhdGVjaGFuZ2VcIiwgdGhpcy5faGFuZGxlQXV0aFN0YXRlKTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdy5sb2dnZWRJbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy5faGFuZGxlQXV0aFN0YXRlSW50ZXJuYWwoeyBkZXRhaWw6IHsgbG9nZ2VkSW46IHdpbmRvdy5sb2dnZWRJbiB9IH0gYXMgQ3VzdG9tRXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhdXRoc3RhdGVjaGFuZ2VcIiwgdGhpcy5faGFuZGxlQXV0aFN0YXRlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUF1dGhTdGF0ZUludGVybmFsKGV2dD86IEV2ZW50KSB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldnQgYXMgQ3VzdG9tRXZlbnQ8eyBsb2dnZWRJbj86IGJvb2xlYW4gfT4gfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgbG9nZ2VkSW4gPSBCb29sZWFuKGN1c3RvbUV2ZW50Py5kZXRhaWw/LmxvZ2dlZEluKTtcblxuICAgIGlmIChsb2dnZWRJbikge1xuICAgICAgaWYgKCF0aGlzLl9wcm9maWxlTG9hZGVkKSB7XG4gICAgICAgIHRoaXMubG9hZFByb2ZpbGUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcHJvZmlsZUxvYWRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5kcm9wZG93bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB0aGlzLmF2YXRhckltZy5zcmMgPSBcIi9zdGF0aWMvdXNlci1pY29uLnBuZ1wiO1xuICAgICAgdGhpcy5hdmF0YXJJbWcuYWx0ID0gXCLjg6bjg7zjgrbjg7zjgqLjgqTjgrPjg7NcIjtcbiAgICAgIHRoaXMuYnRuLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtdXNlcm5hbWVcIik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFByb2ZpbGUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiL2FwaS91c2VyL3Byb2ZpbGVcIiwgeyBjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwiIH0pO1xuICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAvLyDmnKrjg63jgrDjgqTjg7PmmYLjga/pnZnjgYvjgavkvZXjgoLjgZfjgarjgYRcbiAgICAgICAgdGhpcy5fcHJvZmlsZUxvYWRlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBzdGF0dXMgJHtyZXMuc3RhdHVzfWApO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgIGNvbnN0IGF2YXRhciA9IGRhdGEuYXZhdGFyX3VybCB8fCBcIi9zdGF0aWMvdXNlci1pY29uLnBuZ1wiO1xuICAgICAgY29uc3QgbmFtZSA9IGRhdGEudXNlcm5hbWUgfHwgXCJcIjtcblxuICAgICAgdGhpcy5hdmF0YXJJbWcuc3JjID0gYXZhdGFyO1xuICAgICAgLy8g44OE44O844Or44OB44OD44OX44Gr44Om44O844K244O85ZCNXG4gICAgICB0aGlzLmJ0bi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXVzZXJuYW1lXCIsIG5hbWUpO1xuICAgICAgLy8gYWx0IOWxnuaAp+OBq+OCguOCu+ODg+ODiFxuICAgICAgdGhpcy5hdmF0YXJJbWcuYWx0ID0gbmFtZSA/IGAke25hbWV944Gu44Ki44Kk44Kz44OzYCA6IFwi44Om44O844K244O844Ki44Kk44Kz44OzXCI7XG4gICAgICB0aGlzLl9wcm9maWxlTG9hZGVkID0gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUud2FybihcInVzZXJfaWNvbjogcHJvZmlsZSBsb2FkIGZhaWxlZFwiLCBlcnIpO1xuICAgICAgdGhpcy5fcHJvZmlsZUxvYWRlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG5pZiAoIWN1c3RvbUVsZW1lbnRzLmdldChcInVzZXItaWNvblwiKSkge1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ1c2VyLWljb25cIiwgVXNlckljb24pO1xufVxuXG5leHBvcnQge307XG4iXSwibmFtZXMiOlsidHBsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiVXNlckljb24iLCJIVE1MRWxlbWVudCIsImNvbnN0cnVjdG9yIiwiX3Byb2ZpbGVMb2FkZWQiLCJyb290IiwiYXR0YWNoU2hhZG93IiwibW9kZSIsImFwcGVuZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJidG4iLCJxdWVyeVNlbGVjdG9yIiwiZHJvcGRvd24iLCJhdmF0YXJJbWciLCJFcnJvciIsIl9oYW5kbGVBdXRoU3RhdGUiLCJfaGFuZGxlQXV0aFN0YXRlSW50ZXJuYWwiLCJiaW5kIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJzdHlsZSIsImRpc3BsYXkiLCJjb25uZWN0ZWRDYWxsYmFjayIsIndpbmRvdyIsImxvZ2dlZEluIiwiZGV0YWlsIiwiZGlzY29ubmVjdGVkQ2FsbGJhY2siLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwiY3VzdG9tRXZlbnQiLCJCb29sZWFuIiwibG9hZFByb2ZpbGUiLCJzcmMiLCJhbHQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJyZXMiLCJmZXRjaCIsImNyZWRlbnRpYWxzIiwic3RhdHVzIiwib2siLCJkYXRhIiwianNvbiIsImF2YXRhciIsImF2YXRhcl91cmwiLCJuYW1lIiwidXNlcm5hbWUiLCJzZXRBdHRyaWJ1dGUiLCJlcnIiLCJjb25zb2xlIiwid2FybiIsImN1c3RvbUVsZW1lbnRzIiwiZ2V0IiwiZGVmaW5lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./scripts/components/user_icon.ts\n");

/***/ }),

/***/ "./scripts/core/dom.ts":
/*!*****************************!*\
  !*** ./scripts/core/dom.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// dom.ts\n// 画面内で使用するDOM要素をまとめて取得し、グローバル変数として window に登録\n// セットアップ画面関連\nconst setupContainer = document.getElementById(\"setup-container\");\nconst setupInfoElement = document.getElementById(\"setup-info\");\nconst aiModelSelect = document.getElementById(\"ai-model\");\nconst accessChatBtn = document.getElementById(\"access-chat-btn\");\nconst setupTaskCards = document.querySelectorAll(\".task-selection .prompt-card\");\nconst taskSelection = document.querySelector(\".task-selection\");\n// チャット画面関連\nconst chatContainer = document.getElementById(\"chat-container\");\nconst chatMessages = document.getElementById(\"chat-messages\");\nconst userInput = document.getElementById(\"user-input\");\nconst sendBtn = document.getElementById(\"send-btn\");\nconst typingIndicator = document.getElementById(\"typing-indicator\");\nconst backToSetupBtn = document.getElementById(\"back-to-setup\");\nconst newChatBtn = document.getElementById(\"new-chat-btn\");\nconst chatRoomListEl = document.getElementById(\"chat-room-list\");\n// グローバル登録\nwindow.setupContainer = setupContainer;\nwindow.chatContainer = chatContainer;\nwindow.chatMessages = chatMessages;\nwindow.userInput = userInput;\nwindow.sendBtn = sendBtn;\nwindow.typingIndicator = typingIndicator;\nwindow.backToSetupBtn = backToSetupBtn;\nwindow.newChatBtn = newChatBtn;\nwindow.chatRoomListEl = chatRoomListEl;\nwindow.setupInfoElement = setupInfoElement;\nwindow.aiModelSelect = aiModelSelect;\nwindow.accessChatBtn = accessChatBtn;\nwindow.setupTaskCards = setupTaskCards;\nwindow.taskSelection = taskSelection;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHRzL2NvcmUvZG9tLnRzIiwibWFwcGluZ3MiOiI7QUFBQSxTQUFTO0FBQ1QsOENBQThDO0FBRTlDLGFBQWE7QUFDYixNQUFNQSxpQkFBaUJDLFNBQVNDLGNBQWMsQ0FBQztBQUMvQyxNQUFNQyxtQkFBbUJGLFNBQVNDLGNBQWMsQ0FBQztBQUNqRCxNQUFNRSxnQkFBZ0JILFNBQVNDLGNBQWMsQ0FBQztBQUM5QyxNQUFNRyxnQkFBZ0JKLFNBQVNDLGNBQWMsQ0FBQztBQUM5QyxNQUFNSSxpQkFBaUJMLFNBQVNNLGdCQUFnQixDQUFDO0FBQ2pELE1BQU1DLGdCQUFnQlAsU0FBU1EsYUFBYSxDQUFDO0FBRTdDLFdBQVc7QUFDWCxNQUFNQyxnQkFBZ0JULFNBQVNDLGNBQWMsQ0FBQztBQUM5QyxNQUFNUyxlQUFlVixTQUFTQyxjQUFjLENBQUM7QUFDN0MsTUFBTVUsWUFBWVgsU0FBU0MsY0FBYyxDQUFDO0FBQzFDLE1BQU1XLFVBQVVaLFNBQVNDLGNBQWMsQ0FBQztBQUN4QyxNQUFNWSxrQkFBa0JiLFNBQVNDLGNBQWMsQ0FBQztBQUNoRCxNQUFNYSxpQkFBaUJkLFNBQVNDLGNBQWMsQ0FBQztBQUMvQyxNQUFNYyxhQUFhZixTQUFTQyxjQUFjLENBQUM7QUFDM0MsTUFBTWUsaUJBQWlCaEIsU0FBU0MsY0FBYyxDQUFDO0FBRS9DLFVBQVU7QUFDVmdCLE9BQU9sQixjQUFjLEdBQUdBO0FBQ3hCa0IsT0FBT1IsYUFBYSxHQUFHQTtBQUN2QlEsT0FBT1AsWUFBWSxHQUFHQTtBQUN0Qk8sT0FBT04sU0FBUyxHQUFHQTtBQUNuQk0sT0FBT0wsT0FBTyxHQUFHQTtBQUNqQkssT0FBT0osZUFBZSxHQUFHQTtBQUN6QkksT0FBT0gsY0FBYyxHQUFHQTtBQUN4QkcsT0FBT0YsVUFBVSxHQUFHQTtBQUNwQkUsT0FBT0QsY0FBYyxHQUFHQTtBQUN4QkMsT0FBT2YsZ0JBQWdCLEdBQUdBO0FBQzFCZSxPQUFPZCxhQUFhLEdBQUdBO0FBQ3ZCYyxPQUFPYixhQUFhLEdBQUdBO0FBQ3ZCYSxPQUFPWixjQUFjLEdBQUdBO0FBQ3hCWSxPQUFPVixhQUFhLEdBQUdBO0FBRWIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHJpa2UtZnJvbnRlbmQvLi9zY3JpcHRzL2NvcmUvZG9tLnRzP2ViYTUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZG9tLnRzXG4vLyDnlLvpnaLlhoXjgafkvb/nlKjjgZnjgotET03opoHntKDjgpLjgb7jgajjgoHjgablj5blvpfjgZfjgIHjgrDjg63jg7zjg5Djg6vlpInmlbDjgajjgZfjgaYgd2luZG93IOOBq+eZu+mMslxuXG4vLyDjgrvjg4Pjg4jjgqLjg4Pjg5fnlLvpnaLplqLpgKNcbmNvbnN0IHNldHVwQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZXR1cC1jb250YWluZXJcIik7XG5jb25zdCBzZXR1cEluZm9FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZXR1cC1pbmZvXCIpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsO1xuY29uc3QgYWlNb2RlbFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWktbW9kZWxcIikgYXMgSFRNTFNlbGVjdEVsZW1lbnQgfCBudWxsO1xuY29uc3QgYWNjZXNzQ2hhdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWNjZXNzLWNoYXQtYnRuXCIpO1xuY29uc3Qgc2V0dXBUYXNrQ2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhc2stc2VsZWN0aW9uIC5wcm9tcHQtY2FyZFwiKTtcbmNvbnN0IHRhc2tTZWxlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stc2VsZWN0aW9uXCIpO1xuXG4vLyDjg4Hjg6Pjg4Pjg4jnlLvpnaLplqLpgKNcbmNvbnN0IGNoYXRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoYXQtY29udGFpbmVyXCIpO1xuY29uc3QgY2hhdE1lc3NhZ2VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGF0LW1lc3NhZ2VzXCIpO1xuY29uc3QgdXNlcklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyLWlucHV0XCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsO1xuY29uc3Qgc2VuZEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VuZC1idG5cIik7XG5jb25zdCB0eXBpbmdJbmRpY2F0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInR5cGluZy1pbmRpY2F0b3JcIik7XG5jb25zdCBiYWNrVG9TZXR1cEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFjay10by1zZXR1cFwiKTtcbmNvbnN0IG5ld0NoYXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1jaGF0LWJ0blwiKTtcbmNvbnN0IGNoYXRSb29tTGlzdEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGF0LXJvb20tbGlzdFwiKTtcblxuLy8g44Kw44Ot44O844OQ44Or55m76YyyXG53aW5kb3cuc2V0dXBDb250YWluZXIgPSBzZXR1cENvbnRhaW5lcjtcbndpbmRvdy5jaGF0Q29udGFpbmVyID0gY2hhdENvbnRhaW5lcjtcbndpbmRvdy5jaGF0TWVzc2FnZXMgPSBjaGF0TWVzc2FnZXM7XG53aW5kb3cudXNlcklucHV0ID0gdXNlcklucHV0O1xud2luZG93LnNlbmRCdG4gPSBzZW5kQnRuO1xud2luZG93LnR5cGluZ0luZGljYXRvciA9IHR5cGluZ0luZGljYXRvcjtcbndpbmRvdy5iYWNrVG9TZXR1cEJ0biA9IGJhY2tUb1NldHVwQnRuO1xud2luZG93Lm5ld0NoYXRCdG4gPSBuZXdDaGF0QnRuO1xud2luZG93LmNoYXRSb29tTGlzdEVsID0gY2hhdFJvb21MaXN0RWw7XG53aW5kb3cuc2V0dXBJbmZvRWxlbWVudCA9IHNldHVwSW5mb0VsZW1lbnQ7XG53aW5kb3cuYWlNb2RlbFNlbGVjdCA9IGFpTW9kZWxTZWxlY3Q7XG53aW5kb3cuYWNjZXNzQ2hhdEJ0biA9IGFjY2Vzc0NoYXRCdG47XG53aW5kb3cuc2V0dXBUYXNrQ2FyZHMgPSBzZXR1cFRhc2tDYXJkcztcbndpbmRvdy50YXNrU2VsZWN0aW9uID0gdGFza1NlbGVjdGlvbjtcblxuZXhwb3J0IHt9O1xuIl0sIm5hbWVzIjpbInNldHVwQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNldHVwSW5mb0VsZW1lbnQiLCJhaU1vZGVsU2VsZWN0IiwiYWNjZXNzQ2hhdEJ0biIsInNldHVwVGFza0NhcmRzIiwicXVlcnlTZWxlY3RvckFsbCIsInRhc2tTZWxlY3Rpb24iLCJxdWVyeVNlbGVjdG9yIiwiY2hhdENvbnRhaW5lciIsImNoYXRNZXNzYWdlcyIsInVzZXJJbnB1dCIsInNlbmRCdG4iLCJ0eXBpbmdJbmRpY2F0b3IiLCJiYWNrVG9TZXR1cEJ0biIsIm5ld0NoYXRCdG4iLCJjaGF0Um9vbUxpc3RFbCIsIndpbmRvdyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scripts/core/dom.ts\n");

/***/ }),

/***/ "./scripts/core/main.ts":
/*!******************************!*\
  !*** ./scripts/core/main.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/**\n * main.ts\n *\n * ■ ページ初期化（DOMContentLoaded）\n *   - ログイン状態を /api/current_user で確認し、設定ボタンを「ログイン／ユーザーアイコン」に切替\n *   - localStorage から前回の currentChatRoomId を復元\n *   - タスクカードと「もっと見る」ボタンの初期化 (initToggleTasks / initSetupTaskCards)\n *   - 最初はセットアップ画面を表示し、チャットルーム一覧をロード\n *   - 復帰時にチャット履歴をロード（ローカル＋サーバー）\n *\n * ■ UI 操作のイベント登録\n *   - 新規チャット／これまでのチャットを見る／送信／Enter 送信\n *   - テキストエリアの自動高さ調整\n *   - 「戻る」ボタンでセットアップ画面へ\n *   - 画面クリックでチャットルームの３点メニューを閉じる\n *\n * ■ ユーザーメニュー表示 toggleUserMenu()\n *   - 「設定」「ログアウト」メニューを動的生成・表示・非表示\n */ function notifyAuthState(loggedIn) {\n    window.loggedIn = loggedIn;\n    document.dispatchEvent(new CustomEvent(\"authstatechange\", {\n        detail: {\n            loggedIn\n        }\n    }));\n}\nfunction initApp() {\n    const authButtons = document.getElementById(\"auth-buttons\");\n    const newPromptBtn = document.getElementById(\"openNewPromptModal\");\n    const accessChatBtn = document.getElementById(\"access-chat-btn\");\n    const userIconEl = document.getElementById(\"userIcon\");\n    const loginBtn = document.getElementById(\"login-btn\");\n    const newChatBtn = document.getElementById(\"new-chat-btn\");\n    const sendBtn = document.getElementById(\"send-btn\");\n    const userInput = document.getElementById(\"user-input\");\n    const backToSetupBtn = document.getElementById(\"back-to-setup\");\n    const chatMessages = document.getElementById(\"chat-messages\");\n    const callShowSetupForm = ()=>{\n        if (typeof window.showSetupForm === \"function\") window.showSetupForm();\n    };\n    const callSendMessage = ()=>{\n        if (typeof window.sendMessage === \"function\") window.sendMessage();\n    };\n    const applyAuthUI = (loggedIn)=>{\n        if (!authButtons || !userIconEl) return;\n        if (loggedIn) {\n            // ログイン時：認証ボタンは隠し、ユーザーアイコンを表示\n            authButtons.style.display = \"none\";\n            userIconEl.style.display = \"\";\n            if (newPromptBtn) newPromptBtn.style.display = \"\";\n            if (accessChatBtn) accessChatBtn.style.display = \"\";\n            if (window.initTaskOrderEditing) {\n                window.initTaskOrderEditing();\n            }\n        } else {\n            // 未ログイン時：認証ボタンだけ表示、ユーザーアイコンは隠す\n            authButtons.style.display = \"flex\";\n            userIconEl.style.display = \"none\";\n            if (loginBtn) {\n                loginBtn.onclick = ()=>{\n                    window.location.href = \"/login\";\n                };\n            }\n            // タスク編集ボタンが残っていたら削除\n            const editBtn = document.getElementById(\"edit-task-order-btn\");\n            if (editBtn) editBtn.remove();\n            // 新規プロンプト＆過去チャット閲覧ボタンを非表示\n            if (newPromptBtn) newPromptBtn.style.display = \"none\";\n            if (accessChatBtn) accessChatBtn.style.display = \"none\";\n        }\n    };\n    // ▼ログイン状態確認とUI制御\n    fetch(\"/api/current_user\").then((res)=>res.json()).then((data)=>{\n        const loggedIn = Boolean(data.logged_in);\n        notifyAuthState(loggedIn);\n        applyAuthUI(loggedIn);\n    }).catch((err)=>{\n        console.error(\"Error checking login status:\", err);\n        notifyAuthState(false);\n        applyAuthUI(false);\n    });\n    // ▼ローカルに保存されていれば現在のチャットルームを復元\n    if (localStorage.getItem(\"currentChatRoomId\")) {\n        window.currentChatRoomId = localStorage.getItem(\"currentChatRoomId\");\n    }\n    // ▼初期化\n    if (typeof window.initToggleTasks === \"function\") window.initToggleTasks();\n    if (typeof window.initSetupTaskCards === \"function\") window.initSetupTaskCards();\n    // 初期表示はセットアップ\n    callShowSetupForm();\n    if (typeof window.loadChatRooms === \"function\") window.loadChatRooms();\n    // 新規チャット\n    if (newChatBtn) {\n        newChatBtn.addEventListener(\"click\", ()=>{\n            window.currentChatRoomId = null;\n            localStorage.removeItem(\"currentChatRoomId\");\n            if (chatMessages) chatMessages.innerHTML = \"\";\n            callShowSetupForm();\n        });\n    }\n    // 「これまでのチャットを見る」\n    if (accessChatBtn) {\n        accessChatBtn.addEventListener(\"click\", ()=>{\n            fetch(\"/api/get_chat_rooms\").then((res)=>res.json()).then((data)=>{\n                const rooms = Array.isArray(data.rooms) ? data.rooms : [];\n                if (rooms.length > 0) {\n                    // 1件目が最も新しいルームなので切り替え\n                    if (typeof window.switchChatRoom === \"function\") window.switchChatRoom(String(rooms[0].id));\n                } else {\n                    // ルームがない場合は空のチャット画面を表示\n                    if (typeof window.showChatInterface === \"function\") window.showChatInterface();\n                    if (typeof window.loadChatRooms === \"function\") window.loadChatRooms();\n                    if (chatMessages) chatMessages.innerHTML = \"\";\n                }\n            }).catch((err)=>{\n                console.error(\"ルーム一覧取得失敗:\", err);\n                if (typeof window.showChatInterface === \"function\") window.showChatInterface();\n                if (typeof window.loadChatRooms === \"function\") window.loadChatRooms();\n                if (chatMessages) chatMessages.innerHTML = \"\";\n            });\n        });\n    }\n    // 送信\n    if (sendBtn) sendBtn.addEventListener(\"click\", callSendMessage);\n    // Enter 送信 (Shift+Enter で改行)\n    if (userInput) {\n        userInput.addEventListener(\"keypress\", (e)=>{\n            if (e.key === \"Enter\" && !e.shiftKey) {\n                e.preventDefault();\n                callSendMessage();\n            }\n        });\n        // テキストエリア高さ自動調整\n        userInput.addEventListener(\"input\", ()=>{\n            userInput.style.height = \"auto\";\n            userInput.style.height = `${userInput.scrollHeight}px`;\n        });\n    }\n    // 戻るボタン\n    if (backToSetupBtn) backToSetupBtn.addEventListener(\"click\", callShowSetupForm);\n    // 画面クリックでサイドメニューの 3 点メニューを閉じる\n    document.addEventListener(\"click\", ()=>{\n        document.querySelectorAll(\".room-actions-menu\").forEach((menu)=>{\n            menu.style.display = \"none\";\n        });\n    });\n}\nif (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", initApp);\n} else {\n    initApp();\n}\n/* ▼ユーザーメニュー（設定 / ログアウト） ---------------------------------------*/ function toggleUserMenu() {\n    let menu = document.getElementById(\"user-menu\");\n    if (!menu) {\n        // メニュー要素を生成\n        menu = document.createElement(\"div\");\n        menu.id = \"user-menu\";\n        // スタイル設定（モバイル時は static、PC時は右上絶対配置）\n        Object.assign(menu.style, {\n            position: \"absolute\",\n            top: \"60px\",\n            right: \"10px\",\n            background: \"#fff\",\n            border: \"1px solid #ddd\",\n            borderRadius: \"6px\",\n            boxShadow: \"0 2px 4px rgba(0,0,0,.1)\",\n            zIndex: \"1001\",\n            minWidth: \"150px\",\n            overflow: \"hidden\"\n        });\n        document.body.appendChild(menu);\n        // メニュー内容\n        menu.innerHTML = `\n      <div id=\"menu-settings\" style=\"\n           padding:8px 16px; cursor:pointer; display:flex; align-items:center;\n           color:#007bff; font-weight:bold; font-size:14px; border-bottom:1px solid #ddd;\n           background:#f9f9f9;\">\n        <i class=\"bi bi-gear\" style=\"margin-right:6px;font-size:16px;\"></i> 設定\n      </div>\n      <div id=\"menu-logout\" style=\"\n           padding:8px 16px; cursor:pointer; display:flex; align-items:center;\n           color:#dc3545; font-weight:bold; font-size:14px; background:#f9f9f9;\">\n        <i class=\"bi bi-box-arrow-right\" style=\"margin-right:6px;font-size:16px;\"></i> ログアウト\n      </div>`;\n        // イベント登録\n        const settingsEl = document.getElementById(\"menu-settings\");\n        const logoutEl = document.getElementById(\"menu-logout\");\n        if (settingsEl) {\n            settingsEl.addEventListener(\"click\", ()=>{\n                window.location.href = \"/settings\";\n            });\n        }\n        if (logoutEl) {\n            logoutEl.addEventListener(\"click\", ()=>{\n                window.location.href = \"/logout\";\n            });\n        }\n        const [settingsItem, logoutItem] = [\n            settingsEl,\n            logoutEl\n        ];\n        if (settingsItem) {\n            settingsItem.addEventListener(\"mouseover\", ()=>{\n                settingsItem.style.background = \"#e6f0ff\";\n            });\n            settingsItem.addEventListener(\"mouseout\", ()=>{\n                settingsItem.style.background = \"#f9f9f9\";\n            });\n        }\n        if (logoutItem) {\n            logoutItem.addEventListener(\"mouseover\", ()=>{\n                logoutItem.style.background = \"#ffe6e6\";\n            });\n            logoutItem.addEventListener(\"mouseout\", ()=>{\n                logoutItem.style.background = \"#f9f9f9\";\n            });\n        }\n        // メニュー外クリックで非表示\n        document.addEventListener(\"click\", function docClick(e) {\n            const btn = document.getElementById(\"settings-btn\");\n            const target = e.target;\n            if (!target) return;\n            if (!menu?.contains(target) && (!btn || !btn.contains(target))) {\n                menu.style.display = \"none\";\n            }\n        });\n    }\n    // 表示/非表示トグル\n    menu.style.display = menu.style.display === \"block\" ? \"none\" : \"block\";\n}\nwindow.toggleUserMenu = toggleUserMenu;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxDQUFDcUQsVUFBVSxHQUFHO1lBQ2hDO1lBQ0FZLFdBQVd4QyxnQkFBZ0IsQ0FBQyxZQUFZO2dCQUN0Q3dDLFdBQVdqRSxLQUFLLENBQUNxRCxVQUFVLEdBQUc7WUFDaEM7UUFDRjtRQUVBLGdCQUFnQjtRQUNoQjFFLFNBQVM4QyxnQkFBZ0IsQ0FBQyxTQUFTLFNBQVN5QyxTQUFTOUIsQ0FBQztZQUNwRCxNQUFNK0IsTUFBTXhGLFNBQVNNLGNBQWMsQ0FBQztZQUNwQyxNQUFNbUYsU0FBU2hDLEVBQUVnQyxNQUFNO1lBQ3ZCLElBQUksQ0FBQ0EsUUFBUTtZQUNiLElBQUksQ0FBQ3hCLE1BQU15QixTQUFTRCxXQUFZLEVBQUNELE9BQU8sQ0FBQ0EsSUFBSUUsUUFBUSxDQUFDRCxPQUFNLEdBQUk7Z0JBQzlEeEIsS0FBSzVDLEtBQUssQ0FBQ0MsT0FBTyxHQUFHO1lBQ3ZCO1FBQ0Y7SUFDRjtJQUVBLFlBQVk7SUFDWjJDLEtBQUs1QyxLQUFLLENBQUNDLE9BQU8sR0FBRzJDLEtBQUs1QyxLQUFLLENBQUNDLE9BQU8sS0FBSyxVQUFVLFNBQVM7QUFDakU7QUFFQXZCLE9BQU9vRSxjQUFjLEdBQUdBO0FBRWQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHJpa2UtZnJvbnRlbmQvLi9zY3JpcHRzL2NvcmUvbWFpbi50cz80NWIzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogbWFpbi50c1xuICpcbiAqIOKWoCDjg5rjg7zjgrjliJ3mnJ/ljJbvvIhET01Db250ZW50TG9hZGVk77yJXG4gKiAgIC0g44Ot44Kw44Kk44Oz54q25oWL44KSIC9hcGkvY3VycmVudF91c2VyIOOBp+eiuuiqjeOBl+OAgeioreWumuODnOOCv+ODs+OCkuOAjOODreOCsOOCpOODs++8j+ODpuODvOOCtuODvOOCouOCpOOCs+ODs+OAjeOBq+WIh+abv1xuICogICAtIGxvY2FsU3RvcmFnZSDjgYvjgonliY3lm57jga4gY3VycmVudENoYXRSb29tSWQg44KS5b6p5YWDXG4gKiAgIC0g44K/44K544Kv44Kr44O844OJ44Go44CM44KC44Gj44Go6KaL44KL44CN44Oc44K/44Oz44Gu5Yid5pyf5YyWIChpbml0VG9nZ2xlVGFza3MgLyBpbml0U2V0dXBUYXNrQ2FyZHMpXG4gKiAgIC0g5pyA5Yid44Gv44K744OD44OI44Ki44OD44OX55S76Z2i44KS6KGo56S644GX44CB44OB44Oj44OD44OI44Or44O844Og5LiA6Kan44KS44Ot44O844OJXG4gKiAgIC0g5b6p5biw5pmC44Gr44OB44Oj44OD44OI5bGl5q2044KS44Ot44O844OJ77yI44Ot44O844Kr44Or77yL44K144O844OQ44O877yJXG4gKlxuICog4pagIFVJIOaTjeS9nOOBruOCpOODmeODs+ODiOeZu+mMslxuICogICAtIOaWsOimj+ODgeODo+ODg+ODiO+8j+OBk+OCjOOBvuOBp+OBruODgeODo+ODg+ODiOOCkuimi+OCi++8j+mAgeS/oe+8j0VudGVyIOmAgeS/oVxuICogICAtIOODhuOCreOCueODiOOCqOODquOCouOBruiHquWLlemrmOOBleiqv+aVtFxuICogICAtIOOAjOaIu+OCi+OAjeODnOOCv+ODs+OBp+OCu+ODg+ODiOOCouODg+ODl+eUu+mdouOBuFxuICogICAtIOeUu+mdouOCr+ODquODg+OCr+OBp+ODgeODo+ODg+ODiOODq+ODvOODoOOBru+8k+eCueODoeODi+ODpeODvOOCkumWieOBmOOCi1xuICpcbiAqIOKWoCDjg6bjg7zjgrbjg7zjg6Hjg4vjg6Xjg7zooajnpLogdG9nZ2xlVXNlck1lbnUoKVxuICogICAtIOOAjOioreWumuOAjeOAjOODreOCsOOCouOCpuODiOOAjeODoeODi+ODpeODvOOCkuWLleeahOeUn+aIkOODu+ihqOekuuODu+mdnuihqOekulxuICovXG5cbmZ1bmN0aW9uIG5vdGlmeUF1dGhTdGF0ZShsb2dnZWRJbjogYm9vbGVhbikge1xuICB3aW5kb3cubG9nZ2VkSW4gPSBsb2dnZWRJbjtcbiAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChcbiAgICBuZXcgQ3VzdG9tRXZlbnQoXCJhdXRoc3RhdGVjaGFuZ2VcIiwge1xuICAgICAgZGV0YWlsOiB7IGxvZ2dlZEluIH1cbiAgICB9KVxuICApO1xufVxuXG5mdW5jdGlvbiBpbml0QXBwKCkge1xuICBjb25zdCBhdXRoQnV0dG9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXV0aC1idXR0b25zXCIpO1xuICBjb25zdCBuZXdQcm9tcHRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9wZW5OZXdQcm9tcHRNb2RhbFwiKTtcbiAgY29uc3QgYWNjZXNzQ2hhdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWNjZXNzLWNoYXQtYnRuXCIpO1xuICBjb25zdCB1c2VySWNvbkVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VySWNvblwiKTtcbiAgY29uc3QgbG9naW5CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvZ2luLWJ0blwiKTtcbiAgY29uc3QgbmV3Q2hhdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3LWNoYXQtYnRuXCIpO1xuICBjb25zdCBzZW5kQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZW5kLWJ0blwiKTtcbiAgY29uc3QgdXNlcklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyLWlucHV0XCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsO1xuICBjb25zdCBiYWNrVG9TZXR1cEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFjay10by1zZXR1cFwiKTtcbiAgY29uc3QgY2hhdE1lc3NhZ2VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGF0LW1lc3NhZ2VzXCIpO1xuXG4gIGNvbnN0IGNhbGxTaG93U2V0dXBGb3JtID0gKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93LnNob3dTZXR1cEZvcm0gPT09IFwiZnVuY3Rpb25cIikgd2luZG93LnNob3dTZXR1cEZvcm0oKTtcbiAgfTtcblxuICBjb25zdCBjYWxsU2VuZE1lc3NhZ2UgPSAoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cuc2VuZE1lc3NhZ2UgPT09IFwiZnVuY3Rpb25cIikgd2luZG93LnNlbmRNZXNzYWdlKCk7XG4gIH07XG5cbiAgY29uc3QgYXBwbHlBdXRoVUkgPSAobG9nZ2VkSW46IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoIWF1dGhCdXR0b25zIHx8ICF1c2VySWNvbkVsKSByZXR1cm47XG5cbiAgICBpZiAobG9nZ2VkSW4pIHtcbiAgICAgIC8vIOODreOCsOOCpOODs+aZgu+8muiqjeiovOODnOOCv+ODs+OBr+maoOOBl+OAgeODpuODvOOCtuODvOOCouOCpOOCs+ODs+OCkuihqOekulxuICAgICAgYXV0aEJ1dHRvbnMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgdXNlckljb25FbC5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcblxuICAgICAgaWYgKG5ld1Byb21wdEJ0bikgbmV3UHJvbXB0QnRuLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgaWYgKGFjY2Vzc0NoYXRCdG4pIGFjY2Vzc0NoYXRCdG4uc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cbiAgICAgIGlmICh3aW5kb3cuaW5pdFRhc2tPcmRlckVkaXRpbmcpIHtcbiAgICAgICAgd2luZG93LmluaXRUYXNrT3JkZXJFZGl0aW5nKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOacquODreOCsOOCpOODs+aZgu+8muiqjeiovOODnOOCv+ODs+OBoOOBkeihqOekuuOAgeODpuODvOOCtuODvOOCouOCpOOCs+ODs+OBr+maoOOBmVxuICAgICAgYXV0aEJ1dHRvbnMuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgdXNlckljb25FbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgIGlmIChsb2dpbkJ0bikge1xuICAgICAgICBsb2dpbkJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvbG9naW5cIjtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8g44K/44K544Kv57eo6ZuG44Oc44K/44Oz44GM5q6L44Gj44Gm44GE44Gf44KJ5YmK6ZmkXG4gICAgICBjb25zdCBlZGl0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LXRhc2stb3JkZXItYnRuXCIpO1xuICAgICAgaWYgKGVkaXRCdG4pIGVkaXRCdG4ucmVtb3ZlKCk7XG5cbiAgICAgIC8vIOaWsOimj+ODl+ODreODs+ODl+ODiO+8humBjuWOu+ODgeODo+ODg+ODiOmWsuimp+ODnOOCv+ODs+OCkumdnuihqOekulxuICAgICAgaWYgKG5ld1Byb21wdEJ0bikgbmV3UHJvbXB0QnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIGlmIChhY2Nlc3NDaGF0QnRuKSBhY2Nlc3NDaGF0QnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG4gIH07XG5cbiAgLy8g4pa844Ot44Kw44Kk44Oz54q25oWL56K66KqN44GoVUnliLblvqFcbiAgZmV0Y2goXCIvYXBpL2N1cnJlbnRfdXNlclwiKVxuICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGNvbnN0IGxvZ2dlZEluID0gQm9vbGVhbihkYXRhLmxvZ2dlZF9pbik7XG4gICAgICBub3RpZnlBdXRoU3RhdGUobG9nZ2VkSW4pO1xuICAgICAgYXBwbHlBdXRoVUkobG9nZ2VkSW4pO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjaGVja2luZyBsb2dpbiBzdGF0dXM6XCIsIGVycik7XG4gICAgICBub3RpZnlBdXRoU3RhdGUoZmFsc2UpO1xuICAgICAgYXBwbHlBdXRoVUkoZmFsc2UpO1xuICAgIH0pO1xuXG4gIC8vIOKWvOODreODvOOCq+ODq+OBq+S/neWtmOOBleOCjOOBpuOBhOOCjOOBsOePvuWcqOOBruODgeODo+ODg+ODiOODq+ODvOODoOOCkuW+qeWFg1xuICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50Q2hhdFJvb21JZFwiKSkge1xuICAgIHdpbmRvdy5jdXJyZW50Q2hhdFJvb21JZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudENoYXRSb29tSWRcIik7XG4gIH1cblxuICAvLyDilrzliJ3mnJ/ljJZcbiAgaWYgKHR5cGVvZiB3aW5kb3cuaW5pdFRvZ2dsZVRhc2tzID09PSBcImZ1bmN0aW9uXCIpIHdpbmRvdy5pbml0VG9nZ2xlVGFza3MoKTtcbiAgaWYgKHR5cGVvZiB3aW5kb3cuaW5pdFNldHVwVGFza0NhcmRzID09PSBcImZ1bmN0aW9uXCIpIHdpbmRvdy5pbml0U2V0dXBUYXNrQ2FyZHMoKTtcblxuICAvLyDliJ3mnJ/ooajnpLrjga/jgrvjg4Pjg4jjgqLjg4Pjg5dcbiAgY2FsbFNob3dTZXR1cEZvcm0oKTtcbiAgaWYgKHR5cGVvZiB3aW5kb3cubG9hZENoYXRSb29tcyA9PT0gXCJmdW5jdGlvblwiKSB3aW5kb3cubG9hZENoYXRSb29tcygpO1xuXG4gIC8vIOaWsOimj+ODgeODo+ODg+ODiFxuICBpZiAobmV3Q2hhdEJ0bikge1xuICAgIG5ld0NoYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHdpbmRvdy5jdXJyZW50Q2hhdFJvb21JZCA9IG51bGw7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImN1cnJlbnRDaGF0Um9vbUlkXCIpO1xuICAgICAgaWYgKGNoYXRNZXNzYWdlcykgY2hhdE1lc3NhZ2VzLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICBjYWxsU2hvd1NldHVwRm9ybSgpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8g44CM44GT44KM44G+44Gn44Gu44OB44Oj44OD44OI44KS6KaL44KL44CNXG4gIGlmIChhY2Nlc3NDaGF0QnRuKSB7XG4gICAgYWNjZXNzQ2hhdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgZmV0Y2goXCIvYXBpL2dldF9jaGF0X3Jvb21zXCIpXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgY29uc3Qgcm9vbXMgPSBBcnJheS5pc0FycmF5KGRhdGEucm9vbXMpID8gZGF0YS5yb29tcyA6IFtdO1xuICAgICAgICAgIGlmIChyb29tcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyAx5Lu255uu44GM5pyA44KC5paw44GX44GE44Or44O844Og44Gq44Gu44Gn5YiH44KK5pu/44GIXG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5zd2l0Y2hDaGF0Um9vbSA9PT0gXCJmdW5jdGlvblwiKSB3aW5kb3cuc3dpdGNoQ2hhdFJvb20oU3RyaW5nKHJvb21zWzBdLmlkKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOODq+ODvOODoOOBjOOBquOBhOWgtOWQiOOBr+epuuOBruODgeODo+ODg+ODiOeUu+mdouOCkuihqOekulxuICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuc2hvd0NoYXRJbnRlcmZhY2UgPT09IFwiZnVuY3Rpb25cIikgd2luZG93LnNob3dDaGF0SW50ZXJmYWNlKCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5sb2FkQ2hhdFJvb21zID09PSBcImZ1bmN0aW9uXCIpIHdpbmRvdy5sb2FkQ2hhdFJvb21zKCk7XG4gICAgICAgICAgICBpZiAoY2hhdE1lc3NhZ2VzKSBjaGF0TWVzc2FnZXMuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIuODq+ODvOODoOS4gOimp+WPluW+l+WkseaVlzpcIiwgZXJyKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5zaG93Q2hhdEludGVyZmFjZSA9PT0gXCJmdW5jdGlvblwiKSB3aW5kb3cuc2hvd0NoYXRJbnRlcmZhY2UoKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5sb2FkQ2hhdFJvb21zID09PSBcImZ1bmN0aW9uXCIpIHdpbmRvdy5sb2FkQ2hhdFJvb21zKCk7XG4gICAgICAgICAgaWYgKGNoYXRNZXNzYWdlcykgY2hhdE1lc3NhZ2VzLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8g6YCB5L+hXG4gIGlmIChzZW5kQnRuKSBzZW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjYWxsU2VuZE1lc3NhZ2UpO1xuXG4gIC8vIEVudGVyIOmAgeS/oSAoU2hpZnQrRW50ZXIg44Gn5pS56KGMKVxuICBpZiAodXNlcklucHV0KSB7XG4gICAgdXNlcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjYWxsU2VuZE1lc3NhZ2UoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIOODhuOCreOCueODiOOCqOODquOCoumrmOOBleiHquWLleiqv+aVtFxuICAgIHVzZXJJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgdXNlcklucHV0LnN0eWxlLmhlaWdodCA9IFwiYXV0b1wiO1xuICAgICAgdXNlcklucHV0LnN0eWxlLmhlaWdodCA9IGAke3VzZXJJbnB1dC5zY3JvbGxIZWlnaHR9cHhgO1xuICAgIH0pO1xuICB9XG5cbiAgLy8g5oi744KL44Oc44K/44OzXG4gIGlmIChiYWNrVG9TZXR1cEJ0bikgYmFja1RvU2V0dXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNhbGxTaG93U2V0dXBGb3JtKTtcblxuICAvLyDnlLvpnaLjgq/jg6rjg4Pjgq/jgafjgrXjgqTjg4njg6Hjg4vjg6Xjg7zjga4gMyDngrnjg6Hjg4vjg6Xjg7zjgpLplonjgZjjgotcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PihcIi5yb29tLWFjdGlvbnMtbWVudVwiKS5mb3JFYWNoKChtZW51KSA9PiB7XG4gICAgICBtZW51LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImxvYWRpbmdcIikge1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBpbml0QXBwKTtcbn0gZWxzZSB7XG4gIGluaXRBcHAoKTtcbn1cblxuLyog4pa844Om44O844K244O844Oh44OL44Ol44O877yI6Kit5a6aIC8g44Ot44Kw44Ki44Km44OI77yJIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5mdW5jdGlvbiB0b2dnbGVVc2VyTWVudSgpIHtcbiAgbGV0IG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXItbWVudVwiKSBhcyBIVE1MRGl2RWxlbWVudCB8IG51bGw7XG5cbiAgaWYgKCFtZW51KSB7XG4gICAgLy8g44Oh44OL44Ol44O86KaB57Sg44KS55Sf5oiQXG4gICAgbWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbWVudS5pZCA9IFwidXNlci1tZW51XCI7XG5cbiAgICAvLyDjgrnjgr/jgqTjg6voqK3lrprvvIjjg6Ljg5DjgqTjg6vmmYLjga8gc3RhdGlj44CBUEPmmYLjga/lj7PkuIrntbblr77phY3nva7vvIlcbiAgICBPYmplY3QuYXNzaWduKG1lbnUuc3R5bGUsIHtcbiAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICB0b3A6IFwiNjBweFwiLCAvLyDoqK3lrprjgqLjgqTjgrPjg7PkuIvjgasgMTBweCDjg57jg7zjgrjjg7NcbiAgICAgIHJpZ2h0OiBcIjEwcHhcIixcbiAgICAgIGJhY2tncm91bmQ6IFwiI2ZmZlwiLFxuICAgICAgYm9yZGVyOiBcIjFweCBzb2xpZCAjZGRkXCIsXG4gICAgICBib3JkZXJSYWRpdXM6IFwiNnB4XCIsXG4gICAgICBib3hTaGFkb3c6IFwiMCAycHggNHB4IHJnYmEoMCwwLDAsLjEpXCIsXG4gICAgICB6SW5kZXg6IFwiMTAwMVwiLFxuICAgICAgbWluV2lkdGg6IFwiMTUwcHhcIixcbiAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiXG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1lbnUpO1xuXG4gICAgLy8g44Oh44OL44Ol44O85YaF5a65XG4gICAgbWVudS5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGlkPVwibWVudS1zZXR0aW5nc1wiIHN0eWxlPVwiXG4gICAgICAgICAgIHBhZGRpbmc6OHB4IDE2cHg7IGN1cnNvcjpwb2ludGVyOyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjtcbiAgICAgICAgICAgY29sb3I6IzAwN2JmZjsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjE0cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNkZGQ7XG4gICAgICAgICAgIGJhY2tncm91bmQ6I2Y5ZjlmOTtcIj5cbiAgICAgICAgPGkgY2xhc3M9XCJiaSBiaS1nZWFyXCIgc3R5bGU9XCJtYXJnaW4tcmlnaHQ6NnB4O2ZvbnQtc2l6ZToxNnB4O1wiPjwvaT4g6Kit5a6aXG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgaWQ9XCJtZW51LWxvZ291dFwiIHN0eWxlPVwiXG4gICAgICAgICAgIHBhZGRpbmc6OHB4IDE2cHg7IGN1cnNvcjpwb2ludGVyOyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjtcbiAgICAgICAgICAgY29sb3I6I2RjMzU0NTsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjE0cHg7IGJhY2tncm91bmQ6I2Y5ZjlmOTtcIj5cbiAgICAgICAgPGkgY2xhc3M9XCJiaSBiaS1ib3gtYXJyb3ctcmlnaHRcIiBzdHlsZT1cIm1hcmdpbi1yaWdodDo2cHg7Zm9udC1zaXplOjE2cHg7XCI+PC9pPiDjg63jgrDjgqLjgqbjg4hcbiAgICAgIDwvZGl2PmA7XG5cbiAgICAvLyDjgqTjg5njg7Pjg4jnmbvpjLJcbiAgICBjb25zdCBzZXR0aW5nc0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZW51LXNldHRpbmdzXCIpO1xuICAgIGNvbnN0IGxvZ291dEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZW51LWxvZ291dFwiKTtcbiAgICBpZiAoc2V0dGluZ3NFbCkge1xuICAgICAgc2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL3NldHRpbmdzXCI7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGxvZ291dEVsKSB7XG4gICAgICBsb2dvdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL2xvZ291dFwiO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgW3NldHRpbmdzSXRlbSwgbG9nb3V0SXRlbV0gPSBbc2V0dGluZ3NFbCwgbG9nb3V0RWxdO1xuICAgIGlmIChzZXR0aW5nc0l0ZW0pIHtcbiAgICAgIHNldHRpbmdzSXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsICgpID0+IHtcbiAgICAgICAgc2V0dGluZ3NJdGVtLnN0eWxlLmJhY2tncm91bmQgPSBcIiNlNmYwZmZcIjtcbiAgICAgIH0pO1xuICAgICAgc2V0dGluZ3NJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XG4gICAgICAgIHNldHRpbmdzSXRlbS5zdHlsZS5iYWNrZ3JvdW5kID0gXCIjZjlmOWY5XCI7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGxvZ291dEl0ZW0pIHtcbiAgICAgIGxvZ291dEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCAoKSA9PiB7XG4gICAgICAgIGxvZ291dEl0ZW0uc3R5bGUuYmFja2dyb3VuZCA9IFwiI2ZmZTZlNlwiO1xuICAgICAgfSk7XG4gICAgICBsb2dvdXRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XG4gICAgICAgIGxvZ291dEl0ZW0uc3R5bGUuYmFja2dyb3VuZCA9IFwiI2Y5ZjlmOVwiO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g44Oh44OL44Ol44O85aSW44Kv44Oq44OD44Kv44Gn6Z2e6KGo56S6XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIGRvY0NsaWNrKGUpIHtcbiAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2V0dGluZ3MtYnRuXCIpO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgTm9kZSB8IG51bGw7XG4gICAgICBpZiAoIXRhcmdldCkgcmV0dXJuO1xuICAgICAgaWYgKCFtZW51Py5jb250YWlucyh0YXJnZXQpICYmICghYnRuIHx8ICFidG4uY29udGFpbnModGFyZ2V0KSkpIHtcbiAgICAgICAgbWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyDooajnpLov6Z2e6KGo56S644OI44Kw44OrXG4gIG1lbnUuc3R5bGUuZGlzcGxheSA9IG1lbnUuc3R5bGUuZGlzcGxheSA9PT0gXCJibG9ja1wiID8gXCJub25lXCIgOiBcImJsb2NrXCI7XG59XG5cbndpbmRvdy50b2dnbGVVc2VyTWVudSA9IHRvZ2dsZVVzZXJNZW51O1xuXG5leHBvcnQge307XG4iXSwibmFtZXMiOlsibm90aWZ5QXV0aFN0YXRlIiwibG9nZ2VkSW4iLCJ3aW5kb3ciLCJkb2N1bWVudCIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsImluaXRBcHAiLCJhdXRoQnV0dG9ucyIsImdldEVsZW1lbnRCeUlkIiwibmV3UHJvbXB0QnRuIiwiYWNjZXNzQ2hhdEJ0biIsInVzZXJJY29uRWwiLCJsb2dpbkJ0biIsIm5ld0NoYXRCdG4iLCJzZW5kQnRuIiwidXNlcklucHV0IiwiYmFja1RvU2V0dXBCdG4iLCJjaGF0TWVzc2FnZXMiLCJjYWxsU2hvd1NldHVwRm9ybSIsInNob3dTZXR1cEZvcm0iLCJjYWxsU2VuZE1lc3NhZ2UiLCJzZW5kTWVzc2FnZSIsImFwcGx5QXV0aFVJIiwic3R5bGUiLCJkaXNwbGF5IiwiaW5pdFRhc2tPcmRlckVkaXRpbmciLCJvbmNsaWNrIiwibG9jYXRpb24iLCJocmVmIiwiZWRpdEJ0biIsInJlbW92ZSIsImZldGNoIiwidGhlbiIsInJlcyIsImpzb24iLCJkYXRhIiwiQm9vbGVhbiIsImxvZ2dlZF9pbiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImN1cnJlbnRDaGF0Um9vbUlkIiwiaW5pdFRvZ2dsZVRhc2tzIiwiaW5pdFNldHVwVGFza0NhcmRzIiwibG9hZENoYXRSb29tcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVJdGVtIiwiaW5uZXJIVE1MIiwicm9vbXMiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJzd2l0Y2hDaGF0Um9vbSIsIlN0cmluZyIsImlkIiwic2hvd0NoYXRJbnRlcmZhY2UiLCJlIiwia2V5Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsImhlaWdodCIsInNjcm9sbEhlaWdodCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwibWVudSIsInJlYWR5U3RhdGUiLCJ0b2dnbGVVc2VyTWVudSIsImNyZWF0ZUVsZW1lbnQiLCJPYmplY3QiLCJhc3NpZ24iLCJwb3NpdGlvbiIsInRvcCIsInJpZ2h0IiwiYmFja2dyb3VuZCIsImJvcmRlciIsImJvcmRlclJhZGl1cyIsImJveFNoYWRvdyIsInpJbmRleCIsIm1pbldpZHRoIiwib3ZlcmZsb3ciLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJzZXR0aW5nc0VsIiwibG9nb3V0RWwiLCJzZXR0aW5nc0l0ZW0iLCJsb2dvdXRJdGVtIiwiZG9jQ2xpY2siLCJidG4iLCJ0YXJnZXQiLCJjb250YWlucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scripts/core/main.ts\n");

/***/ }),

/***/ "./scripts/entries/chat.ts":
/*!*********************************!*\
  !*** ./scripts/entries/chat.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/dom */ \"./scripts/core/dom.ts\");\n/* harmony import */ var _chat_message_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../chat/message_utils */ \"./scripts/chat/message_utils.ts\");\n/* harmony import */ var _chat_chat_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../chat/chat_ui */ \"./scripts/chat/chat_ui.ts\");\n/* harmony import */ var _chat_chat_messages__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../chat/chat_messages */ \"./scripts/chat/chat_messages.ts\");\n/* harmony import */ var _chat_chat_history__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../chat/chat_history */ \"./scripts/chat/chat_history.ts\");\n/* harmony import */ var _chat_chat_rooms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../chat/chat_rooms */ \"./scripts/chat/chat_rooms.ts\");\n/* harmony import */ var _chat_chat_controller__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../chat/chat_controller */ \"./scripts/chat/chat_controller.ts\");\n/* harmony import */ var _setup_setup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../setup/setup */ \"./scripts/setup/setup.ts\");\n/* harmony import */ var _core_main__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/main */ \"./scripts/core/main.ts\");\n/* harmony import */ var _setup_task_manager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../setup/task_manager */ \"./scripts/setup/task_manager.ts\");\n/* harmony import */ var _setup_new_prompt_modal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../setup/new_prompt_modal */ \"./scripts/setup/new_prompt_modal.ts\");\n/* harmony import */ var _components_popup_menu__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/popup_menu */ \"./scripts/components/popup_menu.ts\");\n/* harmony import */ var _components_chat_popup_menu__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../components/chat/popup_menu */ \"./scripts/components/chat/popup_menu.ts\");\n/* harmony import */ var _components_user_icon__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../components/user_icon */ \"./scripts/components/user_icon.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHRzL2VudHJpZXMvY2hhdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBcUI7QUFDVTtBQUNOO0FBQ007QUFDRDtBQUNGO0FBQ0s7QUFDVDtBQUNGO0FBQ1M7QUFDSTtBQUNEO0FBQ0s7QUFDTiIsInNvdXJjZXMiOlsid2VicGFjazovL3N0cmlrZS1mcm9udGVuZC8uL3NjcmlwdHMvZW50cmllcy9jaGF0LnRzPzE3ODUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwiLi4vY29yZS9kb21cIjtcbmltcG9ydCBcIi4uL2NoYXQvbWVzc2FnZV91dGlsc1wiO1xuaW1wb3J0IFwiLi4vY2hhdC9jaGF0X3VpXCI7XG5pbXBvcnQgXCIuLi9jaGF0L2NoYXRfbWVzc2FnZXNcIjtcbmltcG9ydCBcIi4uL2NoYXQvY2hhdF9oaXN0b3J5XCI7XG5pbXBvcnQgXCIuLi9jaGF0L2NoYXRfcm9vbXNcIjtcbmltcG9ydCBcIi4uL2NoYXQvY2hhdF9jb250cm9sbGVyXCI7XG5pbXBvcnQgXCIuLi9zZXR1cC9zZXR1cFwiO1xuaW1wb3J0IFwiLi4vY29yZS9tYWluXCI7XG5pbXBvcnQgXCIuLi9zZXR1cC90YXNrX21hbmFnZXJcIjtcbmltcG9ydCBcIi4uL3NldHVwL25ld19wcm9tcHRfbW9kYWxcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvcG9wdXBfbWVudVwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9jaGF0L3BvcHVwX21lbnVcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvdXNlcl9pY29uXCI7XG5cbmV4cG9ydCB7fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./scripts/entries/chat.ts\n");

/***/ }),

/***/ "./scripts/setup/new_prompt_modal.ts":
/*!*******************************************!*\
  !*** ./scripts/setup/new_prompt_modal.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\nfunction initNewPromptModal() {\n    const openModalBtn = document.getElementById(\"openNewPromptModal\");\n    const plusIcon = openModalBtn?.querySelector(\".bi-plus-lg\");\n    const newPromptModal = document.getElementById(\"newPromptModal\");\n    const modalCloseBtn = document.getElementById(\"newModalCloseBtn\");\n    const guardrailCheckbox = document.getElementById(\"new-guardrail-checkbox\");\n    const guardrailFields = document.getElementById(\"new-guardrail-fields\");\n    const newPostForm = document.getElementById(\"newPostForm\");\n    const togglePlusRotation = (isRotated, options = {})=>{\n        if (!openModalBtn) return;\n        const { animate = true } = options;\n        if (!animate && plusIcon) {\n            plusIcon.classList.add(\"no-transition\");\n            openModalBtn.classList.toggle(\"is-rotated\", Boolean(isRotated));\n            requestAnimationFrame(()=>{\n                plusIcon.classList.remove(\"no-transition\");\n            });\n            return;\n        }\n        openModalBtn.classList.toggle(\"is-rotated\", Boolean(isRotated));\n    };\n    const closeModal = (options = {})=>{\n        if (!newPromptModal) return;\n        newPromptModal.classList.remove(\"show\");\n        if (options.skipRotation) {\n            if (openModalBtn) {\n                openModalBtn.classList.remove(\"is-rotated\");\n            }\n            return;\n        }\n        togglePlusRotation(false, {\n            animate: Boolean(options.animateRotation)\n        });\n    };\n    const openModal = (options)=>{\n        if (!newPromptModal) return;\n        newPromptModal.classList.add(\"show\");\n        togglePlusRotation(true, {\n            animate: Boolean(options?.animateRotation)\n        });\n    };\n    // 初期表示では回転アニメーションを発火させない\n    if (newPromptModal?.classList.contains(\"show\")) {\n        closeModal({\n            skipRotation: true\n        });\n    } else if (openModalBtn) {\n        openModalBtn.classList.remove(\"is-rotated\");\n    }\n    // ＋ボタンを押すとモーダル表示\n    if (openModalBtn && newPromptModal) {\n        openModalBtn.addEventListener(\"click\", function(e) {\n            e.preventDefault();\n            if (newPromptModal.classList.contains(\"show\")) {\n                closeModal({\n                    animateRotation: true\n                });\n            } else {\n                openModal({\n                    animateRotation: true\n                });\n            }\n        });\n    }\n    // 閉じるボタンでモーダルを閉じる\n    if (modalCloseBtn) {\n        modalCloseBtn.addEventListener(\"click\", function(e) {\n            e.preventDefault();\n            closeModal();\n        });\n    }\n    // モーダル背景クリックで閉じる\n    if (newPromptModal) {\n        newPromptModal.addEventListener(\"click\", function(e) {\n            if (e.target === newPromptModal) {\n                closeModal();\n            }\n        });\n    }\n    // ガードレールチェックボックスで入出力例部分の表示切替\n    if (guardrailCheckbox && guardrailFields) {\n        guardrailCheckbox.addEventListener(\"change\", function() {\n            guardrailFields.style.display = guardrailCheckbox.checked ? \"block\" : \"none\";\n        });\n    }\n    // モーダル内フォームの送信\n    if (newPostForm) {\n        newPostForm.addEventListener(\"submit\", function(e) {\n            e.preventDefault();\n            const titleInput = document.getElementById(\"new-prompt-title\");\n            const contentInput = document.getElementById(\"new-prompt-content\");\n            if (!titleInput || !contentInput) {\n                alert(\"入力欄が見つかりませんでした。\");\n                return;\n            }\n            // 各入力項目の値を取得\n            const title = titleInput.value;\n            const content = contentInput.value;\n            let inputExample = \"\";\n            let outputExample = \"\";\n            if (guardrailCheckbox?.checked) {\n                const inputEl = document.getElementById(\"new-prompt-input-example\");\n                const outputEl = document.getElementById(\"new-prompt-output-example\");\n                inputExample = inputEl ? inputEl.value : \"\";\n                outputExample = outputEl ? outputEl.value : \"\";\n            }\n            const data = {\n                title: title,\n                prompt_content: content,\n                input_examples: inputExample,\n                output_examples: outputExample\n            };\n            // POST リクエストでサーバーに送信\n            fetch(\"/api/add_task\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(data)\n            }).then((response)=>response.json()).then((result)=>{\n                if (result.message) {\n                    alert(result.message);\n                    newPostForm.reset();\n                    if (guardrailFields) guardrailFields.style.display = \"none\";\n                    closeModal();\n                    // ここでタスク一覧を更新する\n                    if (window.loadTaskCards) window.loadTaskCards();\n                } else {\n                    alert(\"エラー: \" + result.error);\n                }\n            }).catch((error)=>{\n                alert(\"エラーが発生しました: \" + error);\n            });\n        });\n    }\n}\nif (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", initNewPromptModal);\n} else {\n    initNewPromptModal();\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxnQkFBZ0I7b0JBQ2hCLElBQUlzQyxPQUFPQyxhQUFhLEVBQUVELE9BQU9DLGFBQWE7Z0JBQ2hELE9BQU87b0JBQ0x6QixNQUFNLFVBQVVxQixPQUFPSyxLQUFLO2dCQUM5QjtZQUNGLEdBQ0NDLEtBQUssQ0FBQyxDQUFDRDtnQkFDTjFCLE1BQU0saUJBQWlCMEI7WUFDekI7UUFDSjtJQUNGO0FBQ0Y7QUFFQSxJQUFJM0QsU0FBUzZELFVBQVUsS0FBSyxXQUFXO0lBQ3JDN0QsU0FBU3dCLGdCQUFnQixDQUFDLG9CQUFvQjFCO0FBQ2hELE9BQU87SUFDTEE7QUFDRjtBQUVVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RyaWtlLWZyb250ZW5kLy4vc2NyaXB0cy9zZXR1cC9uZXdfcHJvbXB0X21vZGFsLnRzPzg5M2MiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gaW5pdE5ld1Byb21wdE1vZGFsKCkge1xuICBjb25zdCBvcGVuTW9kYWxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9wZW5OZXdQcm9tcHRNb2RhbFwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGw7XG4gIGNvbnN0IHBsdXNJY29uID0gb3Blbk1vZGFsQnRuPy5xdWVyeVNlbGVjdG9yKFwiLmJpLXBsdXMtbGdcIikgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuICBjb25zdCBuZXdQcm9tcHRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3UHJvbXB0TW9kYWxcIik7XG4gIGNvbnN0IG1vZGFsQ2xvc2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ld01vZGFsQ2xvc2VCdG5cIik7XG4gIGNvbnN0IGd1YXJkcmFpbENoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXctZ3VhcmRyYWlsLWNoZWNrYm94XCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsO1xuICBjb25zdCBndWFyZHJhaWxGaWVsZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1ndWFyZHJhaWwtZmllbGRzXCIpO1xuICBjb25zdCBuZXdQb3N0Rm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3UG9zdEZvcm1cIikgYXMgSFRNTEZvcm1FbGVtZW50IHwgbnVsbDtcblxuICBjb25zdCB0b2dnbGVQbHVzUm90YXRpb24gPSAoaXNSb3RhdGVkOiBib29sZWFuLCBvcHRpb25zOiB7IGFuaW1hdGU/OiBib29sZWFuIH0gPSB7fSkgPT4ge1xuICAgIGlmICghb3Blbk1vZGFsQnRuKSByZXR1cm47XG5cbiAgICBjb25zdCB7IGFuaW1hdGUgPSB0cnVlIH0gPSBvcHRpb25zO1xuXG4gICAgaWYgKCFhbmltYXRlICYmIHBsdXNJY29uKSB7XG4gICAgICBwbHVzSWNvbi5jbGFzc0xpc3QuYWRkKFwibm8tdHJhbnNpdGlvblwiKTtcbiAgICAgIG9wZW5Nb2RhbEJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtcm90YXRlZFwiLCBCb29sZWFuKGlzUm90YXRlZCkpO1xuXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBwbHVzSWNvbi5jbGFzc0xpc3QucmVtb3ZlKFwibm8tdHJhbnNpdGlvblwiKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG9wZW5Nb2RhbEJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtcm90YXRlZFwiLCBCb29sZWFuKGlzUm90YXRlZCkpO1xuICB9O1xuXG4gIGNvbnN0IGNsb3NlTW9kYWwgPSAob3B0aW9uczogeyBza2lwUm90YXRpb24/OiBib29sZWFuOyBhbmltYXRlUm90YXRpb24/OiBib29sZWFuIH0gPSB7fSkgPT4ge1xuICAgIGlmICghbmV3UHJvbXB0TW9kYWwpIHJldHVybjtcbiAgICBuZXdQcm9tcHRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcblxuICAgIGlmIChvcHRpb25zLnNraXBSb3RhdGlvbikge1xuICAgICAgaWYgKG9wZW5Nb2RhbEJ0bikge1xuICAgICAgICBvcGVuTW9kYWxCdG4uY2xhc3NMaXN0LnJlbW92ZShcImlzLXJvdGF0ZWRcIik7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdG9nZ2xlUGx1c1JvdGF0aW9uKGZhbHNlLCB7IGFuaW1hdGU6IEJvb2xlYW4ob3B0aW9ucy5hbmltYXRlUm90YXRpb24pIH0pO1xuICB9O1xuXG4gIGNvbnN0IG9wZW5Nb2RhbCA9IChvcHRpb25zPzogeyBhbmltYXRlUm90YXRpb24/OiBib29sZWFuIH0pID0+IHtcbiAgICBpZiAoIW5ld1Byb21wdE1vZGFsKSByZXR1cm47XG4gICAgbmV3UHJvbXB0TW9kYWwuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XG4gICAgdG9nZ2xlUGx1c1JvdGF0aW9uKHRydWUsIHsgYW5pbWF0ZTogQm9vbGVhbihvcHRpb25zPy5hbmltYXRlUm90YXRpb24pIH0pO1xuICB9O1xuXG4gIC8vIOWIneacn+ihqOekuuOBp+OBr+Wbnui7ouOCouODi+ODoeODvOOCt+ODp+ODs+OCkueZuueBq+OBleOBm+OBquOBhFxuICBpZiAobmV3UHJvbXB0TW9kYWw/LmNsYXNzTGlzdC5jb250YWlucyhcInNob3dcIikpIHtcbiAgICBjbG9zZU1vZGFsKHsgc2tpcFJvdGF0aW9uOiB0cnVlIH0pO1xuICB9IGVsc2UgaWYgKG9wZW5Nb2RhbEJ0bikge1xuICAgIG9wZW5Nb2RhbEJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtcm90YXRlZFwiKTtcbiAgfVxuXG4gIC8vIO+8i+ODnOOCv+ODs+OCkuaKvOOBmeOBqOODouODvOODgOODq+ihqOekulxuICBpZiAob3Blbk1vZGFsQnRuICYmIG5ld1Byb21wdE1vZGFsKSB7XG4gICAgb3Blbk1vZGFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKG5ld1Byb21wdE1vZGFsLmNsYXNzTGlzdC5jb250YWlucyhcInNob3dcIikpIHtcbiAgICAgICAgY2xvc2VNb2RhbCh7IGFuaW1hdGVSb3RhdGlvbjogdHJ1ZSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wZW5Nb2RhbCh7IGFuaW1hdGVSb3RhdGlvbjogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIOmWieOBmOOCi+ODnOOCv+ODs+OBp+ODouODvOODgOODq+OCkumWieOBmOOCi1xuICBpZiAobW9kYWxDbG9zZUJ0bikge1xuICAgIG1vZGFsQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjbG9zZU1vZGFsKCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyDjg6Ljg7zjg4Djg6vog4zmma/jgq/jg6rjg4Pjgq/jgafplonjgZjjgotcbiAgaWYgKG5ld1Byb21wdE1vZGFsKSB7XG4gICAgbmV3UHJvbXB0TW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZS50YXJnZXQgPT09IG5ld1Byb21wdE1vZGFsKSB7XG4gICAgICAgIGNsb3NlTW9kYWwoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIOOCrOODvOODieODrOODvOODq+ODgeOCp+ODg+OCr+ODnOODg+OCr+OCueOBp+WFpeWHuuWKm+S+i+mDqOWIhuOBruihqOekuuWIh+abv1xuICBpZiAoZ3VhcmRyYWlsQ2hlY2tib3ggJiYgZ3VhcmRyYWlsRmllbGRzKSB7XG4gICAgZ3VhcmRyYWlsQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBndWFyZHJhaWxGaWVsZHMuc3R5bGUuZGlzcGxheSA9IGd1YXJkcmFpbENoZWNrYm94LmNoZWNrZWQgPyBcImJsb2NrXCIgOiBcIm5vbmVcIjtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIOODouODvOODgOODq+WGheODleOCqeODvOODoOOBrumAgeS/oVxuICBpZiAobmV3UG9zdEZvcm0pIHtcbiAgICBuZXdQb3N0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGNvbnN0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1wcm9tcHQtdGl0bGVcIikgYXMgSFRNTElucHV0RWxlbWVudCB8IG51bGw7XG4gICAgICBjb25zdCBjb250ZW50SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1wcm9tcHQtY29udGVudFwiKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbDtcbiAgICAgIGlmICghdGl0bGVJbnB1dCB8fCAhY29udGVudElucHV0KSB7XG4gICAgICAgIGFsZXJ0KFwi5YWl5Yqb5qyE44GM6KaL44Gk44GL44KK44G+44Gb44KT44Gn44GX44Gf44CCXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIOWQhOWFpeWKm+mgheebruOBruWApOOCkuWPluW+l1xuICAgICAgY29uc3QgdGl0bGUgPSB0aXRsZUlucHV0LnZhbHVlO1xuICAgICAgY29uc3QgY29udGVudCA9IGNvbnRlbnRJbnB1dC52YWx1ZTtcbiAgICAgIGxldCBpbnB1dEV4YW1wbGUgPSBcIlwiO1xuICAgICAgbGV0IG91dHB1dEV4YW1wbGUgPSBcIlwiO1xuICAgICAgaWYgKGd1YXJkcmFpbENoZWNrYm94Py5jaGVja2VkKSB7XG4gICAgICAgIGNvbnN0IGlucHV0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1wcm9tcHQtaW5wdXQtZXhhbXBsZVwiKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgY29uc3Qgb3V0cHV0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1wcm9tcHQtb3V0cHV0LWV4YW1wbGVcIikgYXMgSFRNTFRleHRBcmVhRWxlbWVudCB8IG51bGw7XG4gICAgICAgIGlucHV0RXhhbXBsZSA9IGlucHV0RWwgPyBpbnB1dEVsLnZhbHVlIDogXCJcIjtcbiAgICAgICAgb3V0cHV0RXhhbXBsZSA9IG91dHB1dEVsID8gb3V0cHV0RWwudmFsdWUgOiBcIlwiO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgIHByb21wdF9jb250ZW50OiBjb250ZW50LFxuICAgICAgICBpbnB1dF9leGFtcGxlczogaW5wdXRFeGFtcGxlLFxuICAgICAgICBvdXRwdXRfZXhhbXBsZXM6IG91dHB1dEV4YW1wbGVcbiAgICAgIH07XG5cbiAgICAgIC8vIFBPU1Qg44Oq44Kv44Ko44K544OI44Gn44K144O844OQ44O844Gr6YCB5L+hXG4gICAgICBmZXRjaChcIi9hcGkvYWRkX3Rhc2tcIiwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgaWYgKHJlc3VsdC5tZXNzYWdlKSB7XG4gICAgICAgICAgICBhbGVydChyZXN1bHQubWVzc2FnZSk7XG4gICAgICAgICAgICBuZXdQb3N0Rm9ybS5yZXNldCgpO1xuICAgICAgICAgICAgaWYgKGd1YXJkcmFpbEZpZWxkcykgZ3VhcmRyYWlsRmllbGRzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIGNsb3NlTW9kYWwoKTtcblxuICAgICAgICAgICAgLy8g44GT44GT44Gn44K/44K544Kv5LiA6Kan44KS5pu05paw44GZ44KLXG4gICAgICAgICAgICBpZiAod2luZG93LmxvYWRUYXNrQ2FyZHMpIHdpbmRvdy5sb2FkVGFza0NhcmRzKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFsZXJ0KFwi44Ko44Op44O8OiBcIiArIHJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgYWxlcnQoXCLjgqjjg6njg7zjgYznmbrnlJ/jgZfjgb7jgZfjgZ86IFwiICsgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5pZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJsb2FkaW5nXCIpIHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgaW5pdE5ld1Byb21wdE1vZGFsKTtcbn0gZWxzZSB7XG4gIGluaXROZXdQcm9tcHRNb2RhbCgpO1xufVxuXG5leHBvcnQge307XG4iXSwibmFtZXMiOlsiaW5pdE5ld1Byb21wdE1vZGFsIiwib3Blbk1vZGFsQnRuIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInBsdXNJY29uIiwicXVlcnlTZWxlY3RvciIsIm5ld1Byb21wdE1vZGFsIiwibW9kYWxDbG9zZUJ0biIsImd1YXJkcmFpbENoZWNrYm94IiwiZ3VhcmRyYWlsRmllbGRzIiwibmV3UG9zdEZvcm0iLCJ0b2dnbGVQbHVzUm90YXRpb24iLCJpc1JvdGF0ZWQiLCJvcHRpb25zIiwiYW5pbWF0ZSIsImNsYXNzTGlzdCIsImFkZCIsInRvZ2dsZSIsIkJvb2xlYW4iLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyZW1vdmUiLCJjbG9zZU1vZGFsIiwic2tpcFJvdGF0aW9uIiwiYW5pbWF0ZVJvdGF0aW9uIiwib3Blbk1vZGFsIiwiY29udGFpbnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0Iiwic3R5bGUiLCJkaXNwbGF5IiwiY2hlY2tlZCIsInRpdGxlSW5wdXQiLCJjb250ZW50SW5wdXQiLCJhbGVydCIsInRpdGxlIiwidmFsdWUiLCJjb250ZW50IiwiaW5wdXRFeGFtcGxlIiwib3V0cHV0RXhhbXBsZSIsImlucHV0RWwiLCJvdXRwdXRFbCIsImRhdGEiLCJwcm9tcHRfY29udGVudCIsImlucHV0X2V4YW1wbGVzIiwib3V0cHV0X2V4YW1wbGVzIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwicmVzdWx0IiwibWVzc2FnZSIsInJlc2V0Iiwid2luZG93IiwibG9hZFRhc2tDYXJkcyIsImVycm9yIiwiY2F0Y2giLCJyZWFkeVN0YXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./scripts/setup/new_prompt_modal.ts\n");

/***/ }),

/***/ "./scripts/setup/setup.ts":
/*!********************************!*\
  !*** ./scripts/setup/setup.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/**\n * setup.ts\n *\n * ■ タスクカードの取得・表示 (loadTaskCards)\n *   - /api/tasks からタスク一覧を取得し、.prompt-card を動的生成\n *   - カード下向きアイコンでタスク詳細モーダル（プロンプトテンプレート／入出力例）を表示\n *\n * ■ セットアップ画面切替 (showSetupForm)\n *   - チャット画面を隠し、セットアップ画面を再表示\n *\n * ■ タスク選択でチャット開始 (handleTaskCardClick)\n *   - 「状況・作業環境」入力＋カードクリックで新規チャットルーム作成\n *   - 最初のメッセージを Bot に投げてチャットを開始\n *\n * ■ 「もっと見る」折り畳み機能 (initToggleTasks)\n *   - タスクが 6 件超えると 7 件目以降を折り畳み、展開／折り畳みボタンを生成\n */ // ▼ 1. タスクカード生成・詳細表示 -------------------------------------------------\nconst FALLBACK_TASKS = [\n    {\n        name: \"\\uD83D\\uDCE7 メール作成\",\n        prompt_template: \"状況や作業環境をもとに、メールを作成して。\",\n        input_examples: \"新製品リリースの案内のメール作成をしたい。\",\n        output_examples: \"件名：新製品発売のご案内\\n本文：拝啓　時下ますますご健勝のこととお慶び申し上げます。さて、この度弊社では画期的な新製品をリリースいたしましたので、ご案内申し上げます。つきましては、詳細資料を同封いたしましたのでご一読いただけますと幸甚です。今後とも何卒よろしくお願い申し上げます。\"\n    },\n    {\n        name: \"\\uD83D\\uDCA1 アイデア発想\",\n        prompt_template: \"独創的なアイデアの発想をしてほしい。\",\n        input_examples: \"店舗の集客を増やすためのアイデアを考えて。\",\n        output_examples: \"1. お得なクーポン付きSNSキャンペーンの実施 2. 店舗イベントの定期開催 3. 地域の他店舗と連携したスタンプラリー企画\"\n    },\n    {\n        name: \"\\uD83D\\uDCC4 要約\",\n        prompt_template: \"状況・作業環境に入力された文を要約して。\",\n        input_examples: \"長編小説のストーリーを簡潔にまとめたいので、要約して。\",\n        output_examples: \"本作品は、主人公が旅を通じて自分自身と向き合い、家族の絆を再確認する物語です。主要なテーマは成長と和解で、山場となるシーンでは過去の葛藤を乗り越える様子が描かれています。\"\n    },\n    {\n        name: \"\\uD83D\\uDEE0️ 問題解決\",\n        prompt_template: \"問題解決に協力してほしい。\",\n        input_examples: \"人事トラブル（メンバー同士の衝突）の問題解決をしたい。\",\n        output_examples: \"1. 当事者双方からヒアリングを行い、事実関係を整理する 2. 第三者が入る調整会議を設定し、意見をすり合わせる 3. 再発防止のためのコミュニケーションルールを策定\"\n    },\n    {\n        name: \"\\uD83D\\uDCCB 問題へ回答\",\n        prompt_template: \"問題へ回答するのを手伝ってほしい。\",\n        input_examples: \"物理の問題：自由落下の公式を教えてください。\",\n        output_examples: \"自由落下の距離を表す公式は、d = (1/2)gt^2 です（gは重力加速度、tは落下時間）。初速度が0の場合に適用できます。\"\n    },\n    {\n        name: \"ℹ️ 情報提供\",\n        prompt_template: \"状況・作業環境に入力されたものについての情報提供をしてほしい。\",\n        input_examples: \"新型コロナウイルスの最新情報が知りたい。\",\n        output_examples: \"現在の感染状況は地域によって大きく異なりますが、新しい変異株の動向やワクチン接種の進捗が焦点となっています。最新情報は厚生労働省の公式サイトやWHOのリリースを確認するのが望ましいです。\"\n    },\n    {\n        name: \"\\uD83C\\uDF73 レシピ\",\n        prompt_template: \"状況・作業環境に入力された情報をもとにレシピを考えて。\",\n        input_examples: \"野菜がメインで、ヘルシーな朝食のレシピが知りたい。\",\n        output_examples: \"グリル野菜と卵を使ったオーブン焼きはいかがでしょう。お好みの野菜（パプリカ、ズッキーニ、玉ねぎなど）をカットして卵と一緒に耐熱皿に入れ、オリーブオイルと塩コショウで調味。オーブンで焼けばヘルシーかつ手軽に作れます。\"\n    },\n    {\n        name: \"✈️ 旅行計画\",\n        prompt_template: \"状況・作業環境の内容をもとに、旅行計画を立ててほしい。\",\n        input_examples: \"国内旅行、2泊3日、温泉と自然を満喫したいので、旅行計画を考えて。\",\n        output_examples: \"草津温泉（群馬県）をおすすめします。1日目は湯畑周辺を散策し、温泉街を楽しむ。2日目は近隣の自然公園で軽いハイキングをして、夜は旅館で温泉三昧。3日目は地元の名物を堪能してから帰路へ。\"\n    },\n    {\n        name: \"\\uD83D\\uDCAC 悩み相談\",\n        prompt_template: \"悩み相談にのってほしい。\",\n        input_examples: \"恋愛で告白する勇気が出ないです。\",\n        output_examples: \"まずは自分の気持ちを素直に認めましょう。そして、相手とのコミュニケーションで小さなステップを積み重ね、信頼関係を築くことが大切です。失敗を恐れる気持ちはわかりますが、行動しなければ何も変わりません。勇気を出して一歩を踏み出すことで、状況が前向きに進む可能性があります。\"\n    },\n    {\n        name: \"\\uD83D\\uDCE8 メッセージへの返答\",\n        prompt_template: \"状況・作業環境の内容を踏まえて、メッセージへの返答を一緒に考えてほしい。\",\n        input_examples: \"上司から「すぐに会議室に来て」とLINEで連絡がきた場合にどのようにメッセージに返答すればよい？\",\n        output_examples: \"了解しました。すぐに向かいます。何か準備が必要なものはありますか？\"\n    },\n    {\n        name: \"\\uD83D\\uDC91 デート計画\",\n        prompt_template: \"状況・作業環境の内容を踏まえて、デートの計画を立ててほしい。\",\n        input_examples: \"花火大会に行く予定、夜メインで楽しみたいので、デート計画を立てて。\",\n        output_examples: \"夕方から浴衣で合流し、屋台で食べ歩きを楽しんだ後、花火をゆっくり観賞. その後は近くのバーで軽くドリンクを飲みながら余韻に浸るのはいかがでしょうか。\"\n    }\n];\nfunction getFallbackTasks() {\n    return FALLBACK_TASKS.map((task)=>({\n            ...task,\n            is_default: true\n        }));\n}\nfunction loadTaskCards() {\n    const ioModal = document.getElementById(\"io-modal\");\n    const ioModalContent = document.getElementById(\"io-modal-content\");\n    // モーダルを閉じるヘルパ\n    function closeIOModal() {\n        if (ioModal) ioModal.style.display = \"none\";\n    }\n    if (ioModal && ioModalContent && !ioModal.dataset.bound) {\n        ioModal.dataset.bound = \"true\";\n        // 画面クリックでモーダルを閉じる\n        document.addEventListener(\"click\", ()=>{\n            if (ioModal && ioModal.style.display === \"block\") closeIOModal();\n        });\n        // 内部クリックでは閉じない\n        if (ioModalContent) {\n            ioModalContent.addEventListener(\"click\", (e)=>e.stopPropagation());\n        }\n    }\n    const renderTaskCards = (tasks)=>{\n        const container = document.getElementById(\"task-selection\");\n        if (!container) return;\n        // コンテナをクリア\n        container.innerHTML = \"\";\n        // タスクが空の場合はメッセージを表示\n        if (!tasks || tasks.length === 0) {\n            container.innerHTML = \"<p>タスクが見つかりませんでした。</p>\";\n            return;\n        }\n        tasks.forEach((task)=>{\n            // task自体がnull/undefinedの場合はスキップ（念のため）\n            if (!task) return;\n            const taskName = typeof task.name === \"string\" && task.name.trim() ? task.name.trim() : task.name ? String(task.name) : \"無題\";\n            // ラッパー\n            const wrapper = document.createElement(\"div\");\n            wrapper.className = \"task-wrapper\";\n            // カード\n            const card = document.createElement(\"div\");\n            card.className = \"prompt-card\";\n            card.dataset.task = taskName;\n            card.dataset.prompt_template = task.prompt_template || \"プロンプトテンプレートはありません\";\n            card.dataset.input_examples = task.input_examples || \"入力例がありません\";\n            card.dataset.output_examples = task.output_examples || \"出力例がありません\";\n            card.dataset.is_default = task.is_default ? \"true\" : \"false\";\n            // ヘッダー（タイトル＋▼ボタン）\n            const headerContainer = document.createElement(\"div\");\n            headerContainer.className = \"header-container\";\n            const header = document.createElement(\"div\");\n            header.className = \"task-header\";\n            header.textContent = taskName.length > 8 ? taskName.substring(0, 8) + \"…\" : taskName;\n            const toggleBtn = document.createElement(\"button\");\n            toggleBtn.type = \"button\";\n            toggleBtn.classList.add(\"btn\", \"btn-outline-success\", \"btn-md\");\n            toggleBtn.innerHTML = '<i class=\"bi bi-caret-down\"></i>';\n            // ▼クリックで詳細モーダル\n            toggleBtn.addEventListener(\"click\", (e)=>{\n                e.stopPropagation();\n                if (!ioModal || !ioModalContent) return;\n                ioModalContent.innerHTML = `\n          <h5 style=\"margin-bottom:1rem;\">タスク詳細</h5>\n          <div style=\"margin-bottom:.5rem;font-weight:bold;\">タスク名</div>\n          <div style=\"margin-bottom:1rem;\">${card.dataset.task}</div>\n          <div style=\"margin-bottom:.5rem;font-weight:bold;\">プロンプトテンプレート</div>\n          <div style=\"margin-bottom:1rem;\">${card.dataset.prompt_template}</div>\n          <div style=\"margin-bottom:.5rem;font-weight:bold;\">入力例</div>\n          <div style=\"margin-bottom:1rem;\">${card.dataset.input_examples}</div>\n          <div style=\"margin-bottom:.5rem;font-weight:bold;\">出力例</div>\n          <div>${card.dataset.output_examples}</div>`;\n                ioModal.style.display = \"block\";\n            });\n            headerContainer.append(header, toggleBtn);\n            card.appendChild(headerContainer);\n            wrapper.appendChild(card);\n            container.appendChild(wrapper);\n        });\n        // クリック／並び替え関係の初期化\n        initSetupTaskCards();\n        initToggleTasks();\n        if (typeof window.initTaskOrderEditing === \"function\") window.initTaskOrderEditing();\n    };\n    const applyTasks = (tasks)=>{\n        // タスクが空、もしくは配列でない場合はフォールバックを表示\n        if (!Array.isArray(tasks) || tasks.length === 0) {\n            renderTaskCards(getFallbackTasks());\n            return;\n        }\n        renderTaskCards(tasks);\n    };\n    // 初期ロード時: まずはフォールバックを表示しておく\n    renderTaskCards(getFallbackTasks());\n    // /api/tasks から取得\n    fetch(\"/api/tasks\").then((r)=>{\n        const contentType = r.headers.get(\"content-type\") || \"\";\n        if (!r.ok) {\n            throw new Error(`tasks fetch failed: ${r.status}`);\n        }\n        if (!contentType.includes(\"application/json\")) {\n            throw new Error(\"tasks response is not json\");\n        }\n        return r.json();\n    }).then((data)=>{\n        const tasks = Array.isArray(data?.tasks) ? data.tasks : [];\n        applyTasks(tasks);\n    }).catch((err)=>{\n        console.error(\"タスク読み込みに失敗:\", err);\n        // エラー時もフォールバックを表示\n        applyTasks([]);\n    });\n}\n// ▼ 2. セットアップ画面の表示 ------------------------------------------------------\nfunction showSetupForm() {\n    const chatContainer = document.getElementById(\"chat-container\");\n    const setupContainer = document.getElementById(\"setup-container\");\n    const setupInfoElement = document.getElementById(\"setup-info\");\n    if (chatContainer) chatContainer.style.display = \"none\";\n    if (setupContainer) setupContainer.style.display = \"block\";\n    if (setupInfoElement) setupInfoElement.value = \"\";\n    // サイドバーの状態をクリーンアップ\n    const sidebar = document.querySelector(\".sidebar\");\n    if (sidebar) {\n        sidebar.classList.remove(\"open\");\n    }\n    document.body.classList.remove(\"sidebar-visible\");\n    loadTaskCards();\n}\n// ▼ 3. タスクカード選択処理 --------------------------------------------------------\nfunction initSetupTaskCards() {\n    const container = document.getElementById(\"task-selection\");\n    if (!container) return;\n    container.removeEventListener(\"click\", handleTaskCardClick);\n    container.addEventListener(\"click\", handleTaskCardClick);\n}\nfunction handleTaskCardClick(e) {\n    if (window.isEditingOrder) return; // 並び替え中は無視\n    const target = e.target;\n    const card = target?.closest(\".prompt-card\");\n    if (!card) return;\n    const setupInfoElement = document.getElementById(\"setup-info\");\n    const aiModelSelect = document.getElementById(\"ai-model\");\n    const chatMessages = document.getElementById(\"chat-messages\");\n    // 入力フォームの値（空欄可）\n    const setupInfo = setupInfoElement ? setupInfoElement.value.trim() : \"\";\n    const aiModel = aiModelSelect ? aiModelSelect.value : \"gemini-2.5-flash\";\n    const prompt_template = card.dataset.prompt_template || \"\";\n    const inputExamples = card.dataset.input_examples || \"\";\n    const outputExamples = card.dataset.output_examples || \"\";\n    // 新チャットルーム ID とタイトル\n    const newRoomId = Date.now().toString();\n    const roomTitle = setupInfo || \"新規チャット\";\n    // currentChatRoomId はグローバルまたは他で定義されている前提\n    window.currentChatRoomId = newRoomId;\n    localStorage.setItem(\"currentChatRoomId\", newRoomId);\n    // ① ルームをサーバーに作成\n    if (typeof window.createNewChatRoom === \"function\") {\n        window.createNewChatRoom(newRoomId, roomTitle).then(()=>{\n            if (typeof window.showChatInterface === \"function\") window.showChatInterface();\n            // 新しいチャットではメッセージ表示をリセット\n            if (chatMessages) chatMessages.innerHTML = \"\";\n            if (typeof window.loadChatRooms === \"function\") window.loadChatRooms();\n            localStorage.removeItem(`chatHistory_${newRoomId}`);\n            // ② 最初のメッセージ\n            const firstMsg = setupInfo ? `【状況・作業環境】${setupInfo}\\n【リクエスト】${prompt_template}\\n\\n入力例:\\n${inputExamples}\\n\\n出力例:\\n${outputExamples}` : `【リクエスト】${prompt_template}\\n\\n入力例:\\n${inputExamples}\\n\\n出力例:\\n${outputExamples}`;\n            // ③ Bot 応答生成\n            if (typeof window.generateResponse === \"function\") window.generateResponse(firstMsg, aiModel);\n        }).catch((err)=>alert(\"チャットルーム作成に失敗: \" + err));\n    } else {\n        console.error(\"createNewChatRoom is not defined\");\n    }\n}\n// ▼ 4. 「もっと見る」ボタン生成 ----------------------------------------------------\nfunction initToggleTasks() {\n    const container = document.querySelector(\".task-selection\");\n    if (!container) return;\n    const oldBtn = document.getElementById(\"toggle-tasks-btn\");\n    if (oldBtn) oldBtn.remove();\n    const cards = document.querySelectorAll(\".task-selection .prompt-card\");\n    if (cards.length > 6) {\n        // 7枚目以降を非表示\n        [\n            ...cards\n        ].slice(6).forEach((c)=>c.style.display = \"none\");\n        // ボタン生成\n        const btn = document.createElement(\"button\");\n        btn.type = \"button\";\n        btn.id = \"toggle-tasks-btn\";\n        btn.className = \"primary-button\";\n        btn.style.width = \"100%\";\n        btn.style.marginTop = \"0.1rem\";\n        btn.innerHTML = '<i class=\"bi bi-chevron-down\"></i> もっと見る';\n        let expanded = false;\n        btn.addEventListener(\"click\", (e)=>{\n            e.preventDefault();\n            expanded = !expanded;\n            [\n                ...cards\n            ].slice(6).forEach((c)=>c.style.display = expanded ? \"flex\" : \"none\");\n            btn.innerHTML = expanded ? '<i class=\"bi bi-chevron-up\"></i> 閉じる' : '<i class=\"bi bi-chevron-down\"></i> もっと見る';\n        });\n        // ボタンをリストの末尾に追加\n        const selectionContainer = window.taskSelection || container;\n        selectionContainer.appendChild(btn);\n    }\n}\n// ---- グローバル公開 -------------------------------------------------------------\nwindow.showSetupForm = showSetupForm;\nwindow.initToggleTasks = initToggleTasks;\nwindow.initSetupTaskCards = initSetupTaskCards;\nwindow.loadTaskCards = loadTaskCards;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQ2dGLElBQU9BLEVBQUU1RixLQUFLLENBQUNDLE9BQU8sR0FBR2dHLFdBQVcsU0FBUztZQUMxRUosSUFBSW5GLFNBQVMsR0FBR3VGLFdBQVcseUNBQXlDO1FBQ3RFO1FBRUEsZ0JBQWdCO1FBQ2hCLE1BQU1FLHFCQUFxQm5FLE9BQU9vRSxhQUFhLElBQUkzRjtRQUNuRDBGLG1CQUFtQnRFLFdBQVcsQ0FBQ2dFO0lBQ2pDO0FBQ0Y7QUFFQSw2RUFBNkU7QUFDN0U3RCxPQUFPcUIsYUFBYSxHQUFHQTtBQUN2QnJCLE9BQU9ELGVBQWUsR0FBR0E7QUFDekJDLE9BQU9GLGtCQUFrQixHQUFHQTtBQUM1QkUsT0FBT3RDLGFBQWEsR0FBR0E7QUFFYiIsInNvdXJjZXMiOlsid2VicGFjazovL3N0cmlrZS1mcm9udGVuZC8uL3NjcmlwdHMvc2V0dXAvc2V0dXAudHM/YmU2NCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIHNldHVwLnRzXG4gKlxuICog4pagIOOCv+OCueOCr+OCq+ODvOODieOBruWPluW+l+ODu+ihqOekuiAobG9hZFRhc2tDYXJkcylcbiAqICAgLSAvYXBpL3Rhc2tzIOOBi+OCieOCv+OCueOCr+S4gOimp+OCkuWPluW+l+OBl+OAgS5wcm9tcHQtY2FyZCDjgpLli5XnmoTnlJ/miJBcbiAqICAgLSDjgqvjg7zjg4nkuIvlkJHjgY3jgqLjgqTjgrPjg7Pjgafjgr/jgrnjgq/oqbPntLDjg6Ljg7zjg4Djg6vvvIjjg5fjg63jg7Pjg5fjg4jjg4bjg7Pjg5fjg6zjg7zjg4jvvI/lhaXlh7rlipvkvovvvInjgpLooajnpLpcbiAqXG4gKiDilqAg44K744OD44OI44Ki44OD44OX55S76Z2i5YiH5pu/IChzaG93U2V0dXBGb3JtKVxuICogICAtIOODgeODo+ODg+ODiOeUu+mdouOCkumaoOOBl+OAgeOCu+ODg+ODiOOCouODg+ODl+eUu+mdouOCkuWGjeihqOekulxuICpcbiAqIOKWoCDjgr/jgrnjgq/pgbjmip7jgafjg4Hjg6Pjg4Pjg4jplovlp4sgKGhhbmRsZVRhc2tDYXJkQ2xpY2spXG4gKiAgIC0g44CM54q25rOB44O75L2c5qWt55Kw5aKD44CN5YWl5Yqb77yL44Kr44O844OJ44Kv44Oq44OD44Kv44Gn5paw6KaP44OB44Oj44OD44OI44Or44O844Og5L2c5oiQXG4gKiAgIC0g5pyA5Yid44Gu44Oh44OD44K744O844K444KSIEJvdCDjgavmipXjgZLjgabjg4Hjg6Pjg4Pjg4jjgpLplovlp4tcbiAqXG4gKiDilqAg44CM44KC44Gj44Go6KaL44KL44CN5oqY44KK55Wz44G/5qmf6IO9IChpbml0VG9nZ2xlVGFza3MpXG4gKiAgIC0g44K/44K544Kv44GMIDYg5Lu26LaF44GI44KL44GoIDcg5Lu255uu5Lul6ZmN44KS5oqY44KK55Wz44G/44CB5bGV6ZaL77yP5oqY44KK55Wz44G/44Oc44K/44Oz44KS55Sf5oiQXG4gKi9cblxudHlwZSBUYXNrSXRlbSA9IHtcbiAgbmFtZT86IHN0cmluZztcbiAgcHJvbXB0X3RlbXBsYXRlPzogc3RyaW5nO1xuICBpbnB1dF9leGFtcGxlcz86IHN0cmluZztcbiAgb3V0cHV0X2V4YW1wbGVzPzogc3RyaW5nO1xuICBpc19kZWZhdWx0PzogYm9vbGVhbjtcbn07XG5cbi8vIOKWvCAxLiDjgr/jgrnjgq/jgqvjg7zjg4nnlJ/miJDjg7voqbPntLDooajnpLogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY29uc3QgRkFMTEJBQ0tfVEFTS1M6IFRhc2tJdGVtW10gPSBbXG4gIHtcbiAgICBuYW1lOiBcIvCfk6cg44Oh44O844Or5L2c5oiQXCIsXG4gICAgcHJvbXB0X3RlbXBsYXRlOiBcIueKtuazgeOChOS9nOalreeSsOWig+OCkuOCguOBqOOBq+OAgeODoeODvOODq+OCkuS9nOaIkOOBl+OBpuOAglwiLFxuICAgIGlucHV0X2V4YW1wbGVzOiBcIuaWsOijveWTgeODquODquODvOOCueOBruahiOWGheOBruODoeODvOODq+S9nOaIkOOCkuOBl+OBn+OBhOOAglwiLFxuICAgIG91dHB1dF9leGFtcGxlczpcbiAgICAgIFwi5Lu25ZCN77ya5paw6KO95ZOB55m65aOy44Gu44GU5qGI5YaFXFxu5pys5paH77ya5oud5ZWT44CA5pmC5LiL44G+44GZ44G+44GZ44GU5YGl5Yud44Gu44GT44Go44Go44GK5oW244Gz55Sz44GX5LiK44GS44G+44GZ44CC44GV44Gm44CB44GT44Gu5bqm5byK56S+44Gn44Gv55S75pyf55qE44Gq5paw6KO95ZOB44KS44Oq44Oq44O844K544GE44Gf44GX44G+44GX44Gf44Gu44Gn44CB44GU5qGI5YaF55Sz44GX5LiK44GS44G+44GZ44CC44Gk44GN44G+44GX44Gm44Gv44CB6Kmz57Sw6LOH5paZ44KS5ZCM5bCB44GE44Gf44GX44G+44GX44Gf44Gu44Gn44GU5LiA6Kqt44GE44Gf44Gg44GR44G+44GZ44Go5bm455Sa44Gn44GZ44CC5LuK5b6M44Go44KC5L2V5Y2S44KI44KN44GX44GP44GK6aGY44GE55Sz44GX5LiK44GS44G+44GZ44CCXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIvCfkqEg44Ki44Kk44OH44Ki55m65oOzXCIsXG4gICAgcHJvbXB0X3RlbXBsYXRlOiBcIueLrOWJteeahOOBquOCouOCpOODh+OCouOBrueZuuaDs+OCkuOBl+OBpuOBu+OBl+OBhOOAglwiLFxuICAgIGlucHV0X2V4YW1wbGVzOiBcIuW6l+iIl+OBrumbhuWuouOCkuWil+OChOOBmeOBn+OCgeOBruOCouOCpOODh+OCouOCkuiAg+OBiOOBpuOAglwiLFxuICAgIG91dHB1dF9leGFtcGxlczpcbiAgICAgIFwiMS4g44GK5b6X44Gq44Kv44O844Od44Oz5LuY44GNU05T44Kt44Oj44Oz44Oa44O844Oz44Gu5a6f5pa9IDIuIOW6l+iIl+OCpOODmeODs+ODiOOBruWumuacn+mWi+WCrCAzLiDlnLDln5/jga7ku5blupfoiJfjgajpgKPmkLrjgZfjgZ/jgrnjgr/jg7Pjg5fjg6njg6rjg7zkvIHnlLtcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi8J+ThCDopoHntIRcIixcbiAgICBwcm9tcHRfdGVtcGxhdGU6IFwi54q25rOB44O75L2c5qWt55Kw5aKD44Gr5YWl5Yqb44GV44KM44Gf5paH44KS6KaB57SE44GX44Gm44CCXCIsXG4gICAgaW5wdXRfZXhhbXBsZXM6IFwi6ZW357eo5bCP6Kqs44Gu44K544OI44O844Oq44O844KS57Ch5r2U44Gr44G+44Go44KB44Gf44GE44Gu44Gn44CB6KaB57SE44GX44Gm44CCXCIsXG4gICAgb3V0cHV0X2V4YW1wbGVzOlxuICAgICAgXCLmnKzkvZzlk4Hjga/jgIHkuLvkurrlhazjgYzml4XjgpLpgJrjgZjjgaboh6rliIboh6rouqvjgajlkJHjgY3lkIjjgYTjgIHlrrbml4/jga7ntYbjgpLlho3norroqo3jgZnjgovnianoqp7jgafjgZnjgILkuLvopoHjgarjg4bjg7zjg57jga/miJDplbfjgajlkozop6PjgafjgIHlsbHloLTjgajjgarjgovjgrfjg7zjg7Pjgafjga/pgY7ljrvjga7okZvol6TjgpLkuZfjgorotorjgYjjgovmp5jlrZDjgYzmj4/jgYvjgozjgabjgYTjgb7jgZnjgIJcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi8J+boO+4jyDllY/poYzop6PmsbpcIixcbiAgICBwcm9tcHRfdGVtcGxhdGU6IFwi5ZWP6aGM6Kej5rG644Gr5Y2U5Yqb44GX44Gm44G744GX44GE44CCXCIsXG4gICAgaW5wdXRfZXhhbXBsZXM6IFwi5Lq65LqL44OI44Op44OW44Or77yI44Oh44Oz44OQ44O85ZCM5aOr44Gu6KGd56qB77yJ44Gu5ZWP6aGM6Kej5rG644KS44GX44Gf44GE44CCXCIsXG4gICAgb3V0cHV0X2V4YW1wbGVzOlxuICAgICAgXCIxLiDlvZPkuovogIXlj4zmlrnjgYvjgonjg5LjgqLjg6rjg7PjgrDjgpLooYzjgYTjgIHkuovlrp/plqLkv4LjgpLmlbTnkIbjgZnjgosgMi4g56ys5LiJ6ICF44GM5YWl44KL6Kq/5pW05Lya6K2w44KS6Kit5a6a44GX44CB5oSP6KaL44KS44GZ44KK5ZCI44KP44Gb44KLIDMuIOWGjeeZuumYsuatouOBruOBn+OCgeOBruOCs+ODn+ODpeODi+OCseODvOOCt+ODp+ODs+ODq+ODvOODq+OCkuetluWumlwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCLwn5OLIOWVj+mhjOOBuOWbnuetlFwiLFxuICAgIHByb21wdF90ZW1wbGF0ZTogXCLllY/poYzjgbjlm57nrZTjgZnjgovjga7jgpLmiYvkvJ3jgaPjgabjgbvjgZfjgYTjgIJcIixcbiAgICBpbnB1dF9leGFtcGxlczogXCLniannkIbjga7llY/poYzvvJroh6rnlLHokL3kuIvjga7lhazlvI/jgpLmlZnjgYjjgabjgY/jgaDjgZXjgYTjgIJcIixcbiAgICBvdXRwdXRfZXhhbXBsZXM6XG4gICAgICBcIuiHqueUseiQveS4i+OBrui3nembouOCkuihqOOBmeWFrOW8j+OBr+OAgWQgPSAoMS8yKWd0XjIg44Gn44GZ77yIZ+OBr+mHjeWKm+WKoOmAn+W6puOAgXTjga/okL3kuIvmmYLplpPvvInjgILliJ3pgJ/luqbjgYww44Gu5aC05ZCI44Gr6YGp55So44Gn44GN44G+44GZ44CCXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIuKEue+4jyDmg4XloLHmj5DkvptcIixcbiAgICBwcm9tcHRfdGVtcGxhdGU6IFwi54q25rOB44O75L2c5qWt55Kw5aKD44Gr5YWl5Yqb44GV44KM44Gf44KC44Gu44Gr44Gk44GE44Gm44Gu5oOF5aCx5o+Q5L6b44KS44GX44Gm44G744GX44GE44CCXCIsXG4gICAgaW5wdXRfZXhhbXBsZXM6IFwi5paw5Z6L44Kz44Ot44OK44Km44Kk44Or44K544Gu5pyA5paw5oOF5aCx44GM55+l44KK44Gf44GE44CCXCIsXG4gICAgb3V0cHV0X2V4YW1wbGVzOlxuICAgICAgXCLnj77lnKjjga7mhJ/mn5Pnirbms4Hjga/lnLDln5/jgavjgojjgaPjgablpKfjgY3jgY/nlbDjgarjgorjgb7jgZnjgYzjgIHmlrDjgZfjgYTlpInnlbDmoKrjga7li5XlkJHjgoTjg6/jgq/jg4Hjg7PmjqXnqK7jga7pgLLmjZfjgYznhKbngrnjgajjgarjgaPjgabjgYTjgb7jgZnjgILmnIDmlrDmg4XloLHjga/ljprnlJ/lirTlg43nnIHjga7lhazlvI/jgrXjgqTjg4jjgoRXSE/jga7jg6rjg6rjg7zjgrnjgpLnorroqo3jgZnjgovjga7jgYzmnJvjgb7jgZfjgYTjgafjgZnjgIJcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi8J+NsyDjg6zjgrfjg5RcIixcbiAgICBwcm9tcHRfdGVtcGxhdGU6IFwi54q25rOB44O75L2c5qWt55Kw5aKD44Gr5YWl5Yqb44GV44KM44Gf5oOF5aCx44KS44KC44Go44Gr44Os44K344OU44KS6ICD44GI44Gm44CCXCIsXG4gICAgaW5wdXRfZXhhbXBsZXM6IFwi6YeO6I+c44GM44Oh44Kk44Oz44Gn44CB44OY44Or44K344O844Gq5pyd6aOf44Gu44Os44K344OU44GM55+l44KK44Gf44GE44CCXCIsXG4gICAgb3V0cHV0X2V4YW1wbGVzOlxuICAgICAgXCLjgrDjg6rjg6vph47oj5zjgajljbXjgpLkvb/jgaPjgZ/jgqrjg7zjg5bjg7PnhLzjgY3jga/jgYTjgYvjgYzjgafjgZfjgofjgYbjgILjgYrlpb3jgb/jga7ph47oj5zvvIjjg5Hjg5fjg6rjgqvjgIHjgrrjg4Pjgq3jg7zjg4vjgIHnjonjga3jgY7jgarjganvvInjgpLjgqvjg4Pjg4jjgZfjgabljbXjgajkuIDnt5LjgavogJDnhrHnmr/jgavlhaXjgozjgIHjgqrjg6rjg7zjg5bjgqrjgqTjg6vjgajloanjgrPjgrfjg6fjgqbjgafoqr/lkbPjgILjgqrjg7zjg5bjg7PjgafnhLzjgZHjgbDjg5jjg6vjgrfjg7zjgYvjgaTmiYvou73jgavkvZzjgozjgb7jgZnjgIJcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi4pyI77iPIOaXheihjOioiOeUu1wiLFxuICAgIHByb21wdF90ZW1wbGF0ZTogXCLnirbms4Hjg7vkvZzmpa3nkrDlooPjga7lhoXlrrnjgpLjgoLjgajjgavjgIHml4XooYzoqIjnlLvjgpLnq4vjgabjgabjgbvjgZfjgYTjgIJcIixcbiAgICBpbnB1dF9leGFtcGxlczogXCLlm73lhoXml4XooYzjgIEy5rOKM+aXpeOAgea4qeazieOBqOiHqueEtuOCkua6gOWWq+OBl+OBn+OBhOOBruOBp+OAgeaXheihjOioiOeUu+OCkuiAg+OBiOOBpuOAglwiLFxuICAgIG91dHB1dF9leGFtcGxlczpcbiAgICAgIFwi6I2J5rSl5rip5rOJ77yI576k6aas55yM77yJ44KS44GK44GZ44GZ44KB44GX44G+44GZ44CCMeaXpeebruOBr+a5r+eVkeWRqOi+uuOCkuaVo+etluOBl+OAgea4qeazieihl+OCkualveOBl+OCgOOAgjLml6Xnm67jga/ov5HpmqPjga7oh6rnhLblhazlnJLjgafou73jgYTjg4/jgqTjgq3jg7PjgrDjgpLjgZfjgabjgIHlpJzjga/ml4XppKjjgafmuKnms4nkuInmmKfjgIIz5pel55uu44Gv5Zyw5YWD44Gu5ZCN54mp44KS5aCq6IO944GX44Gm44GL44KJ5biw6Lev44G444CCXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIvCfkqwg5oKp44G/55u46KuHXCIsXG4gICAgcHJvbXB0X3RlbXBsYXRlOiBcIuaCqeOBv+ebuOirh+OBq+OBruOBo+OBpuOBu+OBl+OBhOOAglwiLFxuICAgIGlucHV0X2V4YW1wbGVzOiBcIuaBi+aEm+OBp+WRiueZveOBmeOCi+WLh+awl+OBjOWHuuOBquOBhOOBp+OBmeOAglwiLFxuICAgIG91dHB1dF9leGFtcGxlczpcbiAgICAgIFwi44G+44Ga44Gv6Ieq5YiG44Gu5rCX5oyB44Gh44KS57Sg55u044Gr6KqN44KB44G+44GX44KH44GG44CC44Gd44GX44Gm44CB55u45omL44Go44Gu44Kz44Of44Ol44OL44Kx44O844K344On44Oz44Gn5bCP44GV44Gq44K544OG44OD44OX44KS56mN44G/6YeN44Gt44CB5L+h6aC86Zai5L+C44KS56+J44GP44GT44Go44GM5aSn5YiH44Gn44GZ44CC5aSx5pWX44KS5oGQ44KM44KL5rCX5oyB44Gh44Gv44KP44GL44KK44G+44GZ44GM44CB6KGM5YuV44GX44Gq44GR44KM44Gw5L2V44KC5aSJ44KP44KK44G+44Gb44KT44CC5YuH5rCX44KS5Ye644GX44Gm5LiA5q2p44KS6LiP44G/5Ye644GZ44GT44Go44Gn44CB54q25rOB44GM5YmN5ZCR44GN44Gr6YCy44KA5Y+v6IO95oCn44GM44GC44KK44G+44GZ44CCXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIvCfk6gg44Oh44OD44K744O844K444G444Gu6L+U562UXCIsXG4gICAgcHJvbXB0X3RlbXBsYXRlOiBcIueKtuazgeODu+S9nOalreeSsOWig+OBruWGheWuueOCkui4j+OBvuOBiOOBpuOAgeODoeODg+OCu+ODvOOCuOOBuOOBrui/lOetlOOCkuS4gOe3kuOBq+iAg+OBiOOBpuOBu+OBl+OBhOOAglwiLFxuICAgIGlucHV0X2V4YW1wbGVzOlxuICAgICAgXCLkuIrlj7jjgYvjgonjgIzjgZnjgZDjgavkvJrorbDlrqTjgavmnaXjgabjgI3jgahMSU5F44Gn6YCj57Wh44GM44GN44Gf5aC05ZCI44Gr44Gp44Gu44KI44GG44Gr44Oh44OD44K744O844K444Gr6L+U562U44GZ44KM44Gw44KI44GE77yfXCIsXG4gICAgb3V0cHV0X2V4YW1wbGVzOiBcIuS6huino+OBl+OBvuOBl+OBn+OAguOBmeOBkOOBq+WQkeOBi+OBhOOBvuOBmeOAguS9leOBi+a6luWCmeOBjOW/heimgeOBquOCguOBruOBr+OBguOCiuOBvuOBmeOBi++8n1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCLwn5KRIOODh+ODvOODiOioiOeUu1wiLFxuICAgIHByb21wdF90ZW1wbGF0ZTogXCLnirbms4Hjg7vkvZzmpa3nkrDlooPjga7lhoXlrrnjgpLouI/jgb7jgYjjgabjgIHjg4fjg7zjg4jjga7oqIjnlLvjgpLnq4vjgabjgabjgbvjgZfjgYTjgIJcIixcbiAgICBpbnB1dF9leGFtcGxlczogXCLoirHngavlpKfkvJrjgavooYzjgY/kuojlrprjgIHlpJzjg6HjgqTjg7Pjgafmpb3jgZfjgb/jgZ/jgYTjga7jgafjgIHjg4fjg7zjg4joqIjnlLvjgpLnq4vjgabjgabjgIJcIixcbiAgICBvdXRwdXRfZXhhbXBsZXM6XG4gICAgICBcIuWkleaWueOBi+OCiea1tOiho+OBp+WQiOa1geOBl+OAgeWxi+WPsOOBp+mjn+OBueatqeOBjeOCkualveOBl+OCk+OBoOW+jOOAgeiKseeBq+OCkuOChuOBo+OBj+OCiuims+izni4g44Gd44Gu5b6M44Gv6L+R44GP44Gu44OQ44O844Gn6Lu944GP44OJ44Oq44Oz44Kv44KS6aOy44G/44Gq44GM44KJ5L2Z6Z+744Gr5rW444KL44Gu44Gv44GE44GL44GM44Gn44GX44KH44GG44GL44CCXCIsXG4gIH0sXG5dO1xuXG5mdW5jdGlvbiBnZXRGYWxsYmFja1Rhc2tzKCkge1xuICByZXR1cm4gRkFMTEJBQ0tfVEFTS1MubWFwKCh0YXNrKSA9PiAoe1xuICAgIC4uLnRhc2ssXG4gICAgaXNfZGVmYXVsdDogdHJ1ZVxuICB9KSk7XG59XG5cbmZ1bmN0aW9uIGxvYWRUYXNrQ2FyZHMoKSB7XG4gIGNvbnN0IGlvTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlvLW1vZGFsXCIpO1xuICBjb25zdCBpb01vZGFsQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW8tbW9kYWwtY29udGVudFwiKTtcblxuICAvLyDjg6Ljg7zjg4Djg6vjgpLplonjgZjjgovjg5jjg6vjg5FcbiAgZnVuY3Rpb24gY2xvc2VJT01vZGFsKCkge1xuICAgIGlmIChpb01vZGFsKSBpb01vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfVxuXG4gIGlmIChpb01vZGFsICYmIGlvTW9kYWxDb250ZW50ICYmICFpb01vZGFsLmRhdGFzZXQuYm91bmQpIHtcbiAgICBpb01vZGFsLmRhdGFzZXQuYm91bmQgPSBcInRydWVcIjtcbiAgICAvLyDnlLvpnaLjgq/jg6rjg4Pjgq/jgafjg6Ljg7zjg4Djg6vjgpLplonjgZjjgotcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgaWYgKGlvTW9kYWwgJiYgaW9Nb2RhbC5zdHlsZS5kaXNwbGF5ID09PSBcImJsb2NrXCIpIGNsb3NlSU9Nb2RhbCgpO1xuICAgIH0pO1xuICAgIC8vIOWGhemDqOOCr+ODquODg+OCr+OBp+OBr+mWieOBmOOBquOBhFxuICAgIGlmIChpb01vZGFsQ29udGVudCkge1xuICAgICAgaW9Nb2RhbENvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCByZW5kZXJUYXNrQ2FyZHMgPSAodGFza3M6IFRhc2tJdGVtW10pID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stc2VsZWN0aW9uXCIpO1xuICAgIGlmICghY29udGFpbmVyKSByZXR1cm47XG5cbiAgICAvLyDjgrPjg7Pjg4bjg4rjgpLjgq/jg6rjgqJcbiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgIC8vIOOCv+OCueOCr+OBjOepuuOBruWgtOWQiOOBr+ODoeODg+OCu+ODvOOCuOOCkuihqOekulxuICAgIGlmICghdGFza3MgfHwgdGFza3MubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gXCI8cD7jgr/jgrnjgq/jgYzopovjgaTjgYvjgorjgb7jgZvjgpPjgafjgZfjgZ/jgII8L3A+XCI7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgLy8gdGFza+iHquS9k+OBjG51bGwvdW5kZWZpbmVk44Gu5aC05ZCI44Gv44K544Kt44OD44OX77yI5b+144Gu44Gf44KB77yJXG4gICAgICBpZiAoIXRhc2spIHJldHVybjtcblxuICAgICAgY29uc3QgdGFza05hbWUgPVxuICAgICAgICB0eXBlb2YgdGFzay5uYW1lID09PSBcInN0cmluZ1wiICYmIHRhc2submFtZS50cmltKClcbiAgICAgICAgICA/IHRhc2submFtZS50cmltKClcbiAgICAgICAgICA6IHRhc2submFtZVxuICAgICAgICAgICAgPyBTdHJpbmcodGFzay5uYW1lKVxuICAgICAgICAgICAgOiBcIueEoemhjFwiO1xuXG4gICAgICAvLyDjg6njg4Pjg5Hjg7xcbiAgICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgd3JhcHBlci5jbGFzc05hbWUgPSBcInRhc2std3JhcHBlclwiO1xuXG4gICAgICAvLyDjgqvjg7zjg4lcbiAgICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY2FyZC5jbGFzc05hbWUgPSBcInByb21wdC1jYXJkXCI7XG4gICAgICBjYXJkLmRhdGFzZXQudGFzayA9IHRhc2tOYW1lO1xuICAgICAgY2FyZC5kYXRhc2V0LnByb21wdF90ZW1wbGF0ZSA9IHRhc2sucHJvbXB0X3RlbXBsYXRlIHx8IFwi44OX44Ot44Oz44OX44OI44OG44Oz44OX44Os44O844OI44Gv44GC44KK44G+44Gb44KTXCI7XG4gICAgICBjYXJkLmRhdGFzZXQuaW5wdXRfZXhhbXBsZXMgPSB0YXNrLmlucHV0X2V4YW1wbGVzIHx8IFwi5YWl5Yqb5L6L44GM44GC44KK44G+44Gb44KTXCI7XG4gICAgICBjYXJkLmRhdGFzZXQub3V0cHV0X2V4YW1wbGVzID0gdGFzay5vdXRwdXRfZXhhbXBsZXMgfHwgXCLlh7rlipvkvovjgYzjgYLjgorjgb7jgZvjgpNcIjtcbiAgICAgIGNhcmQuZGF0YXNldC5pc19kZWZhdWx0ID0gdGFzay5pc19kZWZhdWx0ID8gXCJ0cnVlXCIgOiBcImZhbHNlXCI7XG5cbiAgICAgIC8vIOODmOODg+ODgOODvO+8iOOCv+OCpOODiOODq++8i+KWvOODnOOCv+ODs++8iVxuICAgICAgY29uc3QgaGVhZGVyQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGhlYWRlckNvbnRhaW5lci5jbGFzc05hbWUgPSBcImhlYWRlci1jb250YWluZXJcIjtcblxuICAgICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGhlYWRlci5jbGFzc05hbWUgPSBcInRhc2staGVhZGVyXCI7XG4gICAgICBoZWFkZXIudGV4dENvbnRlbnQgPSB0YXNrTmFtZS5sZW5ndGggPiA4ID8gdGFza05hbWUuc3Vic3RyaW5nKDAsIDgpICsgXCLigKZcIiA6IHRhc2tOYW1lO1xuXG4gICAgICBjb25zdCB0b2dnbGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgdG9nZ2xlQnRuLnR5cGUgPSBcImJ1dHRvblwiO1xuICAgICAgdG9nZ2xlQnRuLmNsYXNzTGlzdC5hZGQoXCJidG5cIiwgXCJidG4tb3V0bGluZS1zdWNjZXNzXCIsIFwiYnRuLW1kXCIpO1xuICAgICAgdG9nZ2xlQnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImJpIGJpLWNhcmV0LWRvd25cIj48L2k+JztcblxuICAgICAgLy8g4pa844Kv44Oq44OD44Kv44Gn6Kmz57Sw44Oi44O844OA44OrXG4gICAgICB0b2dnbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGlmICghaW9Nb2RhbCB8fCAhaW9Nb2RhbENvbnRlbnQpIHJldHVybjtcbiAgICAgICAgaW9Nb2RhbENvbnRlbnQuaW5uZXJIVE1MID0gYFxuICAgICAgICAgIDxoNSBzdHlsZT1cIm1hcmdpbi1ib3R0b206MXJlbTtcIj7jgr/jgrnjgq/oqbPntLA8L2g1PlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tYm90dG9tOi41cmVtO2ZvbnQtd2VpZ2h0OmJvbGQ7XCI+44K/44K544Kv5ZCNPC9kaXY+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1ib3R0b206MXJlbTtcIj4ke2NhcmQuZGF0YXNldC50YXNrfTwvZGl2PlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tYm90dG9tOi41cmVtO2ZvbnQtd2VpZ2h0OmJvbGQ7XCI+44OX44Ot44Oz44OX44OI44OG44Oz44OX44Os44O844OIPC9kaXY+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1ib3R0b206MXJlbTtcIj4ke2NhcmQuZGF0YXNldC5wcm9tcHRfdGVtcGxhdGV9PC9kaXY+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1ib3R0b206LjVyZW07Zm9udC13ZWlnaHQ6Ym9sZDtcIj7lhaXlipvkvos8L2Rpdj5cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbToxcmVtO1wiPiR7Y2FyZC5kYXRhc2V0LmlucHV0X2V4YW1wbGVzfTwvZGl2PlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tYm90dG9tOi41cmVtO2ZvbnQtd2VpZ2h0OmJvbGQ7XCI+5Ye65Yqb5L6LPC9kaXY+XG4gICAgICAgICAgPGRpdj4ke2NhcmQuZGF0YXNldC5vdXRwdXRfZXhhbXBsZXN9PC9kaXY+YDtcbiAgICAgICAgaW9Nb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgfSk7XG5cbiAgICAgIGhlYWRlckNvbnRhaW5lci5hcHBlbmQoaGVhZGVyLCB0b2dnbGVCdG4pO1xuICAgICAgY2FyZC5hcHBlbmRDaGlsZChoZWFkZXJDb250YWluZXIpO1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChjYXJkKTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcbiAgICB9KTtcblxuICAgIC8vIOOCr+ODquODg+OCr++8j+S4puOBs+abv+OBiOmWouS/guOBruWIneacn+WMllxuICAgIGluaXRTZXR1cFRhc2tDYXJkcygpO1xuICAgIGluaXRUb2dnbGVUYXNrcygpO1xuICAgIGlmICh0eXBlb2Ygd2luZG93LmluaXRUYXNrT3JkZXJFZGl0aW5nID09PSBcImZ1bmN0aW9uXCIpIHdpbmRvdy5pbml0VGFza09yZGVyRWRpdGluZygpO1xuICB9O1xuXG4gIGNvbnN0IGFwcGx5VGFza3MgPSAodGFza3M6IFRhc2tJdGVtW10pID0+IHtcbiAgICAvLyDjgr/jgrnjgq/jgYznqbrjgIHjgoLjgZfjgY/jga/phY3liJfjgafjgarjgYTloLTlkIjjga/jg5Xjgqnjg7zjg6vjg5Djg4Pjgq/jgpLooajnpLpcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodGFza3MpIHx8IHRhc2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmVuZGVyVGFza0NhcmRzKGdldEZhbGxiYWNrVGFza3MoKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlbmRlclRhc2tDYXJkcyh0YXNrcyk7XG4gIH07XG5cbiAgLy8g5Yid5pyf44Ot44O844OJ5pmCOiDjgb7jgZrjga/jg5Xjgqnjg7zjg6vjg5Djg4Pjgq/jgpLooajnpLrjgZfjgabjgYrjgY9cbiAgcmVuZGVyVGFza0NhcmRzKGdldEZhbGxiYWNrVGFza3MoKSk7XG5cbiAgLy8gL2FwaS90YXNrcyDjgYvjgonlj5blvpdcbiAgZmV0Y2goXCIvYXBpL3Rhc2tzXCIpXG4gICAgLnRoZW4oKHIpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gci5oZWFkZXJzLmdldChcImNvbnRlbnQtdHlwZVwiKSB8fCBcIlwiO1xuICAgICAgaWYgKCFyLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgdGFza3MgZmV0Y2ggZmFpbGVkOiAke3Iuc3RhdHVzfWApO1xuICAgICAgfVxuICAgICAgaWYgKCFjb250ZW50VHlwZS5pbmNsdWRlcyhcImFwcGxpY2F0aW9uL2pzb25cIikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGFza3MgcmVzcG9uc2UgaXMgbm90IGpzb25cIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gci5qc29uKCk7XG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgdGFza3M6IFRhc2tJdGVtW10gPSBBcnJheS5pc0FycmF5KGRhdGE/LnRhc2tzKSA/IGRhdGEudGFza3MgOiBbXTtcbiAgICAgIGFwcGx5VGFza3ModGFza3MpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLjgr/jgrnjgq/oqq3jgb/ovrzjgb/jgavlpLHmlZc6XCIsIGVycik7XG4gICAgICAvLyDjgqjjg6njg7zmmYLjgoLjg5Xjgqnjg7zjg6vjg5Djg4Pjgq/jgpLooajnpLpcbiAgICAgIGFwcGx5VGFza3MoW10pO1xuICAgIH0pO1xufVxuXG4vLyDilrwgMi4g44K744OD44OI44Ki44OD44OX55S76Z2i44Gu6KGo56S6IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZnVuY3Rpb24gc2hvd1NldHVwRm9ybSgpIHtcbiAgY29uc3QgY2hhdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hhdC1jb250YWluZXJcIik7XG4gIGNvbnN0IHNldHVwQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZXR1cC1jb250YWluZXJcIik7XG4gIGNvbnN0IHNldHVwSW5mb0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNldHVwLWluZm9cIikgYXMgSFRNTFRleHRBcmVhRWxlbWVudCB8IG51bGw7XG5cbiAgaWYgKGNoYXRDb250YWluZXIpIGNoYXRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICBpZiAoc2V0dXBDb250YWluZXIpIHNldHVwQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gIGlmIChzZXR1cEluZm9FbGVtZW50KSBzZXR1cEluZm9FbGVtZW50LnZhbHVlID0gXCJcIjtcblxuICAvLyDjgrXjgqTjg4njg5Djg7zjga7nirbmhYvjgpLjgq/jg6rjg7zjg7PjgqLjg4Pjg5dcbiAgY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2lkZWJhclwiKTtcbiAgaWYgKHNpZGViYXIpIHtcbiAgICBzaWRlYmFyLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuXCIpO1xuICB9XG4gIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShcInNpZGViYXItdmlzaWJsZVwiKTtcblxuICBsb2FkVGFza0NhcmRzKCk7XG59XG5cbi8vIOKWvCAzLiDjgr/jgrnjgq/jgqvjg7zjg4npgbjmip7lh6bnkIYgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmZ1bmN0aW9uIGluaXRTZXR1cFRhc2tDYXJkcygpIHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLXNlbGVjdGlvblwiKTtcbiAgaWYgKCFjb250YWluZXIpIHJldHVybjtcbiAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVUYXNrQ2FyZENsaWNrKTtcbiAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVUYXNrQ2FyZENsaWNrKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlVGFza0NhcmRDbGljayhlOiBFdmVudCkge1xuICBpZiAod2luZG93LmlzRWRpdGluZ09yZGVyKSByZXR1cm47IC8vIOS4puOBs+abv+OBiOS4reOBr+eEoeimllxuXG4gIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEVsZW1lbnQgfCBudWxsO1xuICBjb25zdCBjYXJkID0gdGFyZ2V0Py5jbG9zZXN0KFwiLnByb21wdC1jYXJkXCIpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgaWYgKCFjYXJkKSByZXR1cm47XG5cbiAgY29uc3Qgc2V0dXBJbmZvRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2V0dXAtaW5mb1wiKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbDtcbiAgY29uc3QgYWlNb2RlbFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWktbW9kZWxcIikgYXMgSFRNTFNlbGVjdEVsZW1lbnQgfCBudWxsO1xuICBjb25zdCBjaGF0TWVzc2FnZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoYXQtbWVzc2FnZXNcIik7XG5cbiAgLy8g5YWl5Yqb44OV44Kp44O844Og44Gu5YCk77yI56m65qyE5Y+v77yJXG4gIGNvbnN0IHNldHVwSW5mbyA9IHNldHVwSW5mb0VsZW1lbnQgPyBzZXR1cEluZm9FbGVtZW50LnZhbHVlLnRyaW0oKSA6IFwiXCI7XG4gIGNvbnN0IGFpTW9kZWwgPSBhaU1vZGVsU2VsZWN0ID8gYWlNb2RlbFNlbGVjdC52YWx1ZSA6IFwiZ2VtaW5pLTIuNS1mbGFzaFwiO1xuXG4gIGNvbnN0IHByb21wdF90ZW1wbGF0ZSA9IGNhcmQuZGF0YXNldC5wcm9tcHRfdGVtcGxhdGUgfHwgXCJcIjtcbiAgY29uc3QgaW5wdXRFeGFtcGxlcyA9IGNhcmQuZGF0YXNldC5pbnB1dF9leGFtcGxlcyB8fCBcIlwiO1xuICBjb25zdCBvdXRwdXRFeGFtcGxlcyA9IGNhcmQuZGF0YXNldC5vdXRwdXRfZXhhbXBsZXMgfHwgXCJcIjtcblxuICAvLyDmlrDjg4Hjg6Pjg4Pjg4jjg6vjg7zjg6AgSUQg44Go44K/44Kk44OI44OrXG4gIGNvbnN0IG5ld1Jvb21JZCA9IERhdGUubm93KCkudG9TdHJpbmcoKTtcbiAgY29uc3Qgcm9vbVRpdGxlID0gc2V0dXBJbmZvIHx8IFwi5paw6KaP44OB44Oj44OD44OIXCI7XG5cbiAgLy8gY3VycmVudENoYXRSb29tSWQg44Gv44Kw44Ot44O844OQ44Or44G+44Gf44Gv5LuW44Gn5a6a576p44GV44KM44Gm44GE44KL5YmN5o+QXG4gIHdpbmRvdy5jdXJyZW50Q2hhdFJvb21JZCA9IG5ld1Jvb21JZDtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjdXJyZW50Q2hhdFJvb21JZFwiLCBuZXdSb29tSWQpO1xuXG4gIC8vIOKRoCDjg6vjg7zjg6DjgpLjgrXjg7zjg5Djg7zjgavkvZzmiJBcbiAgaWYgKHR5cGVvZiB3aW5kb3cuY3JlYXRlTmV3Q2hhdFJvb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHdpbmRvdy5jcmVhdGVOZXdDaGF0Um9vbShuZXdSb29tSWQsIHJvb21UaXRsZSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuc2hvd0NoYXRJbnRlcmZhY2UgPT09IFwiZnVuY3Rpb25cIikgd2luZG93LnNob3dDaGF0SW50ZXJmYWNlKCk7XG4gICAgICAgIC8vIOaWsOOBl+OBhOODgeODo+ODg+ODiOOBp+OBr+ODoeODg+OCu+ODvOOCuOihqOekuuOCkuODquOCu+ODg+ODiFxuICAgICAgICBpZiAoY2hhdE1lc3NhZ2VzKSBjaGF0TWVzc2FnZXMuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cubG9hZENoYXRSb29tcyA9PT0gXCJmdW5jdGlvblwiKSB3aW5kb3cubG9hZENoYXRSb29tcygpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgY2hhdEhpc3RvcnlfJHtuZXdSb29tSWR9YCk7XG5cbiAgICAgICAgLy8g4pGhIOacgOWIneOBruODoeODg+OCu+ODvOOCuFxuICAgICAgICBjb25zdCBmaXJzdE1zZyA9IHNldHVwSW5mb1xuICAgICAgICAgID8gYOOAkOeKtuazgeODu+S9nOalreeSsOWig+OAkSR7c2V0dXBJbmZvfVxcbuOAkOODquOCr+OCqOOCueODiOOAkSR7cHJvbXB0X3RlbXBsYXRlfVxcblxcbuWFpeWKm+S+izpcXG4ke2lucHV0RXhhbXBsZXN9XFxuXFxu5Ye65Yqb5L6LOlxcbiR7b3V0cHV0RXhhbXBsZXN9YFxuICAgICAgICAgIDogYOOAkOODquOCr+OCqOOCueODiOOAkSR7cHJvbXB0X3RlbXBsYXRlfVxcblxcbuWFpeWKm+S+izpcXG4ke2lucHV0RXhhbXBsZXN9XFxuXFxu5Ye65Yqb5L6LOlxcbiR7b3V0cHV0RXhhbXBsZXN9YDtcblxuICAgICAgICAvLyDikaIgQm90IOW/nOetlOeUn+aIkFxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5nZW5lcmF0ZVJlc3BvbnNlID09PSBcImZ1bmN0aW9uXCIpIHdpbmRvdy5nZW5lcmF0ZVJlc3BvbnNlKGZpcnN0TXNnLCBhaU1vZGVsKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4gYWxlcnQoXCLjg4Hjg6Pjg4Pjg4jjg6vjg7zjg6DkvZzmiJDjgavlpLHmlZc6IFwiICsgZXJyKSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5lcnJvcihcImNyZWF0ZU5ld0NoYXRSb29tIGlzIG5vdCBkZWZpbmVkXCIpO1xuICB9XG59XG5cbi8vIOKWvCA0LiDjgIzjgoLjgaPjgajopovjgovjgI3jg5zjgr/jg7PnlJ/miJAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZnVuY3Rpb24gaW5pdFRvZ2dsZVRhc2tzKCkge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stc2VsZWN0aW9uXCIpO1xuICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuICBjb25zdCBvbGRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZ2dsZS10YXNrcy1idG5cIik7XG4gIGlmIChvbGRCdG4pIG9sZEJ0bi5yZW1vdmUoKTtcblxuICBjb25zdCBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KFwiLnRhc2stc2VsZWN0aW9uIC5wcm9tcHQtY2FyZFwiKTtcbiAgaWYgKGNhcmRzLmxlbmd0aCA+IDYpIHtcbiAgICAvLyA35p6a55uu5Lul6ZmN44KS6Z2e6KGo56S6XG4gICAgWy4uLmNhcmRzXS5zbGljZSg2KS5mb3JFYWNoKChjKSA9PiAoYy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCIpKTtcblxuICAgIC8vIOODnOOCv+ODs+eUn+aIkFxuICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgYnRuLnR5cGUgPSBcImJ1dHRvblwiO1xuICAgIGJ0bi5pZCA9IFwidG9nZ2xlLXRhc2tzLWJ0blwiO1xuICAgIGJ0bi5jbGFzc05hbWUgPSBcInByaW1hcnktYnV0dG9uXCI7XG4gICAgYnRuLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgYnRuLnN0eWxlLm1hcmdpblRvcCA9IFwiMC4xcmVtXCI7XG4gICAgYnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImJpIGJpLWNoZXZyb24tZG93blwiPjwvaT4g44KC44Gj44Go6KaL44KLJztcblxuICAgIGxldCBleHBhbmRlZCA9IGZhbHNlO1xuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV4cGFuZGVkID0gIWV4cGFuZGVkO1xuICAgICAgWy4uLmNhcmRzXS5zbGljZSg2KS5mb3JFYWNoKChjKSA9PiAoYy5zdHlsZS5kaXNwbGF5ID0gZXhwYW5kZWQgPyBcImZsZXhcIiA6IFwibm9uZVwiKSk7XG4gICAgICBidG4uaW5uZXJIVE1MID0gZXhwYW5kZWQgPyAnPGkgY2xhc3M9XCJiaSBiaS1jaGV2cm9uLXVwXCI+PC9pPiDplonjgZjjgosnIDogJzxpIGNsYXNzPVwiYmkgYmktY2hldnJvbi1kb3duXCI+PC9pPiDjgoLjgaPjgajopovjgosnO1xuICAgIH0pO1xuXG4gICAgLy8g44Oc44K/44Oz44KS44Oq44K544OI44Gu5pyr5bC+44Gr6L+95YqgXG4gICAgY29uc3Qgc2VsZWN0aW9uQ29udGFpbmVyID0gd2luZG93LnRhc2tTZWxlY3Rpb24gfHwgY29udGFpbmVyO1xuICAgIHNlbGVjdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChidG4pO1xuICB9XG59XG5cbi8vIC0tLS0g44Kw44Ot44O844OQ44Or5YWs6ZaLIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbndpbmRvdy5zaG93U2V0dXBGb3JtID0gc2hvd1NldHVwRm9ybTtcbndpbmRvdy5pbml0VG9nZ2xlVGFza3MgPSBpbml0VG9nZ2xlVGFza3M7XG53aW5kb3cuaW5pdFNldHVwVGFza0NhcmRzID0gaW5pdFNldHVwVGFza0NhcmRzO1xud2luZG93LmxvYWRUYXNrQ2FyZHMgPSBsb2FkVGFza0NhcmRzO1xuXG5leHBvcnQge307XG4iXSwibmFtZXMiOlsiRkFMTEJBQ0tfVEFTS1MiLCJuYW1lIiwicHJvbXB0X3RlbXBsYXRlIiwiaW5wdXRfZXhhbXBsZXMiLCJvdXRwdXRfZXhhbXBsZXMiLCJnZXRGYWxsYmFja1Rhc2tzIiwibWFwIiwidGFzayIsImlzX2RlZmF1bHQiLCJsb2FkVGFza0NhcmRzIiwiaW9Nb2RhbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpb01vZGFsQ29udGVudCIsImNsb3NlSU9Nb2RhbCIsInN0eWxlIiwiZGlzcGxheSIsImRhdGFzZXQiLCJib3VuZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwicmVuZGVyVGFza0NhcmRzIiwidGFza3MiLCJjb250YWluZXIiLCJpbm5lckhUTUwiLCJsZW5ndGgiLCJmb3JFYWNoIiwidGFza05hbWUiLCJ0cmltIiwiU3RyaW5nIiwid3JhcHBlciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJjYXJkIiwiaGVhZGVyQ29udGFpbmVyIiwiaGVhZGVyIiwidGV4dENvbnRlbnQiLCJzdWJzdHJpbmciLCJ0b2dnbGVCdG4iLCJ0eXBlIiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kIiwiYXBwZW5kQ2hpbGQiLCJpbml0U2V0dXBUYXNrQ2FyZHMiLCJpbml0VG9nZ2xlVGFza3MiLCJ3aW5kb3ciLCJpbml0VGFza09yZGVyRWRpdGluZyIsImFwcGx5VGFza3MiLCJBcnJheSIsImlzQXJyYXkiLCJmZXRjaCIsInRoZW4iLCJyIiwiY29udGVudFR5cGUiLCJoZWFkZXJzIiwiZ2V0Iiwib2siLCJFcnJvciIsInN0YXR1cyIsImluY2x1ZGVzIiwianNvbiIsImRhdGEiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsInNob3dTZXR1cEZvcm0iLCJjaGF0Q29udGFpbmVyIiwic2V0dXBDb250YWluZXIiLCJzZXR1cEluZm9FbGVtZW50IiwidmFsdWUiLCJzaWRlYmFyIiwicXVlcnlTZWxlY3RvciIsInJlbW92ZSIsImJvZHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaGFuZGxlVGFza0NhcmRDbGljayIsImlzRWRpdGluZ09yZGVyIiwidGFyZ2V0IiwiY2xvc2VzdCIsImFpTW9kZWxTZWxlY3QiLCJjaGF0TWVzc2FnZXMiLCJzZXR1cEluZm8iLCJhaU1vZGVsIiwiaW5wdXRFeGFtcGxlcyIsIm91dHB1dEV4YW1wbGVzIiwibmV3Um9vbUlkIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwicm9vbVRpdGxlIiwiY3VycmVudENoYXRSb29tSWQiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiY3JlYXRlTmV3Q2hhdFJvb20iLCJzaG93Q2hhdEludGVyZmFjZSIsImxvYWRDaGF0Um9vbXMiLCJyZW1vdmVJdGVtIiwiZmlyc3RNc2ciLCJnZW5lcmF0ZVJlc3BvbnNlIiwiYWxlcnQiLCJvbGRCdG4iLCJjYXJkcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzbGljZSIsImMiLCJidG4iLCJpZCIsIndpZHRoIiwibWFyZ2luVG9wIiwiZXhwYW5kZWQiLCJwcmV2ZW50RGVmYXVsdCIsInNlbGVjdGlvbkNvbnRhaW5lciIsInRhc2tTZWxlY3Rpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./scripts/setup/setup.ts\n");

/***/ }),

/***/ "./scripts/setup/task_manager.ts":
/*!***************************************!*\
  !*** ./scripts/setup/task_manager.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// Task title updater\nfunction updateTaskTitle(card, newTitle) {\n    const truncatedTitle = newTitle.length > 8 ? newTitle.substring(0, 8) + \"…\" : newTitle;\n    // 既存のヘッダーがある場合はテキストだけを更新\n    const header = card.querySelector(\".task-header\");\n    if (header) {\n        header.textContent = truncatedTitle;\n    } else if (typeof window.loadTaskCards === \"function\") {\n        // ヘッダーが存在しない異常状態では一覧を再描画して整える\n        window.loadTaskCards();\n        return;\n    }\n    // 過去に生成された task-title 要素が残っている場合は削除しておく\n    card.querySelectorAll(\".task-title\").forEach((elem)=>elem.remove());\n}\n// Task edit modal\nfunction showModal(modalEl1) {\n    if (!modalEl1) return;\n    modalEl1.style.display = \"flex\";\n}\nfunction hideModal(modalEl1) {\n    if (!modalEl1) return;\n    modalEl1.style.display = \"none\";\n}\nconst initTaskManager = ()=>{\n    const modalEl1 = document.getElementById(\"taskEditModal\");\n    const closeBtn = document.getElementById(\"closeTaskEditModal\");\n    const cancelBtn = document.getElementById(\"cancelTaskEditModal\");\n    const saveBtn = document.getElementById(\"saveTaskChanges\");\n    // モーダルの閉じる操作\n    closeBtn?.addEventListener(\"click\", ()=>hideModal(modalEl1));\n    cancelBtn?.addEventListener(\"click\", ()=>hideModal(modalEl1));\n    if (!saveBtn) return;\n    saveBtn.addEventListener(\"click\", ()=>{\n        const taskNameEl = document.getElementById(\"taskName\");\n        const promptTemplateEl = document.getElementById(\"promptTemplate\");\n        const inputExamplesEl = document.getElementById(\"inputExamples\");\n        const outputExamplesEl = document.getElementById(\"outputExamples\");\n        if (!taskNameEl || !promptTemplateEl || !inputExamplesEl || !outputExamplesEl) {\n            alert(\"入力欄が見つかりませんでした。\");\n            return;\n        }\n        // 1. モーダル内の入力値取得\n        const taskName = taskNameEl.value.trim();\n        const promptTemplate = promptTemplateEl.value.trim();\n        const inputExamples = inputExamplesEl.value.trim();\n        const outputExamples = outputExamplesEl.value.trim();\n        // 2. 編集前のタスク名を dataset から取得\n        const editingCard = window.currentEditingCard;\n        if (!editingCard) {\n            alert(\"編集対象が見つかりませんでした。\");\n            return;\n        }\n        const oldTask = editingCard.dataset.task;\n        if (!oldTask) {\n            alert(\"編集対象のタスク情報が見つかりませんでした。\");\n            return;\n        }\n        // 3. サーバー送信用ペイロード\n        const payload = {\n            old_task: oldTask,\n            new_task: taskName,\n            prompt_template: promptTemplate,\n            input_examples: inputExamples,\n            output_examples: outputExamples\n        };\n        // 4. API 呼び出し\n        fetch(\"/api/edit_task\", {\n            method: \"POST\",\n            credentials: \"same-origin\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(payload)\n        }).then((response)=>{\n            const ct = response.headers.get(\"Content-Type\") || \"\";\n            if (ct.includes(\"application/json\")) {\n                // 正常 or JSON エラー(JSON.stringify された {\"error\":...})\n                return response.json().then((data)=>{\n                    if (!response.ok) throw new Error(data.error || \"更新に失敗しました\");\n                    return data;\n                });\n            } else {\n                // HTML の 500 ページなどが返ってきた場合\n                return response.text().then((text)=>{\n                    console.error(\"非JSONレスポンス:\", text);\n                    throw new Error(`サーバーエラー: ${response.status}`);\n                });\n            }\n        }).then(()=>{\n            // 5. 成功したら data- 属性を更新\n            const card = editingCard;\n            card.dataset.task = taskName;\n            card.dataset.prompt_template = promptTemplate;\n            card.dataset.input_examples = inputExamples;\n            card.dataset.output_examples = outputExamples;\n            // 6. タイトルを書き換え\n            updateTaskTitle(card, taskName);\n            // 7. モーダル閉じる\n            hideModal(modalEl1);\n        }).catch((error)=>{\n            alert(\"更新に失敗しました: \" + error.message);\n            console.error(\"edit_task error:\", error);\n        });\n    });\n};\nif (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", initTaskManager);\n} else {\n    initTaskManager();\n}\n// Task ordering and editing\nlet isEditingOrder = false;\nlet editButton;\nlet draggingTask = null;\nlet taskPlaceholder = null;\nlet taskOffsetX = 0;\nlet taskOffsetY = 0;\n// タスクカード読み込み後に並び替え編集ボタンを追加する処理\nfunction initTaskOrderEditing() {\n    if (!window.loggedIn) return; // ★ 未ログインなら何もしない\n    // ヘッダー要素を取得\n    const header = document.querySelector(\".task-selection-header\");\n    if (!header) return;\n    // 既存のボタンがあれば削除\n    if (editButton) editButton.remove();\n    // ボタン作成\n    editButton = document.createElement(\"button\");\n    editButton.id = \"edit-task-order-btn\";\n    editButton.className = \"primary-button\";\n    // インライン表示に合わせるため余白は不要\n    editButton.style.margin = \"0\";\n    editButton.type = \"button\"; // フォーム送信を防止\n    // Bootstrapのアイコンをセット（ここでは例としてbi-arrows-moveを使用）\n    editButton.innerHTML = '<i class=\"bi bi-arrows-move\"></i>';\n    editButton.title = \"並び替え編集\"; // ツールチップ用\n    editButton.addEventListener(\"click\", toggleTaskOrderEditing);\n    // ヘッダー内にボタンを追加\n    header.appendChild(editButton);\n}\n// 編集モードの ON/OFF 切替\nfunction toggleTaskOrderEditing() {\n    // 編集モードをトグルする\n    isEditingOrder = !isEditingOrder;\n    window.isEditingOrder = isEditingOrder;\n    if (isEditingOrder) {\n        // 編集モード開始時：\n        // ボタンを押した瞬間にアイコンをチェックマークに変更し、タイトルを「完了」にする\n        if (editButton) {\n            editButton.title = \"完了\";\n            editButton.innerHTML = '<i class=\"bi bi-check\"></i>';\n        }\n        // タスクカード表示の設定やドラッグ＆ドロップを有効化\n        document.querySelectorAll(\".task-selection .prompt-card\").forEach((card)=>{\n            card.style.display = \"flex\";\n            card.style.position = \"relative\";\n        });\n        const toggleBtn = document.getElementById(\"toggle-tasks-btn\");\n        if (toggleBtn) {\n            toggleBtn.style.display = \"none\";\n        }\n        enableTaskDragAndDrop();\n        document.querySelectorAll(\".prompt-card\").forEach((card)=>{\n            // 既にボタンが存在する場合は削除（念のため）\n            const existingDeleteContainer = card.querySelector(\".delete-container\");\n            const existingEditContainer = card.querySelector(\".edit-container\");\n            if (existingDeleteContainer) existingDeleteContainer.remove();\n            if (existingEditContainer) existingEditContainer.remove();\n            // 削除ボタンコンテナ（左上・カード外側に配置）\n            const deleteContainer = document.createElement(\"div\");\n            deleteContainer.className = \"delete-container\";\n            deleteContainer.style.position = \"absolute\";\n            deleteContainer.style.top = \"-10px\";\n            deleteContainer.style.left = \"-10px\";\n            deleteContainer.style.zIndex = \"10\";\n            // 削除ボタン\n            const deleteBtn = document.createElement(\"button\");\n            deleteBtn.type = \"button\"; // 追加：フォーム送信を防ぐ\n            deleteBtn.className = \"card-delete-btn\";\n            deleteBtn.style.width = \"24px\";\n            deleteBtn.style.height = \"24px\";\n            deleteBtn.style.borderRadius = \"50%\";\n            deleteBtn.style.border = \"none\";\n            deleteBtn.style.backgroundColor = \"#dc3545\";\n            deleteBtn.style.color = \"white\";\n            deleteBtn.style.fontSize = \"14px\";\n            deleteBtn.style.display = \"flex\";\n            deleteBtn.style.alignItems = \"center\";\n            deleteBtn.style.justifyContent = \"center\";\n            deleteBtn.innerHTML = '<i class=\"bi bi-trash\"></i>';\n            // ボタン押下時にタスクカードのクリックイベントと区別するためイベント伝播を停止\n            deleteBtn.addEventListener(\"click\", function(e) {\n                e.stopPropagation();\n                const targetCard = e.currentTarget?.closest(\".prompt-card\");\n                if (!targetCard) return;\n                if (confirm(\"このタスクを削除してもよろしいですか？\")) {\n                    const taskName = targetCard.getAttribute(\"data-task\");\n                    fetch(\"/api/delete_task\", {\n                        method: \"POST\",\n                        headers: {\n                            \"Content-Type\": \"application/json\"\n                        },\n                        body: JSON.stringify({\n                            task: taskName\n                        })\n                    }).then((response)=>{\n                        if (!response.ok) {\n                            return response.json().then((errorData)=>{\n                                throw new Error(errorData.error || \"削除に失敗しました\");\n                            });\n                        }\n                        return response.json();\n                    }).then(()=>{\n                        // 削除が成功した場合、対応するラッパー要素を削除し、並び順保存のためのAPI呼び出しも非同期で行う\n                        const wrapper = targetCard.closest(\".task-wrapper\");\n                        if (wrapper) {\n                            wrapper.remove();\n                        }\n                        // 並び順の更新は非同期で行うので、ここでページ再読み込みは行わずにDOM上を更新\n                        saveTaskOrder();\n                    }).catch((err)=>{\n                        alert(\"削除に失敗しました: \" + err.message);\n                    });\n                }\n            });\n            // 削除ボタン用ツールチップ\n            const deleteTooltip = document.createElement(\"span\");\n            deleteTooltip.textContent = \"削除\";\n            deleteTooltip.style.position = \"absolute\";\n            deleteTooltip.style.bottom = \"100%\";\n            deleteTooltip.style.left = \"50%\";\n            deleteTooltip.style.transform = \"translateX(-50%)\";\n            deleteTooltip.style.marginBottom = \"4px\";\n            deleteTooltip.style.backgroundColor = \"rgba(0, 0, 0, 0.75)\";\n            deleteTooltip.style.color = \"white\";\n            deleteTooltip.style.padding = \"2px 4px\";\n            deleteTooltip.style.borderRadius = \"4px\";\n            deleteTooltip.style.fontSize = \"10px\";\n            deleteTooltip.style.whiteSpace = \"nowrap\";\n            deleteTooltip.style.opacity = \"0\";\n            deleteTooltip.style.transition = \"opacity 0.2s\";\n            // ホバー時の挙動（削除ボタン）\n            deleteContainer.addEventListener(\"mouseenter\", ()=>{\n                deleteTooltip.style.opacity = \"1\";\n                deleteBtn.style.transform = \"scale(1.1)\";\n            });\n            deleteContainer.addEventListener(\"mouseleave\", ()=>{\n                deleteTooltip.style.opacity = \"0\";\n                deleteBtn.style.transform = \"\";\n            });\n            deleteContainer.appendChild(deleteBtn);\n            deleteContainer.appendChild(deleteTooltip);\n            // 編集ボタンコンテナ（右上・カード外側に配置）\n            const editContainer = document.createElement(\"div\");\n            editContainer.className = \"edit-container\";\n            editContainer.style.position = \"absolute\";\n            editContainer.style.top = \"-10px\";\n            editContainer.style.right = \"-10px\";\n            editContainer.style.zIndex = \"10\";\n            // 編集ボタン\n            const editBtn = document.createElement(\"button\");\n            editBtn.type = \"button\"; // 追加：フォーム送信を防ぐ\n            editBtn.className = \"card-edit-btn\";\n            editBtn.style.width = \"24px\";\n            editBtn.style.height = \"24px\";\n            editBtn.style.borderRadius = \"50%\";\n            editBtn.style.border = \"none\";\n            editBtn.style.backgroundColor = \"#007bff\";\n            editBtn.style.color = \"white\";\n            editBtn.style.fontSize = \"14px\";\n            editBtn.style.display = \"flex\";\n            editBtn.style.alignItems = \"center\";\n            editBtn.style.justifyContent = \"center\";\n            editBtn.innerHTML = '<i class=\"bi bi-pencil\"></i>';\n            // 編集ボタン押下時の処理\n            editBtn.addEventListener(\"click\", function(e) {\n                e.stopPropagation();\n                const targetCard = e.currentTarget?.closest(\".prompt-card\");\n                if (!targetCard) return;\n                // 対象カードの data 属性から値を取得してモーダルのフォームにセット\n                window.currentEditingCard = targetCard;\n                const taskNameEl = document.getElementById(\"taskName\");\n                const promptTemplateEl = document.getElementById(\"promptTemplate\");\n                const inputExamplesEl = document.getElementById(\"inputExamples\");\n                const outputExamplesEl = document.getElementById(\"outputExamples\");\n                if (taskNameEl) taskNameEl.value = targetCard.getAttribute(\"data-task\") || \"\";\n                if (promptTemplateEl) promptTemplateEl.value = targetCard.getAttribute(\"data-prompt_template\") || \"\";\n                if (inputExamplesEl) inputExamplesEl.value = targetCard.getAttribute(\"data-input_examples\") || \"\";\n                if (outputExamplesEl) outputExamplesEl.value = targetCard.getAttribute(\"data-output_examples\") || \"\";\n                // カスタムモーダルを表示\n                showModal(modalEl);\n            });\n            // 編集ボタン用ツールチップ\n            const editTooltip = document.createElement(\"span\");\n            editTooltip.textContent = \"編集\";\n            editTooltip.style.position = \"absolute\";\n            editTooltip.style.bottom = \"100%\";\n            editTooltip.style.left = \"50%\";\n            editTooltip.style.transform = \"translateX(-50%)\";\n            editTooltip.style.marginBottom = \"4px\";\n            editTooltip.style.backgroundColor = \"rgba(0, 0, 0, 0.75)\";\n            editTooltip.style.color = \"white\";\n            editTooltip.style.padding = \"2px 4px\";\n            editTooltip.style.borderRadius = \"4px\";\n            editTooltip.style.fontSize = \"10px\";\n            editTooltip.style.whiteSpace = \"nowrap\";\n            editTooltip.style.opacity = \"0\";\n            editTooltip.style.transition = \"opacity 0.2s\";\n            editContainer.addEventListener(\"mouseenter\", ()=>{\n                editTooltip.style.opacity = \"1\";\n                editBtn.style.transform = \"scale(1.1)\";\n            });\n            editContainer.addEventListener(\"mouseleave\", ()=>{\n                editTooltip.style.opacity = \"0\";\n                editBtn.style.transform = \"\";\n            });\n            editContainer.appendChild(editBtn);\n            editContainer.appendChild(editTooltip);\n            // カードにボタンコンテナを追加\n            card.appendChild(deleteContainer);\n            card.appendChild(editContainer);\n        });\n    } else {\n        // 編集モード終了時：各種ボタン要素を削除し、ドラッグ＆ドロップを無効化\n        document.querySelectorAll(\".delete-container\").forEach((container)=>container.remove());\n        document.querySelectorAll(\".edit-container\").forEach((container)=>container.remove());\n        disableTaskDragAndDrop();\n        saveTaskOrder();\n        // 編集モードで変更した表示をリセットし、折り畳みボタンを再生成\n        document.querySelectorAll(\".task-selection .prompt-card\").forEach((card)=>{\n            card.style.display = \"\";\n            card.style.position = \"\";\n        });\n        if (typeof window.initToggleTasks === \"function\") {\n            window.initToggleTasks();\n        }\n        // 画面全体の再読み込みは行わず、必要な部分のみDOMの更新を行う\n        // ※もしタスク一覧全体の更新が必要なら、非同期で新たにタスク一覧をfetchして再レンダリングする処理をここに追加\n        if (editButton) {\n            editButton.title = \"並び替え編集\";\n            editButton.innerHTML = '<i class=\"bi bi-arrows-move\"></i>';\n        }\n    }\n}\n// ドラッグ＆ドロップ用イベントを有効化（各カードに .editable クラス追加）\nfunction enableTaskDragAndDrop() {\n    const wrappers = document.querySelectorAll(\".task-wrapper\");\n    wrappers.forEach((wrapper, index)=>{\n        wrapper.classList.add(\"editable\"); // ラッパーに追加\n        // 内部のカードにも追加\n        const card = wrapper.querySelector(\".prompt-card\");\n        if (card) {\n            card.classList.add(\"editable\");\n            // 各カードのアニメーション開始タイミングをずらす（例: 0.1秒刻み）\n            card.style.animationDelay = `${index * 0.1}s`;\n        }\n        wrapper.style.touchAction = \"none\";\n        wrapper.addEventListener(\"pointerdown\", onTaskPointerDown);\n    });\n}\n// イベント解除\nfunction disableTaskDragAndDrop() {\n    const wrappers = document.querySelectorAll(\".task-wrapper\");\n    wrappers.forEach((wrapper)=>{\n        wrapper.classList.remove(\"editable\");\n        const card = wrapper.querySelector(\".prompt-card\");\n        if (card) {\n            card.classList.remove(\"editable\");\n        }\n        wrapper.removeEventListener(\"pointerdown\", onTaskPointerDown);\n    });\n    document.removeEventListener(\"pointermove\", onTaskPointerMove);\n    document.removeEventListener(\"pointerup\", onTaskPointerUp);\n    if (draggingTask) {\n        draggingTask.style.position = \"\";\n        draggingTask.style.zIndex = \"\";\n    }\n}\n// pointerdown イベント\nfunction onTaskPointerDown(e) {\n    if (e.button !== 0) return;\n    const target = e.target;\n    if (target?.closest(\".card-delete-btn\") || target?.closest(\".card-edit-btn\") || target?.closest(\".delete-container\") || target?.closest(\".edit-container\")) {\n        // 編集・削除ボタンが押された場合は何もせず終了\n        return;\n    }\n    draggingTask = e.currentTarget; // task-wrapper をドラッグ対象にする\n    if (!draggingTask) return;\n    draggingTask.classList.add(\"dragging\");\n    const rect = draggingTask.getBoundingClientRect();\n    // 絶対配置に変更\n    draggingTask.style.position = \"absolute\";\n    draggingTask.style.width = rect.width + \"px\";\n    draggingTask.style.height = rect.height + \"px\";\n    draggingTask.style.zIndex = \"1000\";\n    const container = document.querySelector(\".task-selection\");\n    if (!container) return;\n    const containerRect = container.getBoundingClientRect();\n    draggingTask.style.left = e.clientX - containerRect.left - rect.width / 2 + \"px\";\n    draggingTask.style.top = e.clientY - containerRect.top - rect.height / 2 + \"px\";\n    // プレースホルダーを作成（task-wrapper 用）\n    taskPlaceholder = document.createElement(\"div\");\n    taskPlaceholder.className = \"task-wrapper placeholder\";\n    taskPlaceholder.style.width = rect.width + \"px\";\n    taskPlaceholder.style.height = rect.height + \"px\";\n    taskPlaceholder.style.border = \"1px dashed #aaa\";\n    container.insertBefore(taskPlaceholder, draggingTask.nextSibling);\n    document.addEventListener(\"pointermove\", onTaskPointerMove);\n    document.addEventListener(\"pointerup\", onTaskPointerUp);\n}\nfunction onTaskPointerMove(e) {\n    if (!draggingTask) return;\n    const container = document.querySelector(\".task-selection\");\n    if (!container) return;\n    const containerRect = container.getBoundingClientRect();\n    const cardWidth = draggingTask.offsetWidth;\n    const cardHeight = draggingTask.offsetHeight;\n    draggingTask.style.left = e.clientX - containerRect.left - cardWidth / 2 + \"px\";\n    draggingTask.style.top = e.clientY - containerRect.top - cardHeight / 2 + \"px\";\n    // プレースホルダーの位置更新（wrapper単位で）\n    const wrappers = Array.from(container.querySelectorAll(\".task-wrapper:not(.dragging)\"));\n    let placed = false;\n    for (let wrapper of wrappers){\n        const rect = wrapper.getBoundingClientRect();\n        const centerY = rect.top + rect.height / 2;\n        if (e.clientY < centerY) {\n            if (taskPlaceholder) {\n                container.insertBefore(taskPlaceholder, wrapper);\n            }\n            placed = true;\n            break;\n        }\n    }\n    if (!placed && taskPlaceholder) {\n        container.appendChild(taskPlaceholder);\n    }\n}\nfunction onTaskPointerUp() {\n    if (!draggingTask) return;\n    const container = document.querySelector(\".task-selection\");\n    if (!container || !taskPlaceholder) return;\n    container.insertBefore(draggingTask, taskPlaceholder);\n    draggingTask.classList.remove(\"dragging\");\n    // スタイルリセット\n    draggingTask.style.position = \"\";\n    draggingTask.style.left = \"\";\n    draggingTask.style.top = \"\";\n    draggingTask.style.width = \"\";\n    draggingTask.style.height = \"\";\n    draggingTask.style.zIndex = \"\";\n    taskPlaceholder.remove();\n    taskPlaceholder = null;\n    draggingTask = null;\n    document.removeEventListener(\"pointermove\", onTaskPointerMove);\n    document.removeEventListener(\"pointerup\", onTaskPointerUp);\n}\n// 並び順をサーバーに保存する関数\nfunction saveTaskOrder() {\n    const wrappers = document.querySelectorAll(\".task-wrapper\");\n    const newOrder = Array.from(wrappers).map((wrapper)=>{\n        const card = wrapper.querySelector(\".prompt-card\");\n        if (!card || card.dataset.is_default === \"true\") {\n            return null;\n        }\n        return card.getAttribute(\"data-task\");\n    }).filter(Boolean);\n    if (newOrder.length === 0) {\n        return;\n    }\n    fetch(\"/api/update_tasks_order\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            order: newOrder\n        })\n    }).then((res)=>res.json()).then((data)=>{\n        if (data.error) {\n            alert(\"並び順の保存に失敗: \" + data.error);\n        }\n    }).catch((err)=>{\n        alert(\"並び順の保存に失敗: \" + err.toString());\n    });\n}\n// エクスポート（他のスクリプトから利用できるように）\nwindow.initTaskOrderEditing = initTaskOrderEditing;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxDQUFDLENBQUMrRyxNQUFRQSxJQUFJMUcsSUFBSSxJQUN0QkwsSUFBSSxDQUFDLENBQUNNO1FBQ0wsSUFBSUEsS0FBS0csS0FBSyxFQUFFO1lBQ2RsQyxNQUFNLGdCQUFnQitCLEtBQUtHLEtBQUs7UUFDbEM7SUFDRixHQUNDSSxLQUFLLENBQUMsQ0FBQ2lEO1FBQ052RixNQUFNLGdCQUFnQnVGLElBQUlrRCxRQUFRO0lBQ3BDO0FBQ0o7QUFFQSw0QkFBNEI7QUFDNUIvSixPQUFPcUUsb0JBQW9CLEdBQUdBO0FBRXBCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RyaWtlLWZyb250ZW5kLy4vc2NyaXB0cy9zZXR1cC90YXNrX21hbmFnZXIudHM/N2FmOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUYXNrIHRpdGxlIHVwZGF0ZXJcblxuZnVuY3Rpb24gdXBkYXRlVGFza1RpdGxlKGNhcmQ6IEhUTUxFbGVtZW50LCBuZXdUaXRsZTogc3RyaW5nKSB7XG4gIGNvbnN0IHRydW5jYXRlZFRpdGxlID0gbmV3VGl0bGUubGVuZ3RoID4gOCA/IG5ld1RpdGxlLnN1YnN0cmluZygwLCA4KSArIFwi4oCmXCIgOiBuZXdUaXRsZTtcblxuICAvLyDml6LlrZjjga7jg5jjg4Pjg4Djg7zjgYzjgYLjgovloLTlkIjjga/jg4bjgq3jgrnjg4jjgaDjgZHjgpLmm7TmlrBcbiAgY29uc3QgaGVhZGVyID0gY2FyZC5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50PihcIi50YXNrLWhlYWRlclwiKTtcbiAgaWYgKGhlYWRlcikge1xuICAgIGhlYWRlci50ZXh0Q29udGVudCA9IHRydW5jYXRlZFRpdGxlO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cubG9hZFRhc2tDYXJkcyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgLy8g44OY44OD44OA44O844GM5a2Y5Zyo44GX44Gq44GE55Ww5bi454q25oWL44Gn44Gv5LiA6Kan44KS5YaN5o+P55S744GX44Gm5pW044GI44KLXG4gICAgd2luZG93LmxvYWRUYXNrQ2FyZHMoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyDpgY7ljrvjgavnlJ/miJDjgZXjgozjgZ8gdGFzay10aXRsZSDopoHntKDjgYzmrovjgaPjgabjgYTjgovloLTlkIjjga/liYrpmaTjgZfjgabjgYrjgY9cbiAgY2FyZC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhc2stdGl0bGVcIikuZm9yRWFjaCgoZWxlbSkgPT4gZWxlbS5yZW1vdmUoKSk7XG59XG5cbi8vIFRhc2sgZWRpdCBtb2RhbFxuXG5mdW5jdGlvbiBzaG93TW9kYWwobW9kYWxFbDogSFRNTEVsZW1lbnQgfCBudWxsKSB7XG4gIGlmICghbW9kYWxFbCkgcmV0dXJuO1xuICBtb2RhbEVsLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbn1cblxuZnVuY3Rpb24gaGlkZU1vZGFsKG1vZGFsRWw6IEhUTUxFbGVtZW50IHwgbnVsbCkge1xuICBpZiAoIW1vZGFsRWwpIHJldHVybjtcbiAgbW9kYWxFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG59XG5cbmNvbnN0IGluaXRUYXNrTWFuYWdlciA9ICgpID0+IHtcbiAgY29uc3QgbW9kYWxFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza0VkaXRNb2RhbFwiKTtcbiAgY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsb3NlVGFza0VkaXRNb2RhbFwiKTtcbiAgY29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW5jZWxUYXNrRWRpdE1vZGFsXCIpO1xuICBjb25zdCBzYXZlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzYXZlVGFza0NoYW5nZXNcIik7XG5cbiAgLy8g44Oi44O844OA44Or44Gu6ZaJ44GY44KL5pON5L2cXG4gIGNsb3NlQnRuPy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gaGlkZU1vZGFsKG1vZGFsRWwpKTtcbiAgY2FuY2VsQnRuPy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gaGlkZU1vZGFsKG1vZGFsRWwpKTtcblxuICBpZiAoIXNhdmVCdG4pIHJldHVybjtcblxuICBzYXZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY29uc3QgdGFza05hbWVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza05hbWVcIikgYXMgSFRNTElucHV0RWxlbWVudCB8IG51bGw7XG4gICAgY29uc3QgcHJvbXB0VGVtcGxhdGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvbXB0VGVtcGxhdGVcIikgYXMgSFRNTFRleHRBcmVhRWxlbWVudCB8IG51bGw7XG4gICAgY29uc3QgaW5wdXRFeGFtcGxlc0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnB1dEV4YW1wbGVzXCIpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsO1xuICAgIGNvbnN0IG91dHB1dEV4YW1wbGVzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm91dHB1dEV4YW1wbGVzXCIpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsO1xuICAgIGlmICghdGFza05hbWVFbCB8fCAhcHJvbXB0VGVtcGxhdGVFbCB8fCAhaW5wdXRFeGFtcGxlc0VsIHx8ICFvdXRwdXRFeGFtcGxlc0VsKSB7XG4gICAgICBhbGVydChcIuWFpeWKm+ashOOBjOimi+OBpOOBi+OCiuOBvuOBm+OCk+OBp+OBl+OBn+OAglwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAxLiDjg6Ljg7zjg4Djg6vlhoXjga7lhaXlipvlgKTlj5blvpdcbiAgICBjb25zdCB0YXNrTmFtZSA9IHRhc2tOYW1lRWwudmFsdWUudHJpbSgpO1xuICAgIGNvbnN0IHByb21wdFRlbXBsYXRlID0gcHJvbXB0VGVtcGxhdGVFbC52YWx1ZS50cmltKCk7XG4gICAgY29uc3QgaW5wdXRFeGFtcGxlcyA9IGlucHV0RXhhbXBsZXNFbC52YWx1ZS50cmltKCk7XG4gICAgY29uc3Qgb3V0cHV0RXhhbXBsZXMgPSBvdXRwdXRFeGFtcGxlc0VsLnZhbHVlLnRyaW0oKTtcblxuICAgIC8vIDIuIOe3qOmbhuWJjeOBruOCv+OCueOCr+WQjeOCkiBkYXRhc2V0IOOBi+OCieWPluW+l1xuICAgIGNvbnN0IGVkaXRpbmdDYXJkID0gd2luZG93LmN1cnJlbnRFZGl0aW5nQ2FyZDtcbiAgICBpZiAoIWVkaXRpbmdDYXJkKSB7XG4gICAgICBhbGVydChcIue3qOmbhuWvvuixoeOBjOimi+OBpOOBi+OCiuOBvuOBm+OCk+OBp+OBl+OBn+OAglwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgb2xkVGFzayA9IGVkaXRpbmdDYXJkLmRhdGFzZXQudGFzaztcbiAgICBpZiAoIW9sZFRhc2spIHtcbiAgICAgIGFsZXJ0KFwi57eo6ZuG5a++6LGh44Gu44K/44K544Kv5oOF5aCx44GM6KaL44Gk44GL44KK44G+44Gb44KT44Gn44GX44Gf44CCXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDMuIOOCteODvOODkOODvOmAgeS/oeeUqOODmuOCpOODreODvOODiVxuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICBvbGRfdGFzazogb2xkVGFzayxcbiAgICAgIG5ld190YXNrOiB0YXNrTmFtZSxcbiAgICAgIHByb21wdF90ZW1wbGF0ZTogcHJvbXB0VGVtcGxhdGUsXG4gICAgICBpbnB1dF9leGFtcGxlczogaW5wdXRFeGFtcGxlcyxcbiAgICAgIG91dHB1dF9leGFtcGxlczogb3V0cHV0RXhhbXBsZXNcbiAgICB9O1xuXG4gICAgLy8gNC4gQVBJIOWRvOOBs+WHuuOBl1xuICAgIGZldGNoKFwiL2FwaS9lZGl0X3Rhc2tcIiwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGNyZWRlbnRpYWxzOiBcInNhbWUtb3JpZ2luXCIsIC8vIENvb2tpZSDjgpLpgIHkv6FcbiAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBjb25zdCBjdCA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KFwiQ29udGVudC1UeXBlXCIpIHx8IFwiXCI7XG4gICAgICAgIGlmIChjdC5pbmNsdWRlcyhcImFwcGxpY2F0aW9uL2pzb25cIikpIHtcbiAgICAgICAgICAvLyDmraPluLggb3IgSlNPTiDjgqjjg6njg7woSlNPTi5zdHJpbmdpZnkg44GV44KM44GfIHtcImVycm9yXCI6Li4ufSlcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yIHx8IFwi5pu05paw44Gr5aSx5pWX44GX44G+44GX44GfXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSFRNTCDjga4gNTAwIOODmuODvOOCuOOBquOBqeOBjOi/lOOBo+OBpuOBjeOBn+WgtOWQiFxuICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCkudGhlbigodGV4dCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIumdnkpTT07jg6zjgrnjg53jg7Pjgrk6XCIsIHRleHQpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDjgrXjg7zjg5Djg7zjgqjjg6njg7w6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAvLyA1LiDmiJDlip/jgZfjgZ/jgokgZGF0YS0g5bGe5oCn44KS5pu05pawXG4gICAgICAgIGNvbnN0IGNhcmQgPSBlZGl0aW5nQ2FyZDtcbiAgICAgICAgY2FyZC5kYXRhc2V0LnRhc2sgPSB0YXNrTmFtZTtcbiAgICAgICAgY2FyZC5kYXRhc2V0LnByb21wdF90ZW1wbGF0ZSA9IHByb21wdFRlbXBsYXRlO1xuICAgICAgICBjYXJkLmRhdGFzZXQuaW5wdXRfZXhhbXBsZXMgPSBpbnB1dEV4YW1wbGVzO1xuICAgICAgICBjYXJkLmRhdGFzZXQub3V0cHV0X2V4YW1wbGVzID0gb3V0cHV0RXhhbXBsZXM7XG5cbiAgICAgICAgLy8gNi4g44K/44Kk44OI44Or44KS5pu444GN5o+b44GIXG4gICAgICAgIHVwZGF0ZVRhc2tUaXRsZShjYXJkLCB0YXNrTmFtZSk7XG5cbiAgICAgICAgLy8gNy4g44Oi44O844OA44Or6ZaJ44GY44KLXG4gICAgICAgIGhpZGVNb2RhbChtb2RhbEVsKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGFsZXJ0KFwi5pu05paw44Gr5aSx5pWX44GX44G+44GX44GfOiBcIiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiZWRpdF90YXNrIGVycm9yOlwiLCBlcnJvcik7XG4gICAgICB9KTtcbiAgfSk7XG59O1xuXG5pZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJsb2FkaW5nXCIpIHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgaW5pdFRhc2tNYW5hZ2VyKTtcbn0gZWxzZSB7XG4gIGluaXRUYXNrTWFuYWdlcigpO1xufVxuXG4vLyBUYXNrIG9yZGVyaW5nIGFuZCBlZGl0aW5nXG5cbmxldCBpc0VkaXRpbmdPcmRlciA9IGZhbHNlO1xubGV0IGVkaXRCdXR0b246IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbDtcbmxldCBkcmFnZ2luZ1Rhc2s6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5sZXQgdGFza1BsYWNlaG9sZGVyOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xubGV0IHRhc2tPZmZzZXRYID0gMDtcbmxldCB0YXNrT2Zmc2V0WSA9IDA7XG5cbi8vIOOCv+OCueOCr+OCq+ODvOODieiqreOBv+i+vOOBv+W+jOOBq+S4puOBs+abv+OBiOe3qOmbhuODnOOCv+ODs+OCkui/veWKoOOBmeOCi+WHpueQhlxuZnVuY3Rpb24gaW5pdFRhc2tPcmRlckVkaXRpbmcoKSB7XG4gIGlmICghd2luZG93LmxvZ2dlZEluKSByZXR1cm47IC8vIOKYhSDmnKrjg63jgrDjgqTjg7PjgarjgonkvZXjgoLjgZfjgarjgYRcblxuICAvLyDjg5jjg4Pjg4Djg7zopoHntKDjgpLlj5blvpdcbiAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLXNlbGVjdGlvbi1oZWFkZXJcIik7XG4gIGlmICghaGVhZGVyKSByZXR1cm47XG5cbiAgLy8g5pei5a2Y44Gu44Oc44K/44Oz44GM44GC44KM44Gw5YmK6ZmkXG4gIGlmIChlZGl0QnV0dG9uKSBlZGl0QnV0dG9uLnJlbW92ZSgpO1xuXG4gIC8vIOODnOOCv+ODs+S9nOaIkFxuICBlZGl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgZWRpdEJ1dHRvbi5pZCA9IFwiZWRpdC10YXNrLW9yZGVyLWJ0blwiO1xuICBlZGl0QnV0dG9uLmNsYXNzTmFtZSA9IFwicHJpbWFyeS1idXR0b25cIjtcbiAgLy8g44Kk44Oz44Op44Kk44Oz6KGo56S644Gr5ZCI44KP44Gb44KL44Gf44KB5L2Z55m944Gv5LiN6KaBXG4gIGVkaXRCdXR0b24uc3R5bGUubWFyZ2luID0gXCIwXCI7XG4gIGVkaXRCdXR0b24udHlwZSA9IFwiYnV0dG9uXCI7IC8vIOODleOCqeODvOODoOmAgeS/oeOCkumYsuatolxuICAvLyBCb290c3RyYXDjga7jgqLjgqTjgrPjg7PjgpLjgrvjg4Pjg4jvvIjjgZPjgZPjgafjga/kvovjgajjgZfjgaZiaS1hcnJvd3MtbW92ZeOCkuS9v+eUqO+8iVxuICBlZGl0QnV0dG9uLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImJpIGJpLWFycm93cy1tb3ZlXCI+PC9pPic7XG4gIGVkaXRCdXR0b24udGl0bGUgPSBcIuS4puOBs+abv+OBiOe3qOmbhlwiOyAvLyDjg4Tjg7zjg6vjg4Hjg4Pjg5fnlKhcblxuICBlZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVUYXNrT3JkZXJFZGl0aW5nKTtcbiAgLy8g44OY44OD44OA44O85YaF44Gr44Oc44K/44Oz44KS6L+95YqgXG4gIGhlYWRlci5hcHBlbmRDaGlsZChlZGl0QnV0dG9uKTtcbn1cblxuLy8g57eo6ZuG44Oi44O844OJ44GuIE9OL09GRiDliIfmm79cbmZ1bmN0aW9uIHRvZ2dsZVRhc2tPcmRlckVkaXRpbmcoKSB7XG4gIC8vIOe3qOmbhuODouODvOODieOCkuODiOOCsOODq+OBmeOCi1xuICBpc0VkaXRpbmdPcmRlciA9ICFpc0VkaXRpbmdPcmRlcjtcbiAgd2luZG93LmlzRWRpdGluZ09yZGVyID0gaXNFZGl0aW5nT3JkZXI7XG5cbiAgaWYgKGlzRWRpdGluZ09yZGVyKSB7XG4gICAgLy8g57eo6ZuG44Oi44O844OJ6ZaL5aeL5pmC77yaXG4gICAgLy8g44Oc44K/44Oz44KS5oq844GX44Gf556s6ZaT44Gr44Ki44Kk44Kz44Oz44KS44OB44Kn44OD44Kv44Oe44O844Kv44Gr5aSJ5pu044GX44CB44K/44Kk44OI44Or44KS44CM5a6M5LqG44CN44Gr44GZ44KLXG4gICAgaWYgKGVkaXRCdXR0b24pIHtcbiAgICAgIGVkaXRCdXR0b24udGl0bGUgPSBcIuWujOS6hlwiO1xuICAgICAgZWRpdEJ1dHRvbi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJiaSBiaS1jaGVja1wiPjwvaT4nO1xuICAgIH1cblxuICAgIC8vIOOCv+OCueOCr+OCq+ODvOODieihqOekuuOBruioreWumuOChOODieODqeODg+OCsO+8huODieODreODg+ODl+OCkuacieWKueWMllxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KFwiLnRhc2stc2VsZWN0aW9uIC5wcm9tcHQtY2FyZFwiKS5mb3JFYWNoKChjYXJkKSA9PiB7XG4gICAgICBjYXJkLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgIGNhcmQuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG4gICAgfSk7XG4gICAgY29uc3QgdG9nZ2xlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2dnbGUtdGFza3MtYnRuXCIpO1xuICAgIGlmICh0b2dnbGVCdG4pIHtcbiAgICAgIHRvZ2dsZUJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuICAgIGVuYWJsZVRhc2tEcmFnQW5kRHJvcCgpO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oXCIucHJvbXB0LWNhcmRcIikuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgLy8g5pei44Gr44Oc44K/44Oz44GM5a2Y5Zyo44GZ44KL5aC05ZCI44Gv5YmK6Zmk77yI5b+144Gu44Gf44KB77yJXG4gICAgICBjb25zdCBleGlzdGluZ0RlbGV0ZUNvbnRhaW5lciA9IGNhcmQucXVlcnlTZWxlY3RvcihcIi5kZWxldGUtY29udGFpbmVyXCIpO1xuICAgICAgY29uc3QgZXhpc3RpbmdFZGl0Q29udGFpbmVyID0gY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtY29udGFpbmVyXCIpO1xuICAgICAgaWYgKGV4aXN0aW5nRGVsZXRlQ29udGFpbmVyKSBleGlzdGluZ0RlbGV0ZUNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgIGlmIChleGlzdGluZ0VkaXRDb250YWluZXIpIGV4aXN0aW5nRWRpdENvbnRhaW5lci5yZW1vdmUoKTtcblxuICAgICAgLy8g5YmK6Zmk44Oc44K/44Oz44Kz44Oz44OG44OK77yI5bem5LiK44O744Kr44O844OJ5aSW5YG044Gr6YWN572u77yJXG4gICAgICBjb25zdCBkZWxldGVDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZGVsZXRlQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwiZGVsZXRlLWNvbnRhaW5lclwiO1xuICAgICAgZGVsZXRlQ29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgZGVsZXRlQ29udGFpbmVyLnN0eWxlLnRvcCA9IFwiLTEwcHhcIjtcbiAgICAgIGRlbGV0ZUNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gXCItMTBweFwiO1xuICAgICAgZGVsZXRlQ29udGFpbmVyLnN0eWxlLnpJbmRleCA9IFwiMTBcIjtcblxuICAgICAgLy8g5YmK6Zmk44Oc44K/44OzXG4gICAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgZGVsZXRlQnRuLnR5cGUgPSBcImJ1dHRvblwiOyAvLyDov73liqDvvJrjg5Xjgqnjg7zjg6DpgIHkv6HjgpLpmLLjgZBcbiAgICAgIGRlbGV0ZUJ0bi5jbGFzc05hbWUgPSBcImNhcmQtZGVsZXRlLWJ0blwiO1xuICAgICAgZGVsZXRlQnRuLnN0eWxlLndpZHRoID0gXCIyNHB4XCI7XG4gICAgICBkZWxldGVCdG4uc3R5bGUuaGVpZ2h0ID0gXCIyNHB4XCI7XG4gICAgICBkZWxldGVCdG4uc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI1MCVcIjtcbiAgICAgIGRlbGV0ZUJ0bi5zdHlsZS5ib3JkZXIgPSBcIm5vbmVcIjtcbiAgICAgIGRlbGV0ZUJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNkYzM1NDVcIjtcbiAgICAgIGRlbGV0ZUJ0bi5zdHlsZS5jb2xvciA9IFwid2hpdGVcIjtcbiAgICAgIGRlbGV0ZUJ0bi5zdHlsZS5mb250U2l6ZSA9IFwiMTRweFwiO1xuICAgICAgZGVsZXRlQnRuLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgIGRlbGV0ZUJ0bi5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcbiAgICAgIGRlbGV0ZUJ0bi5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiY2VudGVyXCI7XG4gICAgICBkZWxldGVCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiYmkgYmktdHJhc2hcIj48L2k+JztcbiAgICAgIC8vIOODnOOCv+ODs+aKvOS4i+aZguOBq+OCv+OCueOCr+OCq+ODvOODieOBruOCr+ODquODg+OCr+OCpOODmeODs+ODiOOBqOWMuuWIpeOBmeOCi+OBn+OCgeOCpOODmeODs+ODiOS8neaSreOCkuWBnOatolxuICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBjb25zdCB0YXJnZXRDYXJkID0gKGUuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCB8IG51bGwpPy5jbG9zZXN0KFwiLnByb21wdC1jYXJkXCIpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgaWYgKCF0YXJnZXRDYXJkKSByZXR1cm47XG4gICAgICAgIGlmIChjb25maXJtKFwi44GT44Gu44K/44K544Kv44KS5YmK6Zmk44GX44Gm44KC44KI44KN44GX44GE44Gn44GZ44GL77yfXCIpKSB7XG4gICAgICAgICAgY29uc3QgdGFza05hbWUgPSB0YXJnZXRDYXJkLmdldEF0dHJpYnV0ZShcImRhdGEtdGFza1wiKTtcbiAgICAgICAgICBmZXRjaChcIi9hcGkvZGVsZXRlX3Rhc2tcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdGFzazogdGFza05hbWUgfSlcbiAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpLnRoZW4oKGVycm9yRGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yRGF0YS5lcnJvciB8fCBcIuWJiumZpOOBq+WkseaVl+OBl+OBvuOBl+OBn1wiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgLy8g5YmK6Zmk44GM5oiQ5Yqf44GX44Gf5aC05ZCI44CB5a++5b+c44GZ44KL44Op44OD44OR44O86KaB57Sg44KS5YmK6Zmk44GX44CB5Lim44Gz6aCG5L+d5a2Y44Gu44Gf44KB44GuQVBJ5ZG844Gz5Ye644GX44KC6Z2e5ZCM5pyf44Gn6KGM44GGXG4gICAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSB0YXJnZXRDYXJkLmNsb3Nlc3QoXCIudGFzay13cmFwcGVyXCIpO1xuICAgICAgICAgICAgICBpZiAod3JhcHBlcikge1xuICAgICAgICAgICAgICAgIHdyYXBwZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8g5Lim44Gz6aCG44Gu5pu05paw44Gv6Z2e5ZCM5pyf44Gn6KGM44GG44Gu44Gn44CB44GT44GT44Gn44Oa44O844K45YaN6Kqt44G/6L6844G/44Gv6KGM44KP44Ga44GrRE9N5LiK44KS5pu05pawXG4gICAgICAgICAgICAgIHNhdmVUYXNrT3JkZXIoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICBhbGVydChcIuWJiumZpOOBq+WkseaVl+OBl+OBvuOBl+OBnzogXCIgKyBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIOWJiumZpOODnOOCv+ODs+eUqOODhOODvOODq+ODgeODg+ODl1xuICAgICAgY29uc3QgZGVsZXRlVG9vbHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgZGVsZXRlVG9vbHRpcC50ZXh0Q29udGVudCA9IFwi5YmK6ZmkXCI7XG4gICAgICBkZWxldGVUb29sdGlwLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgZGVsZXRlVG9vbHRpcC5zdHlsZS5ib3R0b20gPSBcIjEwMCVcIjtcbiAgICAgIGRlbGV0ZVRvb2x0aXAuc3R5bGUubGVmdCA9IFwiNTAlXCI7XG4gICAgICBkZWxldGVUb29sdGlwLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgtNTAlKVwiO1xuICAgICAgZGVsZXRlVG9vbHRpcC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjRweFwiO1xuICAgICAgZGVsZXRlVG9vbHRpcC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJnYmEoMCwgMCwgMCwgMC43NSlcIjtcbiAgICAgIGRlbGV0ZVRvb2x0aXAuc3R5bGUuY29sb3IgPSBcIndoaXRlXCI7XG4gICAgICBkZWxldGVUb29sdGlwLnN0eWxlLnBhZGRpbmcgPSBcIjJweCA0cHhcIjtcbiAgICAgIGRlbGV0ZVRvb2x0aXAuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI0cHhcIjtcbiAgICAgIGRlbGV0ZVRvb2x0aXAuc3R5bGUuZm9udFNpemUgPSBcIjEwcHhcIjtcbiAgICAgIGRlbGV0ZVRvb2x0aXAuc3R5bGUud2hpdGVTcGFjZSA9IFwibm93cmFwXCI7XG4gICAgICBkZWxldGVUb29sdGlwLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgICAgIGRlbGV0ZVRvb2x0aXAuc3R5bGUudHJhbnNpdGlvbiA9IFwib3BhY2l0eSAwLjJzXCI7XG5cbiAgICAgIC8vIOODm+ODkOODvOaZguOBruaMmeWLle+8iOWJiumZpOODnOOCv+ODs++8iVxuICAgICAgZGVsZXRlQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsICgpID0+IHtcbiAgICAgICAgZGVsZXRlVG9vbHRpcC5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7XG4gICAgICAgIGRlbGV0ZUJ0bi5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlKDEuMSlcIjtcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsICgpID0+IHtcbiAgICAgICAgZGVsZXRlVG9vbHRpcC5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XG4gICAgICAgIGRlbGV0ZUJ0bi5zdHlsZS50cmFuc2Zvcm0gPSBcIlwiO1xuICAgICAgfSk7XG5cbiAgICAgIGRlbGV0ZUNvbnRhaW5lci5hcHBlbmRDaGlsZChkZWxldGVCdG4pO1xuICAgICAgZGVsZXRlQ29udGFpbmVyLmFwcGVuZENoaWxkKGRlbGV0ZVRvb2x0aXApO1xuXG4gICAgICAvLyDnt6jpm4bjg5zjgr/jg7PjgrPjg7Pjg4bjg4rvvIjlj7PkuIrjg7vjgqvjg7zjg4nlpJblgbTjgavphY3nva7vvIlcbiAgICAgIGNvbnN0IGVkaXRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZWRpdENvbnRhaW5lci5jbGFzc05hbWUgPSBcImVkaXQtY29udGFpbmVyXCI7XG4gICAgICBlZGl0Q29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgZWRpdENvbnRhaW5lci5zdHlsZS50b3AgPSBcIi0xMHB4XCI7XG4gICAgICBlZGl0Q29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gXCItMTBweFwiO1xuICAgICAgZWRpdENvbnRhaW5lci5zdHlsZS56SW5kZXggPSBcIjEwXCI7XG5cbiAgICAgIC8vIOe3qOmbhuODnOOCv+ODs1xuICAgICAgY29uc3QgZWRpdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICBlZGl0QnRuLnR5cGUgPSBcImJ1dHRvblwiOyAvLyDov73liqDvvJrjg5Xjgqnjg7zjg6DpgIHkv6HjgpLpmLLjgZBcbiAgICAgIGVkaXRCdG4uY2xhc3NOYW1lID0gXCJjYXJkLWVkaXQtYnRuXCI7XG4gICAgICBlZGl0QnRuLnN0eWxlLndpZHRoID0gXCIyNHB4XCI7XG4gICAgICBlZGl0QnRuLnN0eWxlLmhlaWdodCA9IFwiMjRweFwiO1xuICAgICAgZWRpdEJ0bi5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjUwJVwiO1xuICAgICAgZWRpdEJ0bi5zdHlsZS5ib3JkZXIgPSBcIm5vbmVcIjtcbiAgICAgIGVkaXRCdG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjMDA3YmZmXCI7XG4gICAgICBlZGl0QnRuLnN0eWxlLmNvbG9yID0gXCJ3aGl0ZVwiO1xuICAgICAgZWRpdEJ0bi5zdHlsZS5mb250U2l6ZSA9IFwiMTRweFwiO1xuICAgICAgZWRpdEJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICBlZGl0QnRuLnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuICAgICAgZWRpdEJ0bi5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiY2VudGVyXCI7XG4gICAgICBlZGl0QnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImJpIGJpLXBlbmNpbFwiPjwvaT4nO1xuXG4gICAgICAvLyDnt6jpm4bjg5zjgr/jg7PmirzkuIvmmYLjga7lh6bnkIZcbiAgICAgIGVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGNvbnN0IHRhcmdldENhcmQgPSAoZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50IHwgbnVsbCk/LmNsb3Nlc3QoXCIucHJvbXB0LWNhcmRcIikgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgICAgICBpZiAoIXRhcmdldENhcmQpIHJldHVybjtcblxuICAgICAgICAvLyDlr77osaHjgqvjg7zjg4njga4gZGF0YSDlsZ7mgKfjgYvjgonlgKTjgpLlj5blvpfjgZfjgabjg6Ljg7zjg4Djg6vjga7jg5Xjgqnjg7zjg6Djgavjgrvjg4Pjg4hcbiAgICAgICAgd2luZG93LmN1cnJlbnRFZGl0aW5nQ2FyZCA9IHRhcmdldENhcmQ7XG4gICAgICAgIGNvbnN0IHRhc2tOYW1lRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tOYW1lXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsO1xuICAgICAgICBjb25zdCBwcm9tcHRUZW1wbGF0ZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9tcHRUZW1wbGF0ZVwiKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgY29uc3QgaW5wdXRFeGFtcGxlc0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnB1dEV4YW1wbGVzXCIpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsO1xuICAgICAgICBjb25zdCBvdXRwdXRFeGFtcGxlc0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvdXRwdXRFeGFtcGxlc1wiKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgaWYgKHRhc2tOYW1lRWwpIHRhc2tOYW1lRWwudmFsdWUgPSB0YXJnZXRDYXJkLmdldEF0dHJpYnV0ZShcImRhdGEtdGFza1wiKSB8fCBcIlwiO1xuICAgICAgICBpZiAocHJvbXB0VGVtcGxhdGVFbCkgcHJvbXB0VGVtcGxhdGVFbC52YWx1ZSA9IHRhcmdldENhcmQuZ2V0QXR0cmlidXRlKFwiZGF0YS1wcm9tcHRfdGVtcGxhdGVcIikgfHwgXCJcIjtcbiAgICAgICAgaWYgKGlucHV0RXhhbXBsZXNFbCkgaW5wdXRFeGFtcGxlc0VsLnZhbHVlID0gdGFyZ2V0Q2FyZC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWlucHV0X2V4YW1wbGVzXCIpIHx8IFwiXCI7XG4gICAgICAgIGlmIChvdXRwdXRFeGFtcGxlc0VsKSBvdXRwdXRFeGFtcGxlc0VsLnZhbHVlID0gdGFyZ2V0Q2FyZC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW91dHB1dF9leGFtcGxlc1wiKSB8fCBcIlwiO1xuXG4gICAgICAgIC8vIOOCq+OCueOCv+ODoOODouODvOODgOODq+OCkuihqOekulxuICAgICAgICBzaG93TW9kYWwobW9kYWxFbCk7XG4gICAgICB9KTtcblxuICAgICAgLy8g57eo6ZuG44Oc44K/44Oz55So44OE44O844Or44OB44OD44OXXG4gICAgICBjb25zdCBlZGl0VG9vbHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgZWRpdFRvb2x0aXAudGV4dENvbnRlbnQgPSBcIue3qOmbhlwiO1xuICAgICAgZWRpdFRvb2x0aXAuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICBlZGl0VG9vbHRpcC5zdHlsZS5ib3R0b20gPSBcIjEwMCVcIjtcbiAgICAgIGVkaXRUb29sdGlwLnN0eWxlLmxlZnQgPSBcIjUwJVwiO1xuICAgICAgZWRpdFRvb2x0aXAuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVYKC01MCUpXCI7XG4gICAgICBlZGl0VG9vbHRpcC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjRweFwiO1xuICAgICAgZWRpdFRvb2x0aXAuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZ2JhKDAsIDAsIDAsIDAuNzUpXCI7XG4gICAgICBlZGl0VG9vbHRpcC5zdHlsZS5jb2xvciA9IFwid2hpdGVcIjtcbiAgICAgIGVkaXRUb29sdGlwLnN0eWxlLnBhZGRpbmcgPSBcIjJweCA0cHhcIjtcbiAgICAgIGVkaXRUb29sdGlwLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNHB4XCI7XG4gICAgICBlZGl0VG9vbHRpcC5zdHlsZS5mb250U2l6ZSA9IFwiMTBweFwiO1xuICAgICAgZWRpdFRvb2x0aXAuc3R5bGUud2hpdGVTcGFjZSA9IFwibm93cmFwXCI7XG4gICAgICBlZGl0VG9vbHRpcC5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XG4gICAgICBlZGl0VG9vbHRpcC5zdHlsZS50cmFuc2l0aW9uID0gXCJvcGFjaXR5IDAuMnNcIjtcblxuICAgICAgZWRpdENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCAoKSA9PiB7XG4gICAgICAgIGVkaXRUb29sdGlwLnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcbiAgICAgICAgZWRpdEJ0bi5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlKDEuMSlcIjtcbiAgICAgIH0pO1xuICAgICAgZWRpdENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCAoKSA9PiB7XG4gICAgICAgIGVkaXRUb29sdGlwLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgICAgICAgZWRpdEJ0bi5zdHlsZS50cmFuc2Zvcm0gPSBcIlwiO1xuICAgICAgfSk7XG5cbiAgICAgIGVkaXRDb250YWluZXIuYXBwZW5kQ2hpbGQoZWRpdEJ0bik7XG4gICAgICBlZGl0Q29udGFpbmVyLmFwcGVuZENoaWxkKGVkaXRUb29sdGlwKTtcblxuICAgICAgLy8g44Kr44O844OJ44Gr44Oc44K/44Oz44Kz44Oz44OG44OK44KS6L+95YqgXG4gICAgICBjYXJkLmFwcGVuZENoaWxkKGRlbGV0ZUNvbnRhaW5lcik7XG4gICAgICBjYXJkLmFwcGVuZENoaWxkKGVkaXRDb250YWluZXIpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIOe3qOmbhuODouODvOODiee1guS6huaZgu+8muWQhOeoruODnOOCv+ODs+imgee0oOOCkuWJiumZpOOBl+OAgeODieODqeODg+OCsO+8huODieODreODg+ODl+OCkueEoeWKueWMllxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZGVsZXRlLWNvbnRhaW5lclwiKS5mb3JFYWNoKChjb250YWluZXIpID0+IGNvbnRhaW5lci5yZW1vdmUoKSk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LWNvbnRhaW5lclwiKS5mb3JFYWNoKChjb250YWluZXIpID0+IGNvbnRhaW5lci5yZW1vdmUoKSk7XG5cbiAgICBkaXNhYmxlVGFza0RyYWdBbmREcm9wKCk7XG4gICAgc2F2ZVRhc2tPcmRlcigpO1xuXG4gICAgLy8g57eo6ZuG44Oi44O844OJ44Gn5aSJ5pu044GX44Gf6KGo56S644KS44Oq44K744OD44OI44GX44CB5oqY44KK55Wz44G/44Oc44K/44Oz44KS5YaN55Sf5oiQXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oXCIudGFzay1zZWxlY3Rpb24gLnByb21wdC1jYXJkXCIpLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIGNhcmQuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICBjYXJkLnN0eWxlLnBvc2l0aW9uID0gXCJcIjtcbiAgICB9KTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdy5pbml0VG9nZ2xlVGFza3MgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgd2luZG93LmluaXRUb2dnbGVUYXNrcygpO1xuICAgIH1cblxuICAgIC8vIOeUu+mdouWFqOS9k+OBruWGjeiqreOBv+i+vOOBv+OBr+ihjOOCj+OBmuOAgeW/heimgeOBqumDqOWIhuOBruOBv0RPTeOBruabtOaWsOOCkuihjOOBhlxuICAgIC8vIOKAu+OCguOBl+OCv+OCueOCr+S4gOimp+WFqOS9k+OBruabtOaWsOOBjOW/heimgeOBquOCieOAgemdnuWQjOacn+OBp+aWsOOBn+OBq+OCv+OCueOCr+S4gOimp+OCkmZldGNo44GX44Gm5YaN44Os44Oz44OA44Oq44Oz44Kw44GZ44KL5Yem55CG44KS44GT44GT44Gr6L+95YqgXG5cbiAgICBpZiAoZWRpdEJ1dHRvbikge1xuICAgICAgZWRpdEJ1dHRvbi50aXRsZSA9IFwi5Lim44Gz5pu/44GI57eo6ZuGXCI7XG4gICAgICBlZGl0QnV0dG9uLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImJpIGJpLWFycm93cy1tb3ZlXCI+PC9pPic7XG4gICAgfVxuICB9XG59XG5cbi8vIOODieODqeODg+OCsO+8huODieODreODg+ODl+eUqOOCpOODmeODs+ODiOOCkuacieWKueWMlu+8iOWQhOOCq+ODvOODieOBqyAuZWRpdGFibGUg44Kv44Op44K56L+95Yqg77yJXG5mdW5jdGlvbiBlbmFibGVUYXNrRHJhZ0FuZERyb3AoKSB7XG4gIGNvbnN0IHdyYXBwZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oXCIudGFzay13cmFwcGVyXCIpO1xuICB3cmFwcGVycy5mb3JFYWNoKCh3cmFwcGVyLCBpbmRleCkgPT4ge1xuICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZChcImVkaXRhYmxlXCIpOyAvLyDjg6njg4Pjg5Hjg7zjgavov73liqBcbiAgICAvLyDlhoXpg6jjga7jgqvjg7zjg4njgavjgoLov73liqBcbiAgICBjb25zdCBjYXJkID0gd3JhcHBlci5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50PihcIi5wcm9tcHQtY2FyZFwiKTtcbiAgICBpZiAoY2FyZCkge1xuICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKFwiZWRpdGFibGVcIik7XG4gICAgICAvLyDlkITjgqvjg7zjg4njga7jgqLjg4vjg6Hjg7zjgrfjg6fjg7Pplovlp4vjgr/jgqTjg5/jg7PjgrDjgpLjgZrjgonjgZnvvIjkvos6IDAuMeenkuWIu+OBv++8iVxuICAgICAgY2FyZC5zdHlsZS5hbmltYXRpb25EZWxheSA9IGAke2luZGV4ICogMC4xfXNgO1xuICAgIH1cbiAgICB3cmFwcGVyLnN0eWxlLnRvdWNoQWN0aW9uID0gXCJub25lXCI7XG4gICAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgb25UYXNrUG9pbnRlckRvd24pO1xuICB9KTtcbn1cblxuLy8g44Kk44OZ44Oz44OI6Kej6ZmkXG5mdW5jdGlvbiBkaXNhYmxlVGFza0RyYWdBbmREcm9wKCkge1xuICBjb25zdCB3cmFwcGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KFwiLnRhc2std3JhcHBlclwiKTtcbiAgd3JhcHBlcnMuZm9yRWFjaCgod3JhcHBlcikgPT4ge1xuICAgIHdyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZShcImVkaXRhYmxlXCIpO1xuICAgIGNvbnN0IGNhcmQgPSB3cmFwcGVyLnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KFwiLnByb21wdC1jYXJkXCIpO1xuICAgIGlmIChjYXJkKSB7XG4gICAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoXCJlZGl0YWJsZVwiKTtcbiAgICB9XG4gICAgd3JhcHBlci5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgb25UYXNrUG9pbnRlckRvd24pO1xuICB9KTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIG9uVGFza1BvaW50ZXJNb3ZlKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBvblRhc2tQb2ludGVyVXApO1xuICBpZiAoZHJhZ2dpbmdUYXNrKSB7XG4gICAgZHJhZ2dpbmdUYXNrLnN0eWxlLnBvc2l0aW9uID0gXCJcIjtcbiAgICBkcmFnZ2luZ1Rhc2suc3R5bGUuekluZGV4ID0gXCJcIjtcbiAgfVxufVxuXG4vLyBwb2ludGVyZG93biDjgqTjg5njg7Pjg4hcbmZ1bmN0aW9uIG9uVGFza1BvaW50ZXJEb3duKGU6IFBvaW50ZXJFdmVudCkge1xuICBpZiAoZS5idXR0b24gIT09IDApIHJldHVybjtcbiAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgRWxlbWVudCB8IG51bGw7XG4gIGlmIChcbiAgICB0YXJnZXQ/LmNsb3Nlc3QoXCIuY2FyZC1kZWxldGUtYnRuXCIpIHx8XG4gICAgdGFyZ2V0Py5jbG9zZXN0KFwiLmNhcmQtZWRpdC1idG5cIikgfHxcbiAgICB0YXJnZXQ/LmNsb3Nlc3QoXCIuZGVsZXRlLWNvbnRhaW5lclwiKSB8fFxuICAgIHRhcmdldD8uY2xvc2VzdChcIi5lZGl0LWNvbnRhaW5lclwiKVxuICApIHtcbiAgICAvLyDnt6jpm4bjg7vliYrpmaTjg5zjgr/jg7PjgYzmirzjgZXjgozjgZ/loLTlkIjjga/kvZXjgoLjgZvjgZrntYLkuoZcbiAgICByZXR1cm47XG4gIH1cblxuICBkcmFnZ2luZ1Rhc2sgPSBlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQgfCBudWxsOyAvLyB0YXNrLXdyYXBwZXIg44KS44OJ44Op44OD44Kw5a++6LGh44Gr44GZ44KLXG4gIGlmICghZHJhZ2dpbmdUYXNrKSByZXR1cm47XG4gIGRyYWdnaW5nVGFzay5jbGFzc0xpc3QuYWRkKFwiZHJhZ2dpbmdcIik7XG4gIGNvbnN0IHJlY3QgPSBkcmFnZ2luZ1Rhc2suZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgLy8g57W25a++6YWN572u44Gr5aSJ5pu0XG4gIGRyYWdnaW5nVGFzay5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgZHJhZ2dpbmdUYXNrLnN0eWxlLndpZHRoID0gcmVjdC53aWR0aCArIFwicHhcIjtcbiAgZHJhZ2dpbmdUYXNrLnN0eWxlLmhlaWdodCA9IHJlY3QuaGVpZ2h0ICsgXCJweFwiO1xuICBkcmFnZ2luZ1Rhc2suc3R5bGUuekluZGV4ID0gXCIxMDAwXCI7XG5cbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLXNlbGVjdGlvblwiKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XG4gIGlmICghY29udGFpbmVyKSByZXR1cm47XG4gIGNvbnN0IGNvbnRhaW5lclJlY3QgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGRyYWdnaW5nVGFzay5zdHlsZS5sZWZ0ID0gZS5jbGllbnRYIC0gY29udGFpbmVyUmVjdC5sZWZ0IC0gcmVjdC53aWR0aCAvIDIgKyBcInB4XCI7XG4gIGRyYWdnaW5nVGFzay5zdHlsZS50b3AgPSBlLmNsaWVudFkgLSBjb250YWluZXJSZWN0LnRvcCAtIHJlY3QuaGVpZ2h0IC8gMiArIFwicHhcIjtcblxuICAvLyDjg5fjg6zjg7zjgrnjg5vjg6vjg4Djg7zjgpLkvZzmiJDvvIh0YXNrLXdyYXBwZXIg55So77yJXG4gIHRhc2tQbGFjZWhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHRhc2tQbGFjZWhvbGRlci5jbGFzc05hbWUgPSBcInRhc2std3JhcHBlciBwbGFjZWhvbGRlclwiO1xuICB0YXNrUGxhY2Vob2xkZXIuc3R5bGUud2lkdGggPSByZWN0LndpZHRoICsgXCJweFwiO1xuICB0YXNrUGxhY2Vob2xkZXIuc3R5bGUuaGVpZ2h0ID0gcmVjdC5oZWlnaHQgKyBcInB4XCI7XG4gIHRhc2tQbGFjZWhvbGRlci5zdHlsZS5ib3JkZXIgPSBcIjFweCBkYXNoZWQgI2FhYVwiO1xuICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKHRhc2tQbGFjZWhvbGRlciwgZHJhZ2dpbmdUYXNrLm5leHRTaWJsaW5nKTtcblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgb25UYXNrUG9pbnRlck1vdmUpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIG9uVGFza1BvaW50ZXJVcCk7XG59XG5cbmZ1bmN0aW9uIG9uVGFza1BvaW50ZXJNb3ZlKGU6IFBvaW50ZXJFdmVudCkge1xuICBpZiAoIWRyYWdnaW5nVGFzaykgcmV0dXJuO1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stc2VsZWN0aW9uXCIpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgaWYgKCFjb250YWluZXIpIHJldHVybjtcbiAgY29uc3QgY29udGFpbmVyUmVjdCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgY29uc3QgY2FyZFdpZHRoID0gZHJhZ2dpbmdUYXNrLm9mZnNldFdpZHRoO1xuICBjb25zdCBjYXJkSGVpZ2h0ID0gZHJhZ2dpbmdUYXNrLm9mZnNldEhlaWdodDtcbiAgZHJhZ2dpbmdUYXNrLnN0eWxlLmxlZnQgPSBlLmNsaWVudFggLSBjb250YWluZXJSZWN0LmxlZnQgLSBjYXJkV2lkdGggLyAyICsgXCJweFwiO1xuICBkcmFnZ2luZ1Rhc2suc3R5bGUudG9wID0gZS5jbGllbnRZIC0gY29udGFpbmVyUmVjdC50b3AgLSBjYXJkSGVpZ2h0IC8gMiArIFwicHhcIjtcblxuICAvLyDjg5fjg6zjg7zjgrnjg5vjg6vjg4Djg7zjga7kvY3nva7mm7TmlrDvvIh3cmFwcGVy5Y2Y5L2N44Gn77yJXG4gIGNvbnN0IHdyYXBwZXJzID0gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oXCIudGFzay13cmFwcGVyOm5vdCguZHJhZ2dpbmcpXCIpKTtcbiAgbGV0IHBsYWNlZCA9IGZhbHNlO1xuICBmb3IgKGxldCB3cmFwcGVyIG9mIHdyYXBwZXJzKSB7XG4gICAgY29uc3QgcmVjdCA9IHdyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgY2VudGVyWSA9IHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyO1xuICAgIGlmIChlLmNsaWVudFkgPCBjZW50ZXJZKSB7XG4gICAgICBpZiAodGFza1BsYWNlaG9sZGVyKSB7XG4gICAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUodGFza1BsYWNlaG9sZGVyLCB3cmFwcGVyKTtcbiAgICAgIH1cbiAgICAgIHBsYWNlZCA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgaWYgKCFwbGFjZWQgJiYgdGFza1BsYWNlaG9sZGVyKSB7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tQbGFjZWhvbGRlcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gb25UYXNrUG9pbnRlclVwKCkge1xuICBpZiAoIWRyYWdnaW5nVGFzaykgcmV0dXJuO1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stc2VsZWN0aW9uXCIpO1xuICBpZiAoIWNvbnRhaW5lciB8fCAhdGFza1BsYWNlaG9sZGVyKSByZXR1cm47XG4gIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoZHJhZ2dpbmdUYXNrLCB0YXNrUGxhY2Vob2xkZXIpO1xuICBkcmFnZ2luZ1Rhc2suY2xhc3NMaXN0LnJlbW92ZShcImRyYWdnaW5nXCIpO1xuICAvLyDjgrnjgr/jgqTjg6vjg6rjgrvjg4Pjg4hcbiAgZHJhZ2dpbmdUYXNrLnN0eWxlLnBvc2l0aW9uID0gXCJcIjtcbiAgZHJhZ2dpbmdUYXNrLnN0eWxlLmxlZnQgPSBcIlwiO1xuICBkcmFnZ2luZ1Rhc2suc3R5bGUudG9wID0gXCJcIjtcbiAgZHJhZ2dpbmdUYXNrLnN0eWxlLndpZHRoID0gXCJcIjtcbiAgZHJhZ2dpbmdUYXNrLnN0eWxlLmhlaWdodCA9IFwiXCI7XG4gIGRyYWdnaW5nVGFzay5zdHlsZS56SW5kZXggPSBcIlwiO1xuICB0YXNrUGxhY2Vob2xkZXIucmVtb3ZlKCk7XG4gIHRhc2tQbGFjZWhvbGRlciA9IG51bGw7XG4gIGRyYWdnaW5nVGFzayA9IG51bGw7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCBvblRhc2tQb2ludGVyTW92ZSk7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgb25UYXNrUG9pbnRlclVwKTtcbn1cblxuLy8g5Lim44Gz6aCG44KS44K144O844OQ44O844Gr5L+d5a2Y44GZ44KL6Zai5pWwXG5mdW5jdGlvbiBzYXZlVGFza09yZGVyKCkge1xuICBjb25zdCB3cmFwcGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KFwiLnRhc2std3JhcHBlclwiKTtcbiAgY29uc3QgbmV3T3JkZXIgPSBBcnJheS5mcm9tKHdyYXBwZXJzKVxuICAgIC5tYXAoKHdyYXBwZXIpID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSB3cmFwcGVyLnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KFwiLnByb21wdC1jYXJkXCIpO1xuICAgICAgaWYgKCFjYXJkIHx8IGNhcmQuZGF0YXNldC5pc19kZWZhdWx0ID09PSBcInRydWVcIikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjYXJkLmdldEF0dHJpYnV0ZShcImRhdGEtdGFza1wiKTtcbiAgICB9KVxuICAgIC5maWx0ZXIoQm9vbGVhbik7XG5cbiAgaWYgKG5ld09yZGVyLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZldGNoKFwiL2FwaS91cGRhdGVfdGFza3Nfb3JkZXJcIiwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgb3JkZXI6IG5ld09yZGVyIH0pXG4gIH0pXG4gICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgaWYgKGRhdGEuZXJyb3IpIHtcbiAgICAgICAgYWxlcnQoXCLkuKbjgbPpoIbjga7kv53lrZjjgavlpLHmlZc6IFwiICsgZGF0YS5lcnJvcik7XG4gICAgICB9XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgYWxlcnQoXCLkuKbjgbPpoIbjga7kv53lrZjjgavlpLHmlZc6IFwiICsgZXJyLnRvU3RyaW5nKCkpO1xuICAgIH0pO1xufVxuXG4vLyDjgqjjgq/jgrnjg53jg7zjg4jvvIjku5bjga7jgrnjgq/jg6rjg5fjg4jjgYvjgonliKnnlKjjgafjgY3jgovjgojjgYbjgavvvIlcbndpbmRvdy5pbml0VGFza09yZGVyRWRpdGluZyA9IGluaXRUYXNrT3JkZXJFZGl0aW5nO1xuXG5leHBvcnQge307XG4iXSwibmFtZXMiOlsidXBkYXRlVGFza1RpdGxlIiwiY2FyZCIsIm5ld1RpdGxlIiwidHJ1bmNhdGVkVGl0bGUiLCJsZW5ndGgiLCJzdWJzdHJpbmciLCJoZWFkZXIiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJ3aW5kb3ciLCJsb2FkVGFza0NhcmRzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbGVtIiwicmVtb3ZlIiwic2hvd01vZGFsIiwibW9kYWxFbCIsInN0eWxlIiwiZGlzcGxheSIsImhpZGVNb2RhbCIsImluaXRUYXNrTWFuYWdlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjbG9zZUJ0biIsImNhbmNlbEJ0biIsInNhdmVCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwidGFza05hbWVFbCIsInByb21wdFRlbXBsYXRlRWwiLCJpbnB1dEV4YW1wbGVzRWwiLCJvdXRwdXRFeGFtcGxlc0VsIiwiYWxlcnQiLCJ0YXNrTmFtZSIsInZhbHVlIiwidHJpbSIsInByb21wdFRlbXBsYXRlIiwiaW5wdXRFeGFtcGxlcyIsIm91dHB1dEV4YW1wbGVzIiwiZWRpdGluZ0NhcmQiLCJjdXJyZW50RWRpdGluZ0NhcmQiLCJvbGRUYXNrIiwiZGF0YXNldCIsInRhc2siLCJwYXlsb2FkIiwib2xkX3Rhc2siLCJuZXdfdGFzayIsInByb21wdF90ZW1wbGF0ZSIsImlucHV0X2V4YW1wbGVzIiwib3V0cHV0X2V4YW1wbGVzIiwiZmV0Y2giLCJtZXRob2QiLCJjcmVkZW50aWFscyIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInRoZW4iLCJyZXNwb25zZSIsImN0IiwiZ2V0IiwiaW5jbHVkZXMiLCJqc29uIiwiZGF0YSIsIm9rIiwiRXJyb3IiLCJlcnJvciIsInRleHQiLCJjb25zb2xlIiwic3RhdHVzIiwiY2F0Y2giLCJtZXNzYWdlIiwicmVhZHlTdGF0ZSIsImlzRWRpdGluZ09yZGVyIiwiZWRpdEJ1dHRvbiIsImRyYWdnaW5nVGFzayIsInRhc2tQbGFjZWhvbGRlciIsInRhc2tPZmZzZXRYIiwidGFza09mZnNldFkiLCJpbml0VGFza09yZGVyRWRpdGluZyIsImxvZ2dlZEluIiwiY3JlYXRlRWxlbWVudCIsImlkIiwiY2xhc3NOYW1lIiwibWFyZ2luIiwidHlwZSIsImlubmVySFRNTCIsInRpdGxlIiwidG9nZ2xlVGFza09yZGVyRWRpdGluZyIsImFwcGVuZENoaWxkIiwicG9zaXRpb24iLCJ0b2dnbGVCdG4iLCJlbmFibGVUYXNrRHJhZ0FuZERyb3AiLCJleGlzdGluZ0RlbGV0ZUNvbnRhaW5lciIsImV4aXN0aW5nRWRpdENvbnRhaW5lciIsImRlbGV0ZUNvbnRhaW5lciIsInRvcCIsImxlZnQiLCJ6SW5kZXgiLCJkZWxldGVCdG4iLCJ3aWR0aCIsImhlaWdodCIsImJvcmRlclJhZGl1cyIsImJvcmRlciIsImJhY2tncm91bmRDb2xvciIsImNvbG9yIiwiZm9udFNpemUiLCJhbGlnbkl0ZW1zIiwianVzdGlmeUNvbnRlbnQiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwidGFyZ2V0Q2FyZCIsImN1cnJlbnRUYXJnZXQiLCJjbG9zZXN0IiwiY29uZmlybSIsImdldEF0dHJpYnV0ZSIsImVycm9yRGF0YSIsIndyYXBwZXIiLCJzYXZlVGFza09yZGVyIiwiZXJyIiwiZGVsZXRlVG9vbHRpcCIsImJvdHRvbSIsInRyYW5zZm9ybSIsIm1hcmdpbkJvdHRvbSIsInBhZGRpbmciLCJ3aGl0ZVNwYWNlIiwib3BhY2l0eSIsInRyYW5zaXRpb24iLCJlZGl0Q29udGFpbmVyIiwicmlnaHQiLCJlZGl0QnRuIiwiZWRpdFRvb2x0aXAiLCJjb250YWluZXIiLCJkaXNhYmxlVGFza0RyYWdBbmREcm9wIiwiaW5pdFRvZ2dsZVRhc2tzIiwid3JhcHBlcnMiLCJpbmRleCIsImNsYXNzTGlzdCIsImFkZCIsImFuaW1hdGlvbkRlbGF5IiwidG91Y2hBY3Rpb24iLCJvblRhc2tQb2ludGVyRG93biIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJvblRhc2tQb2ludGVyTW92ZSIsIm9uVGFza1BvaW50ZXJVcCIsImJ1dHRvbiIsInRhcmdldCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjb250YWluZXJSZWN0IiwiY2xpZW50WCIsImNsaWVudFkiLCJpbnNlcnRCZWZvcmUiLCJuZXh0U2libGluZyIsImNhcmRXaWR0aCIsIm9mZnNldFdpZHRoIiwiY2FyZEhlaWdodCIsIm9mZnNldEhlaWdodCIsIkFycmF5IiwiZnJvbSIsInBsYWNlZCIsImNlbnRlclkiLCJuZXdPcmRlciIsIm1hcCIsImlzX2RlZmF1bHQiLCJmaWx0ZXIiLCJCb29sZWFuIiwib3JkZXIiLCJyZXMiLCJ0b1N0cmluZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scripts/setup/task_manager.ts\n");

/***/ })

};
;