"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["scripts_entries_chat_ts"],{

/***/ "./scripts/chat/chat_controller.ts":
/*!*****************************************!*\
  !*** ./scripts/chat/chat_controller.ts ***!
  \*****************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n// chat_controller.ts – 送信ボタン／バックエンド通信\n// --------------------------------------------------\n/* 送信ボタン or Enter 押下 */ function sendMessage() {\n    var _window_showTypingIndicator, _window;\n    if (!window.userInput) return;\n    const message = window.userInput.value.trim();\n    if (!message) return;\n    const aiModel = window.aiModelSelect ? window.aiModelSelect.value : \"gemini-2.5-flash\";\n    (_window_showTypingIndicator = (_window = window).showTypingIndicator) === null || _window_showTypingIndicator === void 0 ? void 0 : _window_showTypingIndicator.call(_window);\n    generateResponse(message, aiModel);\n    window.userInput.value = \"\";\n    window.userInput.style.height = \"auto\";\n}\n/* サーバー POST → Bot 応答を描画 */ function generateResponse(message, aiModel) {\n    var // ユーザーメッセージを即描画\n    _window_renderUserMessage, _window;\n    if (!window.chatMessages) return;\n    (_window_renderUserMessage = (_window = window).renderUserMessage) === null || _window_renderUserMessage === void 0 ? void 0 : _window_renderUserMessage.call(_window, message);\n    // Bot 側スピナー\n    const spinnerWrap = document.createElement(\"div\");\n    spinnerWrap.className = \"message-wrapper bot-message-wrapper\";\n    const spinner = document.createElement(\"div\");\n    spinner.className = \"bot-message\";\n    spinner.innerHTML = '<div class=\"spinner\"></div>';\n    spinnerWrap.appendChild(spinner);\n    window.chatMessages.appendChild(spinnerWrap);\n    if (window.scrollMessageToTop) window.scrollMessageToTop(spinnerWrap);\n    fetch(\"/api/chat\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            message,\n            chat_room_id: window.currentChatRoomId,\n            model: aiModel\n        })\n    }).then((r)=>r.json()).then((data)=>{\n        var _window_hideTypingIndicator, _window;\n        (_window_hideTypingIndicator = (_window = window).hideTypingIndicator) === null || _window_hideTypingIndicator === void 0 ? void 0 : _window_hideTypingIndicator.call(_window);\n        spinnerWrap.remove();\n        if (data && data.response) {\n            var _window_animateBotMessage, _window1;\n            (_window_animateBotMessage = (_window1 = window).animateBotMessage) === null || _window_animateBotMessage === void 0 ? void 0 : _window_animateBotMessage.call(_window1, data.response);\n        } else if (data && data.error) {\n            var _window_animateBotMessage1, _window2;\n            (_window_animateBotMessage1 = (_window2 = window).animateBotMessage) === null || _window_animateBotMessage1 === void 0 ? void 0 : _window_animateBotMessage1.call(_window2, \"エラー: \" + data.error);\n        } else {\n            var _window_animateBotMessage2, _window3;\n            (_window_animateBotMessage2 = (_window3 = window).animateBotMessage) === null || _window_animateBotMessage2 === void 0 ? void 0 : _window_animateBotMessage2.call(_window3, \"エラー: 予期しないエラーが発生しました。\");\n        }\n    }).catch((err)=>{\n        var _window_hideTypingIndicator, _window, _window_animateBotMessage, _window1;\n        (_window_hideTypingIndicator = (_window = window).hideTypingIndicator) === null || _window_hideTypingIndicator === void 0 ? void 0 : _window_hideTypingIndicator.call(_window);\n        spinnerWrap.remove();\n        (_window_animateBotMessage = (_window1 = window).animateBotMessage) === null || _window_animateBotMessage === void 0 ? void 0 : _window_animateBotMessage.call(_window1, \"エラー: \" + err.toString());\n    });\n}\n// ---- window へ公開 ------------------------------\nwindow.sendMessage = sendMessage;\nwindow.generateResponse = generateResponse;\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBRUEsaURBQWlEO0FBQ2pEekMsT0FBT0QsV0FBVyxHQUFHQTtBQUNyQkMsT0FBT1EsZ0JBQWdCLEdBQUdBO0FBRWhCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NjcmlwdHMvY2hhdC9jaGF0X2NvbnRyb2xsZXIudHM/NmRhYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjaGF0X2NvbnRyb2xsZXIudHMg4oCTIOmAgeS/oeODnOOCv+ODs++8j+ODkOODg+OCr+OCqOODs+ODiemAmuS/oVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyog6YCB5L+h44Oc44K/44OzIG9yIEVudGVyIOaKvOS4iyAqL1xuZnVuY3Rpb24gc2VuZE1lc3NhZ2UoKSB7XG4gIGlmICghd2luZG93LnVzZXJJbnB1dCkgcmV0dXJuO1xuICBjb25zdCBtZXNzYWdlID0gd2luZG93LnVzZXJJbnB1dC52YWx1ZS50cmltKCk7XG4gIGlmICghbWVzc2FnZSkgcmV0dXJuO1xuICBjb25zdCBhaU1vZGVsID0gd2luZG93LmFpTW9kZWxTZWxlY3QgPyB3aW5kb3cuYWlNb2RlbFNlbGVjdC52YWx1ZSA6IFwiZ2VtaW5pLTIuNS1mbGFzaFwiO1xuICB3aW5kb3cuc2hvd1R5cGluZ0luZGljYXRvcj8uKCk7XG4gIGdlbmVyYXRlUmVzcG9uc2UobWVzc2FnZSwgYWlNb2RlbCk7XG4gIHdpbmRvdy51c2VySW5wdXQudmFsdWUgPSBcIlwiO1xuICB3aW5kb3cudXNlcklucHV0LnN0eWxlLmhlaWdodCA9IFwiYXV0b1wiO1xufVxuXG4vKiDjgrXjg7zjg5Djg7wgUE9TVCDihpIgQm90IOW/nOetlOOCkuaPj+eUuyAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVSZXNwb25zZShtZXNzYWdlOiBzdHJpbmcsIGFpTW9kZWw6IHN0cmluZykge1xuICBpZiAoIXdpbmRvdy5jaGF0TWVzc2FnZXMpIHJldHVybjtcbiAgLy8g44Om44O844K244O844Oh44OD44K744O844K444KS5Y2z5o+P55S7XG4gIHdpbmRvdy5yZW5kZXJVc2VyTWVzc2FnZT8uKG1lc3NhZ2UpO1xuXG4gIC8vIEJvdCDlgbTjgrnjg5Tjg4rjg7xcbiAgY29uc3Qgc3Bpbm5lcldyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBzcGlubmVyV3JhcC5jbGFzc05hbWUgPSBcIm1lc3NhZ2Utd3JhcHBlciBib3QtbWVzc2FnZS13cmFwcGVyXCI7XG4gIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBzcGlubmVyLmNsYXNzTmFtZSA9IFwiYm90LW1lc3NhZ2VcIjtcbiAgc3Bpbm5lci5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cInNwaW5uZXJcIj48L2Rpdj4nO1xuICBzcGlubmVyV3JhcC5hcHBlbmRDaGlsZChzcGlubmVyKTtcblxuICB3aW5kb3cuY2hhdE1lc3NhZ2VzLmFwcGVuZENoaWxkKHNwaW5uZXJXcmFwKTtcbiAgaWYgKHdpbmRvdy5zY3JvbGxNZXNzYWdlVG9Ub3ApIHdpbmRvdy5zY3JvbGxNZXNzYWdlVG9Ub3Aoc3Bpbm5lcldyYXApO1xuXG4gIGZldGNoKFwiL2FwaS9jaGF0XCIsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBtZXNzYWdlLFxuICAgICAgY2hhdF9yb29tX2lkOiB3aW5kb3cuY3VycmVudENoYXRSb29tSWQsXG4gICAgICBtb2RlbDogYWlNb2RlbFxuICAgIH0pXG4gIH0pXG4gICAgLnRoZW4oKHIpID0+IHIuanNvbigpKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICB3aW5kb3cuaGlkZVR5cGluZ0luZGljYXRvcj8uKCk7XG4gICAgICBzcGlubmVyV3JhcC5yZW1vdmUoKTtcbiAgICAgIGlmIChkYXRhICYmIGRhdGEucmVzcG9uc2UpIHtcbiAgICAgICAgd2luZG93LmFuaW1hdGVCb3RNZXNzYWdlPy4oZGF0YS5yZXNwb25zZSk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEgJiYgZGF0YS5lcnJvcikge1xuICAgICAgICB3aW5kb3cuYW5pbWF0ZUJvdE1lc3NhZ2U/LihcIuOCqOODqeODvDogXCIgKyBkYXRhLmVycm9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5hbmltYXRlQm90TWVzc2FnZT8uKFwi44Ko44Op44O8OiDkuojmnJ/jgZfjgarjgYTjgqjjg6njg7zjgYznmbrnlJ/jgZfjgb7jgZfjgZ/jgIJcIik7XG4gICAgICB9XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgd2luZG93LmhpZGVUeXBpbmdJbmRpY2F0b3I/LigpO1xuICAgICAgc3Bpbm5lcldyYXAucmVtb3ZlKCk7XG4gICAgICB3aW5kb3cuYW5pbWF0ZUJvdE1lc3NhZ2U/LihcIuOCqOODqeODvDogXCIgKyBlcnIudG9TdHJpbmcoKSk7XG4gICAgfSk7XG59XG5cbi8vIC0tLS0gd2luZG93IOOBuOWFrOmWiyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbndpbmRvdy5zZW5kTWVzc2FnZSA9IHNlbmRNZXNzYWdlO1xud2luZG93LmdlbmVyYXRlUmVzcG9uc2UgPSBnZW5lcmF0ZVJlc3BvbnNlO1xuXG5leHBvcnQge307XG4iXSwibmFtZXMiOlsic2VuZE1lc3NhZ2UiLCJ3aW5kb3ciLCJ1c2VySW5wdXQiLCJtZXNzYWdlIiwidmFsdWUiLCJ0cmltIiwiYWlNb2RlbCIsImFpTW9kZWxTZWxlY3QiLCJzaG93VHlwaW5nSW5kaWNhdG9yIiwiZ2VuZXJhdGVSZXNwb25zZSIsInN0eWxlIiwiaGVpZ2h0IiwiY2hhdE1lc3NhZ2VzIiwicmVuZGVyVXNlck1lc3NhZ2UiLCJzcGlubmVyV3JhcCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInNwaW5uZXIiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsInNjcm9sbE1lc3NhZ2VUb1RvcCIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2hhdF9yb29tX2lkIiwiY3VycmVudENoYXRSb29tSWQiLCJtb2RlbCIsInRoZW4iLCJyIiwianNvbiIsImRhdGEiLCJoaWRlVHlwaW5nSW5kaWNhdG9yIiwicmVtb3ZlIiwicmVzcG9uc2UiLCJhbmltYXRlQm90TWVzc2FnZSIsImVycm9yIiwiY2F0Y2giLCJlcnIiLCJ0b1N0cmluZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scripts/chat/chat_controller.ts\n"));

/***/ }),

/***/ "./scripts/chat/chat_history.ts":
/*!**************************************!*\
  !*** ./scripts/chat/chat_history.ts ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n// chat_history.ts – 履歴のロード／保存\n// --------------------------------------------------\n/* サーバーから履歴取得 */ function loadChatHistory() {\n    if (!window.currentChatRoomId) {\n        if (window.chatMessages) window.chatMessages.innerHTML = \"\";\n        return;\n    }\n    fetch(\"/api/get_chat_history?room_id=\".concat(window.currentChatRoomId)).then((r)=>r.json()).then((data)=>{\n        if (data.error) {\n            console.error(\"get_chat_history:\", data.error);\n            return;\n        }\n        if (!window.chatMessages) return;\n        window.chatMessages.innerHTML = \"\";\n        const msgs = Array.isArray(data.messages) ? data.messages : [];\n        msgs.forEach((m)=>{\n            if (window.displayMessage) window.displayMessage(m.message, m.sender);\n        });\n        if (window.chatMessages.lastElementChild && window.scrollMessageToTop) window.scrollMessageToTop(window.chatMessages.lastElementChild);\n        localStorage.setItem(\"chatHistory_\".concat(window.currentChatRoomId), JSON.stringify(msgs.map((m)=>({\n                text: m.message,\n                sender: m.sender\n            }))));\n    }).catch((err)=>console.error(\"履歴取得失敗:\", err));\n}\n/* ローカルストレージから履歴読み込み */ function loadLocalChatHistory() {\n    if (!window.currentChatRoomId || !window.chatMessages) return;\n    const key = \"chatHistory_\".concat(window.currentChatRoomId);\n    let history = [];\n    try {\n        const stored = localStorage.getItem(key);\n        history = stored ? JSON.parse(stored) : [];\n    } catch (e) {\n        history = [];\n    }\n    window.chatMessages.innerHTML = \"\";\n    history.forEach((item)=>{\n        if (window.displayMessage) window.displayMessage(item.text, item.sender);\n    });\n    if (window.chatMessages.lastElementChild && window.scrollMessageToTop) window.scrollMessageToTop(window.chatMessages.lastElementChild);\n}\n/* メッセージ1件をローカル保存 */ function saveMessageToLocalStorage(text, sender) {\n    if (!window.currentChatRoomId) return;\n    const key = \"chatHistory_\".concat(window.currentChatRoomId);\n    let history = [];\n    try {\n        const stored = localStorage.getItem(key);\n        history = stored ? JSON.parse(stored) : [];\n    } catch (e) {\n        history = [];\n    }\n    history.push({\n        text,\n        sender\n    });\n    localStorage.setItem(key, JSON.stringify(history));\n}\n// ---- window へ公開 ------------------------------\nwindow.loadChatHistory = loadChatHistory;\nwindow.loadLocalChatHistory = loadLocalChatHistory;\nwindow.saveMessageToLocalStorage = saveMessageToLocalStorage;\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RTtJQUNkO0lBQ0FBLFFBQVFNLElBQUksQ0FBQztRQUFFWDtRQUFNUjtJQUFPO0lBQzVCRyxhQUFhQyxPQUFPLENBQUNRLEtBQUtQLEtBQUtDLFNBQVMsQ0FBQ087QUFDM0M7QUFFQSxpREFBaUQ7QUFDakRoQyxPQUFPRCxlQUFlLEdBQUdBO0FBQ3pCQyxPQUFPOEIsb0JBQW9CLEdBQUdBO0FBQzlCOUIsT0FBT3FDLHlCQUF5QixHQUFHQTtBQUV6QiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zY3JpcHRzL2NoYXQvY2hhdF9oaXN0b3J5LnRzPzZjYTMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY2hhdF9oaXN0b3J5LnRzIOKAkyDlsaXmrbTjga7jg63jg7zjg4nvvI/kv53lrZhcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qIOOCteODvOODkOODvOOBi+OCieWxpeattOWPluW+lyAqL1xuZnVuY3Rpb24gbG9hZENoYXRIaXN0b3J5KCkge1xuICBpZiAoIXdpbmRvdy5jdXJyZW50Q2hhdFJvb21JZCkge1xuICAgIGlmICh3aW5kb3cuY2hhdE1lc3NhZ2VzKSB3aW5kb3cuY2hhdE1lc3NhZ2VzLmlubmVySFRNTCA9IFwiXCI7XG4gICAgcmV0dXJuO1xuICB9XG4gIGZldGNoKGAvYXBpL2dldF9jaGF0X2hpc3Rvcnk/cm9vbV9pZD0ke3dpbmRvdy5jdXJyZW50Q2hhdFJvb21JZH1gKVxuICAgIC50aGVuKChyKSA9PiByLmpzb24oKSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgaWYgKGRhdGEuZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcImdldF9jaGF0X2hpc3Rvcnk6XCIsIGRhdGEuZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIXdpbmRvdy5jaGF0TWVzc2FnZXMpIHJldHVybjtcbiAgICAgIHdpbmRvdy5jaGF0TWVzc2FnZXMuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgIGNvbnN0IG1zZ3MgPSBBcnJheS5pc0FycmF5KGRhdGEubWVzc2FnZXMpID8gZGF0YS5tZXNzYWdlcyA6IFtdO1xuICAgICAgbXNncy5mb3JFYWNoKChtOiB7IG1lc3NhZ2U6IHN0cmluZzsgc2VuZGVyOiBzdHJpbmcgfSkgPT4ge1xuICAgICAgICBpZiAod2luZG93LmRpc3BsYXlNZXNzYWdlKSB3aW5kb3cuZGlzcGxheU1lc3NhZ2UobS5tZXNzYWdlLCBtLnNlbmRlcik7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHdpbmRvdy5jaGF0TWVzc2FnZXMubGFzdEVsZW1lbnRDaGlsZCAmJiB3aW5kb3cuc2Nyb2xsTWVzc2FnZVRvVG9wKVxuICAgICAgICB3aW5kb3cuc2Nyb2xsTWVzc2FnZVRvVG9wKHdpbmRvdy5jaGF0TWVzc2FnZXMubGFzdEVsZW1lbnRDaGlsZCBhcyBIVE1MRWxlbWVudCk7XG5cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgICBgY2hhdEhpc3RvcnlfJHt3aW5kb3cuY3VycmVudENoYXRSb29tSWR9YCxcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkobXNncy5tYXAoKG06IHsgbWVzc2FnZTogc3RyaW5nOyBzZW5kZXI6IHN0cmluZyB9KSA9PiAoeyB0ZXh0OiBtLm1lc3NhZ2UsIHNlbmRlcjogbS5zZW5kZXIgfSkpKVxuICAgICAgKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwi5bGl5q205Y+W5b6X5aSx5pWXOlwiLCBlcnIpKTtcbn1cblxuLyog44Ot44O844Kr44Or44K544OI44Os44O844K444GL44KJ5bGl5q206Kqt44G/6L6844G/ICovXG5mdW5jdGlvbiBsb2FkTG9jYWxDaGF0SGlzdG9yeSgpIHtcbiAgaWYgKCF3aW5kb3cuY3VycmVudENoYXRSb29tSWQgfHwgIXdpbmRvdy5jaGF0TWVzc2FnZXMpIHJldHVybjtcbiAgY29uc3Qga2V5ID0gYGNoYXRIaXN0b3J5XyR7d2luZG93LmN1cnJlbnRDaGF0Um9vbUlkfWA7XG4gIGxldCBoaXN0b3J5OiB7IHRleHQ6IHN0cmluZzsgc2VuZGVyOiBzdHJpbmcgfVtdID0gW107XG4gIHRyeSB7XG4gICAgY29uc3Qgc3RvcmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICBoaXN0b3J5ID0gc3RvcmVkID8gSlNPTi5wYXJzZShzdG9yZWQpIDogW107XG4gIH0gY2F0Y2gge1xuICAgIGhpc3RvcnkgPSBbXTtcbiAgfVxuICB3aW5kb3cuY2hhdE1lc3NhZ2VzLmlubmVySFRNTCA9IFwiXCI7XG4gIGhpc3RvcnkuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgIGlmICh3aW5kb3cuZGlzcGxheU1lc3NhZ2UpIHdpbmRvdy5kaXNwbGF5TWVzc2FnZShpdGVtLnRleHQsIGl0ZW0uc2VuZGVyKTtcbiAgfSk7XG5cbiAgaWYgKHdpbmRvdy5jaGF0TWVzc2FnZXMubGFzdEVsZW1lbnRDaGlsZCAmJiB3aW5kb3cuc2Nyb2xsTWVzc2FnZVRvVG9wKVxuICAgIHdpbmRvdy5zY3JvbGxNZXNzYWdlVG9Ub3Aod2luZG93LmNoYXRNZXNzYWdlcy5sYXN0RWxlbWVudENoaWxkIGFzIEhUTUxFbGVtZW50KTtcbn1cblxuLyog44Oh44OD44K744O844K4MeS7tuOCkuODreODvOOCq+ODq+S/neWtmCAqL1xuZnVuY3Rpb24gc2F2ZU1lc3NhZ2VUb0xvY2FsU3RvcmFnZSh0ZXh0OiBzdHJpbmcsIHNlbmRlcjogc3RyaW5nKSB7XG4gIGlmICghd2luZG93LmN1cnJlbnRDaGF0Um9vbUlkKSByZXR1cm47XG4gIGNvbnN0IGtleSA9IGBjaGF0SGlzdG9yeV8ke3dpbmRvdy5jdXJyZW50Q2hhdFJvb21JZH1gO1xuICBsZXQgaGlzdG9yeTogeyB0ZXh0OiBzdHJpbmc7IHNlbmRlcjogc3RyaW5nIH1bXSA9IFtdO1xuICB0cnkge1xuICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgaGlzdG9yeSA9IHN0b3JlZCA/IEpTT04ucGFyc2Uoc3RvcmVkKSA6IFtdO1xuICB9IGNhdGNoIHtcbiAgICBoaXN0b3J5ID0gW107XG4gIH1cbiAgaGlzdG9yeS5wdXNoKHsgdGV4dCwgc2VuZGVyIH0pO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KGhpc3RvcnkpKTtcbn1cblxuLy8gLS0tLSB3aW5kb3cg44G45YWs6ZaLIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxud2luZG93LmxvYWRDaGF0SGlzdG9yeSA9IGxvYWRDaGF0SGlzdG9yeTtcbndpbmRvdy5sb2FkTG9jYWxDaGF0SGlzdG9yeSA9IGxvYWRMb2NhbENoYXRIaXN0b3J5O1xud2luZG93LnNhdmVNZXNzYWdlVG9Mb2NhbFN0b3JhZ2UgPSBzYXZlTWVzc2FnZVRvTG9jYWxTdG9yYWdlO1xuXG5leHBvcnQge307XG4iXSwibmFtZXMiOlsibG9hZENoYXRIaXN0b3J5Iiwid2luZG93IiwiY3VycmVudENoYXRSb29tSWQiLCJjaGF0TWVzc2FnZXMiLCJpbm5lckhUTUwiLCJmZXRjaCIsInRoZW4iLCJyIiwianNvbiIsImRhdGEiLCJlcnJvciIsImNvbnNvbGUiLCJtc2dzIiwiQXJyYXkiLCJpc0FycmF5IiwibWVzc2FnZXMiLCJmb3JFYWNoIiwibSIsImRpc3BsYXlNZXNzYWdlIiwibWVzc2FnZSIsInNlbmRlciIsImxhc3RFbGVtZW50Q2hpbGQiLCJzY3JvbGxNZXNzYWdlVG9Ub3AiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1hcCIsInRleHQiLCJjYXRjaCIsImVyciIsImxvYWRMb2NhbENoYXRIaXN0b3J5Iiwia2V5IiwiaGlzdG9yeSIsInN0b3JlZCIsImdldEl0ZW0iLCJwYXJzZSIsIml0ZW0iLCJzYXZlTWVzc2FnZVRvTG9jYWxTdG9yYWdlIiwicHVzaCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scripts/chat/chat_history.ts\n"));

/***/ }),

/***/ "./scripts/chat/chat_messages.ts":
/*!***************************************!*\
  !*** ./scripts/chat/chat_messages.ts ***!
  \***************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n// chat_messages.ts – メッセージ描画／コピー／ボットアニメ\n// --------------------------------------------------\n// ※ DOMPurify を必ず先にロードしておくこと\n// <script src=\"https://unpkg.com/dompurify@2.4.0/dist/purify.min.js\" defer></script>\n////////////////////////////////////////////////////////////////////////////////\n// メッセージ描画\n////////////////////////////////////////////////////////////////////////////////\n/* ユーザーメッセージを即時描画 */ function renderUserMessage(text) {\n    var _window_renderSanitizedHTML, _window;\n    if (!window.chatMessages) return;\n    const wrapper = document.createElement(\"div\");\n    wrapper.className = \"message-wrapper user-message-wrapper\";\n    const msg = document.createElement(\"div\");\n    msg.className = \"user-message\";\n    // テキスト → <br> 置換後、<br> だけ許可してサニタイズ描画\n    const htmlText = text.replace(/\\n/g, \"<br>\");\n    (_window_renderSanitizedHTML = (_window = window).renderSanitizedHTML) === null || _window_renderSanitizedHTML === void 0 ? void 0 : _window_renderSanitizedHTML.call(_window, msg, htmlText, [\n        \"br\"\n    ]);\n    msg.style.animation = \"floatUp 0.5s ease-out\";\n    const copyBtn = window.createCopyBtn ? window.createCopyBtn(()=>text) : document.createElement(\"button\");\n    wrapper.append(copyBtn, msg);\n    window.chatMessages.appendChild(wrapper);\n    if (window.scrollMessageToTop) window.scrollMessageToTop(wrapper);\n    // ローカル保存は <br> 付き HTML で互換維持\n    if (window.saveMessageToLocalStorage) window.saveMessageToLocalStorage(htmlText, \"user\");\n}\n/* Bot メッセージをタイプアニメーションで描画 */ function animateBotMessage(originalText) {\n    if (!window.chatMessages) return;\n    const wrapper = document.createElement(\"div\");\n    wrapper.className = \"message-wrapper bot-message-wrapper\";\n    const msg = document.createElement(\"div\");\n    msg.className = \"bot-message\";\n    const copyBtn = window.createCopyBtn ? window.createCopyBtn(()=>msg.dataset.fullText || \"\") : document.createElement(\"button\");\n    wrapper.append(copyBtn, msg);\n    window.chatMessages.appendChild(wrapper);\n    if (window.scrollMessageToTop) window.scrollMessageToTop(wrapper);\n    let raw = \"\";\n    let idx = 0;\n    const chunk = 7;\n    const interval = 100;\n    const timer = setInterval(()=>{\n        if (idx >= originalText.length) {\n            clearInterval(timer);\n            if (window.renderSanitizedHTML && window.formatLLMOutput) {\n                window.renderSanitizedHTML(msg, window.formatLLMOutput(raw));\n            }\n            if (window.saveMessageToLocalStorage) window.saveMessageToLocalStorage(raw, \"bot\");\n            return;\n        }\n        raw += originalText.substr(idx, chunk);\n        idx += chunk;\n        if (window.renderSanitizedHTML && window.formatLLMOutput) {\n            window.renderSanitizedHTML(msg, window.formatLLMOutput(raw));\n        }\n        msg.dataset.fullText = raw;\n    }, interval);\n}\n/* ローカル／サーバ履歴共通描画 */ function displayMessage(text, sender) {\n    if (!window.chatMessages) return;\n    const wrapper = document.createElement(\"div\");\n    const copyBtn = window.createCopyBtn ? window.createCopyBtn(()=>text) : document.createElement(\"button\");\n    if (sender === \"user\") {\n        wrapper.className = \"message-wrapper user-message-wrapper\";\n        const msg = document.createElement(\"div\");\n        msg.className = \"user-message\";\n        // 既存履歴は <br> が含まれているため、<br> だけ許可して描画\n        if (text.includes(\"<\")) {\n            var _window_renderSanitizedHTML, _window;\n            (_window_renderSanitizedHTML = (_window = window).renderSanitizedHTML) === null || _window_renderSanitizedHTML === void 0 ? void 0 : _window_renderSanitizedHTML.call(_window, msg, text, [\n                \"br\"\n            ]);\n        } else {\n            var _window_setTextWithLineBreaks, _window1;\n            (_window_setTextWithLineBreaks = (_window1 = window).setTextWithLineBreaks) === null || _window_setTextWithLineBreaks === void 0 ? void 0 : _window_setTextWithLineBreaks.call(_window1, msg, text);\n        }\n        wrapper.append(copyBtn, msg);\n    } else {\n        wrapper.className = \"message-wrapper bot-message-wrapper\";\n        const msg = document.createElement(\"div\");\n        msg.className = \"bot-message\";\n        // Bot はマークアップ済み → 広めのタグ許可でサニタイズ\n        if (window.renderSanitizedHTML && window.formatLLMOutput) {\n            window.renderSanitizedHTML(msg, window.formatLLMOutput(text));\n        }\n        wrapper.append(copyBtn, msg);\n    }\n    window.chatMessages.appendChild(wrapper);\n}\n// ---- window へ公開 ------------------------------\nwindow.renderUserMessage = renderUserMessage;\nwindow.animateBotMessage = animateBotMessage;\nwindow.displayMessage = displayMessage;\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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IjpbIndlYnBhY2s6Ly9fTl9FLy4vc2NyaXB0cy9jaGF0L2NoYXRfbWVzc2FnZXMudHM/OWFkMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjaGF0X21lc3NhZ2VzLnRzIOKAkyDjg6Hjg4Pjgrvjg7zjgrjmj4/nlLvvvI/jgrPjg5Tjg7zvvI/jg5zjg4Pjg4jjgqLjg4vjg6Fcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyDigLsgRE9NUHVyaWZ5IOOCkuW/heOBmuWFiOOBq+ODreODvOODieOBl+OBpuOBiuOBj+OBk+OBqFxuLy8gPHNjcmlwdCBzcmM9XCJodHRwczovL3VucGtnLmNvbS9kb21wdXJpZnlAMi40LjAvZGlzdC9wdXJpZnkubWluLmpzXCIgZGVmZXI+PC9zY3JpcHQ+XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyDjg6Hjg4Pjgrvjg7zjgrjmj4/nlLtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8qIOODpuODvOOCtuODvOODoeODg+OCu+ODvOOCuOOCkuWNs+aZguaPj+eUuyAqL1xuZnVuY3Rpb24gcmVuZGVyVXNlck1lc3NhZ2UodGV4dDogc3RyaW5nKSB7XG4gIGlmICghd2luZG93LmNoYXRNZXNzYWdlcykgcmV0dXJuO1xuICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgd3JhcHBlci5jbGFzc05hbWUgPSBcIm1lc3NhZ2Utd3JhcHBlciB1c2VyLW1lc3NhZ2Utd3JhcHBlclwiO1xuXG4gIGNvbnN0IG1zZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIG1zZy5jbGFzc05hbWUgPSBcInVzZXItbWVzc2FnZVwiO1xuXG4gIC8vIOODhuOCreOCueODiCDihpIgPGJyPiDnva7mj5vlvozjgIE8YnI+IOOBoOOBkeioseWPr+OBl+OBpuOCteODi+OCv+OCpOOCuuaPj+eUu1xuICBjb25zdCBodG1sVGV4dCA9IHRleHQucmVwbGFjZSgvXFxuL2csIFwiPGJyPlwiKTtcbiAgd2luZG93LnJlbmRlclNhbml0aXplZEhUTUw/Lihtc2csIGh0bWxUZXh0LCBbXCJiclwiXSk7XG4gIG1zZy5zdHlsZS5hbmltYXRpb24gPSBcImZsb2F0VXAgMC41cyBlYXNlLW91dFwiO1xuXG4gIGNvbnN0IGNvcHlCdG4gPSB3aW5kb3cuY3JlYXRlQ29weUJ0biA/IHdpbmRvdy5jcmVhdGVDb3B5QnRuKCgpID0+IHRleHQpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblxuICB3cmFwcGVyLmFwcGVuZChjb3B5QnRuLCBtc2cpO1xuICB3aW5kb3cuY2hhdE1lc3NhZ2VzLmFwcGVuZENoaWxkKHdyYXBwZXIpO1xuICBpZiAod2luZG93LnNjcm9sbE1lc3NhZ2VUb1RvcCkgd2luZG93LnNjcm9sbE1lc3NhZ2VUb1RvcCh3cmFwcGVyKTtcblxuICAvLyDjg63jg7zjgqvjg6vkv53lrZjjga8gPGJyPiDku5jjgY0gSFRNTCDjgafkupLmj5vntq3mjIFcbiAgaWYgKHdpbmRvdy5zYXZlTWVzc2FnZVRvTG9jYWxTdG9yYWdlKSB3aW5kb3cuc2F2ZU1lc3NhZ2VUb0xvY2FsU3RvcmFnZShodG1sVGV4dCwgXCJ1c2VyXCIpO1xufVxuXG4vKiBCb3Qg44Oh44OD44K744O844K444KS44K/44Kk44OX44Ki44OL44Oh44O844K344On44Oz44Gn5o+P55S7ICovXG5mdW5jdGlvbiBhbmltYXRlQm90TWVzc2FnZShvcmlnaW5hbFRleHQ6IHN0cmluZykge1xuICBpZiAoIXdpbmRvdy5jaGF0TWVzc2FnZXMpIHJldHVybjtcbiAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHdyYXBwZXIuY2xhc3NOYW1lID0gXCJtZXNzYWdlLXdyYXBwZXIgYm90LW1lc3NhZ2Utd3JhcHBlclwiO1xuXG4gIGNvbnN0IG1zZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIG1zZy5jbGFzc05hbWUgPSBcImJvdC1tZXNzYWdlXCI7XG5cbiAgY29uc3QgY29weUJ0biA9IHdpbmRvdy5jcmVhdGVDb3B5QnRuID8gd2luZG93LmNyZWF0ZUNvcHlCdG4oKCkgPT4gbXNnLmRhdGFzZXQuZnVsbFRleHQgfHwgXCJcIikgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICB3cmFwcGVyLmFwcGVuZChjb3B5QnRuLCBtc2cpO1xuICB3aW5kb3cuY2hhdE1lc3NhZ2VzLmFwcGVuZENoaWxkKHdyYXBwZXIpO1xuICBpZiAod2luZG93LnNjcm9sbE1lc3NhZ2VUb1RvcCkgd2luZG93LnNjcm9sbE1lc3NhZ2VUb1RvcCh3cmFwcGVyKTtcblxuICBsZXQgcmF3ID0gXCJcIjtcbiAgbGV0IGlkeCA9IDA7XG4gIGNvbnN0IGNodW5rID0gNztcbiAgY29uc3QgaW50ZXJ2YWwgPSAxMDA7XG4gIGNvbnN0IHRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIGlmIChpZHggPj0gb3JpZ2luYWxUZXh0Lmxlbmd0aCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG5cbiAgICAgIGlmICh3aW5kb3cucmVuZGVyU2FuaXRpemVkSFRNTCAmJiB3aW5kb3cuZm9ybWF0TExNT3V0cHV0KSB7XG4gICAgICAgIHdpbmRvdy5yZW5kZXJTYW5pdGl6ZWRIVE1MKG1zZywgd2luZG93LmZvcm1hdExMTU91dHB1dChyYXcpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHdpbmRvdy5zYXZlTWVzc2FnZVRvTG9jYWxTdG9yYWdlKSB3aW5kb3cuc2F2ZU1lc3NhZ2VUb0xvY2FsU3RvcmFnZShyYXcsIFwiYm90XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByYXcgKz0gb3JpZ2luYWxUZXh0LnN1YnN0cihpZHgsIGNodW5rKTtcbiAgICBpZHggKz0gY2h1bms7XG5cbiAgICBpZiAod2luZG93LnJlbmRlclNhbml0aXplZEhUTUwgJiYgd2luZG93LmZvcm1hdExMTU91dHB1dCkge1xuICAgICAgd2luZG93LnJlbmRlclNhbml0aXplZEhUTUwobXNnLCB3aW5kb3cuZm9ybWF0TExNT3V0cHV0KHJhdykpO1xuICAgIH1cbiAgICBtc2cuZGF0YXNldC5mdWxsVGV4dCA9IHJhdztcbiAgfSwgaW50ZXJ2YWwpO1xufVxuXG4vKiDjg63jg7zjgqvjg6vvvI/jgrXjg7zjg5DlsaXmrbTlhbHpgJrmj4/nlLsgKi9cbmZ1bmN0aW9uIGRpc3BsYXlNZXNzYWdlKHRleHQ6IHN0cmluZywgc2VuZGVyOiBzdHJpbmcpIHtcbiAgaWYgKCF3aW5kb3cuY2hhdE1lc3NhZ2VzKSByZXR1cm47XG4gIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjb25zdCBjb3B5QnRuID0gd2luZG93LmNyZWF0ZUNvcHlCdG4gPyB3aW5kb3cuY3JlYXRlQ29weUJ0bigoKSA9PiB0ZXh0KSA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cbiAgaWYgKHNlbmRlciA9PT0gXCJ1c2VyXCIpIHtcbiAgICB3cmFwcGVyLmNsYXNzTmFtZSA9IFwibWVzc2FnZS13cmFwcGVyIHVzZXItbWVzc2FnZS13cmFwcGVyXCI7XG4gICAgY29uc3QgbXNnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBtc2cuY2xhc3NOYW1lID0gXCJ1c2VyLW1lc3NhZ2VcIjtcblxuICAgIC8vIOaXouWtmOWxpeattOOBryA8YnI+IOOBjOWQq+OBvuOCjOOBpuOBhOOCi+OBn+OCgeOAgTxicj4g44Gg44GR6Kix5Y+v44GX44Gm5o+P55S7XG4gICAgaWYgKHRleHQuaW5jbHVkZXMoXCI8XCIpKSB7XG4gICAgICB3aW5kb3cucmVuZGVyU2FuaXRpemVkSFRNTD8uKG1zZywgdGV4dCwgW1wiYnJcIl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cuc2V0VGV4dFdpdGhMaW5lQnJlYWtzPy4obXNnLCB0ZXh0KTtcbiAgICB9XG5cbiAgICB3cmFwcGVyLmFwcGVuZChjb3B5QnRuLCBtc2cpO1xuICB9IGVsc2Uge1xuICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gXCJtZXNzYWdlLXdyYXBwZXIgYm90LW1lc3NhZ2Utd3JhcHBlclwiO1xuICAgIGNvbnN0IG1zZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbXNnLmNsYXNzTmFtZSA9IFwiYm90LW1lc3NhZ2VcIjtcblxuICAgIC8vIEJvdCDjga/jg57jg7zjgq/jgqLjg4Pjg5fmuIjjgb8g4oaSIOW6g+OCgeOBruOCv+OCsOioseWPr+OBp+OCteODi+OCv+OCpOOCulxuICAgIGlmICh3aW5kb3cucmVuZGVyU2FuaXRpemVkSFRNTCAmJiB3aW5kb3cuZm9ybWF0TExNT3V0cHV0KSB7XG4gICAgICB3aW5kb3cucmVuZGVyU2FuaXRpemVkSFRNTChtc2csIHdpbmRvdy5mb3JtYXRMTE1PdXRwdXQodGV4dCkpO1xuICAgIH1cbiAgICB3cmFwcGVyLmFwcGVuZChjb3B5QnRuLCBtc2cpO1xuICB9XG4gIHdpbmRvdy5jaGF0TWVzc2FnZXMuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG59XG5cbi8vIC0tLS0gd2luZG93IOOBuOWFrOmWiyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbndpbmRvdy5yZW5kZXJVc2VyTWVzc2FnZSA9IHJlbmRlclVzZXJNZXNzYWdlO1xud2luZG93LmFuaW1hdGVCb3RNZXNzYWdlID0gYW5pbWF0ZUJvdE1lc3NhZ2U7XG53aW5kb3cuZGlzcGxheU1lc3NhZ2UgPSBkaXNwbGF5TWVzc2FnZTtcblxuZXhwb3J0IHt9O1xuIl0sIm5hbWVzIjpbInJlbmRlclVzZXJNZXNzYWdlIiwidGV4dCIsIndpbmRvdyIsImNoYXRNZXNzYWdlcyIsIndyYXBwZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJtc2ciLCJodG1sVGV4dCIsInJlcGxhY2UiLCJyZW5kZXJTYW5pdGl6ZWRIVE1MIiwic3R5bGUiLCJhbmltYXRpb24iLCJjb3B5QnRuIiwiY3JlYXRlQ29weUJ0biIsImFwcGVuZCIsImFwcGVuZENoaWxkIiwic2Nyb2xsTWVzc2FnZVRvVG9wIiwic2F2ZU1lc3NhZ2VUb0xvY2FsU3RvcmFnZSIsImFuaW1hdGVCb3RNZXNzYWdlIiwib3JpZ2luYWxUZXh0IiwiZGF0YXNldCIsImZ1bGxUZXh0IiwicmF3IiwiaWR4IiwiY2h1bmsiLCJpbnRlcnZhbCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJsZW5ndGgiLCJjbGVhckludGVydmFsIiwiZm9ybWF0TExNT3V0cHV0Iiwic3Vic3RyIiwiZGlzcGxheU1lc3NhZ2UiLCJzZW5kZXIiLCJpbmNsdWRlcyIsInNldFRleHRXaXRoTGluZUJyZWFrcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scripts/chat/chat_messages.ts\n"));

/***/ }),

/***/ "./scripts/chat/chat_rooms.ts":
/*!************************************!*\
  !*** ./scripts/chat/chat_rooms.ts ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n// chat_rooms.ts – ルーム一覧・作成／削除／改名\n// --------------------------------------------------\n/* サイドバーにルーム一覧を描画 */ function loadChatRooms() {\n    fetch(\"/api/get_chat_rooms\").then((r)=>r.json()).then((data)=>{\n        if (data.error) {\n            console.error(\"get_chat_rooms:\", data.error);\n            return;\n        }\n        if (!window.chatRoomListEl) return;\n        const rooms = Array.isArray(data.rooms) ? data.rooms : [];\n        window.chatRoomListEl.innerHTML = \"\";\n        rooms.forEach((room)=>{\n            const card = createRoomCard(room);\n            window.chatRoomListEl.appendChild(card);\n        });\n    }).catch((err)=>console.error(\"ルーム一覧取得失敗:\", err));\n}\n/* ルームカード生成（内部 util） */ function createRoomCard(room) {\n    const card = document.createElement(\"div\");\n    card.className = \"chat-room-card\";\n    if (room.id === window.currentChatRoomId) card.classList.add(\"active\");\n    const title = document.createElement(\"span\");\n    title.textContent = room.title || \"新規チャット\";\n    // 3点アイコン\n    const icon = document.createElement(\"i\");\n    icon.className = \"bi bi-three-dots-vertical room-actions-icon\";\n    icon.style.cursor = \"pointer\";\n    icon.style.fontSize = \"18px\";\n    // メニュー\n    const menu = buildRoomActionsMenu(room);\n    icon.addEventListener(\"click\", (e)=>{\n        e.stopPropagation();\n        document.querySelectorAll(\".room-actions-menu\").forEach((m)=>{\n            if (m !== menu) m.style.display = \"none\";\n        });\n        menu.style.display = menu.style.display === \"block\" ? \"none\" : \"block\";\n    });\n    // クリックでルーム切替\n    card.addEventListener(\"click\", (e)=>{\n        const target = e.target;\n        if ((target === null || target === void 0 ? void 0 : target.closest(\".room-actions-icon\")) || (target === null || target === void 0 ? void 0 : target.closest(\".room-actions-menu\"))) return;\n        switchChatRoom(room.id);\n    });\n    // 右側コンテナ\n    const right = document.createElement(\"div\");\n    right.style.display = \"flex\";\n    right.style.alignItems = \"center\";\n    right.style.position = \"relative\";\n    right.style.marginLeft = \"auto\";\n    right.append(icon, menu);\n    card.append(title, right);\n    return card;\n}\n/* アクションメニュー生成（内部 util） */ function buildRoomActionsMenu(room) {\n    const menu = document.createElement(\"div\");\n    menu.className = \"room-actions-menu\";\n    Object.assign(menu.style, {\n        position: \"absolute\",\n        top: \"50%\",\n        right: \"0\",\n        transform: \"translateY(-50%)\",\n        background: \"#fff\",\n        border: \"1px solid #ddd\",\n        borderRadius: \"6px\",\n        boxShadow: \"0 2px 4px rgba(0,0,0,.1)\",\n        zIndex: \"10\",\n        minWidth: \"140px\",\n        overflow: \"hidden\",\n        display: \"none\"\n    });\n    // 名前変更\n    const rename = document.createElement(\"div\");\n    rename.className = \"menu-item\";\n    rename.innerHTML = '<i class=\"bi bi-pencil-square\" style=\"margin-right:6px;\"></i> 名前変更';\n    decorateMenuItem(rename, \"#007bff\", \"#e6f0ff\");\n    rename.addEventListener(\"click\", (e)=>{\n        e.stopPropagation();\n        menu.style.display = \"none\";\n        const name = prompt(\"新しいチャットルーム名\", room.title);\n        if (name && name.trim()) renameChatRoom(room.id, name.trim());\n    });\n    // 削除\n    const del = document.createElement(\"div\");\n    del.className = \"menu-item\";\n    del.innerHTML = '<i class=\"bi bi-trash\" style=\"margin-right:6px;\"></i> 削除';\n    decorateMenuItem(del, \"#dc3545\", \"#ffe6e6\");\n    del.addEventListener(\"click\", (e)=>{\n        e.stopPropagation();\n        menu.style.display = \"none\";\n        if (confirm(\"「\".concat(room.title, \"」を削除しますか？\"))) deleteChatRoom(room.id);\n    });\n    menu.append(rename, del);\n    return menu;\n}\n/* メニュー項目スタイル util */ function decorateMenuItem(el, color, hover) {\n    Object.assign(el.style, {\n        padding: \"8px 16px\",\n        cursor: \"pointer\",\n        display: \"flex\",\n        alignItems: \"center\",\n        fontSize: \"14px\",\n        color: color,\n        background: \"#f9f9f9\",\n        borderBottom: \"1px solid #ddd\"\n    });\n    el.addEventListener(\"mouseover\", ()=>el.style.backgroundColor = hover);\n    el.addEventListener(\"mouseout\", ()=>el.style.backgroundColor = \"#f9f9f9\");\n}\n/* ルーム切替 */ function switchChatRoom(roomId) {\n    var _window_showChatInterface, _window, _window_loadLocalChatHistory, _window1, _window_loadChatHistory, _window2;\n    window.currentChatRoomId = roomId;\n    localStorage.setItem(\"currentChatRoomId\", roomId);\n    (_window_showChatInterface = (_window = window).showChatInterface) === null || _window_showChatInterface === void 0 ? void 0 : _window_showChatInterface.call(_window);\n    loadChatRooms();\n    (_window_loadLocalChatHistory = (_window1 = window).loadLocalChatHistory) === null || _window_loadLocalChatHistory === void 0 ? void 0 : _window_loadLocalChatHistory.call(_window1);\n    (_window_loadChatHistory = (_window2 = window).loadChatHistory) === null || _window_loadChatHistory === void 0 ? void 0 : _window_loadChatHistory.call(_window2);\n}\n/* ルーム作成 */ function createNewChatRoom(roomId, title) {\n    return fetch(\"/api/new_chat_room\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            id: roomId,\n            title\n        })\n    }).then((r)=>r.json()).then((data)=>{\n        if (data.error) return Promise.reject(data.error);\n        return data;\n    });\n}\n/* ルーム削除 */ function deleteChatRoom(roomId) {\n    fetch(\"/api/delete_chat_room\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            room_id: roomId\n        })\n    }).then((r)=>r.json()).then((data)=>{\n        if (data.error) alert(\"削除失敗: \" + data.error);\n        else {\n            if (roomId === window.currentChatRoomId) {\n                window.currentChatRoomId = null;\n                if (window.chatMessages) window.chatMessages.innerHTML = \"\";\n                localStorage.removeItem(\"currentChatRoomId\");\n            }\n            loadChatRooms();\n        }\n    }).catch((err)=>alert(\"削除失敗: \" + err));\n}\n/* ルーム名変更 */ function renameChatRoom(roomId, newTitle) {\n    fetch(\"/api/rename_chat_room\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            room_id: roomId,\n            new_title: newTitle\n        })\n    }).then((r)=>r.json()).then((data)=>{\n        if (data.error) alert(\"名前変更失敗: \" + data.error);\n        else loadChatRooms();\n    }).catch((err)=>alert(\"名前変更失敗: \" + err));\n}\n// ---- window へ公開 ------------------------------\nwindow.loadChatRooms = loadChatRooms;\nwindow.switchChatRoom = switchChatRoom;\nwindow.createNewChatRoom = createNewChatRoom;\nwindow.deleteChatRoom = deleteChatRoom;\nwindow.renameChatRoom = renameChatRoom;\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QlEsT0FBT29DLGNBQWMsR0FBR0E7QUFDeEJwQyxPQUFPMEUsaUJBQWlCLEdBQUdBO0FBQzNCMUUsT0FBTzZELGNBQWMsR0FBR0E7QUFDeEI3RCxPQUFPMEQsY0FBYyxHQUFHQTtBQUVkIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NjcmlwdHMvY2hhdC9jaGF0X3Jvb21zLnRzPzkzMjkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY2hhdF9yb29tcy50cyDigJMg44Or44O844Og5LiA6Kan44O75L2c5oiQ77yP5YmK6Zmk77yP5pS55ZCNXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG50eXBlIENoYXRSb29tID0ge1xuICBpZDogc3RyaW5nO1xuICB0aXRsZT86IHN0cmluZztcbn07XG5cbi8qIOOCteOCpOODieODkOODvOOBq+ODq+ODvOODoOS4gOimp+OCkuaPj+eUuyAqL1xuZnVuY3Rpb24gbG9hZENoYXRSb29tcygpIHtcbiAgZmV0Y2goXCIvYXBpL2dldF9jaGF0X3Jvb21zXCIpXG4gICAgLnRoZW4oKHIpID0+IHIuanNvbigpKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBpZiAoZGF0YS5lcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiZ2V0X2NoYXRfcm9vbXM6XCIsIGRhdGEuZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIXdpbmRvdy5jaGF0Um9vbUxpc3RFbCkgcmV0dXJuO1xuICAgICAgY29uc3Qgcm9vbXM6IENoYXRSb29tW10gPSBBcnJheS5pc0FycmF5KGRhdGEucm9vbXMpID8gZGF0YS5yb29tcyA6IFtdO1xuICAgICAgd2luZG93LmNoYXRSb29tTGlzdEVsLmlubmVySFRNTCA9IFwiXCI7XG5cbiAgICAgIHJvb21zLmZvckVhY2goKHJvb20pID0+IHtcbiAgICAgICAgY29uc3QgY2FyZCA9IGNyZWF0ZVJvb21DYXJkKHJvb20pO1xuICAgICAgICB3aW5kb3cuY2hhdFJvb21MaXN0RWwuYXBwZW5kQ2hpbGQoY2FyZCk7XG4gICAgICB9KTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwi44Or44O844Og5LiA6Kan5Y+W5b6X5aSx5pWXOlwiLCBlcnIpKTtcbn1cblxuLyog44Or44O844Og44Kr44O844OJ55Sf5oiQ77yI5YaF6YOoIHV0aWzvvIkgKi9cbmZ1bmN0aW9uIGNyZWF0ZVJvb21DYXJkKHJvb206IENoYXRSb29tKSB7XG4gIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjYXJkLmNsYXNzTmFtZSA9IFwiY2hhdC1yb29tLWNhcmRcIjtcbiAgaWYgKHJvb20uaWQgPT09IHdpbmRvdy5jdXJyZW50Q2hhdFJvb21JZCkgY2FyZC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuXG4gIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gIHRpdGxlLnRleHRDb250ZW50ID0gcm9vbS50aXRsZSB8fCBcIuaWsOimj+ODgeODo+ODg+ODiFwiO1xuXG4gIC8vIDPngrnjgqLjgqTjgrPjg7NcbiAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpXCIpO1xuICBpY29uLmNsYXNzTmFtZSA9IFwiYmkgYmktdGhyZWUtZG90cy12ZXJ0aWNhbCByb29tLWFjdGlvbnMtaWNvblwiO1xuICBpY29uLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICBpY29uLnN0eWxlLmZvbnRTaXplID0gXCIxOHB4XCI7XG5cbiAgLy8g44Oh44OL44Ol44O8XG4gIGNvbnN0IG1lbnUgPSBidWlsZFJvb21BY3Rpb25zTWVudShyb29tKTtcbiAgaWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KFwiLnJvb20tYWN0aW9ucy1tZW51XCIpLmZvckVhY2goKG0pID0+IHtcbiAgICAgIGlmIChtICE9PSBtZW51KSBtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9KTtcbiAgICBtZW51LnN0eWxlLmRpc3BsYXkgPSBtZW51LnN0eWxlLmRpc3BsYXkgPT09IFwiYmxvY2tcIiA/IFwibm9uZVwiIDogXCJibG9ja1wiO1xuICB9KTtcblxuICAvLyDjgq/jg6rjg4Pjgq/jgafjg6vjg7zjg6DliIfmm79cbiAgY2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBFbGVtZW50IHwgbnVsbDtcbiAgICBpZiAodGFyZ2V0Py5jbG9zZXN0KFwiLnJvb20tYWN0aW9ucy1pY29uXCIpIHx8IHRhcmdldD8uY2xvc2VzdChcIi5yb29tLWFjdGlvbnMtbWVudVwiKSkgcmV0dXJuO1xuICAgIHN3aXRjaENoYXRSb29tKHJvb20uaWQpO1xuICB9KTtcblxuICAvLyDlj7PlgbTjgrPjg7Pjg4bjg4pcbiAgY29uc3QgcmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICByaWdodC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gIHJpZ2h0LnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuICByaWdodC5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcbiAgcmlnaHQuc3R5bGUubWFyZ2luTGVmdCA9IFwiYXV0b1wiO1xuICByaWdodC5hcHBlbmQoaWNvbiwgbWVudSk7XG5cbiAgY2FyZC5hcHBlbmQodGl0bGUsIHJpZ2h0KTtcbiAgcmV0dXJuIGNhcmQ7XG59XG5cbi8qIOOCouOCr+OCt+ODp+ODs+ODoeODi+ODpeODvOeUn+aIkO+8iOWGhemDqCB1dGls77yJICovXG5mdW5jdGlvbiBidWlsZFJvb21BY3Rpb25zTWVudShyb29tOiBDaGF0Um9vbSkge1xuICBjb25zdCBtZW51ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgbWVudS5jbGFzc05hbWUgPSBcInJvb20tYWN0aW9ucy1tZW51XCI7XG4gIE9iamVjdC5hc3NpZ24obWVudS5zdHlsZSwge1xuICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgdG9wOiBcIjUwJVwiLFxuICAgIHJpZ2h0OiBcIjBcIixcbiAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWSgtNTAlKVwiLFxuICAgIGJhY2tncm91bmQ6IFwiI2ZmZlwiLFxuICAgIGJvcmRlcjogXCIxcHggc29saWQgI2RkZFwiLFxuICAgIGJvcmRlclJhZGl1czogXCI2cHhcIixcbiAgICBib3hTaGFkb3c6IFwiMCAycHggNHB4IHJnYmEoMCwwLDAsLjEpXCIsXG4gICAgekluZGV4OiBcIjEwXCIsXG4gICAgbWluV2lkdGg6IFwiMTQwcHhcIixcbiAgICBvdmVyZmxvdzogXCJoaWRkZW5cIixcbiAgICBkaXNwbGF5OiBcIm5vbmVcIlxuICB9KTtcblxuICAvLyDlkI3liY3lpInmm7RcbiAgY29uc3QgcmVuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgcmVuYW1lLmNsYXNzTmFtZSA9IFwibWVudS1pdGVtXCI7XG4gIHJlbmFtZS5pbm5lckhUTUwgPVxuICAgICc8aSBjbGFzcz1cImJpIGJpLXBlbmNpbC1zcXVhcmVcIiBzdHlsZT1cIm1hcmdpbi1yaWdodDo2cHg7XCI+PC9pPiDlkI3liY3lpInmm7QnO1xuICBkZWNvcmF0ZU1lbnVJdGVtKHJlbmFtZSwgXCIjMDA3YmZmXCIsIFwiI2U2ZjBmZlwiKTtcbiAgcmVuYW1lLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgbWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgY29uc3QgbmFtZSA9IHByb21wdChcIuaWsOOBl+OBhOODgeODo+ODg+ODiOODq+ODvOODoOWQjVwiLCByb29tLnRpdGxlKTtcbiAgICBpZiAobmFtZSAmJiBuYW1lLnRyaW0oKSkgcmVuYW1lQ2hhdFJvb20ocm9vbS5pZCwgbmFtZS50cmltKCkpO1xuICB9KTtcblxuICAvLyDliYrpmaRcbiAgY29uc3QgZGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZGVsLmNsYXNzTmFtZSA9IFwibWVudS1pdGVtXCI7XG4gIGRlbC5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJiaSBiaS10cmFzaFwiIHN0eWxlPVwibWFyZ2luLXJpZ2h0OjZweDtcIj48L2k+IOWJiumZpCc7XG4gIGRlY29yYXRlTWVudUl0ZW0oZGVsLCBcIiNkYzM1NDVcIiwgXCIjZmZlNmU2XCIpO1xuICBkZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBtZW51LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICBpZiAoY29uZmlybShg44CMJHtyb29tLnRpdGxlfeOAjeOCkuWJiumZpOOBl+OBvuOBmeOBi++8n2ApKSBkZWxldGVDaGF0Um9vbShyb29tLmlkKTtcbiAgfSk7XG5cbiAgbWVudS5hcHBlbmQocmVuYW1lLCBkZWwpO1xuICByZXR1cm4gbWVudTtcbn1cblxuLyog44Oh44OL44Ol44O86aCF55uu44K544K/44Kk44OrIHV0aWwgKi9cbmZ1bmN0aW9uIGRlY29yYXRlTWVudUl0ZW0oZWw6IEhUTUxFbGVtZW50LCBjb2xvcjogc3RyaW5nLCBob3Zlcjogc3RyaW5nKSB7XG4gIE9iamVjdC5hc3NpZ24oZWwuc3R5bGUsIHtcbiAgICBwYWRkaW5nOiBcIjhweCAxNnB4XCIsXG4gICAgY3Vyc29yOiBcInBvaW50ZXJcIixcbiAgICBkaXNwbGF5OiBcImZsZXhcIixcbiAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgIGZvbnRTaXplOiBcIjE0cHhcIixcbiAgICBjb2xvcjogY29sb3IsXG4gICAgYmFja2dyb3VuZDogXCIjZjlmOWY5XCIsXG4gICAgYm9yZGVyQm90dG9tOiBcIjFweCBzb2xpZCAjZGRkXCJcbiAgfSk7XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4gKGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGhvdmVyKSk7XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiAoZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZjlmOWY5XCIpKTtcbn1cblxuLyog44Or44O844Og5YiH5pu/ICovXG5mdW5jdGlvbiBzd2l0Y2hDaGF0Um9vbShyb29tSWQ6IHN0cmluZykge1xuICB3aW5kb3cuY3VycmVudENoYXRSb29tSWQgPSByb29tSWQ7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudENoYXRSb29tSWRcIiwgcm9vbUlkKTtcbiAgd2luZG93LnNob3dDaGF0SW50ZXJmYWNlPy4oKTtcbiAgbG9hZENoYXRSb29tcygpO1xuICB3aW5kb3cubG9hZExvY2FsQ2hhdEhpc3Rvcnk/LigpO1xuICB3aW5kb3cubG9hZENoYXRIaXN0b3J5Py4oKTtcbn1cblxuLyog44Or44O844Og5L2c5oiQICovXG5mdW5jdGlvbiBjcmVhdGVOZXdDaGF0Um9vbShyb29tSWQ6IHN0cmluZywgdGl0bGU6IHN0cmluZykge1xuICByZXR1cm4gZmV0Y2goXCIvYXBpL25ld19jaGF0X3Jvb21cIiwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgaWQ6IHJvb21JZCwgdGl0bGUgfSlcbiAgfSlcbiAgICAudGhlbigocikgPT4gci5qc29uKCkpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGlmIChkYXRhLmVycm9yKSByZXR1cm4gUHJvbWlzZS5yZWplY3QoZGF0YS5lcnJvcik7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KTtcbn1cblxuLyog44Or44O844Og5YmK6ZmkICovXG5mdW5jdGlvbiBkZWxldGVDaGF0Um9vbShyb29tSWQ6IHN0cmluZykge1xuICBmZXRjaChcIi9hcGkvZGVsZXRlX2NoYXRfcm9vbVwiLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyByb29tX2lkOiByb29tSWQgfSlcbiAgfSlcbiAgICAudGhlbigocikgPT4gci5qc29uKCkpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGlmIChkYXRhLmVycm9yKSBhbGVydChcIuWJiumZpOWkseaVlzogXCIgKyBkYXRhLmVycm9yKTtcbiAgICAgIGVsc2Uge1xuICAgICAgaWYgKHJvb21JZCA9PT0gd2luZG93LmN1cnJlbnRDaGF0Um9vbUlkKSB7XG4gICAgICAgIHdpbmRvdy5jdXJyZW50Q2hhdFJvb21JZCA9IG51bGw7XG4gICAgICAgIGlmICh3aW5kb3cuY2hhdE1lc3NhZ2VzKSB3aW5kb3cuY2hhdE1lc3NhZ2VzLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiY3VycmVudENoYXRSb29tSWRcIik7XG4gICAgICB9XG4gICAgICAgIGxvYWRDaGF0Um9vbXMoKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBhbGVydChcIuWJiumZpOWkseaVlzogXCIgKyBlcnIpKTtcbn1cblxuLyog44Or44O844Og5ZCN5aSJ5pu0ICovXG5mdW5jdGlvbiByZW5hbWVDaGF0Um9vbShyb29tSWQ6IHN0cmluZywgbmV3VGl0bGU6IHN0cmluZykge1xuICBmZXRjaChcIi9hcGkvcmVuYW1lX2NoYXRfcm9vbVwiLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyByb29tX2lkOiByb29tSWQsIG5ld190aXRsZTogbmV3VGl0bGUgfSlcbiAgfSlcbiAgICAudGhlbigocikgPT4gci5qc29uKCkpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGlmIChkYXRhLmVycm9yKSBhbGVydChcIuWQjeWJjeWkieabtOWkseaVlzogXCIgKyBkYXRhLmVycm9yKTtcbiAgICAgIGVsc2UgbG9hZENoYXRSb29tcygpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGFsZXJ0KFwi5ZCN5YmN5aSJ5pu05aSx5pWXOiBcIiArIGVycikpO1xufVxuXG4vLyAtLS0tIHdpbmRvdyDjgbjlhazplosgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG53aW5kb3cubG9hZENoYXRSb29tcyA9IGxvYWRDaGF0Um9vbXM7XG53aW5kb3cuc3dpdGNoQ2hhdFJvb20gPSBzd2l0Y2hDaGF0Um9vbTtcbndpbmRvdy5jcmVhdGVOZXdDaGF0Um9vbSA9IGNyZWF0ZU5ld0NoYXRSb29tO1xud2luZG93LmRlbGV0ZUNoYXRSb29tID0gZGVsZXRlQ2hhdFJvb207XG53aW5kb3cucmVuYW1lQ2hhdFJvb20gPSByZW5hbWVDaGF0Um9vbTtcblxuZXhwb3J0IHt9O1xuIl0sIm5hbWVzIjpbImxvYWRDaGF0Um9vbXMiLCJmZXRjaCIsInRoZW4iLCJyIiwianNvbiIsImRhdGEiLCJlcnJvciIsImNvbnNvbGUiLCJ3aW5kb3ciLCJjaGF0Um9vbUxpc3RFbCIsInJvb21zIiwiQXJyYXkiLCJpc0FycmF5IiwiaW5uZXJIVE1MIiwiZm9yRWFjaCIsInJvb20iLCJjYXJkIiwiY3JlYXRlUm9vbUNhcmQiLCJhcHBlbmRDaGlsZCIsImNhdGNoIiwiZXJyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiaWQiLCJjdXJyZW50Q2hhdFJvb21JZCIsImNsYXNzTGlzdCIsImFkZCIsInRpdGxlIiwidGV4dENvbnRlbnQiLCJpY29uIiwic3R5bGUiLCJjdXJzb3IiLCJmb250U2l6ZSIsIm1lbnUiLCJidWlsZFJvb21BY3Rpb25zTWVudSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwicXVlcnlTZWxlY3RvckFsbCIsIm0iLCJkaXNwbGF5IiwidGFyZ2V0IiwiY2xvc2VzdCIsInN3aXRjaENoYXRSb29tIiwicmlnaHQiLCJhbGlnbkl0ZW1zIiwicG9zaXRpb24iLCJtYXJnaW5MZWZ0IiwiYXBwZW5kIiwiT2JqZWN0IiwiYXNzaWduIiwidG9wIiwidHJhbnNmb3JtIiwiYmFja2dyb3VuZCIsImJvcmRlciIsImJvcmRlclJhZGl1cyIsImJveFNoYWRvdyIsInpJbmRleCIsIm1pbldpZHRoIiwib3ZlcmZsb3ciLCJyZW5hbWUiLCJkZWNvcmF0ZU1lbnVJdGVtIiwibmFtZSIsInByb21wdCIsInRyaW0iLCJyZW5hbWVDaGF0Um9vbSIsImRlbCIsImNvbmZpcm0iLCJkZWxldGVDaGF0Um9vbSIsImVsIiwiY29sb3IiLCJob3ZlciIsInBhZGRpbmciLCJib3JkZXJCb3R0b20iLCJiYWNrZ3JvdW5kQ29sb3IiLCJyb29tSWQiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwic2hvd0NoYXRJbnRlcmZhY2UiLCJsb2FkTG9jYWxDaGF0SGlzdG9yeSIsImxvYWRDaGF0SGlzdG9yeSIsImNyZWF0ZU5ld0NoYXRSb29tIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiUHJvbWlzZSIsInJlamVjdCIsInJvb21faWQiLCJhbGVydCIsImNoYXRNZXNzYWdlcyIsInJlbW92ZUl0ZW0iLCJuZXdUaXRsZSIsIm5ld190aXRsZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scripts/chat/chat_rooms.ts\n"));

/***/ }),

/***/ "./scripts/chat/chat_ui.ts":
/*!*********************************!*\
  !*** ./scripts/chat/chat_ui.ts ***!
  \*********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n// chat_ui.ts  – チャット画面 UI 共通ユーティリティ\n// --------------------------------------------------\n// グローバル初期化\nwindow.currentChatRoomId = window.currentChatRoomId || null;\n/* チャット画面を表示（セットアップ画面を隠す） */ function showChatInterface() {\n    if (!window.setupContainer || !window.chatContainer) return;\n    window.setupContainer.style.display = \"none\";\n    window.chatContainer.style.display = \"flex\";\n    if (!window.currentChatRoomId && localStorage.getItem(\"currentChatRoomId\")) {\n        window.currentChatRoomId = localStorage.getItem(\"currentChatRoomId\");\n    }\n}\n/* タイピングインジケータ */ function showTypingIndicator() {\n    if (!window.typingIndicator) return;\n    window.typingIndicator.style.display = \"inline-flex\";\n}\nfunction hideTypingIndicator() {\n    if (!window.typingIndicator) return;\n    window.typingIndicator.style.display = \"none\";\n}\n/* LLM 出力を HTML 整形（**太字**／改行・箇条書き） */ function formatLLMOutput(text) {\n    let formatted = text.replace(/\\*\\*(.*?)\\*\\*/g, \"<strong>$1</strong>\");\n    const lines = formatted.split(\"\\n\");\n    let result = \"\";\n    let inList = false;\n    lines.forEach((line)=>{\n        if (line.trim().startsWith(\"- \")) {\n            if (!inList) {\n                result += \"<ul>\";\n                inList = true;\n            }\n            result += \"<li>\" + line.trim().substring(2) + \"</li>\";\n        } else {\n            if (inList) {\n                result += \"</ul>\";\n                inList = false;\n            }\n            result += line + \"<br>\";\n        }\n    });\n    if (inList) result += \"</ul>\";\n    return result;\n}\n/*  サイドバートグル処理  */ function toggleSidebar() {\n    const sb = document.querySelector(\".sidebar\");\n    if (!sb) return;\n    sb.classList.toggle(\"open\");\n    document.body.classList.toggle(\"sidebar-visible\", sb.classList.contains(\"open\"));\n}\nconst initSidebarToggle = ()=>{\n    const sbBtn = document.getElementById(\"sidebar-toggle\");\n    if (sbBtn) sbBtn.addEventListener(\"click\", (e)=>{\n        e.stopPropagation();\n        toggleSidebar();\n    });\n    // オーバーレイ／リンクタップで閉じる\n    document.addEventListener(\"click\", (e)=>{\n        const target = e.target;\n        if (document.body.classList.contains(\"sidebar-visible\") && target && !target.closest(\".sidebar\") && !target.closest(\"#sidebar-toggle\")) {\n            toggleSidebar();\n        }\n    });\n};\nif (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", initSidebarToggle);\n} else {\n    initSidebarToggle();\n}\n// ---- window へ公開 -------------------------------\nwindow.showChatInterface = showChatInterface;\nwindow.showTypingIndicator = showTypingIndicator;\nwindow.hideTypingIndicator = hideTypingIndicator;\nwindow.formatLLMOutput = formatLLMOutput;\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHRzL2NoYXQvY2hhdF91aS50cyIsIm1hcHBpbmdzIjoiO0FBQUEsb0NBQW9DO0FBQ3BDLHFEQUFxRDtBQUVyRCxXQUFXO0FBQ1hBLE9BQU9DLGlCQUFpQixHQUFHRCxPQUFPQyxpQkFBaUIsSUFBSTtBQUV2RCwwQkFBMEIsR0FDMUIsU0FBU0M7SUFDUCxJQUFJLENBQUNGLE9BQU9HLGNBQWMsSUFBSSxDQUFDSCxPQUFPSSxhQUFhLEVBQUU7SUFDckRKLE9BQU9HLGNBQWMsQ0FBQ0UsS0FBSyxDQUFDQyxPQUFPLEdBQUc7SUFDdENOLE9BQU9JLGFBQWEsQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLEdBQUc7SUFDckMsSUFBSSxDQUFDTixPQUFPQyxpQkFBaUIsSUFBSU0sYUFBYUMsT0FBTyxDQUFDLHNCQUFzQjtRQUMxRVIsT0FBT0MsaUJBQWlCLEdBQUdNLGFBQWFDLE9BQU8sQ0FBQztJQUNsRDtBQUNGO0FBRUEsZUFBZSxHQUNmLFNBQVNDO0lBQ1AsSUFBSSxDQUFDVCxPQUFPVSxlQUFlLEVBQUU7SUFDN0JWLE9BQU9VLGVBQWUsQ0FBQ0wsS0FBSyxDQUFDQyxPQUFPLEdBQUc7QUFDekM7QUFDQSxTQUFTSztJQUNQLElBQUksQ0FBQ1gsT0FBT1UsZUFBZSxFQUFFO0lBQzdCVixPQUFPVSxlQUFlLENBQUNMLEtBQUssQ0FBQ0MsT0FBTyxHQUFHO0FBQ3pDO0FBRUEsbUNBQW1DLEdBQ25DLFNBQVNNLGdCQUFnQkMsSUFBWTtJQUNuQyxJQUFJQyxZQUFZRCxLQUFLRSxPQUFPLENBQUMsa0JBQWtCO0lBQy9DLE1BQU1DLFFBQVFGLFVBQVVHLEtBQUssQ0FBQztJQUM5QixJQUFJQyxTQUFTO0lBQ2IsSUFBSUMsU0FBUztJQUViSCxNQUFNSSxPQUFPLENBQUMsQ0FBQ0M7UUFDYixJQUFJQSxLQUFLQyxJQUFJLEdBQUdDLFVBQVUsQ0FBQyxPQUFPO1lBQ2hDLElBQUksQ0FBQ0osUUFBUTtnQkFDWEQsVUFBVTtnQkFDVkMsU0FBUztZQUNYO1lBQ0FELFVBQVUsU0FBU0csS0FBS0MsSUFBSSxHQUFHRSxTQUFTLENBQUMsS0FBSztRQUNoRCxPQUFPO1lBQ0wsSUFBSUwsUUFBUTtnQkFDVkQsVUFBVTtnQkFDVkMsU0FBUztZQUNYO1lBQ0FELFVBQVVHLE9BQU87UUFDbkI7SUFDRjtJQUNBLElBQUlGLFFBQVFELFVBQVU7SUFDdEIsT0FBT0E7QUFDVDtBQUVBLGdCQUFnQixHQUNoQixTQUFTTztJQUNQLE1BQU1DLEtBQUtDLFNBQVNDLGFBQWEsQ0FBQztJQUNsQyxJQUFJLENBQUNGLElBQUk7SUFDVEEsR0FBR0csU0FBUyxDQUFDQyxNQUFNLENBQUM7SUFDcEJILFNBQVNJLElBQUksQ0FBQ0YsU0FBUyxDQUFDQyxNQUFNLENBQUMsbUJBQW1CSixHQUFHRyxTQUFTLENBQUNHLFFBQVEsQ0FBQztBQUMxRTtBQUVBLE1BQU1DLG9CQUFvQjtJQUN4QixNQUFNQyxRQUFRUCxTQUFTUSxjQUFjLENBQUM7SUFDdEMsSUFBSUQsT0FDRkEsTUFBTUUsZ0JBQWdCLENBQUMsU0FBUyxDQUFDQztRQUMvQkEsRUFBRUMsZUFBZTtRQUNqQmI7SUFDRjtJQUNGLG9CQUFvQjtJQUNwQkUsU0FBU1MsZ0JBQWdCLENBQUMsU0FBUyxDQUFDQztRQUNsQyxNQUFNRSxTQUFTRixFQUFFRSxNQUFNO1FBQ3ZCLElBQ0VaLFNBQVNJLElBQUksQ0FBQ0YsU0FBUyxDQUFDRyxRQUFRLENBQUMsc0JBQ2pDTyxVQUNBLENBQUNBLE9BQU9DLE9BQU8sQ0FBQyxlQUNoQixDQUFDRCxPQUFPQyxPQUFPLENBQUMsb0JBQ2hCO1lBQ0FmO1FBQ0Y7SUFDRjtBQUNGO0FBRUEsSUFBSUUsU0FBU2MsVUFBVSxLQUFLLFdBQVc7SUFDckNkLFNBQVNTLGdCQUFnQixDQUFDLG9CQUFvQkg7QUFDaEQsT0FBTztJQUNMQTtBQUNGO0FBRUEsa0RBQWtEO0FBQ2xEakMsT0FBT0UsaUJBQWlCLEdBQUdBO0FBQzNCRixPQUFPUyxtQkFBbUIsR0FBR0E7QUFDN0JULE9BQU9XLG1CQUFtQixHQUFHQTtBQUM3QlgsT0FBT1ksZUFBZSxHQUFHQTtBQUVmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NjcmlwdHMvY2hhdC9jaGF0X3VpLnRzP2I3NjgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY2hhdF91aS50cyAg4oCTIOODgeODo+ODg+ODiOeUu+mdoiBVSSDlhbHpgJrjg6bjg7zjg4bjgqPjg6rjg4bjgqNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIOOCsOODreODvOODkOODq+WIneacn+WMllxud2luZG93LmN1cnJlbnRDaGF0Um9vbUlkID0gd2luZG93LmN1cnJlbnRDaGF0Um9vbUlkIHx8IG51bGw7XG5cbi8qIOODgeODo+ODg+ODiOeUu+mdouOCkuihqOekuu+8iOOCu+ODg+ODiOOCouODg+ODl+eUu+mdouOCkumaoOOBme+8iSAqL1xuZnVuY3Rpb24gc2hvd0NoYXRJbnRlcmZhY2UoKSB7XG4gIGlmICghd2luZG93LnNldHVwQ29udGFpbmVyIHx8ICF3aW5kb3cuY2hhdENvbnRhaW5lcikgcmV0dXJuO1xuICB3aW5kb3cuc2V0dXBDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB3aW5kb3cuY2hhdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gIGlmICghd2luZG93LmN1cnJlbnRDaGF0Um9vbUlkICYmIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudENoYXRSb29tSWRcIikpIHtcbiAgICB3aW5kb3cuY3VycmVudENoYXRSb29tSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRDaGF0Um9vbUlkXCIpO1xuICB9XG59XG5cbi8qIOOCv+OCpOODlOODs+OCsOOCpOODs+OCuOOCseODvOOCvyAqL1xuZnVuY3Rpb24gc2hvd1R5cGluZ0luZGljYXRvcigpIHtcbiAgaWYgKCF3aW5kb3cudHlwaW5nSW5kaWNhdG9yKSByZXR1cm47XG4gIHdpbmRvdy50eXBpbmdJbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWZsZXhcIjtcbn1cbmZ1bmN0aW9uIGhpZGVUeXBpbmdJbmRpY2F0b3IoKSB7XG4gIGlmICghd2luZG93LnR5cGluZ0luZGljYXRvcikgcmV0dXJuO1xuICB3aW5kb3cudHlwaW5nSW5kaWNhdG9yLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbn1cblxuLyogTExNIOWHuuWKm+OCkiBIVE1MIOaVtOW9ou+8iCoq5aSq5a2XKirvvI/mlLnooYzjg7vnrofmnaHmm7jjgY3vvIkgKi9cbmZ1bmN0aW9uIGZvcm1hdExMTU91dHB1dCh0ZXh0OiBzdHJpbmcpIHtcbiAgbGV0IGZvcm1hdHRlZCA9IHRleHQucmVwbGFjZSgvXFwqXFwqKC4qPylcXCpcXCovZywgXCI8c3Ryb25nPiQxPC9zdHJvbmc+XCIpO1xuICBjb25zdCBsaW5lcyA9IGZvcm1hdHRlZC5zcGxpdChcIlxcblwiKTtcbiAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gIGxldCBpbkxpc3QgPSBmYWxzZTtcblxuICBsaW5lcy5mb3JFYWNoKChsaW5lKSA9PiB7XG4gICAgaWYgKGxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoXCItIFwiKSkge1xuICAgICAgaWYgKCFpbkxpc3QpIHtcbiAgICAgICAgcmVzdWx0ICs9IFwiPHVsPlwiO1xuICAgICAgICBpbkxpc3QgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmVzdWx0ICs9IFwiPGxpPlwiICsgbGluZS50cmltKCkuc3Vic3RyaW5nKDIpICsgXCI8L2xpPlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaW5MaXN0KSB7XG4gICAgICAgIHJlc3VsdCArPSBcIjwvdWw+XCI7XG4gICAgICAgIGluTGlzdCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgcmVzdWx0ICs9IGxpbmUgKyBcIjxicj5cIjtcbiAgICB9XG4gIH0pO1xuICBpZiAoaW5MaXN0KSByZXN1bHQgKz0gXCI8L3VsPlwiO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKiAg44K144Kk44OJ44OQ44O844OI44Kw44Or5Yem55CGICAqL1xuZnVuY3Rpb24gdG9nZ2xlU2lkZWJhcigpIHtcbiAgY29uc3Qgc2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpZGViYXJcIik7XG4gIGlmICghc2IpIHJldHVybjtcbiAgc2IuY2xhc3NMaXN0LnRvZ2dsZShcIm9wZW5cIik7XG4gIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcInNpZGViYXItdmlzaWJsZVwiLCBzYi5jbGFzc0xpc3QuY29udGFpbnMoXCJvcGVuXCIpKTtcbn1cblxuY29uc3QgaW5pdFNpZGViYXJUb2dnbGUgPSAoKSA9PiB7XG4gIGNvbnN0IHNiQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaWRlYmFyLXRvZ2dsZVwiKTtcbiAgaWYgKHNiQnRuKVxuICAgIHNiQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRvZ2dsZVNpZGViYXIoKTtcbiAgICB9KTtcbiAgLy8g44Kq44O844OQ44O844Os44Kk77yP44Oq44Oz44Kv44K/44OD44OX44Gn6ZaJ44GY44KLXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEVsZW1lbnQgfCBudWxsO1xuICAgIGlmIChcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2lkZWJhci12aXNpYmxlXCIpICYmXG4gICAgICB0YXJnZXQgJiZcbiAgICAgICF0YXJnZXQuY2xvc2VzdChcIi5zaWRlYmFyXCIpICYmXG4gICAgICAhdGFyZ2V0LmNsb3Nlc3QoXCIjc2lkZWJhci10b2dnbGVcIilcbiAgICApIHtcbiAgICAgIHRvZ2dsZVNpZGViYXIoKTtcbiAgICB9XG4gIH0pO1xufTtcblxuaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwibG9hZGluZ1wiKSB7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGluaXRTaWRlYmFyVG9nZ2xlKTtcbn0gZWxzZSB7XG4gIGluaXRTaWRlYmFyVG9nZ2xlKCk7XG59XG5cbi8vIC0tLS0gd2luZG93IOOBuOWFrOmWiyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG53aW5kb3cuc2hvd0NoYXRJbnRlcmZhY2UgPSBzaG93Q2hhdEludGVyZmFjZTtcbndpbmRvdy5zaG93VHlwaW5nSW5kaWNhdG9yID0gc2hvd1R5cGluZ0luZGljYXRvcjtcbndpbmRvdy5oaWRlVHlwaW5nSW5kaWNhdG9yID0gaGlkZVR5cGluZ0luZGljYXRvcjtcbndpbmRvdy5mb3JtYXRMTE1PdXRwdXQgPSBmb3JtYXRMTE1PdXRwdXQ7XG5cbmV4cG9ydCB7fTtcbiJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJjdXJyZW50Q2hhdFJvb21JZCIsInNob3dDaGF0SW50ZXJmYWNlIiwic2V0dXBDb250YWluZXIiLCJjaGF0Q29udGFpbmVyIiwic3R5bGUiLCJkaXNwbGF5IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNob3dUeXBpbmdJbmRpY2F0b3IiLCJ0eXBpbmdJbmRpY2F0b3IiLCJoaWRlVHlwaW5nSW5kaWNhdG9yIiwiZm9ybWF0TExNT3V0cHV0IiwidGV4dCIsImZvcm1hdHRlZCIsInJlcGxhY2UiLCJsaW5lcyIsInNwbGl0IiwicmVzdWx0IiwiaW5MaXN0IiwiZm9yRWFjaCIsImxpbmUiLCJ0cmltIiwic3RhcnRzV2l0aCIsInN1YnN0cmluZyIsInRvZ2dsZVNpZGViYXIiLCJzYiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImJvZHkiLCJjb250YWlucyIsImluaXRTaWRlYmFyVG9nZ2xlIiwic2JCdG4iLCJnZXRFbGVtZW50QnlJZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwidGFyZ2V0IiwiY2xvc2VzdCIsInJlYWR5U3RhdGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./scripts/chat/chat_ui.ts\n"));

/***/ }),

/***/ "./scripts/chat/message_utils.ts":
/*!***************************************!*\
  !*** ./scripts/chat/message_utils.ts ***!
  \***************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n// message_utils.ts – 共通メッセージユーティリティ\n// --------------------------------------------------\n// DOMPurify など外部ライブラリは先にロードされている想定\n/**\n * HTML をサニタイズして挿入する\n * @param element   挿入先\n * @param dirtyHtml サニタイズ前 HTML\n * @param allowed   許可タグ（省略時はデフォルト）\n */ function renderSanitizedHTML(element, dirtyHtml) {\n    let allowed = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [\n        \"a\",\n        \"strong\",\n        \"em\",\n        \"code\",\n        \"pre\",\n        \"br\",\n        \"p\",\n        \"ul\",\n        \"ol\",\n        \"li\",\n        \"blockquote\",\n        \"img\"\n    ];\n    const clean = DOMPurify.sanitize(dirtyHtml, {\n        ALLOWED_TAGS: allowed,\n        ALLOWED_ATTR: [\n            \"href\",\n            \"src\",\n            \"alt\",\n            \"title\",\n            \"target\"\n        ]\n    });\n    element.innerHTML = clean;\n}\n/**\n * テキストを \\n→<br> に変換しつつ安全に挿入\n * @param element\n * @param text\n */ function setTextWithLineBreaks(element, text) {\n    element.textContent = \"\";\n    text.split(\"\\n\").forEach((line, idx, arr)=>{\n        element.appendChild(document.createTextNode(line));\n        if (idx < arr.length - 1) element.appendChild(document.createElement(\"br\"));\n    });\n}\n// 新しいメッセージを表示領域の先頭に配置\nfunction scrollMessageToTop(element) {\n    if (!window.chatMessages) return;\n    const offset = -1050; // px, how far from the bottom the newest message should appear\n    const max = window.chatMessages.scrollHeight - window.chatMessages.clientHeight;\n    const target = Math.min(element.offsetTop, max) - offset;\n    window.chatMessages.scrollTop = Math.max(target, 0);\n}\n// 汎用コピーアイコン\nfunction createCopyBtn(getText) {\n    const btn = document.createElement(\"button\");\n    btn.className = \"copy-btn\";\n    btn.innerHTML = '<i class=\"bi bi-clipboard\"></i>';\n    btn.addEventListener(\"click\", ()=>{\n        navigator.clipboard.writeText(getText()).then(()=>{\n            btn.innerHTML = '<i class=\"bi bi-check-lg\"></i>';\n            setTimeout(()=>btn.innerHTML = '<i class=\"bi bi-clipboard\"></i>', 2000);\n        });\n    });\n    return btn;\n}\n// ---- window へ公開 ------------------------------\nwindow.renderSanitizedHTML = renderSanitizedHTML;\nwindow.setTextWithLineBreaks = setTextWithLineBreaks;\nwindow.scrollMessageToTop = scrollMessageToTop;\nwindow.createCopyBtn = createCopyBtn;\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHRzL2NoYXQvbWVzc2FnZV91dGlscy50cyIsIm1hcHBpbmdzIjoiO0FBQUEsb0NBQW9DO0FBQ3BDLHFEQUFxRDtBQUVyRCxtQ0FBbUM7QUFFbkM7Ozs7O0NBS0MsR0FDRCxTQUFTQSxvQkFDUEMsT0FBb0IsRUFDcEJDLFNBQWlCO1FBQ2pCQyxVQUFBQSxpRUFBb0I7UUFBQztRQUFLO1FBQVU7UUFBTTtRQUFRO1FBQU87UUFBTTtRQUFLO1FBQU07UUFBTTtRQUFNO1FBQWM7S0FBTTtJQUUxRyxNQUFNQyxRQUFRQyxVQUFVQyxRQUFRLENBQUNKLFdBQVc7UUFDMUNLLGNBQWNKO1FBQ2RLLGNBQWM7WUFBQztZQUFRO1lBQU87WUFBTztZQUFTO1NBQVM7SUFDekQ7SUFDQVAsUUFBUVEsU0FBUyxHQUFHTDtBQUN0QjtBQUVBOzs7O0NBSUMsR0FDRCxTQUFTTSxzQkFBc0JULE9BQW9CLEVBQUVVLElBQVk7SUFDL0RWLFFBQVFXLFdBQVcsR0FBRztJQUN0QkQsS0FBS0UsS0FBSyxDQUFDLE1BQU1DLE9BQU8sQ0FBQyxDQUFDQyxNQUFNQyxLQUFLQztRQUNuQ2hCLFFBQVFpQixXQUFXLENBQUNDLFNBQVNDLGNBQWMsQ0FBQ0w7UUFDNUMsSUFBSUMsTUFBTUMsSUFBSUksTUFBTSxHQUFHLEdBQUdwQixRQUFRaUIsV0FBVyxDQUFDQyxTQUFTRyxhQUFhLENBQUM7SUFDdkU7QUFDRjtBQUVBLHNCQUFzQjtBQUN0QixTQUFTQyxtQkFBbUJ0QixPQUFvQjtJQUM5QyxJQUFJLENBQUN1QixPQUFPQyxZQUFZLEVBQUU7SUFDMUIsTUFBTUMsU0FBUyxDQUFDLE1BQU0sK0RBQStEO0lBQ3JGLE1BQU1DLE1BQU1ILE9BQU9DLFlBQVksQ0FBQ0csWUFBWSxHQUFHSixPQUFPQyxZQUFZLENBQUNJLFlBQVk7SUFDL0UsTUFBTUMsU0FBU0MsS0FBS0MsR0FBRyxDQUFDL0IsUUFBUWdDLFNBQVMsRUFBRU4sT0FBT0Q7SUFDbERGLE9BQU9DLFlBQVksQ0FBQ1MsU0FBUyxHQUFHSCxLQUFLSixHQUFHLENBQUNHLFFBQVE7QUFDbkQ7QUFFQSxZQUFZO0FBQ1osU0FBU0ssY0FBY0MsT0FBcUI7SUFDMUMsTUFBTUMsTUFBTWxCLFNBQVNHLGFBQWEsQ0FBQztJQUNuQ2UsSUFBSUMsU0FBUyxHQUFHO0lBQ2hCRCxJQUFJNUIsU0FBUyxHQUFHO0lBQ2hCNEIsSUFBSUUsZ0JBQWdCLENBQUMsU0FBUztRQUM1QkMsVUFBVUMsU0FBUyxDQUFDQyxTQUFTLENBQUNOLFdBQVdPLElBQUksQ0FBQztZQUM1Q04sSUFBSTVCLFNBQVMsR0FBRztZQUNoQm1DLFdBQVcsSUFBT1AsSUFBSTVCLFNBQVMsR0FBRyxtQ0FBb0M7UUFDeEU7SUFDRjtJQUNBLE9BQU80QjtBQUNUO0FBRUEsaURBQWlEO0FBQ2pEYixPQUFPeEIsbUJBQW1CLEdBQUdBO0FBQzdCd0IsT0FBT2QscUJBQXFCLEdBQUdBO0FBQy9CYyxPQUFPRCxrQkFBa0IsR0FBR0E7QUFDNUJDLE9BQU9XLGFBQWEsR0FBR0E7QUFFYiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zY3JpcHRzL2NoYXQvbWVzc2FnZV91dGlscy50cz8zMDVlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIG1lc3NhZ2VfdXRpbHMudHMg4oCTIOWFsemAmuODoeODg+OCu+ODvOOCuOODpuODvOODhuOCo+ODquODhuOCo1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gRE9NUHVyaWZ5IOOBquOBqeWklumDqOODqeOCpOODluODqeODquOBr+WFiOOBq+ODreODvOODieOBleOCjOOBpuOBhOOCi+aDs+WumlxuXG4vKipcbiAqIEhUTUwg44KS44K144OL44K/44Kk44K644GX44Gm5oy/5YWl44GZ44KLXG4gKiBAcGFyYW0gZWxlbWVudCAgIOaMv+WFpeWFiFxuICogQHBhcmFtIGRpcnR5SHRtbCDjgrXjg4vjgr/jgqTjgrrliY0gSFRNTFxuICogQHBhcmFtIGFsbG93ZWQgICDoqLHlj6/jgr/jgrDvvIjnnIHnlaXmmYLjga/jg4fjg5Xjgqnjg6vjg4jvvIlcbiAqL1xuZnVuY3Rpb24gcmVuZGVyU2FuaXRpemVkSFRNTChcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQsXG4gIGRpcnR5SHRtbDogc3RyaW5nLFxuICBhbGxvd2VkOiBzdHJpbmdbXSA9IFtcImFcIiwgXCJzdHJvbmdcIiwgXCJlbVwiLCBcImNvZGVcIiwgXCJwcmVcIiwgXCJiclwiLCBcInBcIiwgXCJ1bFwiLCBcIm9sXCIsIFwibGlcIiwgXCJibG9ja3F1b3RlXCIsIFwiaW1nXCJdXG4pIHtcbiAgY29uc3QgY2xlYW4gPSBET01QdXJpZnkuc2FuaXRpemUoZGlydHlIdG1sLCB7XG4gICAgQUxMT1dFRF9UQUdTOiBhbGxvd2VkLFxuICAgIEFMTE9XRURfQVRUUjogW1wiaHJlZlwiLCBcInNyY1wiLCBcImFsdFwiLCBcInRpdGxlXCIsIFwidGFyZ2V0XCJdXG4gIH0pO1xuICBlbGVtZW50LmlubmVySFRNTCA9IGNsZWFuO1xufVxuXG4vKipcbiAqIOODhuOCreOCueODiOOCkiBcXG7ihpI8YnI+IOOBq+WkieaPm+OBl+OBpOOBpOWuieWFqOOBq+aMv+WFpVxuICogQHBhcmFtIGVsZW1lbnRcbiAqIEBwYXJhbSB0ZXh0XG4gKi9cbmZ1bmN0aW9uIHNldFRleHRXaXRoTGluZUJyZWFrcyhlbGVtZW50OiBIVE1MRWxlbWVudCwgdGV4dDogc3RyaW5nKSB7XG4gIGVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB0ZXh0LnNwbGl0KFwiXFxuXCIpLmZvckVhY2goKGxpbmUsIGlkeCwgYXJyKSA9PiB7XG4gICAgZWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShsaW5lKSk7XG4gICAgaWYgKGlkeCA8IGFyci5sZW5ndGggLSAxKSBlbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk7XG4gIH0pO1xufVxuXG4vLyDmlrDjgZfjgYTjg6Hjg4Pjgrvjg7zjgrjjgpLooajnpLrpoJjln5/jga7lhYjpoK3jgavphY3nva5cbmZ1bmN0aW9uIHNjcm9sbE1lc3NhZ2VUb1RvcChlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICBpZiAoIXdpbmRvdy5jaGF0TWVzc2FnZXMpIHJldHVybjtcbiAgY29uc3Qgb2Zmc2V0ID0gLTEwNTA7IC8vIHB4LCBob3cgZmFyIGZyb20gdGhlIGJvdHRvbSB0aGUgbmV3ZXN0IG1lc3NhZ2Ugc2hvdWxkIGFwcGVhclxuICBjb25zdCBtYXggPSB3aW5kb3cuY2hhdE1lc3NhZ2VzLnNjcm9sbEhlaWdodCAtIHdpbmRvdy5jaGF0TWVzc2FnZXMuY2xpZW50SGVpZ2h0O1xuICBjb25zdCB0YXJnZXQgPSBNYXRoLm1pbihlbGVtZW50Lm9mZnNldFRvcCwgbWF4KSAtIG9mZnNldDtcbiAgd2luZG93LmNoYXRNZXNzYWdlcy5zY3JvbGxUb3AgPSBNYXRoLm1heCh0YXJnZXQsIDApO1xufVxuXG4vLyDmsY7nlKjjgrPjg5Tjg7zjgqLjgqTjgrPjg7NcbmZ1bmN0aW9uIGNyZWF0ZUNvcHlCdG4oZ2V0VGV4dDogKCkgPT4gc3RyaW5nKSB7XG4gIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIGJ0bi5jbGFzc05hbWUgPSBcImNvcHktYnRuXCI7XG4gIGJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJiaSBiaS1jbGlwYm9hcmRcIj48L2k+JztcbiAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoZ2V0VGV4dCgpKS50aGVuKCgpID0+IHtcbiAgICAgIGJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJiaSBiaS1jaGVjay1sZ1wiPjwvaT4nO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiAoYnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImJpIGJpLWNsaXBib2FyZFwiPjwvaT4nKSwgMjAwMCk7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gYnRuO1xufVxuXG4vLyAtLS0tIHdpbmRvdyDjgbjlhazplosgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG53aW5kb3cucmVuZGVyU2FuaXRpemVkSFRNTCA9IHJlbmRlclNhbml0aXplZEhUTUw7XG53aW5kb3cuc2V0VGV4dFdpdGhMaW5lQnJlYWtzID0gc2V0VGV4dFdpdGhMaW5lQnJlYWtzO1xud2luZG93LnNjcm9sbE1lc3NhZ2VUb1RvcCA9IHNjcm9sbE1lc3NhZ2VUb1RvcDtcbndpbmRvdy5jcmVhdGVDb3B5QnRuID0gY3JlYXRlQ29weUJ0bjtcblxuZXhwb3J0IHt9O1xuIl0sIm5hbWVzIjpbInJlbmRlclNhbml0aXplZEhUTUwiLCJlbGVtZW50IiwiZGlydHlIdG1sIiwiYWxsb3dlZCIsImNsZWFuIiwiRE9NUHVyaWZ5Iiwic2FuaXRpemUiLCJBTExPV0VEX1RBR1MiLCJBTExPV0VEX0FUVFIiLCJpbm5lckhUTUwiLCJzZXRUZXh0V2l0aExpbmVCcmVha3MiLCJ0ZXh0IiwidGV4dENvbnRlbnQiLCJzcGxpdCIsImZvckVhY2giLCJsaW5lIiwiaWR4IiwiYXJyIiwiYXBwZW5kQ2hpbGQiLCJkb2N1bWVudCIsImNyZWF0ZVRleHROb2RlIiwibGVuZ3RoIiwiY3JlYXRlRWxlbWVudCIsInNjcm9sbE1lc3NhZ2VUb1RvcCIsIndpbmRvdyIsImNoYXRNZXNzYWdlcyIsIm9mZnNldCIsIm1heCIsInNjcm9sbEhlaWdodCIsImNsaWVudEhlaWdodCIsInRhcmdldCIsIk1hdGgiLCJtaW4iLCJvZmZzZXRUb3AiLCJzY3JvbGxUb3AiLCJjcmVhdGVDb3B5QnRuIiwiZ2V0VGV4dCIsImJ0biIsImNsYXNzTmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJ0aGVuIiwic2V0VGltZW91dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scripts/chat/message_utils.ts\n"));

/***/ }),

/***/ "./scripts/components/chat/popup_menu.ts":
/*!***********************************************!*\
  !*** ./scripts/components/chat/popup_menu.ts ***!
  \***********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n// components/chat/popup_menu.ts (chat-specific)\nconst chatTemplate = document.createElement(\"template\");\nchatTemplate.innerHTML = '\\n  <style>\\n    :host {\\n      display: contents;\\n    }\\n\\n    * {\\n      box-sizing: border-box;\\n      margin: 0;\\n      padding: 0;\\n    }\\n\\n    input[type=\"checkbox\"] {\\n      display: none;\\n    }\\n\\n    .btn {\\n      border: none;\\n      border-radius: 50%;\\n      width: 50px;\\n      height: 50px;\\n      cursor: pointer;\\n      display: flex;\\n      justify-content: center;\\n      align-items: center;\\n      transition: transform 0.3s ease, box-shadow 0.3s ease;\\n      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);\\n      position: relative;\\n    }\\n    .btn:hover {\\n      transform: scale(1.1);\\n      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);\\n    }\\n    .btn svg {\\n      width: 24px;\\n      height: 24px;\\n      fill: #fff;\\n      transition: transform 0.3s ease;\\n    }\\n\\n    .actions-menu {\\n      position: fixed;\\n      bottom: 40px;\\n      right: 40px;\\n      width: 60px;\\n      height: 60px;\\n      animation: popIn 0.6s ease;\\n      z-index: 9999;\\n    }\\n\\n    @keyframes popIn {\\n      0% {\\n        transform: scale(0.5) rotate(0deg);\\n        opacity: 0;\\n      }\\n      80% {\\n        transform: scale(1.05) rotate(360deg);\\n        opacity: 1;\\n      }\\n      100% {\\n        transform: scale(1) rotate(360deg);\\n        opacity: 1;\\n      }\\n    }\\n\\n    .btn--menu {\\n      width: 60px;\\n      height: 60px;\\n      background: linear-gradient(135deg, #56ab2f, #a8e063);\\n      z-index: 1;\\n    }\\n    .btn--menu:after,\\n    .btn--menu:before,\\n    .btn--menu span {\\n      content: \"\";\\n      position: absolute;\\n      width: 25px;\\n      height: 3px;\\n      background: #fff;\\n      transition: transform 0.2s ease;\\n    }\\n    .btn--menu span {\\n      top: 50%;\\n      left: 50%;\\n      transform: translate(-50%, -50%);\\n    }\\n    .btn--menu:after {\\n      top: 50%;\\n      left: 50%;\\n      transform: translate(-50%, calc(-50% - 8px));\\n    }\\n    .btn--menu:before {\\n      top: 50%;\\n      left: 50%;\\n      transform: translate(-50%, calc(-50% + 8px));\\n    }\\n\\n    .btn--share {\\n      background: linear-gradient(135deg, #3498db, #2980b9);\\n    }\\n    .btn--star {\\n      background: linear-gradient(135deg, #2ecc71, #27ae60);\\n    }\\n    .btn--comment {\\n      background: linear-gradient(135deg, #f1c40f, #f39c12);\\n    }\\n\\n    .actions-menu .btn {\\n      position: absolute;\\n      top: 8px;\\n      left: 8px;\\n      opacity: 0;\\n      transform: scale(0) rotate(0deg);\\n    }\\n    .actions-menu .btn--menu {\\n      position: absolute;\\n      top: 0;\\n      left: 0;\\n      width: 60px;\\n      height: 60px;\\n      opacity: 1;\\n      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);\\n      transform: none;\\n    }\\n\\n    #chatActionMenuButton:checked + .actions-menu > .btn {\\n      opacity: 1;\\n      transform: scale(1) rotate(360deg);\\n      transition: all 0.6s cubic-bezier(0.645, 0.045, 0.355, 1);\\n    }\\n\\n    #chatActionMenuButton:checked + .actions-menu > .btn--share {\\n      top: -80px;\\n      left: 0px;\\n    }\\n    #chatActionMenuButton:checked + .actions-menu > .btn--star {\\n      top: -60px;\\n      left: -60px;\\n    }\\n    #chatActionMenuButton:checked + .actions-menu > .btn--comment {\\n      top: 0px;\\n      left: -80px;\\n    }\\n\\n    #chatActionMenuButton:checked + .actions-menu .btn--menu:after {\\n      transform: translate(-50%, -50%) rotate(45deg);\\n    }\\n    #chatActionMenuButton:checked + .actions-menu .btn--menu:before {\\n      transform: translate(-50%, -50%) rotate(-45deg);\\n    }\\n    #chatActionMenuButton:checked + .actions-menu .btn--menu span {\\n      transform: translate(-50%, -50%) scale(0);\\n    }\\n\\n    .btn--share:hover svg { transform: rotate(-20deg) scale(1.2); }\\n    .btn--star:hover svg  { transform: rotate(20deg)  scale(1.2); }\\n    .btn--comment:hover svg { transform: rotate(-20deg) scale(1.2); }\\n\\n    @media (max-width: 768px) {\\n      .actions-menu {\\n        bottom: 100px;\\n        right: 20px;\\n        width: 56px;\\n        height: 56px;\\n      }\\n      .actions-menu .btn--menu {\\n        width: 56px !important;\\n        height: 56px !important;\\n      }\\n      .actions-menu .btn:not(.btn--menu) {\\n        width: 45px;\\n        height: 45px;\\n      }\\n      .btn svg {\\n        width: 20px;\\n        height: 20px;\\n      }\\n    }\\n\\n    @media (max-width: 480px) {\\n      .actions-menu {\\n        bottom: 90px;\\n        right: 15px;\\n        width: 50px;\\n        height: 50px;\\n      }\\n      .actions-menu .btn--menu {\\n        width: 50px !important;\\n        height: 50px !important;\\n      }\\n      .actions-menu .btn:not(.btn--menu) {\\n        width: 40px;\\n        height: 40px;\\n      }\\n      .btn svg {\\n        width: 18px;\\n        height: 18px;\\n      }\\n    }\\n  </style>\\n\\n  <input type=\"checkbox\" id=\"chatActionMenuButton\" />\\n  <div class=\"actions-menu\">\\n    <button class=\"btn btn--share\" onclick=\"location.href=\\'/prompt_share\\'\" title=\"シェア\">\\n      <svg viewBox=\"0 0 24 24\">\\n        <path d=\"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7a3.048 3.048 0 0 0 0-1.39l7.13-4.17A3 3 0 1 0 14 5a3 3 0 0 0 .05.52l-7.14 4.18a3 3 0 1 0 0 4.6l7.14 4.18c-.03.17-.05.34-.05.52a3 3 0 1 0 3-2.92Z\" />\\n      </svg>\\n    </button>\\n    <button class=\"btn btn--star\" onclick=\"location.href=\\'/\\'\" title=\"スター\">\\n      <svg viewBox=\"0 0 24 24\">\\n        <path d=\"M12,17.27L18.18,21L16.54,13.97 L22,9.24L14.81,8.62L12,2 L9.19,8.62L2,9.24L7.45,13.97 L5.82,21L12,17.27Z\" />\\n      </svg>\\n    </button>\\n    <button class=\"btn btn--comment\" onclick=\"location.href=\\'/memo\\'\" title=\"メモ\">\\n      <svg viewBox=\"0 0 24 24\">\\n        <path d=\"M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9l7-7V5a2 2 0 0 0-2-2Zm-5 14v-5h5l-5 5Z\" />\\n      </svg>\\n    </button>\\n    <label for=\"chatActionMenuButton\" class=\"btn btn--menu\"><span></span></label>\\n  </div>\\n';\nclass ChatActionMenu extends HTMLElement {\n    constructor(){\n        super();\n        const shadow = this.attachShadow({\n            mode: \"open\"\n        });\n        shadow.appendChild(chatTemplate.content.cloneNode(true));\n        this.toggle = shadow.querySelector(\"#chatActionMenuButton\");\n        document.addEventListener(\"click\", (event)=>{\n            var _this_toggle;\n            if (((_this_toggle = this.toggle) === null || _this_toggle === void 0 ? void 0 : _this_toggle.checked) && !event.composedPath().includes(this)) {\n                this.toggle.checked = false;\n            }\n        });\n    }\n}\nif (!customElements.get(\"chat-action-menu\")) {\n    customElements.define(\"chat-action-menu\", ChatActionMenu);\n}\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHRzL2NvbXBvbmVudHMvY2hhdC9wb3B1cF9tZW51LnRzIiwibWFwcGluZ3MiOiI7QUFBQSxnREFBZ0Q7QUFDaEQsTUFBTUEsZUFBZUMsU0FBU0MsYUFBYSxDQUFDO0FBQzVDRixhQUFhRyxTQUFTLEdBQUk7QUE4TjFCLE1BQU1DLHVCQUF1QkM7SUFHM0JDLGFBQWM7UUFDWixLQUFLO1FBQ0wsTUFBTUMsU0FBUyxJQUFJLENBQUNDLFlBQVksQ0FBQztZQUFFQyxNQUFNO1FBQU87UUFDaERGLE9BQU9HLFdBQVcsQ0FBQ1YsYUFBYVcsT0FBTyxDQUFDQyxTQUFTLENBQUM7UUFFbEQsSUFBSSxDQUFDQyxNQUFNLEdBQUdOLE9BQU9PLGFBQWEsQ0FBQztRQUNuQ2IsU0FBU2MsZ0JBQWdCLENBQUMsU0FBUyxDQUFDQztnQkFDOUI7WUFBSixJQUFJLHFCQUFJLENBQUNILE1BQU0sY0FBWCxnREFBYUksT0FBTyxLQUFJLENBQUNELE1BQU1FLFlBQVksR0FBR0MsUUFBUSxDQUFDLElBQUksR0FBRztnQkFDaEUsSUFBSSxDQUFDTixNQUFNLENBQUNJLE9BQU8sR0FBRztZQUN4QjtRQUNGO0lBQ0Y7QUFDRjtBQUVBLElBQUksQ0FBQ0csZUFBZUMsR0FBRyxDQUFDLHFCQUFxQjtJQUMzQ0QsZUFBZUUsTUFBTSxDQUFDLG9CQUFvQmxCO0FBQzVDO0FBRVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc2NyaXB0cy9jb21wb25lbnRzL2NoYXQvcG9wdXBfbWVudS50cz81OTk0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbXBvbmVudHMvY2hhdC9wb3B1cF9tZW51LnRzIChjaGF0LXNwZWNpZmljKVxuY29uc3QgY2hhdFRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuY2hhdFRlbXBsYXRlLmlubmVySFRNTCA9IGBcbiAgPHN0eWxlPlxuICAgIDpob3N0IHtcbiAgICAgIGRpc3BsYXk6IGNvbnRlbnRzO1xuICAgIH1cblxuICAgICoge1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgIG1hcmdpbjogMDtcbiAgICAgIHBhZGRpbmc6IDA7XG4gICAgfVxuXG4gICAgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuXG4gICAgLmJ0biB7XG4gICAgICBib3JkZXI6IG5vbmU7XG4gICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICB3aWR0aDogNTBweDtcbiAgICAgIGhlaWdodDogNTBweDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcyBlYXNlLCBib3gtc2hhZG93IDAuM3MgZWFzZTtcbiAgICAgIGJveC1zaGFkb3c6IDAgNXB4IDIwcHggcmdiYSgwLCAwLCAwLCAwLjE1KTtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gICAgLmJ0bjpob3ZlciB7XG4gICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7XG4gICAgICBib3gtc2hhZG93OiAwIDhweCAzMHB4IHJnYmEoMCwgMCwgMCwgMC4zKTtcbiAgICB9XG4gICAgLmJ0biBzdmcge1xuICAgICAgd2lkdGg6IDI0cHg7XG4gICAgICBoZWlnaHQ6IDI0cHg7XG4gICAgICBmaWxsOiAjZmZmO1xuICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgZWFzZTtcbiAgICB9XG5cbiAgICAuYWN0aW9ucy1tZW51IHtcbiAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgIGJvdHRvbTogNDBweDtcbiAgICAgIHJpZ2h0OiA0MHB4O1xuICAgICAgd2lkdGg6IDYwcHg7XG4gICAgICBoZWlnaHQ6IDYwcHg7XG4gICAgICBhbmltYXRpb246IHBvcEluIDAuNnMgZWFzZTtcbiAgICAgIHotaW5kZXg6IDk5OTk7XG4gICAgfVxuXG4gICAgQGtleWZyYW1lcyBwb3BJbiB7XG4gICAgICAwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC41KSByb3RhdGUoMGRlZyk7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICB9XG4gICAgICA4MCUge1xuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpIHJvdGF0ZSgzNjBkZWcpO1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgfVxuICAgICAgMTAwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSkgcm90YXRlKDM2MGRlZyk7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLmJ0bi0tbWVudSB7XG4gICAgICB3aWR0aDogNjBweDtcbiAgICAgIGhlaWdodDogNjBweDtcbiAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM1NmFiMmYsICNhOGUwNjMpO1xuICAgICAgei1pbmRleDogMTtcbiAgICB9XG4gICAgLmJ0bi0tbWVudTphZnRlcixcbiAgICAuYnRuLS1tZW51OmJlZm9yZSxcbiAgICAuYnRuLS1tZW51IHNwYW4ge1xuICAgICAgY29udGVudDogXCJcIjtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHdpZHRoOiAyNXB4O1xuICAgICAgaGVpZ2h0OiAzcHg7XG4gICAgICBiYWNrZ3JvdW5kOiAjZmZmO1xuICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnMgZWFzZTtcbiAgICB9XG4gICAgLmJ0bi0tbWVudSBzcGFuIHtcbiAgICAgIHRvcDogNTAlO1xuICAgICAgbGVmdDogNTAlO1xuICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgfVxuICAgIC5idG4tLW1lbnU6YWZ0ZXIge1xuICAgICAgdG9wOiA1MCU7XG4gICAgICBsZWZ0OiA1MCU7XG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCBjYWxjKC01MCUgLSA4cHgpKTtcbiAgICB9XG4gICAgLmJ0bi0tbWVudTpiZWZvcmUge1xuICAgICAgdG9wOiA1MCU7XG4gICAgICBsZWZ0OiA1MCU7XG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCBjYWxjKC01MCUgKyA4cHgpKTtcbiAgICB9XG5cbiAgICAuYnRuLS1zaGFyZSB7XG4gICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMzQ5OGRiLCAjMjk4MGI5KTtcbiAgICB9XG4gICAgLmJ0bi0tc3RhciB7XG4gICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMmVjYzcxLCAjMjdhZTYwKTtcbiAgICB9XG4gICAgLmJ0bi0tY29tbWVudCB7XG4gICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZjFjNDBmLCAjZjM5YzEyKTtcbiAgICB9XG5cbiAgICAuYWN0aW9ucy1tZW51IC5idG4ge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiA4cHg7XG4gICAgICBsZWZ0OiA4cHg7XG4gICAgICBvcGFjaXR5OiAwO1xuICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwKSByb3RhdGUoMGRlZyk7XG4gICAgfVxuICAgIC5hY3Rpb25zLW1lbnUgLmJ0bi0tbWVudSB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDA7XG4gICAgICBsZWZ0OiAwO1xuICAgICAgd2lkdGg6IDYwcHg7XG4gICAgICBoZWlnaHQ6IDYwcHg7XG4gICAgICBvcGFjaXR5OiAxO1xuICAgICAgYm94LXNoYWRvdzogMCA1cHggMjBweCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICB0cmFuc2Zvcm06IG5vbmU7XG4gICAgfVxuXG4gICAgI2NoYXRBY3Rpb25NZW51QnV0dG9uOmNoZWNrZWQgKyAuYWN0aW9ucy1tZW51ID4gLmJ0biB7XG4gICAgICBvcGFjaXR5OiAxO1xuICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKSByb3RhdGUoMzYwZGVnKTtcbiAgICAgIHRyYW5zaXRpb246IGFsbCAwLjZzIGN1YmljLWJlemllcigwLjY0NSwgMC4wNDUsIDAuMzU1LCAxKTtcbiAgICB9XG5cbiAgICAjY2hhdEFjdGlvbk1lbnVCdXR0b246Y2hlY2tlZCArIC5hY3Rpb25zLW1lbnUgPiAuYnRuLS1zaGFyZSB7XG4gICAgICB0b3A6IC04MHB4O1xuICAgICAgbGVmdDogMHB4O1xuICAgIH1cbiAgICAjY2hhdEFjdGlvbk1lbnVCdXR0b246Y2hlY2tlZCArIC5hY3Rpb25zLW1lbnUgPiAuYnRuLS1zdGFyIHtcbiAgICAgIHRvcDogLTYwcHg7XG4gICAgICBsZWZ0OiAtNjBweDtcbiAgICB9XG4gICAgI2NoYXRBY3Rpb25NZW51QnV0dG9uOmNoZWNrZWQgKyAuYWN0aW9ucy1tZW51ID4gLmJ0bi0tY29tbWVudCB7XG4gICAgICB0b3A6IDBweDtcbiAgICAgIGxlZnQ6IC04MHB4O1xuICAgIH1cblxuICAgICNjaGF0QWN0aW9uTWVudUJ1dHRvbjpjaGVja2VkICsgLmFjdGlvbnMtbWVudSAuYnRuLS1tZW51OmFmdGVyIHtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpIHJvdGF0ZSg0NWRlZyk7XG4gICAgfVxuICAgICNjaGF0QWN0aW9uTWVudUJ1dHRvbjpjaGVja2VkICsgLmFjdGlvbnMtbWVudSAuYnRuLS1tZW51OmJlZm9yZSB7XG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSByb3RhdGUoLTQ1ZGVnKTtcbiAgICB9XG4gICAgI2NoYXRBY3Rpb25NZW51QnV0dG9uOmNoZWNrZWQgKyAuYWN0aW9ucy1tZW51IC5idG4tLW1lbnUgc3BhbiB7XG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSBzY2FsZSgwKTtcbiAgICB9XG5cbiAgICAuYnRuLS1zaGFyZTpob3ZlciBzdmcgeyB0cmFuc2Zvcm06IHJvdGF0ZSgtMjBkZWcpIHNjYWxlKDEuMik7IH1cbiAgICAuYnRuLS1zdGFyOmhvdmVyIHN2ZyAgeyB0cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZykgIHNjYWxlKDEuMik7IH1cbiAgICAuYnRuLS1jb21tZW50OmhvdmVyIHN2ZyB7IHRyYW5zZm9ybTogcm90YXRlKC0yMGRlZykgc2NhbGUoMS4yKTsgfVxuXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gICAgICAuYWN0aW9ucy1tZW51IHtcbiAgICAgICAgYm90dG9tOiAxMDBweDtcbiAgICAgICAgcmlnaHQ6IDIwcHg7XG4gICAgICAgIHdpZHRoOiA1NnB4O1xuICAgICAgICBoZWlnaHQ6IDU2cHg7XG4gICAgICB9XG4gICAgICAuYWN0aW9ucy1tZW51IC5idG4tLW1lbnUge1xuICAgICAgICB3aWR0aDogNTZweCAhaW1wb3J0YW50O1xuICAgICAgICBoZWlnaHQ6IDU2cHggIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICAgIC5hY3Rpb25zLW1lbnUgLmJ0bjpub3QoLmJ0bi0tbWVudSkge1xuICAgICAgICB3aWR0aDogNDVweDtcbiAgICAgICAgaGVpZ2h0OiA0NXB4O1xuICAgICAgfVxuICAgICAgLmJ0biBzdmcge1xuICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgfVxuICAgIH1cblxuICAgIEBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkge1xuICAgICAgLmFjdGlvbnMtbWVudSB7XG4gICAgICAgIGJvdHRvbTogOTBweDtcbiAgICAgICAgcmlnaHQ6IDE1cHg7XG4gICAgICAgIHdpZHRoOiA1MHB4O1xuICAgICAgICBoZWlnaHQ6IDUwcHg7XG4gICAgICB9XG4gICAgICAuYWN0aW9ucy1tZW51IC5idG4tLW1lbnUge1xuICAgICAgICB3aWR0aDogNTBweCAhaW1wb3J0YW50O1xuICAgICAgICBoZWlnaHQ6IDUwcHggIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICAgIC5hY3Rpb25zLW1lbnUgLmJ0bjpub3QoLmJ0bi0tbWVudSkge1xuICAgICAgICB3aWR0aDogNDBweDtcbiAgICAgICAgaGVpZ2h0OiA0MHB4O1xuICAgICAgfVxuICAgICAgLmJ0biBzdmcge1xuICAgICAgICB3aWR0aDogMThweDtcbiAgICAgICAgaGVpZ2h0OiAxOHB4O1xuICAgICAgfVxuICAgIH1cbiAgPC9zdHlsZT5cblxuICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJjaGF0QWN0aW9uTWVudUJ1dHRvblwiIC8+XG4gIDxkaXYgY2xhc3M9XCJhY3Rpb25zLW1lbnVcIj5cbiAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi0tc2hhcmVcIiBvbmNsaWNrPVwibG9jYXRpb24uaHJlZj0nL3Byb21wdF9zaGFyZSdcIiB0aXRsZT1cIuOCt+OCp+OColwiPlxuICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgIDxwYXRoIGQ9XCJNMTggMTYuMDhjLS43NiAwLTEuNDQuMy0xLjk2Ljc3TDguOTEgMTIuN2EzLjA0OCAzLjA0OCAwIDAgMCAwLTEuMzlsNy4xMy00LjE3QTMgMyAwIDEgMCAxNCA1YTMgMyAwIDAgMCAuMDUuNTJsLTcuMTQgNC4xOGEzIDMgMCAxIDAgMCA0LjZsNy4xNCA0LjE4Yy0uMDMuMTctLjA1LjM0LS4wNS41MmEzIDMgMCAxIDAgMy0yLjkyWlwiIC8+XG4gICAgICA8L3N2Zz5cbiAgICA8L2J1dHRvbj5cbiAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi0tc3RhclwiIG9uY2xpY2s9XCJsb2NhdGlvbi5ocmVmPScvJ1wiIHRpdGxlPVwi44K544K/44O8XCI+XG4gICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgPHBhdGggZD1cIk0xMiwxNy4yN0wxOC4xOCwyMUwxNi41NCwxMy45NyBMMjIsOS4yNEwxNC44MSw4LjYyTDEyLDIgTDkuMTksOC42MkwyLDkuMjRMNy40NSwxMy45NyBMNS44MiwyMUwxMiwxNy4yN1pcIiAvPlxuICAgICAgPC9zdmc+XG4gICAgPC9idXR0b24+XG4gICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tLWNvbW1lbnRcIiBvbmNsaWNrPVwibG9jYXRpb24uaHJlZj0nL21lbW8nXCIgdGl0bGU9XCLjg6Hjg6JcIj5cbiAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICA8cGF0aCBkPVwiTTE5IDNINWEyIDIgMCAwIDAtMiAydjE0YTIgMiAwIDAgMCAyIDJoOWw3LTdWNWEyIDIgMCAwIDAtMi0yWm0tNSAxNHYtNWg1bC01IDVaXCIgLz5cbiAgICAgIDwvc3ZnPlxuICAgIDwvYnV0dG9uPlxuICAgIDxsYWJlbCBmb3I9XCJjaGF0QWN0aW9uTWVudUJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi0tbWVudVwiPjxzcGFuPjwvc3Bhbj48L2xhYmVsPlxuICA8L2Rpdj5cbmA7XG5cbmNsYXNzIENoYXRBY3Rpb25NZW51IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBwcml2YXRlIHRvZ2dsZTogSFRNTElucHV0RWxlbWVudCB8IG51bGw7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICBjb25zdCBzaGFkb3cgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xuICAgIHNoYWRvdy5hcHBlbmRDaGlsZChjaGF0VGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xuXG4gICAgdGhpcy50b2dnbGUgPSBzaGFkb3cucXVlcnlTZWxlY3RvcihcIiNjaGF0QWN0aW9uTWVudUJ1dHRvblwiKSBhcyBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbDtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAodGhpcy50b2dnbGU/LmNoZWNrZWQgJiYgIWV2ZW50LmNvbXBvc2VkUGF0aCgpLmluY2x1ZGVzKHRoaXMpKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5pZiAoIWN1c3RvbUVsZW1lbnRzLmdldChcImNoYXQtYWN0aW9uLW1lbnVcIikpIHtcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwiY2hhdC1hY3Rpb24tbWVudVwiLCBDaGF0QWN0aW9uTWVudSk7XG59XG5cbmV4cG9ydCB7fTtcbiJdLCJuYW1lcyI6WyJjaGF0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJDaGF0QWN0aW9uTWVudSIsIkhUTUxFbGVtZW50IiwiY29uc3RydWN0b3IiLCJzaGFkb3ciLCJhdHRhY2hTaGFkb3ciLCJtb2RlIiwiYXBwZW5kQ2hpbGQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwidG9nZ2xlIiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImNoZWNrZWQiLCJjb21wb3NlZFBhdGgiLCJpbmNsdWRlcyIsImN1c3RvbUVsZW1lbnRzIiwiZ2V0IiwiZGVmaW5lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./scripts/components/chat/popup_menu.ts\n"));

/***/ }),

/***/ "./scripts/components/popup_menu.ts":
/*!******************************************!*\
  !*** ./scripts/components/popup_menu.ts ***!
  \******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n// components/popup_menu.ts\nconst template = document.createElement(\"template\");\ntemplate.innerHTML = '\\n  <style>\\n    /* ============\\n       Reset / Base\\n       ============ */\\n    * {\\n      box-sizing: border-box;\\n      margin: 0;\\n      padding: 0;\\n    }\\n\\n    /* ============\\n       Hidden Checkbox\\n       ============ */\\n    input[type=\"checkbox\"] {\\n      display: none;\\n    }\\n\\n    /* ============\\n       Common Button Styles\\n       ============ */\\n    .btn {\\n      border: none;\\n      border-radius: 50%;\\n      width: 50px;\\n      height: 50px;\\n      cursor: pointer;\\n      display: flex;\\n      justify-content: center;\\n      align-items: center;\\n      transition: transform 0.3s ease, box-shadow 0.3s ease;\\n      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);\\n      position: relative;\\n    }\\n    .btn:hover {\\n      transform: scale(1.1);\\n      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);\\n    }\\n    .btn svg {\\n      width: 24px;\\n      height: 24px;\\n      fill: #fff;\\n      transition: transform 0.3s ease;\\n    }\\n\\n    /* ============\\n       Action Menu Wrapper\\n       ============ */\\n    .actions-menu {\\n      position: fixed;\\n      bottom: 40px;\\n      right: 40px;\\n      width: 60px;\\n      height: 60px;\\n      animation: popIn 0.6s ease;\\n      z-index: 9999;\\n    }\\n\\n    :host([data-context=\"chat\"]) .actions-menu {\\n      display: none;\\n    }\\n\\n    :host([data-context=\"non-chat\"]) .actions-menu {\\n      bottom: 40px; /* Align with floating prompt button on desktop */\\n    }\\n\\n    @keyframes popIn {\\n      0% {\\n        transform: scale(0.5) rotate(0deg);\\n        opacity: 0;\\n      }\\n      80% {\\n        transform: scale(1.05) rotate(360deg);\\n        opacity: 1;\\n      }\\n      100% {\\n        transform: scale(1) rotate(360deg);\\n        opacity: 1;\\n      }\\n    }\\n\\n    /* ============\\n       Menu Button (Large)\\n       ============ */\\n    .btn--menu {\\n      width: 60px;\\n      height: 60px;\\n      background: linear-gradient(135deg, #56ab2f, #a8e063);\\n      z-index: 1;\\n    }\\n    .btn--menu:after,\\n    .btn--menu:before,\\n    .btn--menu span {\\n      content: \"\";\\n      position: absolute;\\n      width: 25px;\\n      height: 3px;\\n      background: #fff;\\n      transition: transform 0.2s ease;\\n    }\\n    .btn--menu span {\\n      top: 50%;\\n      left: 50%;\\n      transform: translate(-50%, -50%);\\n    }\\n    .btn--menu:after {\\n      top: 50%;\\n      left: 50%;\\n      transform: translate(-50%, calc(-50% - 8px));\\n    }\\n    .btn--menu:before {\\n      top: 50%;\\n      left: 50%;\\n      transform: translate(-50%, calc(-50% + 8px));\\n    }\\n\\n    /* ============\\n       Action Buttons\\n       ============ */\\n    .btn--share {\\n      background: linear-gradient(135deg, #3498db, #2980b9);\\n    }\\n    .btn--star {\\n      background: linear-gradient(135deg, #2ecc71, #27ae60);\\n    }\\n    .btn--comment {\\n      background: linear-gradient(135deg, #f1c40f, #f39c12);\\n    }\\n\\n    /* ============\\n       ボタンの配置\\n       ============ */\\n    .actions-menu .btn {\\n      position: absolute;\\n      top: 8px;\\n      left: 8px;\\n      opacity: 0;\\n      transform: scale(0) rotate(0deg);\\n    }\\n    .actions-menu .btn--menu {\\n      position: absolute;\\n      top: 0;\\n      left: 0;\\n      width: 60px;\\n      height: 60px;\\n      opacity: 1;\\n      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);\\n      transform: none;\\n    }\\n\\n    /* ============\\n       チェックが入ったら各アイコンが展開\\n       ============ */\\n    #actionMenuButton:checked + .actions-menu > .btn {\\n      opacity: 1;\\n      transform: scale(1) rotate(360deg);\\n      transition: all 0.6s cubic-bezier(0.645, 0.045, 0.355, 1);\\n    }\\n\\n    /* 展開位置 */\\n    #actionMenuButton:checked + .actions-menu > .btn--share {\\n      top: -80px;\\n      left: 0px;\\n    }\\n    #actionMenuButton:checked + .actions-menu > .btn--star {\\n      top: -60px;\\n      left: -60px;\\n    }\\n    #actionMenuButton:checked + .actions-menu > .btn--comment {\\n      top: 0px;\\n      left: -80px;\\n    }\\n\\n    /* ============\\n       ハンバーガー変形\\n       ============ */\\n    #actionMenuButton:checked + .actions-menu .btn--menu:after {\\n      transform: translate(-50%, -50%) rotate(45deg);\\n    }\\n    #actionMenuButton:checked + .actions-menu .btn--menu:before {\\n      transform: translate(-50%, -50%) rotate(-45deg);\\n    }\\n    #actionMenuButton:checked + .actions-menu .btn--menu span {\\n      transform: translate(-50%, -50%) scale(0);\\n    }\\n\\n    /* ============\\n       ホバーアニメーション\\n       ============ */\\n    .btn--share:hover svg { transform: rotate(-20deg) scale(1.2); }\\n    .btn--star:hover svg  { transform: rotate(20deg)  scale(1.2); }\\n    .btn--comment:hover svg { transform: rotate(-20deg) scale(1.2); }\\n  \\n  \\n  /* スマホ表示時の調整（画面幅768px以下） - プロンプト投稿ボタンと同じサイズに */\\n    @media (max-width: 768px) {\\n      /* メニュー全体の位置とサイズ */\\n      .actions-menu {\\n        right: 20px;    /* プロンプト投稿ボタンの位置に合わせて調整 */\\n        width: 56px;    /* プロンプト投稿ボタンと同じサイズに */\\n        height: 56px;   /* プロンプト投稿ボタンと同じサイズに */\\n      }\\n\\n      :host([data-context=\"chat\"]) .actions-menu {\\n        bottom: 100px;  /* チャット入力フォームから十分離して配置 */\\n      }\\n\\n      :host([data-context=\"non-chat\"]) .actions-menu {\\n        bottom: 20px;   /* プロンプト投稿ボタンと同じ高さに配置 */\\n      }\\n      /* ハンバーガーボタンをプロンプト投稿ボタンと完全に同じサイズに */\\n      .actions-menu .btn--menu {\\n        width: 56px !important;\\n        height: 56px !important;\\n      }\\n      /* 他のボタンのサイズ */\\n      .actions-menu .btn:not(.btn--menu) {\\n        width: 45px;\\n        height: 45px;\\n      }\\n      /* アイコンサイズ調整 */\\n      .btn svg {\\n        width: 20px;\\n        height: 20px;\\n      }\\n      \\n    }\\n\\n    /* 非常に小さな画面での調整（画面幅480px以下） - プロンプト投稿ボタンと完全に同じサイズに */\\n    @media (max-width: 480px) {\\n      /* メニュー全体のサイズをプロンプト投稿ボタンに完全に合わせて調整 */\\n      .actions-menu {\\n        bottom: 90px;   /* 入力フォームから十分離して配置 */\\n        right: 15px;    /* プロンプト投稿ボタンの位置に合わせて調整 */\\n        width: 50px;    /* プロンプト投稿ボタンと同じサイズに */\\n        height: 50px;   /* プロンプト投稿ボタンと同じサイズに */\\n      }\\n      /* ハンバーガーボタンをプロンプト投稿ボタンと完全に同じサイズに */\\n      .actions-menu .btn--menu {\\n        width: 50px !important;\\n        height: 50px !important;\\n      }\\n      /* 他のボタンのサイズをより小さく */\\n      .actions-menu .btn:not(.btn--menu) {\\n        width: 40px;\\n        height: 40px;\\n      }\\n      /* アイコンもさらに縮小 */\\n      .btn svg {\\n        width: 18px;\\n        height: 18px;\\n      }\\n\\n      :host([data-context=\"chat\"]) .actions-menu {\\n        bottom: 90px;   /* チャット入力フォームから十分離して配置 */\\n      }\\n\\n      :host([data-context=\"non-chat\"]) .actions-menu {\\n        bottom: 15px;   /* プロンプト投稿ボタンと同じ高さに配置 */\\n      }\\n\\n    }\\n\\n    </style>\\n\\n  <!-- チェックボックス（メニュー開閉用） -->\\n  <input type=\"checkbox\" id=\"actionMenuButton\" />\\n\\n  <!-- アクションメニュー本体 -->\\n  <div class=\"actions-menu\">\\n    <button class=\"btn btn--share\" onclick=\"location.href=\\'/prompt_share\\'\" title=\"シェア\">\\n      <svg viewBox=\"0 0 24 24\">\\n        <path d=\"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7a3.048 3.048 0 0 0 0-1.39l7.13-4.17A3 3 0 1 0 14 5a3 3 0 0 0 .05.52l-7.14 4.18a3 3 0 1 0 0 4.6l7.14 4.18c-.03.17-.05.34-.05.52a3 3 0 1 0 3-2.92Z\" />\\n      </svg>\\n    </button>\\n    <button class=\"btn btn--star\" onclick=\"location.href=\\'/\\'\" title=\"スター\">\\n      <svg viewBox=\"0 0 24 24\">\\n        <path d=\"M12,17.27L18.18,21L16.54,13.97 L22,9.24L14.81,8.62L12,2 L9.19,8.62L2,9.24L7.45,13.97 L5.82,21L12,17.27Z\" />\\n      </svg>\\n    </button>\\n    <button class=\"btn btn--comment\" onclick=\"location.href=\\'/memo\\'\" title=\"メモ\">\\n      <svg viewBox=\"0 0 24 24\">\\n        <path d=\"M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9l7-7V5a2 2 0 0 0-2-2Zm-5 14v-5h5l-5 5Z\" />\\n      </svg>\\n    </button>\\n    <label for=\"actionMenuButton\" class=\"btn btn--menu\"><span></span></label>\\n  </div>\\n';\nclass ActionMenu extends HTMLElement {\n    updateMenuSize() {\n        const chatContainer = document.getElementById(\"chat-container\");\n        const isInChatMode = Boolean(chatContainer && chatContainer.style.display === \"flex\");\n        // CSSカスタムプロパティでコンテキストを設定\n        if (isInChatMode) {\n            this.setAttribute(\"data-context\", \"chat\");\n        } else {\n            this.setAttribute(\"data-context\", \"non-chat\");\n        }\n    }\n    observeScreenChanges() {\n        const chatContainer = document.getElementById(\"chat-container\");\n        if (chatContainer) {\n            // MutationObserverでchat-containerのstyle変化を監視\n            const observer = new MutationObserver(()=>{\n                this.updateMenuSize();\n            });\n            observer.observe(chatContainer, {\n                attributes: true,\n                attributeFilter: [\n                    \"style\"\n                ]\n            });\n        }\n        // 定期的にもチェック（念のため）\n        setInterval(()=>{\n            this.updateMenuSize();\n        }, 1000);\n    }\n    constructor(){\n        super();\n        const shadow = this.attachShadow({\n            mode: \"open\"\n        });\n        shadow.appendChild(template.content.cloneNode(true));\n        this.toggle = shadow.querySelector(\"#actionMenuButton\");\n        //  メニュー外クリックで自動クローズ\n        if (this.toggle) {\n            document.addEventListener(\"click\", (e)=>{\n                var _this_toggle;\n                // メニューが開いていて，クリック先がこのコンポーネント外なら閉じる\n                if (((_this_toggle = this.toggle) === null || _this_toggle === void 0 ? void 0 : _this_toggle.checked) && !e.composedPath().includes(this)) {\n                    this.toggle.checked = false;\n                }\n            });\n        }\n        // チャット画面かどうかを検出して適切なサイズを適用\n        this.updateMenuSize();\n        // 画面の変化を監視\n        this.observeScreenChanges();\n    }\n}\nif (!customElements.get(\"action-menu\")) {\n    customElements.define(\"action-menu\", ActionMenu);\n}\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHRzL2NvbXBvbmVudHMvcG9wdXBfbWVudS50cyIsIm1hcHBpbmdzIjoiO0FBQUEsMkJBQTJCO0FBQzNCLE1BQU1BLFdBQVdDLFNBQVNDLGFBQWEsQ0FBQztBQUN4Q0YsU0FBU0csU0FBUyxHQUFJO0FBaVN0QixNQUFNQyxtQkFBbUJDO0lBMEJ2QkMsaUJBQWlCO1FBQ2YsTUFBTUMsZ0JBQWdCTixTQUFTTyxjQUFjLENBQUM7UUFDOUMsTUFBTUMsZUFBZUMsUUFBUUgsaUJBQWlCLGNBQStCSSxLQUFLLENBQUNDLE9BQU8sS0FBSztRQUUvRix5QkFBeUI7UUFDekIsSUFBSUgsY0FBYztZQUNoQixJQUFJLENBQUNJLFlBQVksQ0FBQyxnQkFBZ0I7UUFDcEMsT0FBTztZQUNMLElBQUksQ0FBQ0EsWUFBWSxDQUFDLGdCQUFnQjtRQUNwQztJQUNGO0lBRUFDLHVCQUF1QjtRQUNyQixNQUFNUCxnQkFBZ0JOLFNBQVNPLGNBQWMsQ0FBQztRQUM5QyxJQUFJRCxlQUFlO1lBQ2pCLDZDQUE2QztZQUM3QyxNQUFNUSxXQUFXLElBQUlDLGlCQUFpQjtnQkFDcEMsSUFBSSxDQUFDVixjQUFjO1lBQ3JCO1lBQ0FTLFNBQVNFLE9BQU8sQ0FBQ1YsZUFBZTtnQkFDOUJXLFlBQVk7Z0JBQ1pDLGlCQUFpQjtvQkFBQztpQkFBUTtZQUM1QjtRQUNGO1FBRUEsa0JBQWtCO1FBQ2xCQyxZQUFZO1lBQ1YsSUFBSSxDQUFDZCxjQUFjO1FBQ3JCLEdBQUc7SUFDTDtJQXBEQWUsYUFBYztRQUNaLEtBQUs7UUFDTCxNQUFNQyxTQUFTLElBQUksQ0FBQ0MsWUFBWSxDQUFDO1lBQUVDLE1BQU07UUFBTztRQUNoREYsT0FBT0csV0FBVyxDQUFDekIsU0FBUzBCLE9BQU8sQ0FBQ0MsU0FBUyxDQUFDO1FBRTlDLElBQUksQ0FBQ0MsTUFBTSxHQUFHTixPQUFPTyxhQUFhLENBQUM7UUFFbkMsb0JBQW9CO1FBQ3BCLElBQUksSUFBSSxDQUFDRCxNQUFNLEVBQUU7WUFDZjNCLFNBQVM2QixnQkFBZ0IsQ0FBQyxTQUFTLENBQUNDO29CQUU5QjtnQkFESixtQ0FBbUM7Z0JBQ25DLElBQUkscUJBQUksQ0FBQ0gsTUFBTSxjQUFYLGdEQUFhSSxPQUFPLEtBQUksQ0FBQ0QsRUFBRUUsWUFBWSxHQUFHQyxRQUFRLENBQUMsSUFBSSxHQUFHO29CQUM1RCxJQUFJLENBQUNOLE1BQU0sQ0FBQ0ksT0FBTyxHQUFHO2dCQUN4QjtZQUNGO1FBQ0Y7UUFFQSwyQkFBMkI7UUFDM0IsSUFBSSxDQUFDMUIsY0FBYztRQUNuQixXQUFXO1FBQ1gsSUFBSSxDQUFDUSxvQkFBb0I7SUFDM0I7QUFnQ0Y7QUFFQSxJQUFJLENBQUNxQixlQUFlQyxHQUFHLENBQUMsZ0JBQWdCO0lBQ3RDRCxlQUFlRSxNQUFNLENBQUMsZUFBZWpDO0FBQ3ZDO0FBRVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc2NyaXB0cy9jb21wb25lbnRzL3BvcHVwX21lbnUudHM/MTViMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb21wb25lbnRzL3BvcHVwX21lbnUudHNcbmNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxuICA8c3R5bGU+XG4gICAgLyogPT09PT09PT09PT09XG4gICAgICAgUmVzZXQgLyBCYXNlXG4gICAgICAgPT09PT09PT09PT09ICovXG4gICAgKiB7XG4gICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgbWFyZ2luOiAwO1xuICAgICAgcGFkZGluZzogMDtcbiAgICB9XG5cbiAgICAvKiA9PT09PT09PT09PT1cbiAgICAgICBIaWRkZW4gQ2hlY2tib3hcbiAgICAgICA9PT09PT09PT09PT0gKi9cbiAgICBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0ge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG5cbiAgICAvKiA9PT09PT09PT09PT1cbiAgICAgICBDb21tb24gQnV0dG9uIFN0eWxlc1xuICAgICAgID09PT09PT09PT09PSAqL1xuICAgIC5idG4ge1xuICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgd2lkdGg6IDUwcHg7XG4gICAgICBoZWlnaHQ6IDUwcHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgZWFzZSwgYm94LXNoYWRvdyAwLjNzIGVhc2U7XG4gICAgICBib3gtc2hhZG93OiAwIDVweCAyMHB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgfVxuICAgIC5idG46aG92ZXIge1xuICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjEpO1xuICAgICAgYm94LXNoYWRvdzogMCA4cHggMzBweCByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gICAgfVxuICAgIC5idG4gc3ZnIHtcbiAgICAgIHdpZHRoOiAyNHB4O1xuICAgICAgaGVpZ2h0OiAyNHB4O1xuICAgICAgZmlsbDogI2ZmZjtcbiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGVhc2U7XG4gICAgfVxuXG4gICAgLyogPT09PT09PT09PT09XG4gICAgICAgQWN0aW9uIE1lbnUgV3JhcHBlclxuICAgICAgID09PT09PT09PT09PSAqL1xuICAgIC5hY3Rpb25zLW1lbnUge1xuICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgYm90dG9tOiA0MHB4O1xuICAgICAgcmlnaHQ6IDQwcHg7XG4gICAgICB3aWR0aDogNjBweDtcbiAgICAgIGhlaWdodDogNjBweDtcbiAgICAgIGFuaW1hdGlvbjogcG9wSW4gMC42cyBlYXNlO1xuICAgICAgei1pbmRleDogOTk5OTtcbiAgICB9XG5cbiAgICA6aG9zdChbZGF0YS1jb250ZXh0PVwiY2hhdFwiXSkgLmFjdGlvbnMtbWVudSB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cblxuICAgIDpob3N0KFtkYXRhLWNvbnRleHQ9XCJub24tY2hhdFwiXSkgLmFjdGlvbnMtbWVudSB7XG4gICAgICBib3R0b206IDQwcHg7IC8qIEFsaWduIHdpdGggZmxvYXRpbmcgcHJvbXB0IGJ1dHRvbiBvbiBkZXNrdG9wICovXG4gICAgfVxuXG4gICAgQGtleWZyYW1lcyBwb3BJbiB7XG4gICAgICAwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC41KSByb3RhdGUoMGRlZyk7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICB9XG4gICAgICA4MCUge1xuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpIHJvdGF0ZSgzNjBkZWcpO1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgfVxuICAgICAgMTAwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSkgcm90YXRlKDM2MGRlZyk7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogPT09PT09PT09PT09XG4gICAgICAgTWVudSBCdXR0b24gKExhcmdlKVxuICAgICAgID09PT09PT09PT09PSAqL1xuICAgIC5idG4tLW1lbnUge1xuICAgICAgd2lkdGg6IDYwcHg7XG4gICAgICBoZWlnaHQ6IDYwcHg7XG4gICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNTZhYjJmLCAjYThlMDYzKTtcbiAgICAgIHotaW5kZXg6IDE7XG4gICAgfVxuICAgIC5idG4tLW1lbnU6YWZ0ZXIsXG4gICAgLmJ0bi0tbWVudTpiZWZvcmUsXG4gICAgLmJ0bi0tbWVudSBzcGFuIHtcbiAgICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB3aWR0aDogMjVweDtcbiAgICAgIGhlaWdodDogM3B4O1xuICAgICAgYmFja2dyb3VuZDogI2ZmZjtcbiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzIGVhc2U7XG4gICAgfVxuICAgIC5idG4tLW1lbnUgc3BhbiB7XG4gICAgICB0b3A6IDUwJTtcbiAgICAgIGxlZnQ6IDUwJTtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgIH1cbiAgICAuYnRuLS1tZW51OmFmdGVyIHtcbiAgICAgIHRvcDogNTAlO1xuICAgICAgbGVmdDogNTAlO1xuICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgY2FsYygtNTAlIC0gOHB4KSk7XG4gICAgfVxuICAgIC5idG4tLW1lbnU6YmVmb3JlIHtcbiAgICAgIHRvcDogNTAlO1xuICAgICAgbGVmdDogNTAlO1xuICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgY2FsYygtNTAlICsgOHB4KSk7XG4gICAgfVxuXG4gICAgLyogPT09PT09PT09PT09XG4gICAgICAgQWN0aW9uIEJ1dHRvbnNcbiAgICAgICA9PT09PT09PT09PT0gKi9cbiAgICAuYnRuLS1zaGFyZSB7XG4gICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMzQ5OGRiLCAjMjk4MGI5KTtcbiAgICB9XG4gICAgLmJ0bi0tc3RhciB7XG4gICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMmVjYzcxLCAjMjdhZTYwKTtcbiAgICB9XG4gICAgLmJ0bi0tY29tbWVudCB7XG4gICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZjFjNDBmLCAjZjM5YzEyKTtcbiAgICB9XG5cbiAgICAvKiA9PT09PT09PT09PT1cbiAgICAgICDjg5zjgr/jg7Pjga7phY3nva5cbiAgICAgICA9PT09PT09PT09PT0gKi9cbiAgICAuYWN0aW9ucy1tZW51IC5idG4ge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiA4cHg7XG4gICAgICBsZWZ0OiA4cHg7XG4gICAgICBvcGFjaXR5OiAwO1xuICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwKSByb3RhdGUoMGRlZyk7XG4gICAgfVxuICAgIC5hY3Rpb25zLW1lbnUgLmJ0bi0tbWVudSB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDA7XG4gICAgICBsZWZ0OiAwO1xuICAgICAgd2lkdGg6IDYwcHg7XG4gICAgICBoZWlnaHQ6IDYwcHg7XG4gICAgICBvcGFjaXR5OiAxO1xuICAgICAgYm94LXNoYWRvdzogMCA1cHggMjBweCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICB0cmFuc2Zvcm06IG5vbmU7XG4gICAgfVxuXG4gICAgLyogPT09PT09PT09PT09XG4gICAgICAg44OB44Kn44OD44Kv44GM5YWl44Gj44Gf44KJ5ZCE44Ki44Kk44Kz44Oz44GM5bGV6ZaLXG4gICAgICAgPT09PT09PT09PT09ICovXG4gICAgI2FjdGlvbk1lbnVCdXR0b246Y2hlY2tlZCArIC5hY3Rpb25zLW1lbnUgPiAuYnRuIHtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpIHJvdGF0ZSgzNjBkZWcpO1xuICAgICAgdHJhbnNpdGlvbjogYWxsIDAuNnMgY3ViaWMtYmV6aWVyKDAuNjQ1LCAwLjA0NSwgMC4zNTUsIDEpO1xuICAgIH1cblxuICAgIC8qIOWxlemWi+S9jee9riAqL1xuICAgICNhY3Rpb25NZW51QnV0dG9uOmNoZWNrZWQgKyAuYWN0aW9ucy1tZW51ID4gLmJ0bi0tc2hhcmUge1xuICAgICAgdG9wOiAtODBweDtcbiAgICAgIGxlZnQ6IDBweDtcbiAgICB9XG4gICAgI2FjdGlvbk1lbnVCdXR0b246Y2hlY2tlZCArIC5hY3Rpb25zLW1lbnUgPiAuYnRuLS1zdGFyIHtcbiAgICAgIHRvcDogLTYwcHg7XG4gICAgICBsZWZ0OiAtNjBweDtcbiAgICB9XG4gICAgI2FjdGlvbk1lbnVCdXR0b246Y2hlY2tlZCArIC5hY3Rpb25zLW1lbnUgPiAuYnRuLS1jb21tZW50IHtcbiAgICAgIHRvcDogMHB4O1xuICAgICAgbGVmdDogLTgwcHg7XG4gICAgfVxuXG4gICAgLyogPT09PT09PT09PT09XG4gICAgICAg44OP44Oz44OQ44O844Ks44O85aSJ5b2iXG4gICAgICAgPT09PT09PT09PT09ICovXG4gICAgI2FjdGlvbk1lbnVCdXR0b246Y2hlY2tlZCArIC5hY3Rpb25zLW1lbnUgLmJ0bi0tbWVudTphZnRlciB7XG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSByb3RhdGUoNDVkZWcpO1xuICAgIH1cbiAgICAjYWN0aW9uTWVudUJ1dHRvbjpjaGVja2VkICsgLmFjdGlvbnMtbWVudSAuYnRuLS1tZW51OmJlZm9yZSB7XG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSByb3RhdGUoLTQ1ZGVnKTtcbiAgICB9XG4gICAgI2FjdGlvbk1lbnVCdXR0b246Y2hlY2tlZCArIC5hY3Rpb25zLW1lbnUgLmJ0bi0tbWVudSBzcGFuIHtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpIHNjYWxlKDApO1xuICAgIH1cblxuICAgIC8qID09PT09PT09PT09PVxuICAgICAgIOODm+ODkOODvOOCouODi+ODoeODvOOCt+ODp+ODs1xuICAgICAgID09PT09PT09PT09PSAqL1xuICAgIC5idG4tLXNoYXJlOmhvdmVyIHN2ZyB7IHRyYW5zZm9ybTogcm90YXRlKC0yMGRlZykgc2NhbGUoMS4yKTsgfVxuICAgIC5idG4tLXN0YXI6aG92ZXIgc3ZnICB7IHRyYW5zZm9ybTogcm90YXRlKDIwZGVnKSAgc2NhbGUoMS4yKTsgfVxuICAgIC5idG4tLWNvbW1lbnQ6aG92ZXIgc3ZnIHsgdHJhbnNmb3JtOiByb3RhdGUoLTIwZGVnKSBzY2FsZSgxLjIpOyB9XG4gIFxuICBcbiAgLyog44K544Oe44Ob6KGo56S65pmC44Gu6Kq/5pW077yI55S76Z2i5bmFNzY4cHjku6XkuIvvvIkgLSDjg5fjg63jg7Pjg5fjg4jmipXnqL/jg5zjgr/jg7PjgajlkIzjgZjjgrXjgqTjgrrjgasgKi9cbiAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgICAgIC8qIOODoeODi+ODpeODvOWFqOS9k+OBruS9jee9ruOBqOOCteOCpOOCuiAqL1xuICAgICAgLmFjdGlvbnMtbWVudSB7XG4gICAgICAgIHJpZ2h0OiAyMHB4OyAgICAvKiDjg5fjg63jg7Pjg5fjg4jmipXnqL/jg5zjgr/jg7Pjga7kvY3nva7jgavlkIjjgo/jgZvjgaboqr/mlbQgKi9cbiAgICAgICAgd2lkdGg6IDU2cHg7ICAgIC8qIOODl+ODreODs+ODl+ODiOaKleeov+ODnOOCv+ODs+OBqOWQjOOBmOOCteOCpOOCuuOBqyAqL1xuICAgICAgICBoZWlnaHQ6IDU2cHg7ICAgLyog44OX44Ot44Oz44OX44OI5oqV56i/44Oc44K/44Oz44Go5ZCM44GY44K144Kk44K644GrICovXG4gICAgICB9XG5cbiAgICAgIDpob3N0KFtkYXRhLWNvbnRleHQ9XCJjaGF0XCJdKSAuYWN0aW9ucy1tZW51IHtcbiAgICAgICAgYm90dG9tOiAxMDBweDsgIC8qIOODgeODo+ODg+ODiOWFpeWKm+ODleOCqeODvOODoOOBi+OCieWNgeWIhumbouOBl+OBpumFjee9riAqL1xuICAgICAgfVxuXG4gICAgICA6aG9zdChbZGF0YS1jb250ZXh0PVwibm9uLWNoYXRcIl0pIC5hY3Rpb25zLW1lbnUge1xuICAgICAgICBib3R0b206IDIwcHg7ICAgLyog44OX44Ot44Oz44OX44OI5oqV56i/44Oc44K/44Oz44Go5ZCM44GY6auY44GV44Gr6YWN572uICovXG4gICAgICB9XG4gICAgICAvKiDjg4/jg7Pjg5Djg7zjgqzjg7zjg5zjgr/jg7PjgpLjg5fjg63jg7Pjg5fjg4jmipXnqL/jg5zjgr/jg7PjgajlrozlhajjgavlkIzjgZjjgrXjgqTjgrrjgasgKi9cbiAgICAgIC5hY3Rpb25zLW1lbnUgLmJ0bi0tbWVudSB7XG4gICAgICAgIHdpZHRoOiA1NnB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIGhlaWdodDogNTZweCAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgICAgLyog5LuW44Gu44Oc44K/44Oz44Gu44K144Kk44K6ICovXG4gICAgICAuYWN0aW9ucy1tZW51IC5idG46bm90KC5idG4tLW1lbnUpIHtcbiAgICAgICAgd2lkdGg6IDQ1cHg7XG4gICAgICAgIGhlaWdodDogNDVweDtcbiAgICAgIH1cbiAgICAgIC8qIOOCouOCpOOCs+ODs+OCteOCpOOCuuiqv+aVtCAqL1xuICAgICAgLmJ0biBzdmcge1xuICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgfVxuICAgICAgXG4gICAgfVxuXG4gICAgLyog6Z2e5bi444Gr5bCP44GV44Gq55S76Z2i44Gn44Gu6Kq/5pW077yI55S76Z2i5bmFNDgwcHjku6XkuIvvvIkgLSDjg5fjg63jg7Pjg5fjg4jmipXnqL/jg5zjgr/jg7PjgajlrozlhajjgavlkIzjgZjjgrXjgqTjgrrjgasgKi9cbiAgICBAbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHtcbiAgICAgIC8qIOODoeODi+ODpeODvOWFqOS9k+OBruOCteOCpOOCuuOCkuODl+ODreODs+ODl+ODiOaKleeov+ODnOOCv+ODs+OBq+WujOWFqOOBq+WQiOOCj+OBm+OBpuiqv+aVtCAqL1xuICAgICAgLmFjdGlvbnMtbWVudSB7XG4gICAgICAgIGJvdHRvbTogOTBweDsgICAvKiDlhaXlipvjg5Xjgqnjg7zjg6DjgYvjgonljYHliIbpm6LjgZfjgabphY3nva4gKi9cbiAgICAgICAgcmlnaHQ6IDE1cHg7ICAgIC8qIOODl+ODreODs+ODl+ODiOaKleeov+ODnOOCv+ODs+OBruS9jee9ruOBq+WQiOOCj+OBm+OBpuiqv+aVtCAqL1xuICAgICAgICB3aWR0aDogNTBweDsgICAgLyog44OX44Ot44Oz44OX44OI5oqV56i/44Oc44K/44Oz44Go5ZCM44GY44K144Kk44K644GrICovXG4gICAgICAgIGhlaWdodDogNTBweDsgICAvKiDjg5fjg63jg7Pjg5fjg4jmipXnqL/jg5zjgr/jg7PjgajlkIzjgZjjgrXjgqTjgrrjgasgKi9cbiAgICAgIH1cbiAgICAgIC8qIOODj+ODs+ODkOODvOOCrOODvOODnOOCv+ODs+OCkuODl+ODreODs+ODl+ODiOaKleeov+ODnOOCv+ODs+OBqOWujOWFqOOBq+WQjOOBmOOCteOCpOOCuuOBqyAqL1xuICAgICAgLmFjdGlvbnMtbWVudSAuYnRuLS1tZW51IHtcbiAgICAgICAgd2lkdGg6IDUwcHggIWltcG9ydGFudDtcbiAgICAgICAgaGVpZ2h0OiA1MHB4ICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgICAvKiDku5bjga7jg5zjgr/jg7Pjga7jgrXjgqTjgrrjgpLjgojjgorlsI/jgZXjgY8gKi9cbiAgICAgIC5hY3Rpb25zLW1lbnUgLmJ0bjpub3QoLmJ0bi0tbWVudSkge1xuICAgICAgICB3aWR0aDogNDBweDtcbiAgICAgICAgaGVpZ2h0OiA0MHB4O1xuICAgICAgfVxuICAgICAgLyog44Ki44Kk44Kz44Oz44KC44GV44KJ44Gr57iu5bCPICovXG4gICAgICAuYnRuIHN2ZyB7XG4gICAgICAgIHdpZHRoOiAxOHB4O1xuICAgICAgICBoZWlnaHQ6IDE4cHg7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFtkYXRhLWNvbnRleHQ9XCJjaGF0XCJdKSAuYWN0aW9ucy1tZW51IHtcbiAgICAgICAgYm90dG9tOiA5MHB4OyAgIC8qIOODgeODo+ODg+ODiOWFpeWKm+ODleOCqeODvOODoOOBi+OCieWNgeWIhumbouOBl+OBpumFjee9riAqL1xuICAgICAgfVxuXG4gICAgICA6aG9zdChbZGF0YS1jb250ZXh0PVwibm9uLWNoYXRcIl0pIC5hY3Rpb25zLW1lbnUge1xuICAgICAgICBib3R0b206IDE1cHg7ICAgLyog44OX44Ot44Oz44OX44OI5oqV56i/44Oc44K/44Oz44Go5ZCM44GY6auY44GV44Gr6YWN572uICovXG4gICAgICB9XG5cbiAgICB9XG5cbiAgICA8L3N0eWxlPlxuXG4gIDwhLS0g44OB44Kn44OD44Kv44Oc44OD44Kv44K577yI44Oh44OL44Ol44O86ZaL6ZaJ55So77yJIC0tPlxuICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJhY3Rpb25NZW51QnV0dG9uXCIgLz5cblxuICA8IS0tIOOCouOCr+OCt+ODp+ODs+ODoeODi+ODpeODvOacrOS9kyAtLT5cbiAgPGRpdiBjbGFzcz1cImFjdGlvbnMtbWVudVwiPlxuICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLS1zaGFyZVwiIG9uY2xpY2s9XCJsb2NhdGlvbi5ocmVmPScvcHJvbXB0X3NoYXJlJ1wiIHRpdGxlPVwi44K344Kn44KiXCI+XG4gICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgPHBhdGggZD1cIk0xOCAxNi4wOGMtLjc2IDAtMS40NC4zLTEuOTYuNzdMOC45MSAxMi43YTMuMDQ4IDMuMDQ4IDAgMCAwIDAtMS4zOWw3LjEzLTQuMTdBMyAzIDAgMSAwIDE0IDVhMyAzIDAgMCAwIC4wNS41MmwtNy4xNCA0LjE4YTMgMyAwIDEgMCAwIDQuNmw3LjE0IDQuMThjLS4wMy4xNy0uMDUuMzQtLjA1LjUyYTMgMyAwIDEgMCAzLTIuOTJaXCIgLz5cbiAgICAgIDwvc3ZnPlxuICAgIDwvYnV0dG9uPlxuICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLS1zdGFyXCIgb25jbGljaz1cImxvY2F0aW9uLmhyZWY9Jy8nXCIgdGl0bGU9XCLjgrnjgr/jg7xcIj5cbiAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICA8cGF0aCBkPVwiTTEyLDE3LjI3TDE4LjE4LDIxTDE2LjU0LDEzLjk3IEwyMiw5LjI0TDE0LjgxLDguNjJMMTIsMiBMOS4xOSw4LjYyTDIsOS4yNEw3LjQ1LDEzLjk3IEw1LjgyLDIxTDEyLDE3LjI3WlwiIC8+XG4gICAgICA8L3N2Zz5cbiAgICA8L2J1dHRvbj5cbiAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi0tY29tbWVudFwiIG9uY2xpY2s9XCJsb2NhdGlvbi5ocmVmPScvbWVtbydcIiB0aXRsZT1cIuODoeODolwiPlxuICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgIDxwYXRoIGQ9XCJNMTkgM0g1YTIgMiAwIDAgMC0yIDJ2MTRhMiAyIDAgMCAwIDIgMmg5bDctN1Y1YTIgMiAwIDAgMC0yLTJabS01IDE0di01aDVsLTUgNVpcIiAvPlxuICAgICAgPC9zdmc+XG4gICAgPC9idXR0b24+XG4gICAgPGxhYmVsIGZvcj1cImFjdGlvbk1lbnVCdXR0b25cIiBjbGFzcz1cImJ0biBidG4tLW1lbnVcIj48c3Bhbj48L3NwYW4+PC9sYWJlbD5cbiAgPC9kaXY+XG5gO1xuXG5jbGFzcyBBY3Rpb25NZW51IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBwcml2YXRlIHRvZ2dsZTogSFRNTElucHV0RWxlbWVudCB8IG51bGw7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICBjb25zdCBzaGFkb3cgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xuICAgIHNoYWRvdy5hcHBlbmRDaGlsZCh0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XG5cbiAgICB0aGlzLnRvZ2dsZSA9IHNoYWRvdy5xdWVyeVNlbGVjdG9yKFwiI2FjdGlvbk1lbnVCdXR0b25cIikgYXMgSFRNTElucHV0RWxlbWVudCB8IG51bGw7XG5cbiAgICAvLyAg44Oh44OL44Ol44O85aSW44Kv44Oq44OD44Kv44Gn6Ieq5YuV44Kv44Ot44O844K6XG4gICAgaWYgKHRoaXMudG9nZ2xlKSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgLy8g44Oh44OL44Ol44O844GM6ZaL44GE44Gm44GE44Gm77yM44Kv44Oq44OD44Kv5YWI44GM44GT44Gu44Kz44Oz44Od44O844ON44Oz44OI5aSW44Gq44KJ6ZaJ44GY44KLXG4gICAgICAgIGlmICh0aGlzLnRvZ2dsZT8uY2hlY2tlZCAmJiAhZS5jb21wb3NlZFBhdGgoKS5pbmNsdWRlcyh0aGlzKSkge1xuICAgICAgICAgIHRoaXMudG9nZ2xlLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g44OB44Oj44OD44OI55S76Z2i44GL44Gp44GG44GL44KS5qSc5Ye644GX44Gm6YGp5YiH44Gq44K144Kk44K644KS6YGp55SoXG4gICAgdGhpcy51cGRhdGVNZW51U2l6ZSgpO1xuICAgIC8vIOeUu+mdouOBruWkieWMluOCkuebo+imllxuICAgIHRoaXMub2JzZXJ2ZVNjcmVlbkNoYW5nZXMoKTtcbiAgfVxuXG4gIHVwZGF0ZU1lbnVTaXplKCkge1xuICAgIGNvbnN0IGNoYXRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoYXQtY29udGFpbmVyXCIpO1xuICAgIGNvbnN0IGlzSW5DaGF0TW9kZSA9IEJvb2xlYW4oY2hhdENvbnRhaW5lciAmJiAoY2hhdENvbnRhaW5lciBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9PT0gXCJmbGV4XCIpO1xuXG4gICAgLy8gQ1NT44Kr44K544K/44Og44OX44Ot44OR44OG44Kj44Gn44Kz44Oz44OG44Kt44K544OI44KS6Kit5a6aXG4gICAgaWYgKGlzSW5DaGF0TW9kZSkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbnRleHRcIiwgXCJjaGF0XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShcImRhdGEtY29udGV4dFwiLCBcIm5vbi1jaGF0XCIpO1xuICAgIH1cbiAgfVxuXG4gIG9ic2VydmVTY3JlZW5DaGFuZ2VzKCkge1xuICAgIGNvbnN0IGNoYXRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoYXQtY29udGFpbmVyXCIpO1xuICAgIGlmIChjaGF0Q29udGFpbmVyKSB7XG4gICAgICAvLyBNdXRhdGlvbk9ic2VydmVy44GnY2hhdC1jb250YWluZXLjga5zdHlsZeWkieWMluOCkuebo+imllxuICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlTWVudVNpemUoKTtcbiAgICAgIH0pO1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShjaGF0Q29udGFpbmVyLCB7XG4gICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXG4gICAgICAgIGF0dHJpYnV0ZUZpbHRlcjogW1wic3R5bGVcIl1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIOWumuacn+eahOOBq+OCguODgeOCp+ODg+OCr++8iOW/teOBruOBn+OCge+8iVxuICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlTWVudVNpemUoKTtcbiAgICB9LCAxMDAwKTtcbiAgfVxufVxuXG5pZiAoIWN1c3RvbUVsZW1lbnRzLmdldChcImFjdGlvbi1tZW51XCIpKSB7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZShcImFjdGlvbi1tZW51XCIsIEFjdGlvbk1lbnUpO1xufVxuXG5leHBvcnQge307XG4iXSwibmFtZXMiOlsidGVtcGxhdGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJBY3Rpb25NZW51IiwiSFRNTEVsZW1lbnQiLCJ1cGRhdGVNZW51U2l6ZSIsImNoYXRDb250YWluZXIiLCJnZXRFbGVtZW50QnlJZCIsImlzSW5DaGF0TW9kZSIsIkJvb2xlYW4iLCJzdHlsZSIsImRpc3BsYXkiLCJzZXRBdHRyaWJ1dGUiLCJvYnNlcnZlU2NyZWVuQ2hhbmdlcyIsIm9ic2VydmVyIiwiTXV0YXRpb25PYnNlcnZlciIsIm9ic2VydmUiLCJhdHRyaWJ1dGVzIiwiYXR0cmlidXRlRmlsdGVyIiwic2V0SW50ZXJ2YWwiLCJjb25zdHJ1Y3RvciIsInNoYWRvdyIsImF0dGFjaFNoYWRvdyIsIm1vZGUiLCJhcHBlbmRDaGlsZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0b2dnbGUiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjaGVja2VkIiwiY29tcG9zZWRQYXRoIiwiaW5jbHVkZXMiLCJjdXN0b21FbGVtZW50cyIsImdldCIsImRlZmluZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scripts/components/popup_menu.ts\n"));

/***/ }),

/***/ "./scripts/components/user_icon.ts":
/*!*****************************************!*\
  !*** ./scripts/components/user_icon.ts ***!
  \*****************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n// components/user_icon.ts\n// ────────────────────────────────────────────────\n// 右上ユーザーアイコン  +  ドロップダウンメニュー\n//  - /api/user/profile で avatar_url / username を取得\n//  - 取得失敗時はデフォルト画像・空文字にフォールバック\n// ────────────────────────────────────────────────\nconst tpl = document.createElement(\"template\");\ntpl.innerHTML = '\\n  <style>\\n    :host {\\n      position: fixed;\\n      top: 10px;\\n      right: 10px;\\n      z-index: 10000;\\n      font-family: inherit;\\n      user-select: none;\\n    }\\n    .btn {\\n      background: transparent;\\n      border: none;\\n      cursor: pointer;\\n      padding: .5rem;\\n      border-radius: 50%;\\n      transition: background-color .15s;\\n      display: inline-flex;\\n      align-items: center;\\n      justify-content: center;\\n    }\\n    .btn:hover { background: rgba(0,0,0,.06); }\\n    .avatar {\\n      width: 2.2rem;\\n      height: 2.2rem;\\n      border-radius: 50%;\\n      object-fit: cover;\\n      display: block;\\n    }\\n    /* ホバー時にユーザー名ツールチップ */\\n    .btn:hover::after {\\n      content: attr(data-username);\\n      position: absolute;\\n      top: 105%;\\n      right: 0;\\n      padding: .25rem .6rem;\\n      background: #333;\\n      color: #fff;\\n      font-size: .75rem;\\n      border-radius: 4px;\\n      white-space: nowrap;\\n      pointer-events: none;\\n    }\\n    /* ▼ dropdown */\\n    .dropdown {\\n      position: absolute;\\n      top: 3rem;\\n      right: 0;\\n      background: #fff;\\n      border: 1px solid #ddd;\\n      border-radius: 6px;\\n      box-shadow: 0 2px 8px rgba(0,0,0,.1);\\n      min-width: 160px;\\n      display: none;\\n      flex-direction: column;\\n      overflow: hidden;\\n      animation: fade .15s ease-out;\\n    }\\n    @keyframes fade { from { opacity: 0; transform: translateY(-5px);}\\n                      to   { opacity: 1; transform: translateY(0);} }\\n    .item {\\n      padding: .6rem 1rem;\\n      font-size: .9rem;\\n      text-decoration: none;\\n      color: #333;\\n      display: flex;\\n      align-items: center;\\n      gap: .5rem;\\n      cursor: pointer;\\n    }\\n    .item:hover { background: #f5f5f5; }\\n  </style>\\n\\n  <button class=\"btn\" title=\"ユーザー\">\\n    <img class=\"avatar\" src=\"/static/user-icon.png\" alt=\"ユーザーアイコン\">\\n  </button>\\n\\n  <div class=\"dropdown\">\\n    <a class=\"item\" href=\"/settings\">⚙️ 設定</a>\\n    <a class=\"item\" href=\"/logout\">\\uD83D\\uDEAA ログアウト</a>\\n  </div>\\n';\nclass UserIcon extends HTMLElement {\n    connectedCallback() {\n        document.addEventListener(\"authstatechange\", this._handleAuthState);\n        if (typeof window.loggedIn !== \"undefined\") {\n            this._handleAuthStateInternal({\n                detail: {\n                    loggedIn: window.loggedIn\n                }\n            });\n        }\n    }\n    disconnectedCallback() {\n        document.removeEventListener(\"authstatechange\", this._handleAuthState);\n    }\n    _handleAuthStateInternal(evt) {\n        var _customEvent_detail;\n        const customEvent = evt;\n        const loggedIn = Boolean(customEvent === null || customEvent === void 0 ? void 0 : (_customEvent_detail = customEvent.detail) === null || _customEvent_detail === void 0 ? void 0 : _customEvent_detail.loggedIn);\n        if (loggedIn) {\n            if (!this._profileLoaded) {\n                this.loadProfile();\n            }\n        } else {\n            this._profileLoaded = false;\n            this.dropdown.style.display = \"none\";\n            this.avatarImg.src = \"/static/user-icon.png\";\n            this.avatarImg.alt = \"ユーザーアイコン\";\n            this.btn.removeAttribute(\"data-username\");\n        }\n    }\n    async loadProfile() {\n        try {\n            const res = await fetch(\"/api/user/profile\", {\n                credentials: \"same-origin\"\n            });\n            if (res.status === 401) {\n                // 未ログイン時は静かに何もしない\n                this._profileLoaded = false;\n                return;\n            }\n            if (!res.ok) throw new Error(\"status \".concat(res.status));\n            const data = await res.json();\n            const avatar = data.avatar_url || \"/static/user-icon.png\";\n            const name = data.username || \"\";\n            this.avatarImg.src = avatar;\n            // ツールチップにユーザー名\n            this.btn.setAttribute(\"data-username\", name);\n            // alt 属性にもセット\n            this.avatarImg.alt = name ? \"\".concat(name, \"のアイコン\") : \"ユーザーアイコン\";\n            this._profileLoaded = true;\n        } catch (err) {\n            console.warn(\"user_icon: profile load failed\", err);\n            this._profileLoaded = false;\n        }\n    }\n    constructor(){\n        super();\n        this._profileLoaded = false;\n        const root = this.attachShadow({\n            mode: \"open\"\n        });\n        root.append(tpl.content.cloneNode(true));\n        const btn = root.querySelector(\".btn\");\n        const dropdown = root.querySelector(\".dropdown\");\n        const avatarImg = root.querySelector(\".avatar\");\n        if (!btn || !dropdown || !avatarImg) {\n            throw new Error(\"user-icon template is missing required elements\");\n        }\n        this.btn = btn;\n        this.dropdown = dropdown;\n        this.avatarImg = avatarImg;\n        this._handleAuthState = this._handleAuthStateInternal.bind(this);\n        // ドロップダウン開閉\n        this.btn.addEventListener(\"click\", (e)=>{\n            e.stopPropagation();\n            this.dropdown.style.display = this.dropdown.style.display === \"flex\" ? \"none\" : \"flex\";\n        });\n        // 外側クリックで閉じる\n        document.addEventListener(\"click\", ()=>{\n            this.dropdown.style.display = \"none\";\n        });\n    }\n}\nif (!customElements.get(\"user-icon\")) {\n    customElements.define(\"user-icon\", UserIcon);\n}\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHRzL2NvbXBvbmVudHMvdXNlcl9pY29uLnRzIiwibWFwcGluZ3MiOiI7QUFBQSwwQkFBMEI7QUFDMUIsbURBQW1EO0FBQ25ELDZCQUE2QjtBQUM3QixtREFBbUQ7QUFDbkQsK0JBQStCO0FBQy9CLG1EQUFtRDtBQUVuRCxNQUFNQSxNQUFNQyxTQUFTQyxhQUFhLENBQUM7QUFDbkNGLElBQUlHLFNBQVMsR0FBSTtBQW1GakIsTUFBTUMsaUJBQWlCQztJQXFDckJDLG9CQUFvQjtRQUNsQkwsU0FBU00sZ0JBQWdCLENBQUMsbUJBQW1CLElBQUksQ0FBQ0MsZ0JBQWdCO1FBQ2xFLElBQUksT0FBT0MsT0FBT0MsUUFBUSxLQUFLLGFBQWE7WUFDMUMsSUFBSSxDQUFDQyx3QkFBd0IsQ0FBQztnQkFBRUMsUUFBUTtvQkFBRUYsVUFBVUQsT0FBT0MsUUFBUTtnQkFBQztZQUFFO1FBQ3hFO0lBQ0Y7SUFFQUcsdUJBQXVCO1FBQ3JCWixTQUFTYSxtQkFBbUIsQ0FBQyxtQkFBbUIsSUFBSSxDQUFDTixnQkFBZ0I7SUFDdkU7SUFFUUcseUJBQXlCSSxHQUFXLEVBQUU7WUFFbkJDO1FBRHpCLE1BQU1BLGNBQWNEO1FBQ3BCLE1BQU1MLFdBQVdPLFFBQVFELHdCQUFBQSxtQ0FBQUEsc0JBQUFBLFlBQWFKLE1BQU0sY0FBbkJJLDBDQUFBQSxvQkFBcUJOLFFBQVE7UUFFdEQsSUFBSUEsVUFBVTtZQUNaLElBQUksQ0FBQyxJQUFJLENBQUNRLGNBQWMsRUFBRTtnQkFDeEIsSUFBSSxDQUFDQyxXQUFXO1lBQ2xCO1FBQ0YsT0FBTztZQUNMLElBQUksQ0FBQ0QsY0FBYyxHQUFHO1lBQ3RCLElBQUksQ0FBQ0UsUUFBUSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sR0FBRztZQUM5QixJQUFJLENBQUNDLFNBQVMsQ0FBQ0MsR0FBRyxHQUFHO1lBQ3JCLElBQUksQ0FBQ0QsU0FBUyxDQUFDRSxHQUFHLEdBQUc7WUFDckIsSUFBSSxDQUFDQyxHQUFHLENBQUNDLGVBQWUsQ0FBQztRQUMzQjtJQUNGO0lBRUEsTUFBTVIsY0FBYztRQUNsQixJQUFJO1lBQ0YsTUFBTVMsTUFBTSxNQUFNQyxNQUFNLHFCQUFxQjtnQkFBRUMsYUFBYTtZQUFjO1lBQzFFLElBQUlGLElBQUlHLE1BQU0sS0FBSyxLQUFLO2dCQUN0QixrQkFBa0I7Z0JBQ2xCLElBQUksQ0FBQ2IsY0FBYyxHQUFHO2dCQUN0QjtZQUNGO1lBQ0EsSUFBSSxDQUFDVSxJQUFJSSxFQUFFLEVBQUUsTUFBTSxJQUFJQyxNQUFNLFVBQXFCLE9BQVhMLElBQUlHLE1BQU07WUFDakQsTUFBTUcsT0FBTyxNQUFNTixJQUFJTyxJQUFJO1lBRTNCLE1BQU1DLFNBQVNGLEtBQUtHLFVBQVUsSUFBSTtZQUNsQyxNQUFNQyxPQUFPSixLQUFLSyxRQUFRLElBQUk7WUFFOUIsSUFBSSxDQUFDaEIsU0FBUyxDQUFDQyxHQUFHLEdBQUdZO1lBQ3JCLGVBQWU7WUFDZixJQUFJLENBQUNWLEdBQUcsQ0FBQ2MsWUFBWSxDQUFDLGlCQUFpQkY7WUFDdkMsY0FBYztZQUNkLElBQUksQ0FBQ2YsU0FBUyxDQUFDRSxHQUFHLEdBQUdhLE9BQU8sR0FBUSxPQUFMQSxNQUFLLFdBQVM7WUFDN0MsSUFBSSxDQUFDcEIsY0FBYyxHQUFHO1FBQ3hCLEVBQUUsT0FBT3VCLEtBQUs7WUFDWkMsUUFBUUMsSUFBSSxDQUFDLGtDQUFrQ0Y7WUFDL0MsSUFBSSxDQUFDdkIsY0FBYyxHQUFHO1FBQ3hCO0lBQ0Y7SUFsRkEwQixhQUFjO1FBQ1osS0FBSzthQUpDMUIsaUJBQWlCO1FBS3ZCLE1BQU0yQixPQUFPLElBQUksQ0FBQ0MsWUFBWSxDQUFDO1lBQUVDLE1BQU07UUFBTztRQUM5Q0YsS0FBS0csTUFBTSxDQUFDaEQsSUFBSWlELE9BQU8sQ0FBQ0MsU0FBUyxDQUFDO1FBRWxDLE1BQU14QixNQUFNbUIsS0FBS00sYUFBYSxDQUFDO1FBQy9CLE1BQU0vQixXQUFXeUIsS0FBS00sYUFBYSxDQUFDO1FBQ3BDLE1BQU01QixZQUFZc0IsS0FBS00sYUFBYSxDQUFDO1FBRXJDLElBQUksQ0FBQ3pCLE9BQU8sQ0FBQ04sWUFBWSxDQUFDRyxXQUFXO1lBQ25DLE1BQU0sSUFBSVUsTUFBTTtRQUNsQjtRQUVBLElBQUksQ0FBQ1AsR0FBRyxHQUFHQTtRQUNYLElBQUksQ0FBQ04sUUFBUSxHQUFHQTtRQUNoQixJQUFJLENBQUNHLFNBQVMsR0FBR0E7UUFDakIsSUFBSSxDQUFDZixnQkFBZ0IsR0FBRyxJQUFJLENBQUNHLHdCQUF3QixDQUFDeUMsSUFBSSxDQUFDLElBQUk7UUFFL0QsWUFBWTtRQUNaLElBQUksQ0FBQzFCLEdBQUcsQ0FBQ25CLGdCQUFnQixDQUFDLFNBQVMsQ0FBQzhDO1lBQ2xDQSxFQUFFQyxlQUFlO1lBQ2pCLElBQUksQ0FBQ2xDLFFBQVEsQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLEdBQ3pCLElBQUksQ0FBQ0YsUUFBUSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sS0FBSyxTQUFTLFNBQVM7UUFDdEQ7UUFDQSxhQUFhO1FBQ2JyQixTQUFTTSxnQkFBZ0IsQ0FBQyxTQUFTO1lBQ2pDLElBQUksQ0FBQ2EsUUFBUSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sR0FBRztRQUNoQztJQUNGO0FBdURGO0FBRUEsSUFBSSxDQUFDaUMsZUFBZUMsR0FBRyxDQUFDLGNBQWM7SUFDcENELGVBQWVFLE1BQU0sQ0FBQyxhQUFhckQ7QUFDckM7QUFFVSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zY3JpcHRzL2NvbXBvbmVudHMvdXNlcl9pY29uLnRzP2RkNmEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY29tcG9uZW50cy91c2VyX2ljb24udHNcbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuLy8g5Y+z5LiK44Om44O844K244O844Ki44Kk44Kz44OzICArICDjg4njg63jg4Pjg5fjg4Djgqbjg7Pjg6Hjg4vjg6Xjg7xcbi8vICAtIC9hcGkvdXNlci9wcm9maWxlIOOBpyBhdmF0YXJfdXJsIC8gdXNlcm5hbWUg44KS5Y+W5b6XXG4vLyAgLSDlj5blvpflpLHmlZfmmYLjga/jg4fjg5Xjgqnjg6vjg4jnlLvlg4/jg7vnqbrmloflrZfjgavjg5Xjgqnjg7zjg6vjg5Djg4Pjgq9cbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG5jb25zdCB0cGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG50cGwuaW5uZXJIVE1MID0gYFxuICA8c3R5bGU+XG4gICAgOmhvc3Qge1xuICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgdG9wOiAxMHB4O1xuICAgICAgcmlnaHQ6IDEwcHg7XG4gICAgICB6LWluZGV4OiAxMDAwMDtcbiAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgfVxuICAgIC5idG4ge1xuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICBib3JkZXI6IG5vbmU7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBwYWRkaW5nOiAuNXJlbTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgLjE1cztcbiAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIH1cbiAgICAuYnRuOmhvdmVyIHsgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwuMDYpOyB9XG4gICAgLmF2YXRhciB7XG4gICAgICB3aWR0aDogMi4ycmVtO1xuICAgICAgaGVpZ2h0OiAyLjJyZW07XG4gICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICBvYmplY3QtZml0OiBjb3ZlcjtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIH1cbiAgICAvKiDjg5vjg5Djg7zmmYLjgavjg6bjg7zjgrbjg7zlkI3jg4Tjg7zjg6vjg4Hjg4Pjg5cgKi9cbiAgICAuYnRuOmhvdmVyOjphZnRlciB7XG4gICAgICBjb250ZW50OiBhdHRyKGRhdGEtdXNlcm5hbWUpO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiAxMDUlO1xuICAgICAgcmlnaHQ6IDA7XG4gICAgICBwYWRkaW5nOiAuMjVyZW0gLjZyZW07XG4gICAgICBiYWNrZ3JvdW5kOiAjMzMzO1xuICAgICAgY29sb3I6ICNmZmY7XG4gICAgICBmb250LXNpemU6IC43NXJlbTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICB9XG4gICAgLyog4pa8IGRyb3Bkb3duICovXG4gICAgLmRyb3Bkb3duIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogM3JlbTtcbiAgICAgIHJpZ2h0OiAwO1xuICAgICAgYmFja2dyb3VuZDogI2ZmZjtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XG4gICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLDAsMCwuMSk7XG4gICAgICBtaW4td2lkdGg6IDE2MHB4O1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgYW5pbWF0aW9uOiBmYWRlIC4xNXMgZWFzZS1vdXQ7XG4gICAgfVxuICAgIEBrZXlmcmFtZXMgZmFkZSB7IGZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTVweCk7fVxuICAgICAgICAgICAgICAgICAgICAgIHRvICAgeyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7fSB9XG4gICAgLml0ZW0ge1xuICAgICAgcGFkZGluZzogLjZyZW0gMXJlbTtcbiAgICAgIGZvbnQtc2l6ZTogLjlyZW07XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICBjb2xvcjogIzMzMztcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgZ2FwOiAuNXJlbTtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB9XG4gICAgLml0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kOiAjZjVmNWY1OyB9XG4gIDwvc3R5bGU+XG5cbiAgPGJ1dHRvbiBjbGFzcz1cImJ0blwiIHRpdGxlPVwi44Om44O844K244O8XCI+XG4gICAgPGltZyBjbGFzcz1cImF2YXRhclwiIHNyYz1cIi9zdGF0aWMvdXNlci1pY29uLnBuZ1wiIGFsdD1cIuODpuODvOOCtuODvOOCouOCpOOCs+ODs1wiPlxuICA8L2J1dHRvbj5cblxuICA8ZGl2IGNsYXNzPVwiZHJvcGRvd25cIj5cbiAgICA8YSBjbGFzcz1cIml0ZW1cIiBocmVmPVwiL3NldHRpbmdzXCI+4pqZ77iPIOioreWumjwvYT5cbiAgICA8YSBjbGFzcz1cIml0ZW1cIiBocmVmPVwiL2xvZ291dFwiPvCfmqog44Ot44Kw44Ki44Km44OIPC9hPlxuICA8L2Rpdj5cbmA7XG5cbmNsYXNzIFVzZXJJY29uIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBwcml2YXRlIGJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgZHJvcGRvd246IEhUTUxEaXZFbGVtZW50O1xuICBwcml2YXRlIGF2YXRhckltZzogSFRNTEltYWdlRWxlbWVudDtcbiAgcHJpdmF0ZSBfcHJvZmlsZUxvYWRlZCA9IGZhbHNlO1xuICBwcml2YXRlIF9oYW5kbGVBdXRoU3RhdGU6IChldnQ/OiBFdmVudCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIGNvbnN0IHJvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xuICAgIHJvb3QuYXBwZW5kKHRwbC5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XG5cbiAgICBjb25zdCBidG4gPSByb290LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbDtcbiAgICBjb25zdCBkcm9wZG93biA9IHJvb3QucXVlcnlTZWxlY3RvcihcIi5kcm9wZG93blwiKSBhcyBIVE1MRGl2RWxlbWVudCB8IG51bGw7XG4gICAgY29uc3QgYXZhdGFySW1nID0gcm9vdC5xdWVyeVNlbGVjdG9yKFwiLmF2YXRhclwiKSBhcyBIVE1MSW1hZ2VFbGVtZW50IHwgbnVsbDtcblxuICAgIGlmICghYnRuIHx8ICFkcm9wZG93biB8fCAhYXZhdGFySW1nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1c2VyLWljb24gdGVtcGxhdGUgaXMgbWlzc2luZyByZXF1aXJlZCBlbGVtZW50c1wiKTtcbiAgICB9XG5cbiAgICB0aGlzLmJ0biA9IGJ0bjtcbiAgICB0aGlzLmRyb3Bkb3duID0gZHJvcGRvd247XG4gICAgdGhpcy5hdmF0YXJJbWcgPSBhdmF0YXJJbWc7XG4gICAgdGhpcy5faGFuZGxlQXV0aFN0YXRlID0gdGhpcy5faGFuZGxlQXV0aFN0YXRlSW50ZXJuYWwuYmluZCh0aGlzKTtcblxuICAgIC8vIOODieODreODg+ODl+ODgOOCpuODs+mWi+mWiVxuICAgIHRoaXMuYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuZHJvcGRvd24uc3R5bGUuZGlzcGxheSA9XG4gICAgICAgIHRoaXMuZHJvcGRvd24uc3R5bGUuZGlzcGxheSA9PT0gXCJmbGV4XCIgPyBcIm5vbmVcIiA6IFwiZmxleFwiO1xuICAgIH0pO1xuICAgIC8vIOWkluWBtOOCr+ODquODg+OCr+OBp+mWieOBmOOCi1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmRyb3Bkb3duLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJhdXRoc3RhdGVjaGFuZ2VcIiwgdGhpcy5faGFuZGxlQXV0aFN0YXRlKTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdy5sb2dnZWRJbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy5faGFuZGxlQXV0aFN0YXRlSW50ZXJuYWwoeyBkZXRhaWw6IHsgbG9nZ2VkSW46IHdpbmRvdy5sb2dnZWRJbiB9IH0gYXMgQ3VzdG9tRXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhdXRoc3RhdGVjaGFuZ2VcIiwgdGhpcy5faGFuZGxlQXV0aFN0YXRlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUF1dGhTdGF0ZUludGVybmFsKGV2dD86IEV2ZW50KSB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldnQgYXMgQ3VzdG9tRXZlbnQ8eyBsb2dnZWRJbj86IGJvb2xlYW4gfT4gfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgbG9nZ2VkSW4gPSBCb29sZWFuKGN1c3RvbUV2ZW50Py5kZXRhaWw/LmxvZ2dlZEluKTtcblxuICAgIGlmIChsb2dnZWRJbikge1xuICAgICAgaWYgKCF0aGlzLl9wcm9maWxlTG9hZGVkKSB7XG4gICAgICAgIHRoaXMubG9hZFByb2ZpbGUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcHJvZmlsZUxvYWRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5kcm9wZG93bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB0aGlzLmF2YXRhckltZy5zcmMgPSBcIi9zdGF0aWMvdXNlci1pY29uLnBuZ1wiO1xuICAgICAgdGhpcy5hdmF0YXJJbWcuYWx0ID0gXCLjg6bjg7zjgrbjg7zjgqLjgqTjgrPjg7NcIjtcbiAgICAgIHRoaXMuYnRuLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtdXNlcm5hbWVcIik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFByb2ZpbGUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiL2FwaS91c2VyL3Byb2ZpbGVcIiwgeyBjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwiIH0pO1xuICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAvLyDmnKrjg63jgrDjgqTjg7PmmYLjga/pnZnjgYvjgavkvZXjgoLjgZfjgarjgYRcbiAgICAgICAgdGhpcy5fcHJvZmlsZUxvYWRlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBzdGF0dXMgJHtyZXMuc3RhdHVzfWApO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgIGNvbnN0IGF2YXRhciA9IGRhdGEuYXZhdGFyX3VybCB8fCBcIi9zdGF0aWMvdXNlci1pY29uLnBuZ1wiO1xuICAgICAgY29uc3QgbmFtZSA9IGRhdGEudXNlcm5hbWUgfHwgXCJcIjtcblxuICAgICAgdGhpcy5hdmF0YXJJbWcuc3JjID0gYXZhdGFyO1xuICAgICAgLy8g44OE44O844Or44OB44OD44OX44Gr44Om44O844K244O85ZCNXG4gICAgICB0aGlzLmJ0bi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXVzZXJuYW1lXCIsIG5hbWUpO1xuICAgICAgLy8gYWx0IOWxnuaAp+OBq+OCguOCu+ODg+ODiFxuICAgICAgdGhpcy5hdmF0YXJJbWcuYWx0ID0gbmFtZSA/IGAke25hbWV944Gu44Ki44Kk44Kz44OzYCA6IFwi44Om44O844K244O844Ki44Kk44Kz44OzXCI7XG4gICAgICB0aGlzLl9wcm9maWxlTG9hZGVkID0gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUud2FybihcInVzZXJfaWNvbjogcHJvZmlsZSBsb2FkIGZhaWxlZFwiLCBlcnIpO1xuICAgICAgdGhpcy5fcHJvZmlsZUxvYWRlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG5pZiAoIWN1c3RvbUVsZW1lbnRzLmdldChcInVzZXItaWNvblwiKSkge1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ1c2VyLWljb25cIiwgVXNlckljb24pO1xufVxuXG5leHBvcnQge307XG4iXSwibmFtZXMiOlsidHBsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiVXNlckljb24iLCJIVE1MRWxlbWVudCIsImNvbm5lY3RlZENhbGxiYWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVBdXRoU3RhdGUiLCJ3aW5kb3ciLCJsb2dnZWRJbiIsIl9oYW5kbGVBdXRoU3RhdGVJbnRlcm5hbCIsImRldGFpbCIsImRpc2Nvbm5lY3RlZENhbGxiYWNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImN1c3RvbUV2ZW50IiwiQm9vbGVhbiIsIl9wcm9maWxlTG9hZGVkIiwibG9hZFByb2ZpbGUiLCJkcm9wZG93biIsInN0eWxlIiwiZGlzcGxheSIsImF2YXRhckltZyIsInNyYyIsImFsdCIsImJ0biIsInJlbW92ZUF0dHJpYnV0ZSIsInJlcyIsImZldGNoIiwiY3JlZGVudGlhbHMiLCJzdGF0dXMiLCJvayIsIkVycm9yIiwiZGF0YSIsImpzb24iLCJhdmF0YXIiLCJhdmF0YXJfdXJsIiwibmFtZSIsInVzZXJuYW1lIiwic2V0QXR0cmlidXRlIiwiZXJyIiwiY29uc29sZSIsIndhcm4iLCJjb25zdHJ1Y3RvciIsInJvb3QiLCJhdHRhY2hTaGFkb3ciLCJtb2RlIiwiYXBwZW5kIiwiY29udGVudCIsImNsb25lTm9kZSIsInF1ZXJ5U2VsZWN0b3IiLCJiaW5kIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImN1c3RvbUVsZW1lbnRzIiwiZ2V0IiwiZGVmaW5lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./scripts/components/user_icon.ts\n"));

/***/ }),

/***/ "./scripts/core/dom.ts":
/*!*****************************!*\
  !*** ./scripts/core/dom.ts ***!
  \*****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n// dom.ts\n// 画面内で使用するDOM要素をまとめて取得し、グローバル変数として window に登録\n// セットアップ画面関連\nconst setupContainer = document.getElementById(\"setup-container\");\nconst setupInfoElement = document.getElementById(\"setup-info\");\nconst aiModelSelect = document.getElementById(\"ai-model\");\nconst accessChatBtn = document.getElementById(\"access-chat-btn\");\nconst setupTaskCards = document.querySelectorAll(\".task-selection .prompt-card\");\nconst taskSelection = document.querySelector(\".task-selection\");\n// チャット画面関連\nconst chatContainer = document.getElementById(\"chat-container\");\nconst chatMessages = document.getElementById(\"chat-messages\");\nconst userInput = document.getElementById(\"user-input\");\nconst sendBtn = document.getElementById(\"send-btn\");\nconst typingIndicator = document.getElementById(\"typing-indicator\");\nconst backToSetupBtn = document.getElementById(\"back-to-setup\");\nconst newChatBtn = document.getElementById(\"new-chat-btn\");\nconst chatRoomListEl = document.getElementById(\"chat-room-list\");\n// グローバル登録\nwindow.setupContainer = setupContainer;\nwindow.chatContainer = chatContainer;\nwindow.chatMessages = chatMessages;\nwindow.userInput = userInput;\nwindow.sendBtn = sendBtn;\nwindow.typingIndicator = typingIndicator;\nwindow.backToSetupBtn = backToSetupBtn;\nwindow.newChatBtn = newChatBtn;\nwindow.chatRoomListEl = chatRoomListEl;\nwindow.setupInfoElement = setupInfoElement;\nwindow.aiModelSelect = aiModelSelect;\nwindow.accessChatBtn = accessChatBtn;\nwindow.setupTaskCards = setupTaskCards;\nwindow.taskSelection = taskSelection;\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHRzL2NvcmUvZG9tLnRzIiwibWFwcGluZ3MiOiI7QUFBQSxTQUFTO0FBQ1QsOENBQThDO0FBRTlDLGFBQWE7QUFDYixNQUFNQSxpQkFBaUJDLFNBQVNDLGNBQWMsQ0FBQztBQUMvQyxNQUFNQyxtQkFBbUJGLFNBQVNDLGNBQWMsQ0FBQztBQUNqRCxNQUFNRSxnQkFBZ0JILFNBQVNDLGNBQWMsQ0FBQztBQUM5QyxNQUFNRyxnQkFBZ0JKLFNBQVNDLGNBQWMsQ0FBQztBQUM5QyxNQUFNSSxpQkFBaUJMLFNBQVNNLGdCQUFnQixDQUFDO0FBQ2pELE1BQU1DLGdCQUFnQlAsU0FBU1EsYUFBYSxDQUFDO0FBRTdDLFdBQVc7QUFDWCxNQUFNQyxnQkFBZ0JULFNBQVNDLGNBQWMsQ0FBQztBQUM5QyxNQUFNUyxlQUFlVixTQUFTQyxjQUFjLENBQUM7QUFDN0MsTUFBTVUsWUFBWVgsU0FBU0MsY0FBYyxDQUFDO0FBQzFDLE1BQU1XLFVBQVVaLFNBQVNDLGNBQWMsQ0FBQztBQUN4QyxNQUFNWSxrQkFBa0JiLFNBQVNDLGNBQWMsQ0FBQztBQUNoRCxNQUFNYSxpQkFBaUJkLFNBQVNDLGNBQWMsQ0FBQztBQUMvQyxNQUFNYyxhQUFhZixTQUFTQyxjQUFjLENBQUM7QUFDM0MsTUFBTWUsaUJBQWlCaEIsU0FBU0MsY0FBYyxDQUFDO0FBRS9DLFVBQVU7QUFDVmdCLE9BQU9sQixjQUFjLEdBQUdBO0FBQ3hCa0IsT0FBT1IsYUFBYSxHQUFHQTtBQUN2QlEsT0FBT1AsWUFBWSxHQUFHQTtBQUN0Qk8sT0FBT04sU0FBUyxHQUFHQTtBQUNuQk0sT0FBT0wsT0FBTyxHQUFHQTtBQUNqQkssT0FBT0osZUFBZSxHQUFHQTtBQUN6QkksT0FBT0gsY0FBYyxHQUFHQTtBQUN4QkcsT0FBT0YsVUFBVSxHQUFHQTtBQUNwQkUsT0FBT0QsY0FBYyxHQUFHQTtBQUN4QkMsT0FBT2YsZ0JBQWdCLEdBQUdBO0FBQzFCZSxPQUFPZCxhQUFhLEdBQUdBO0FBQ3ZCYyxPQUFPYixhQUFhLEdBQUdBO0FBQ3ZCYSxPQUFPWixjQUFjLEdBQUdBO0FBQ3hCWSxPQUFPVixhQUFhLEdBQUdBO0FBRWIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc2NyaXB0cy9jb3JlL2RvbS50cz9lYmE1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGRvbS50c1xuLy8g55S76Z2i5YaF44Gn5L2/55So44GZ44KLRE9N6KaB57Sg44KS44G+44Go44KB44Gm5Y+W5b6X44GX44CB44Kw44Ot44O844OQ44Or5aSJ5pWw44Go44GX44GmIHdpbmRvdyDjgavnmbvpjLJcblxuLy8g44K744OD44OI44Ki44OD44OX55S76Z2i6Zai6YCjXG5jb25zdCBzZXR1cENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2V0dXAtY29udGFpbmVyXCIpO1xuY29uc3Qgc2V0dXBJbmZvRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2V0dXAtaW5mb1wiKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbDtcbmNvbnN0IGFpTW9kZWxTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpLW1vZGVsXCIpIGFzIEhUTUxTZWxlY3RFbGVtZW50IHwgbnVsbDtcbmNvbnN0IGFjY2Vzc0NoYXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjY2Vzcy1jaGF0LWJ0blwiKTtcbmNvbnN0IHNldHVwVGFza0NhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50YXNrLXNlbGVjdGlvbiAucHJvbXB0LWNhcmRcIik7XG5jb25zdCB0YXNrU2VsZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLXNlbGVjdGlvblwiKTtcblxuLy8g44OB44Oj44OD44OI55S76Z2i6Zai6YCjXG5jb25zdCBjaGF0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGF0LWNvbnRhaW5lclwiKTtcbmNvbnN0IGNoYXRNZXNzYWdlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hhdC1tZXNzYWdlc1wiKTtcbmNvbnN0IHVzZXJJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlci1pbnB1dFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbDtcbmNvbnN0IHNlbmRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlbmQtYnRuXCIpO1xuY29uc3QgdHlwaW5nSW5kaWNhdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0eXBpbmctaW5kaWNhdG9yXCIpO1xuY29uc3QgYmFja1RvU2V0dXBCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhY2stdG8tc2V0dXBcIik7XG5jb25zdCBuZXdDaGF0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXctY2hhdC1idG5cIik7XG5jb25zdCBjaGF0Um9vbUxpc3RFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hhdC1yb29tLWxpc3RcIik7XG5cbi8vIOOCsOODreODvOODkOODq+eZu+mMslxud2luZG93LnNldHVwQ29udGFpbmVyID0gc2V0dXBDb250YWluZXI7XG53aW5kb3cuY2hhdENvbnRhaW5lciA9IGNoYXRDb250YWluZXI7XG53aW5kb3cuY2hhdE1lc3NhZ2VzID0gY2hhdE1lc3NhZ2VzO1xud2luZG93LnVzZXJJbnB1dCA9IHVzZXJJbnB1dDtcbndpbmRvdy5zZW5kQnRuID0gc2VuZEJ0bjtcbndpbmRvdy50eXBpbmdJbmRpY2F0b3IgPSB0eXBpbmdJbmRpY2F0b3I7XG53aW5kb3cuYmFja1RvU2V0dXBCdG4gPSBiYWNrVG9TZXR1cEJ0bjtcbndpbmRvdy5uZXdDaGF0QnRuID0gbmV3Q2hhdEJ0bjtcbndpbmRvdy5jaGF0Um9vbUxpc3RFbCA9IGNoYXRSb29tTGlzdEVsO1xud2luZG93LnNldHVwSW5mb0VsZW1lbnQgPSBzZXR1cEluZm9FbGVtZW50O1xud2luZG93LmFpTW9kZWxTZWxlY3QgPSBhaU1vZGVsU2VsZWN0O1xud2luZG93LmFjY2Vzc0NoYXRCdG4gPSBhY2Nlc3NDaGF0QnRuO1xud2luZG93LnNldHVwVGFza0NhcmRzID0gc2V0dXBUYXNrQ2FyZHM7XG53aW5kb3cudGFza1NlbGVjdGlvbiA9IHRhc2tTZWxlY3Rpb247XG5cbmV4cG9ydCB7fTtcbiJdLCJuYW1lcyI6WyJzZXR1cENvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzZXR1cEluZm9FbGVtZW50IiwiYWlNb2RlbFNlbGVjdCIsImFjY2Vzc0NoYXRCdG4iLCJzZXR1cFRhc2tDYXJkcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0YXNrU2VsZWN0aW9uIiwicXVlcnlTZWxlY3RvciIsImNoYXRDb250YWluZXIiLCJjaGF0TWVzc2FnZXMiLCJ1c2VySW5wdXQiLCJzZW5kQnRuIiwidHlwaW5nSW5kaWNhdG9yIiwiYmFja1RvU2V0dXBCdG4iLCJuZXdDaGF0QnRuIiwiY2hhdFJvb21MaXN0RWwiLCJ3aW5kb3ciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./scripts/core/dom.ts\n"));

/***/ }),

/***/ "./scripts/core/main.ts":
/*!******************************!*\
  !*** ./scripts/core/main.ts ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/**\n * main.ts\n *\n * ■ ページ初期化（DOMContentLoaded）\n *   - ログイン状態を /api/current_user で確認し、設定ボタンを「ログイン／ユーザーアイコン」に切替\n *   - localStorage から前回の currentChatRoomId を復元\n *   - タスクカードと「もっと見る」ボタンの初期化 (initToggleTasks / initSetupTaskCards)\n *   - 最初はセットアップ画面を表示し、チャットルーム一覧をロード\n *   - 復帰時にチャット履歴をロード（ローカル＋サーバー）\n *\n * ■ UI 操作のイベント登録\n *   - 新規チャット／これまでのチャットを見る／送信／Enter 送信\n *   - テキストエリアの自動高さ調整\n *   - 「戻る」ボタンでセットアップ画面へ\n *   - 画面クリックでチャットルームの３点メニューを閉じる\n *\n * ■ ユーザーメニュー表示 toggleUserMenu()\n *   - 「設定」「ログアウト」メニューを動的生成・表示・非表示\n */ function notifyAuthState(loggedIn) {\n    window.loggedIn = loggedIn;\n    document.dispatchEvent(new CustomEvent(\"authstatechange\", {\n        detail: {\n            loggedIn\n        }\n    }));\n}\nfunction initApp() {\n    const authButtons = document.getElementById(\"auth-buttons\");\n    const newPromptBtn = document.getElementById(\"openNewPromptModal\");\n    const accessChatBtn = document.getElementById(\"access-chat-btn\");\n    const userIconEl = document.getElementById(\"userIcon\");\n    const loginBtn = document.getElementById(\"login-btn\");\n    const newChatBtn = document.getElementById(\"new-chat-btn\");\n    const sendBtn = document.getElementById(\"send-btn\");\n    const userInput = document.getElementById(\"user-input\");\n    const backToSetupBtn = document.getElementById(\"back-to-setup\");\n    const chatMessages = document.getElementById(\"chat-messages\");\n    const callShowSetupForm = ()=>{\n        if (typeof window.showSetupForm === \"function\") window.showSetupForm();\n    };\n    const callSendMessage = ()=>{\n        if (typeof window.sendMessage === \"function\") window.sendMessage();\n    };\n    const applyAuthUI = (loggedIn)=>{\n        if (!authButtons || !userIconEl) return;\n        if (loggedIn) {\n            // ログイン時：認証ボタンは隠し、ユーザーアイコンを表示\n            authButtons.style.display = \"none\";\n            userIconEl.style.display = \"\";\n            if (newPromptBtn) newPromptBtn.style.display = \"\";\n            if (accessChatBtn) accessChatBtn.style.display = \"\";\n            if (window.initTaskOrderEditing) {\n                window.initTaskOrderEditing();\n            }\n        } else {\n            // 未ログイン時：認証ボタンだけ表示、ユーザーアイコンは隠す\n            authButtons.style.display = \"flex\";\n            userIconEl.style.display = \"none\";\n            if (loginBtn) {\n                loginBtn.onclick = ()=>{\n                    window.location.href = \"/login\";\n                };\n            }\n            // タスク編集ボタンが残っていたら削除\n            const editBtn = document.getElementById(\"edit-task-order-btn\");\n            if (editBtn) editBtn.remove();\n            // 新規プロンプト＆過去チャット閲覧ボタンを非表示\n            if (newPromptBtn) newPromptBtn.style.display = \"none\";\n            if (accessChatBtn) accessChatBtn.style.display = \"none\";\n        }\n    };\n    // ▼ログイン状態確認とUI制御\n    fetch(\"/api/current_user\").then((res)=>res.json()).then((data)=>{\n        const loggedIn = Boolean(data.logged_in);\n        notifyAuthState(loggedIn);\n        applyAuthUI(loggedIn);\n    }).catch((err)=>{\n        console.error(\"Error checking login status:\", err);\n        notifyAuthState(false);\n        applyAuthUI(false);\n    });\n    // ▼ローカルに保存されていれば現在のチャットルームを復元\n    if (localStorage.getItem(\"currentChatRoomId\")) {\n        window.currentChatRoomId = localStorage.getItem(\"currentChatRoomId\");\n    }\n    // ▼初期化\n    if (typeof window.initToggleTasks === \"function\") window.initToggleTasks();\n    if (typeof window.initSetupTaskCards === \"function\") window.initSetupTaskCards();\n    // 初期表示はセットアップ\n    callShowSetupForm();\n    if (typeof window.loadChatRooms === \"function\") window.loadChatRooms();\n    // 新規チャット\n    if (newChatBtn) {\n        newChatBtn.addEventListener(\"click\", ()=>{\n            window.currentChatRoomId = null;\n            localStorage.removeItem(\"currentChatRoomId\");\n            if (chatMessages) chatMessages.innerHTML = \"\";\n            callShowSetupForm();\n        });\n    }\n    // 「これまでのチャットを見る」\n    if (accessChatBtn) {\n        accessChatBtn.addEventListener(\"click\", ()=>{\n            fetch(\"/api/get_chat_rooms\").then((res)=>res.json()).then((data)=>{\n                const rooms = Array.isArray(data.rooms) ? data.rooms : [];\n                if (rooms.length > 0) {\n                    // 1件目が最も新しいルームなので切り替え\n                    if (typeof window.switchChatRoom === \"function\") window.switchChatRoom(String(rooms[0].id));\n                } else {\n                    // ルームがない場合は空のチャット画面を表示\n                    if (typeof window.showChatInterface === \"function\") window.showChatInterface();\n                    if (typeof window.loadChatRooms === \"function\") window.loadChatRooms();\n                    if (chatMessages) chatMessages.innerHTML = \"\";\n                }\n            }).catch((err)=>{\n                console.error(\"ルーム一覧取得失敗:\", err);\n                if (typeof window.showChatInterface === \"function\") window.showChatInterface();\n                if (typeof window.loadChatRooms === \"function\") window.loadChatRooms();\n                if (chatMessages) chatMessages.innerHTML = \"\";\n            });\n        });\n    }\n    // 送信\n    if (sendBtn) sendBtn.addEventListener(\"click\", callSendMessage);\n    // Enter 送信 (Shift+Enter で改行)\n    if (userInput) {\n        userInput.addEventListener(\"keypress\", (e)=>{\n            if (e.key === \"Enter\" && !e.shiftKey) {\n                e.preventDefault();\n                callSendMessage();\n            }\n        });\n        // テキストエリア高さ自動調整\n        userInput.addEventListener(\"input\", ()=>{\n            userInput.style.height = \"auto\";\n            userInput.style.height = \"\".concat(userInput.scrollHeight, \"px\");\n        });\n    }\n    // 戻るボタン\n    if (backToSetupBtn) backToSetupBtn.addEventListener(\"click\", callShowSetupForm);\n    // 画面クリックでサイドメニューの 3 点メニューを閉じる\n    document.addEventListener(\"click\", ()=>{\n        document.querySelectorAll(\".room-actions-menu\").forEach((menu)=>{\n            menu.style.display = \"none\";\n        });\n    });\n}\nif (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", initApp);\n} else {\n    initApp();\n}\n/* ▼ユーザーメニュー（設定 / ログアウト） ---------------------------------------*/ function toggleUserMenu() {\n    let menu = document.getElementById(\"user-menu\");\n    if (!menu) {\n        // メニュー要素を生成\n        menu = document.createElement(\"div\");\n        menu.id = \"user-menu\";\n        // スタイル設定（モバイル時は static、PC時は右上絶対配置）\n        Object.assign(menu.style, {\n            position: \"absolute\",\n            top: \"60px\",\n            right: \"10px\",\n            background: \"#fff\",\n            border: \"1px solid #ddd\",\n            borderRadius: \"6px\",\n            boxShadow: \"0 2px 4px rgba(0,0,0,.1)\",\n            zIndex: \"1001\",\n            minWidth: \"150px\",\n            overflow: \"hidden\"\n        });\n        document.body.appendChild(menu);\n        // メニュー内容\n        menu.innerHTML = '\\n      <div id=\"menu-settings\" style=\"\\n           padding:8px 16px; cursor:pointer; display:flex; align-items:center;\\n           color:#007bff; font-weight:bold; font-size:14px; border-bottom:1px solid #ddd;\\n           background:#f9f9f9;\">\\n        <i class=\"bi bi-gear\" style=\"margin-right:6px;font-size:16px;\"></i> 設定\\n      </div>\\n      <div id=\"menu-logout\" style=\"\\n           padding:8px 16px; cursor:pointer; display:flex; align-items:center;\\n           color:#dc3545; font-weight:bold; font-size:14px; background:#f9f9f9;\">\\n        <i class=\"bi bi-box-arrow-right\" style=\"margin-right:6px;font-size:16px;\"></i> ログアウト\\n      </div>';\n        // イベント登録\n        const settingsEl = document.getElementById(\"menu-settings\");\n        const logoutEl = document.getElementById(\"menu-logout\");\n        if (settingsEl) {\n            settingsEl.addEventListener(\"click\", ()=>{\n                window.location.href = \"/settings\";\n            });\n        }\n        if (logoutEl) {\n            logoutEl.addEventListener(\"click\", ()=>{\n                window.location.href = \"/logout\";\n            });\n        }\n        const [settingsItem, logoutItem] = [\n            settingsEl,\n            logoutEl\n        ];\n        if (settingsItem) {\n            settingsItem.addEventListener(\"mouseover\", ()=>{\n                settingsItem.style.background = \"#e6f0ff\";\n            });\n            settingsItem.addEventListener(\"mouseout\", ()=>{\n                settingsItem.style.background = \"#f9f9f9\";\n            });\n        }\n        if (logoutItem) {\n            logoutItem.addEventListener(\"mouseover\", ()=>{\n                logoutItem.style.background = \"#ffe6e6\";\n            });\n            logoutItem.addEventListener(\"mouseout\", ()=>{\n                logoutItem.style.background = \"#f9f9f9\";\n            });\n        }\n        // メニュー外クリックで非表示\n        document.addEventListener(\"click\", function docClick(e) {\n            const btn = document.getElementById(\"settings-btn\");\n            const target = e.target;\n            if (!target) return;\n            if (!(menu === null || menu === void 0 ? void 0 : menu.contains(target)) && (!btn || !btn.contains(target))) {\n                menu.style.display = \"none\";\n            }\n        });\n    }\n    // 表示/非表示トグル\n    menu.style.display = menu.style.display === \"block\" ? \"none\" : \"block\";\n}\nwindow.toggleUserMenu = toggleUserMenu;\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFXeEMsZ0JBQWdCLENBQUMsWUFBWTtnQkFDdEN3QyxXQUFXakUsS0FBSyxDQUFDcUQsVUFBVSxHQUFHO1lBQ2hDO1FBQ0Y7UUFFQSxnQkFBZ0I7UUFDaEIxRSxTQUFTOEMsZ0JBQWdCLENBQUMsU0FBUyxTQUFTeUMsU0FBUzlCLENBQUM7WUFDcEQsTUFBTStCLE1BQU14RixTQUFTTSxjQUFjLENBQUM7WUFDcEMsTUFBTW1GLFNBQVNoQyxFQUFFZ0MsTUFBTTtZQUN2QixJQUFJLENBQUNBLFFBQVE7WUFDYixJQUFJLEVBQUN4QixpQkFBQUEsMkJBQUFBLEtBQU15QixRQUFRLENBQUNELFlBQVksRUFBQ0QsT0FBTyxDQUFDQSxJQUFJRSxRQUFRLENBQUNELE9BQU0sR0FBSTtnQkFDOUR4QixLQUFLNUMsS0FBSyxDQUFDQyxPQUFPLEdBQUc7WUFDdkI7UUFDRjtJQUNGO0lBRUEsWUFBWTtJQUNaMkMsS0FBSzVDLEtBQUssQ0FBQ0MsT0FBTyxHQUFHMkMsS0FBSzVDLEtBQUssQ0FBQ0MsT0FBTyxLQUFLLFVBQVUsU0FBUztBQUNqRTtBQUVBdkIsT0FBT29FLGNBQWMsR0FBR0E7QUFFZCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zY3JpcHRzL2NvcmUvbWFpbi50cz80NWIzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogbWFpbi50c1xuICpcbiAqIOKWoCDjg5rjg7zjgrjliJ3mnJ/ljJbvvIhET01Db250ZW50TG9hZGVk77yJXG4gKiAgIC0g44Ot44Kw44Kk44Oz54q25oWL44KSIC9hcGkvY3VycmVudF91c2VyIOOBp+eiuuiqjeOBl+OAgeioreWumuODnOOCv+ODs+OCkuOAjOODreOCsOOCpOODs++8j+ODpuODvOOCtuODvOOCouOCpOOCs+ODs+OAjeOBq+WIh+abv1xuICogICAtIGxvY2FsU3RvcmFnZSDjgYvjgonliY3lm57jga4gY3VycmVudENoYXRSb29tSWQg44KS5b6p5YWDXG4gKiAgIC0g44K/44K544Kv44Kr44O844OJ44Go44CM44KC44Gj44Go6KaL44KL44CN44Oc44K/44Oz44Gu5Yid5pyf5YyWIChpbml0VG9nZ2xlVGFza3MgLyBpbml0U2V0dXBUYXNrQ2FyZHMpXG4gKiAgIC0g5pyA5Yid44Gv44K744OD44OI44Ki44OD44OX55S76Z2i44KS6KGo56S644GX44CB44OB44Oj44OD44OI44Or44O844Og5LiA6Kan44KS44Ot44O844OJXG4gKiAgIC0g5b6p5biw5pmC44Gr44OB44Oj44OD44OI5bGl5q2044KS44Ot44O844OJ77yI44Ot44O844Kr44Or77yL44K144O844OQ44O877yJXG4gKlxuICog4pagIFVJIOaTjeS9nOOBruOCpOODmeODs+ODiOeZu+mMslxuICogICAtIOaWsOimj+ODgeODo+ODg+ODiO+8j+OBk+OCjOOBvuOBp+OBruODgeODo+ODg+ODiOOCkuimi+OCi++8j+mAgeS/oe+8j0VudGVyIOmAgeS/oVxuICogICAtIOODhuOCreOCueODiOOCqOODquOCouOBruiHquWLlemrmOOBleiqv+aVtFxuICogICAtIOOAjOaIu+OCi+OAjeODnOOCv+ODs+OBp+OCu+ODg+ODiOOCouODg+ODl+eUu+mdouOBuFxuICogICAtIOeUu+mdouOCr+ODquODg+OCr+OBp+ODgeODo+ODg+ODiOODq+ODvOODoOOBru+8k+eCueODoeODi+ODpeODvOOCkumWieOBmOOCi1xuICpcbiAqIOKWoCDjg6bjg7zjgrbjg7zjg6Hjg4vjg6Xjg7zooajnpLogdG9nZ2xlVXNlck1lbnUoKVxuICogICAtIOOAjOioreWumuOAjeOAjOODreOCsOOCouOCpuODiOOAjeODoeODi+ODpeODvOOCkuWLleeahOeUn+aIkOODu+ihqOekuuODu+mdnuihqOekulxuICovXG5cbmZ1bmN0aW9uIG5vdGlmeUF1dGhTdGF0ZShsb2dnZWRJbjogYm9vbGVhbikge1xuICB3aW5kb3cubG9nZ2VkSW4gPSBsb2dnZWRJbjtcbiAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChcbiAgICBuZXcgQ3VzdG9tRXZlbnQoXCJhdXRoc3RhdGVjaGFuZ2VcIiwge1xuICAgICAgZGV0YWlsOiB7IGxvZ2dlZEluIH1cbiAgICB9KVxuICApO1xufVxuXG5mdW5jdGlvbiBpbml0QXBwKCkge1xuICBjb25zdCBhdXRoQnV0dG9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXV0aC1idXR0b25zXCIpO1xuICBjb25zdCBuZXdQcm9tcHRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9wZW5OZXdQcm9tcHRNb2RhbFwiKTtcbiAgY29uc3QgYWNjZXNzQ2hhdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWNjZXNzLWNoYXQtYnRuXCIpO1xuICBjb25zdCB1c2VySWNvbkVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VySWNvblwiKTtcbiAgY29uc3QgbG9naW5CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvZ2luLWJ0blwiKTtcbiAgY29uc3QgbmV3Q2hhdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3LWNoYXQtYnRuXCIpO1xuICBjb25zdCBzZW5kQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZW5kLWJ0blwiKTtcbiAgY29uc3QgdXNlcklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyLWlucHV0XCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsO1xuICBjb25zdCBiYWNrVG9TZXR1cEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFjay10by1zZXR1cFwiKTtcbiAgY29uc3QgY2hhdE1lc3NhZ2VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGF0LW1lc3NhZ2VzXCIpO1xuXG4gIGNvbnN0IGNhbGxTaG93U2V0dXBGb3JtID0gKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93LnNob3dTZXR1cEZvcm0gPT09IFwiZnVuY3Rpb25cIikgd2luZG93LnNob3dTZXR1cEZvcm0oKTtcbiAgfTtcblxuICBjb25zdCBjYWxsU2VuZE1lc3NhZ2UgPSAoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cuc2VuZE1lc3NhZ2UgPT09IFwiZnVuY3Rpb25cIikgd2luZG93LnNlbmRNZXNzYWdlKCk7XG4gIH07XG5cbiAgY29uc3QgYXBwbHlBdXRoVUkgPSAobG9nZ2VkSW46IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoIWF1dGhCdXR0b25zIHx8ICF1c2VySWNvbkVsKSByZXR1cm47XG5cbiAgICBpZiAobG9nZ2VkSW4pIHtcbiAgICAgIC8vIOODreOCsOOCpOODs+aZgu+8muiqjeiovOODnOOCv+ODs+OBr+maoOOBl+OAgeODpuODvOOCtuODvOOCouOCpOOCs+ODs+OCkuihqOekulxuICAgICAgYXV0aEJ1dHRvbnMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgdXNlckljb25FbC5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcblxuICAgICAgaWYgKG5ld1Byb21wdEJ0bikgbmV3UHJvbXB0QnRuLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgaWYgKGFjY2Vzc0NoYXRCdG4pIGFjY2Vzc0NoYXRCdG4uc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cbiAgICAgIGlmICh3aW5kb3cuaW5pdFRhc2tPcmRlckVkaXRpbmcpIHtcbiAgICAgICAgd2luZG93LmluaXRUYXNrT3JkZXJFZGl0aW5nKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOacquODreOCsOOCpOODs+aZgu+8muiqjeiovOODnOOCv+ODs+OBoOOBkeihqOekuuOAgeODpuODvOOCtuODvOOCouOCpOOCs+ODs+OBr+maoOOBmVxuICAgICAgYXV0aEJ1dHRvbnMuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgdXNlckljb25FbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgIGlmIChsb2dpbkJ0bikge1xuICAgICAgICBsb2dpbkJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvbG9naW5cIjtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8g44K/44K544Kv57eo6ZuG44Oc44K/44Oz44GM5q6L44Gj44Gm44GE44Gf44KJ5YmK6ZmkXG4gICAgICBjb25zdCBlZGl0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LXRhc2stb3JkZXItYnRuXCIpO1xuICAgICAgaWYgKGVkaXRCdG4pIGVkaXRCdG4ucmVtb3ZlKCk7XG5cbiAgICAgIC8vIOaWsOimj+ODl+ODreODs+ODl+ODiO+8humBjuWOu+ODgeODo+ODg+ODiOmWsuimp+ODnOOCv+ODs+OCkumdnuihqOekulxuICAgICAgaWYgKG5ld1Byb21wdEJ0bikgbmV3UHJvbXB0QnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIGlmIChhY2Nlc3NDaGF0QnRuKSBhY2Nlc3NDaGF0QnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG4gIH07XG5cbiAgLy8g4pa844Ot44Kw44Kk44Oz54q25oWL56K66KqN44GoVUnliLblvqFcbiAgZmV0Y2goXCIvYXBpL2N1cnJlbnRfdXNlclwiKVxuICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGNvbnN0IGxvZ2dlZEluID0gQm9vbGVhbihkYXRhLmxvZ2dlZF9pbik7XG4gICAgICBub3RpZnlBdXRoU3RhdGUobG9nZ2VkSW4pO1xuICAgICAgYXBwbHlBdXRoVUkobG9nZ2VkSW4pO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjaGVja2luZyBsb2dpbiBzdGF0dXM6XCIsIGVycik7XG4gICAgICBub3RpZnlBdXRoU3RhdGUoZmFsc2UpO1xuICAgICAgYXBwbHlBdXRoVUkoZmFsc2UpO1xuICAgIH0pO1xuXG4gIC8vIOKWvOODreODvOOCq+ODq+OBq+S/neWtmOOBleOCjOOBpuOBhOOCjOOBsOePvuWcqOOBruODgeODo+ODg+ODiOODq+ODvOODoOOCkuW+qeWFg1xuICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50Q2hhdFJvb21JZFwiKSkge1xuICAgIHdpbmRvdy5jdXJyZW50Q2hhdFJvb21JZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudENoYXRSb29tSWRcIik7XG4gIH1cblxuICAvLyDilrzliJ3mnJ/ljJZcbiAgaWYgKHR5cGVvZiB3aW5kb3cuaW5pdFRvZ2dsZVRhc2tzID09PSBcImZ1bmN0aW9uXCIpIHdpbmRvdy5pbml0VG9nZ2xlVGFza3MoKTtcbiAgaWYgKHR5cGVvZiB3aW5kb3cuaW5pdFNldHVwVGFza0NhcmRzID09PSBcImZ1bmN0aW9uXCIpIHdpbmRvdy5pbml0U2V0dXBUYXNrQ2FyZHMoKTtcblxuICAvLyDliJ3mnJ/ooajnpLrjga/jgrvjg4Pjg4jjgqLjg4Pjg5dcbiAgY2FsbFNob3dTZXR1cEZvcm0oKTtcbiAgaWYgKHR5cGVvZiB3aW5kb3cubG9hZENoYXRSb29tcyA9PT0gXCJmdW5jdGlvblwiKSB3aW5kb3cubG9hZENoYXRSb29tcygpO1xuXG4gIC8vIOaWsOimj+ODgeODo+ODg+ODiFxuICBpZiAobmV3Q2hhdEJ0bikge1xuICAgIG5ld0NoYXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHdpbmRvdy5jdXJyZW50Q2hhdFJvb21JZCA9IG51bGw7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImN1cnJlbnRDaGF0Um9vbUlkXCIpO1xuICAgICAgaWYgKGNoYXRNZXNzYWdlcykgY2hhdE1lc3NhZ2VzLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICBjYWxsU2hvd1NldHVwRm9ybSgpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8g44CM44GT44KM44G+44Gn44Gu44OB44Oj44OD44OI44KS6KaL44KL44CNXG4gIGlmIChhY2Nlc3NDaGF0QnRuKSB7XG4gICAgYWNjZXNzQ2hhdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgZmV0Y2goXCIvYXBpL2dldF9jaGF0X3Jvb21zXCIpXG4gICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgY29uc3Qgcm9vbXMgPSBBcnJheS5pc0FycmF5KGRhdGEucm9vbXMpID8gZGF0YS5yb29tcyA6IFtdO1xuICAgICAgICAgIGlmIChyb29tcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyAx5Lu255uu44GM5pyA44KC5paw44GX44GE44Or44O844Og44Gq44Gu44Gn5YiH44KK5pu/44GIXG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5zd2l0Y2hDaGF0Um9vbSA9PT0gXCJmdW5jdGlvblwiKSB3aW5kb3cuc3dpdGNoQ2hhdFJvb20oU3RyaW5nKHJvb21zWzBdLmlkKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOODq+ODvOODoOOBjOOBquOBhOWgtOWQiOOBr+epuuOBruODgeODo+ODg+ODiOeUu+mdouOCkuihqOekulxuICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuc2hvd0NoYXRJbnRlcmZhY2UgPT09IFwiZnVuY3Rpb25cIikgd2luZG93LnNob3dDaGF0SW50ZXJmYWNlKCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5sb2FkQ2hhdFJvb21zID09PSBcImZ1bmN0aW9uXCIpIHdpbmRvdy5sb2FkQ2hhdFJvb21zKCk7XG4gICAgICAgICAgICBpZiAoY2hhdE1lc3NhZ2VzKSBjaGF0TWVzc2FnZXMuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIuODq+ODvOODoOS4gOimp+WPluW+l+WkseaVlzpcIiwgZXJyKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5zaG93Q2hhdEludGVyZmFjZSA9PT0gXCJmdW5jdGlvblwiKSB3aW5kb3cuc2hvd0NoYXRJbnRlcmZhY2UoKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5sb2FkQ2hhdFJvb21zID09PSBcImZ1bmN0aW9uXCIpIHdpbmRvdy5sb2FkQ2hhdFJvb21zKCk7XG4gICAgICAgICAgaWYgKGNoYXRNZXNzYWdlcykgY2hhdE1lc3NhZ2VzLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8g6YCB5L+hXG4gIGlmIChzZW5kQnRuKSBzZW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjYWxsU2VuZE1lc3NhZ2UpO1xuXG4gIC8vIEVudGVyIOmAgeS/oSAoU2hpZnQrRW50ZXIg44Gn5pS56KGMKVxuICBpZiAodXNlcklucHV0KSB7XG4gICAgdXNlcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjYWxsU2VuZE1lc3NhZ2UoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIOODhuOCreOCueODiOOCqOODquOCoumrmOOBleiHquWLleiqv+aVtFxuICAgIHVzZXJJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgdXNlcklucHV0LnN0eWxlLmhlaWdodCA9IFwiYXV0b1wiO1xuICAgICAgdXNlcklucHV0LnN0eWxlLmhlaWdodCA9IGAke3VzZXJJbnB1dC5zY3JvbGxIZWlnaHR9cHhgO1xuICAgIH0pO1xuICB9XG5cbiAgLy8g5oi744KL44Oc44K/44OzXG4gIGlmIChiYWNrVG9TZXR1cEJ0bikgYmFja1RvU2V0dXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNhbGxTaG93U2V0dXBGb3JtKTtcblxuICAvLyDnlLvpnaLjgq/jg6rjg4Pjgq/jgafjgrXjgqTjg4njg6Hjg4vjg6Xjg7zjga4gMyDngrnjg6Hjg4vjg6Xjg7zjgpLplonjgZjjgotcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PihcIi5yb29tLWFjdGlvbnMtbWVudVwiKS5mb3JFYWNoKChtZW51KSA9PiB7XG4gICAgICBtZW51LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImxvYWRpbmdcIikge1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBpbml0QXBwKTtcbn0gZWxzZSB7XG4gIGluaXRBcHAoKTtcbn1cblxuLyog4pa844Om44O844K244O844Oh44OL44Ol44O877yI6Kit5a6aIC8g44Ot44Kw44Ki44Km44OI77yJIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5mdW5jdGlvbiB0b2dnbGVVc2VyTWVudSgpIHtcbiAgbGV0IG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXItbWVudVwiKSBhcyBIVE1MRGl2RWxlbWVudCB8IG51bGw7XG5cbiAgaWYgKCFtZW51KSB7XG4gICAgLy8g44Oh44OL44Ol44O86KaB57Sg44KS55Sf5oiQXG4gICAgbWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbWVudS5pZCA9IFwidXNlci1tZW51XCI7XG5cbiAgICAvLyDjgrnjgr/jgqTjg6voqK3lrprvvIjjg6Ljg5DjgqTjg6vmmYLjga8gc3RhdGlj44CBUEPmmYLjga/lj7PkuIrntbblr77phY3nva7vvIlcbiAgICBPYmplY3QuYXNzaWduKG1lbnUuc3R5bGUsIHtcbiAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICB0b3A6IFwiNjBweFwiLCAvLyDoqK3lrprjgqLjgqTjgrPjg7PkuIvjgasgMTBweCDjg57jg7zjgrjjg7NcbiAgICAgIHJpZ2h0OiBcIjEwcHhcIixcbiAgICAgIGJhY2tncm91bmQ6IFwiI2ZmZlwiLFxuICAgICAgYm9yZGVyOiBcIjFweCBzb2xpZCAjZGRkXCIsXG4gICAgICBib3JkZXJSYWRpdXM6IFwiNnB4XCIsXG4gICAgICBib3hTaGFkb3c6IFwiMCAycHggNHB4IHJnYmEoMCwwLDAsLjEpXCIsXG4gICAgICB6SW5kZXg6IFwiMTAwMVwiLFxuICAgICAgbWluV2lkdGg6IFwiMTUwcHhcIixcbiAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiXG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1lbnUpO1xuXG4gICAgLy8g44Oh44OL44Ol44O85YaF5a65XG4gICAgbWVudS5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGlkPVwibWVudS1zZXR0aW5nc1wiIHN0eWxlPVwiXG4gICAgICAgICAgIHBhZGRpbmc6OHB4IDE2cHg7IGN1cnNvcjpwb2ludGVyOyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjtcbiAgICAgICAgICAgY29sb3I6IzAwN2JmZjsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjE0cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNkZGQ7XG4gICAgICAgICAgIGJhY2tncm91bmQ6I2Y5ZjlmOTtcIj5cbiAgICAgICAgPGkgY2xhc3M9XCJiaSBiaS1nZWFyXCIgc3R5bGU9XCJtYXJnaW4tcmlnaHQ6NnB4O2ZvbnQtc2l6ZToxNnB4O1wiPjwvaT4g6Kit5a6aXG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgaWQ9XCJtZW51LWxvZ291dFwiIHN0eWxlPVwiXG4gICAgICAgICAgIHBhZGRpbmc6OHB4IDE2cHg7IGN1cnNvcjpwb2ludGVyOyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjtcbiAgICAgICAgICAgY29sb3I6I2RjMzU0NTsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjE0cHg7IGJhY2tncm91bmQ6I2Y5ZjlmOTtcIj5cbiAgICAgICAgPGkgY2xhc3M9XCJiaSBiaS1ib3gtYXJyb3ctcmlnaHRcIiBzdHlsZT1cIm1hcmdpbi1yaWdodDo2cHg7Zm9udC1zaXplOjE2cHg7XCI+PC9pPiDjg63jgrDjgqLjgqbjg4hcbiAgICAgIDwvZGl2PmA7XG5cbiAgICAvLyDjgqTjg5njg7Pjg4jnmbvpjLJcbiAgICBjb25zdCBzZXR0aW5nc0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZW51LXNldHRpbmdzXCIpO1xuICAgIGNvbnN0IGxvZ291dEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZW51LWxvZ291dFwiKTtcbiAgICBpZiAoc2V0dGluZ3NFbCkge1xuICAgICAgc2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL3NldHRpbmdzXCI7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGxvZ291dEVsKSB7XG4gICAgICBsb2dvdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL2xvZ291dFwiO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgW3NldHRpbmdzSXRlbSwgbG9nb3V0SXRlbV0gPSBbc2V0dGluZ3NFbCwgbG9nb3V0RWxdO1xuICAgIGlmIChzZXR0aW5nc0l0ZW0pIHtcbiAgICAgIHNldHRpbmdzSXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsICgpID0+IHtcbiAgICAgICAgc2V0dGluZ3NJdGVtLnN0eWxlLmJhY2tncm91bmQgPSBcIiNlNmYwZmZcIjtcbiAgICAgIH0pO1xuICAgICAgc2V0dGluZ3NJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XG4gICAgICAgIHNldHRpbmdzSXRlbS5zdHlsZS5iYWNrZ3JvdW5kID0gXCIjZjlmOWY5XCI7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGxvZ291dEl0ZW0pIHtcbiAgICAgIGxvZ291dEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCAoKSA9PiB7XG4gICAgICAgIGxvZ291dEl0ZW0uc3R5bGUuYmFja2dyb3VuZCA9IFwiI2ZmZTZlNlwiO1xuICAgICAgfSk7XG4gICAgICBsb2dvdXRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XG4gICAgICAgIGxvZ291dEl0ZW0uc3R5bGUuYmFja2dyb3VuZCA9IFwiI2Y5ZjlmOVwiO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g44Oh44OL44Ol44O85aSW44Kv44Oq44OD44Kv44Gn6Z2e6KGo56S6XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIGRvY0NsaWNrKGUpIHtcbiAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2V0dGluZ3MtYnRuXCIpO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgTm9kZSB8IG51bGw7XG4gICAgICBpZiAoIXRhcmdldCkgcmV0dXJuO1xuICAgICAgaWYgKCFtZW51Py5jb250YWlucyh0YXJnZXQpICYmICghYnRuIHx8ICFidG4uY29udGFpbnModGFyZ2V0KSkpIHtcbiAgICAgICAgbWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyDooajnpLov6Z2e6KGo56S644OI44Kw44OrXG4gIG1lbnUuc3R5bGUuZGlzcGxheSA9IG1lbnUuc3R5bGUuZGlzcGxheSA9PT0gXCJibG9ja1wiID8gXCJub25lXCIgOiBcImJsb2NrXCI7XG59XG5cbndpbmRvdy50b2dnbGVVc2VyTWVudSA9IHRvZ2dsZVVzZXJNZW51O1xuXG5leHBvcnQge307XG4iXSwibmFtZXMiOlsibm90aWZ5QXV0aFN0YXRlIiwibG9nZ2VkSW4iLCJ3aW5kb3ciLCJkb2N1bWVudCIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsImluaXRBcHAiLCJhdXRoQnV0dG9ucyIsImdldEVsZW1lbnRCeUlkIiwibmV3UHJvbXB0QnRuIiwiYWNjZXNzQ2hhdEJ0biIsInVzZXJJY29uRWwiLCJsb2dpbkJ0biIsIm5ld0NoYXRCdG4iLCJzZW5kQnRuIiwidXNlcklucHV0IiwiYmFja1RvU2V0dXBCdG4iLCJjaGF0TWVzc2FnZXMiLCJjYWxsU2hvd1NldHVwRm9ybSIsInNob3dTZXR1cEZvcm0iLCJjYWxsU2VuZE1lc3NhZ2UiLCJzZW5kTWVzc2FnZSIsImFwcGx5QXV0aFVJIiwic3R5bGUiLCJkaXNwbGF5IiwiaW5pdFRhc2tPcmRlckVkaXRpbmciLCJvbmNsaWNrIiwibG9jYXRpb24iLCJocmVmIiwiZWRpdEJ0biIsInJlbW92ZSIsImZldGNoIiwidGhlbiIsInJlcyIsImpzb24iLCJkYXRhIiwiQm9vbGVhbiIsImxvZ2dlZF9pbiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImN1cnJlbnRDaGF0Um9vbUlkIiwiaW5pdFRvZ2dsZVRhc2tzIiwiaW5pdFNldHVwVGFza0NhcmRzIiwibG9hZENoYXRSb29tcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVJdGVtIiwiaW5uZXJIVE1MIiwicm9vbXMiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJzd2l0Y2hDaGF0Um9vbSIsIlN0cmluZyIsImlkIiwic2hvd0NoYXRJbnRlcmZhY2UiLCJlIiwia2V5Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsImhlaWdodCIsInNjcm9sbEhlaWdodCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwibWVudSIsInJlYWR5U3RhdGUiLCJ0b2dnbGVVc2VyTWVudSIsImNyZWF0ZUVsZW1lbnQiLCJPYmplY3QiLCJhc3NpZ24iLCJwb3NpdGlvbiIsInRvcCIsInJpZ2h0IiwiYmFja2dyb3VuZCIsImJvcmRlciIsImJvcmRlclJhZGl1cyIsImJveFNoYWRvdyIsInpJbmRleCIsIm1pbldpZHRoIiwib3ZlcmZsb3ciLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJzZXR0aW5nc0VsIiwibG9nb3V0RWwiLCJzZXR0aW5nc0l0ZW0iLCJsb2dvdXRJdGVtIiwiZG9jQ2xpY2siLCJidG4iLCJ0YXJnZXQiLCJjb250YWlucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scripts/core/main.ts\n"));

/***/ }),

/***/ "./scripts/entries/chat.ts":
/*!*********************************!*\
  !*** ./scripts/entries/chat.ts ***!
  \*********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/dom */ \"./scripts/core/dom.ts\");\n/* harmony import */ var _chat_message_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../chat/message_utils */ \"./scripts/chat/message_utils.ts\");\n/* harmony import */ var _chat_chat_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../chat/chat_ui */ \"./scripts/chat/chat_ui.ts\");\n/* harmony import */ var _chat_chat_messages__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../chat/chat_messages */ \"./scripts/chat/chat_messages.ts\");\n/* harmony import */ var _chat_chat_history__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../chat/chat_history */ \"./scripts/chat/chat_history.ts\");\n/* harmony import */ var _chat_chat_rooms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../chat/chat_rooms */ \"./scripts/chat/chat_rooms.ts\");\n/* harmony import */ var _chat_chat_controller__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../chat/chat_controller */ \"./scripts/chat/chat_controller.ts\");\n/* harmony import */ var _setup_setup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../setup/setup */ \"./scripts/setup/setup.ts\");\n/* harmony import */ var _core_main__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/main */ \"./scripts/core/main.ts\");\n/* harmony import */ var _setup_task_manager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../setup/task_manager */ \"./scripts/setup/task_manager.ts\");\n/* harmony import */ var _setup_new_prompt_modal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../setup/new_prompt_modal */ \"./scripts/setup/new_prompt_modal.ts\");\n/* harmony import */ var _components_popup_menu__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/popup_menu */ \"./scripts/components/popup_menu.ts\");\n/* harmony import */ var _components_chat_popup_menu__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../components/chat/popup_menu */ \"./scripts/components/chat/popup_menu.ts\");\n/* harmony import */ var _components_user_icon__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../components/user_icon */ \"./scripts/components/user_icon.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHRzL2VudHJpZXMvY2hhdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBcUI7QUFDVTtBQUNOO0FBQ007QUFDRDtBQUNGO0FBQ0s7QUFDVDtBQUNGO0FBQ1M7QUFDSTtBQUNEO0FBQ0s7QUFDTiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zY3JpcHRzL2VudHJpZXMvY2hhdC50cz8xNzg1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIi4uL2NvcmUvZG9tXCI7XG5pbXBvcnQgXCIuLi9jaGF0L21lc3NhZ2VfdXRpbHNcIjtcbmltcG9ydCBcIi4uL2NoYXQvY2hhdF91aVwiO1xuaW1wb3J0IFwiLi4vY2hhdC9jaGF0X21lc3NhZ2VzXCI7XG5pbXBvcnQgXCIuLi9jaGF0L2NoYXRfaGlzdG9yeVwiO1xuaW1wb3J0IFwiLi4vY2hhdC9jaGF0X3Jvb21zXCI7XG5pbXBvcnQgXCIuLi9jaGF0L2NoYXRfY29udHJvbGxlclwiO1xuaW1wb3J0IFwiLi4vc2V0dXAvc2V0dXBcIjtcbmltcG9ydCBcIi4uL2NvcmUvbWFpblwiO1xuaW1wb3J0IFwiLi4vc2V0dXAvdGFza19tYW5hZ2VyXCI7XG5pbXBvcnQgXCIuLi9zZXR1cC9uZXdfcHJvbXB0X21vZGFsXCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL3BvcHVwX21lbnVcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvY2hhdC9wb3B1cF9tZW51XCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL3VzZXJfaWNvblwiO1xuXG5leHBvcnQge307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scripts/entries/chat.ts\n"));

/***/ }),

/***/ "./scripts/setup/new_prompt_modal.ts":
/*!*******************************************!*\
  !*** ./scripts/setup/new_prompt_modal.ts ***!
  \*******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\nfunction initNewPromptModal() {\n    const openModalBtn = document.getElementById(\"openNewPromptModal\");\n    const plusIcon = openModalBtn === null || openModalBtn === void 0 ? void 0 : openModalBtn.querySelector(\".bi-plus-lg\");\n    const newPromptModal = document.getElementById(\"newPromptModal\");\n    const modalCloseBtn = document.getElementById(\"newModalCloseBtn\");\n    const guardrailCheckbox = document.getElementById(\"new-guardrail-checkbox\");\n    const guardrailFields = document.getElementById(\"new-guardrail-fields\");\n    const newPostForm = document.getElementById(\"newPostForm\");\n    const togglePlusRotation = function(isRotated) {\n        let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n        if (!openModalBtn) return;\n        const { animate = true } = options;\n        if (!animate && plusIcon) {\n            plusIcon.classList.add(\"no-transition\");\n            openModalBtn.classList.toggle(\"is-rotated\", Boolean(isRotated));\n            requestAnimationFrame(()=>{\n                plusIcon.classList.remove(\"no-transition\");\n            });\n            return;\n        }\n        openModalBtn.classList.toggle(\"is-rotated\", Boolean(isRotated));\n    };\n    const closeModal = function() {\n        let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n        if (!newPromptModal) return;\n        newPromptModal.classList.remove(\"show\");\n        if (options.skipRotation) {\n            if (openModalBtn) {\n                openModalBtn.classList.remove(\"is-rotated\");\n            }\n            return;\n        }\n        togglePlusRotation(false, {\n            animate: Boolean(options.animateRotation)\n        });\n    };\n    const openModal = (options)=>{\n        if (!newPromptModal) return;\n        newPromptModal.classList.add(\"show\");\n        togglePlusRotation(true, {\n            animate: Boolean(options === null || options === void 0 ? void 0 : options.animateRotation)\n        });\n    };\n    // 初期表示では回転アニメーションを発火させない\n    if (newPromptModal === null || newPromptModal === void 0 ? void 0 : newPromptModal.classList.contains(\"show\")) {\n        closeModal({\n            skipRotation: true\n        });\n    } else if (openModalBtn) {\n        openModalBtn.classList.remove(\"is-rotated\");\n    }\n    // ＋ボタンを押すとモーダル表示\n    if (openModalBtn && newPromptModal) {\n        openModalBtn.addEventListener(\"click\", function(e) {\n            e.preventDefault();\n            if (newPromptModal.classList.contains(\"show\")) {\n                closeModal({\n                    animateRotation: true\n                });\n            } else {\n                openModal({\n                    animateRotation: true\n                });\n            }\n        });\n    }\n    // 閉じるボタンでモーダルを閉じる\n    if (modalCloseBtn) {\n        modalCloseBtn.addEventListener(\"click\", function(e) {\n            e.preventDefault();\n            closeModal();\n        });\n    }\n    // モーダル背景クリックで閉じる\n    if (newPromptModal) {\n        newPromptModal.addEventListener(\"click\", function(e) {\n            if (e.target === newPromptModal) {\n                closeModal();\n            }\n        });\n    }\n    // ガードレールチェックボックスで入出力例部分の表示切替\n    if (guardrailCheckbox && guardrailFields) {\n        guardrailCheckbox.addEventListener(\"change\", function() {\n            guardrailFields.style.display = guardrailCheckbox.checked ? \"block\" : \"none\";\n        });\n    }\n    // モーダル内フォームの送信\n    if (newPostForm) {\n        newPostForm.addEventListener(\"submit\", function(e) {\n            e.preventDefault();\n            const titleInput = document.getElementById(\"new-prompt-title\");\n            const contentInput = document.getElementById(\"new-prompt-content\");\n            if (!titleInput || !contentInput) {\n                alert(\"入力欄が見つかりませんでした。\");\n                return;\n            }\n            // 各入力項目の値を取得\n            const title = titleInput.value;\n            const content = contentInput.value;\n            let inputExample = \"\";\n            let outputExample = \"\";\n            if (guardrailCheckbox === null || guardrailCheckbox === void 0 ? void 0 : guardrailCheckbox.checked) {\n                const inputEl = document.getElementById(\"new-prompt-input-example\");\n                const outputEl = document.getElementById(\"new-prompt-output-example\");\n                inputExample = inputEl ? inputEl.value : \"\";\n                outputExample = outputEl ? outputEl.value : \"\";\n            }\n            const data = {\n                title: title,\n                prompt_content: content,\n                input_examples: inputExample,\n                output_examples: outputExample\n            };\n            // POST リクエストでサーバーに送信\n            fetch(\"/api/add_task\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(data)\n            }).then((response)=>response.json()).then((result)=>{\n                if (result.message) {\n                    alert(result.message);\n                    newPostForm.reset();\n                    if (guardrailFields) guardrailFields.style.display = \"none\";\n                    closeModal();\n                    // ここでタスク一覧を更新する\n                    if (window.loadTaskCards) window.loadTaskCards();\n                } else {\n                    alert(\"エラー: \" + result.error);\n                }\n            }).catch((error)=>{\n                alert(\"エラーが発生しました: \" + error);\n            });\n        });\n    }\n}\nif (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", initNewPromptModal);\n} else {\n    initNewPromptModal();\n}\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxLQUFLO29CQUNqQixJQUFJakQsaUJBQWlCQSxnQkFBZ0JxQixLQUFLLENBQUNDLE9BQU8sR0FBRztvQkFDckRWO29CQUVBLGdCQUFnQjtvQkFDaEIsSUFBSXNDLE9BQU9DLGFBQWEsRUFBRUQsT0FBT0MsYUFBYTtnQkFDaEQsT0FBTztvQkFDTHpCLE1BQU0sVUFBVXFCLE9BQU9LLEtBQUs7Z0JBQzlCO1lBQ0YsR0FDQ0MsS0FBSyxDQUFDLENBQUNEO2dCQUNOMUIsTUFBTSxpQkFBaUIwQjtZQUN6QjtRQUNKO0lBQ0Y7QUFDRjtBQUVBLElBQUkzRCxTQUFTNkQsVUFBVSxLQUFLLFdBQVc7SUFDckM3RCxTQUFTd0IsZ0JBQWdCLENBQUMsb0JBQW9CMUI7QUFDaEQsT0FBTztJQUNMQTtBQUNGO0FBRVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc2NyaXB0cy9zZXR1cC9uZXdfcHJvbXB0X21vZGFsLnRzPzg5M2MiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gaW5pdE5ld1Byb21wdE1vZGFsKCkge1xuICBjb25zdCBvcGVuTW9kYWxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9wZW5OZXdQcm9tcHRNb2RhbFwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGw7XG4gIGNvbnN0IHBsdXNJY29uID0gb3Blbk1vZGFsQnRuPy5xdWVyeVNlbGVjdG9yKFwiLmJpLXBsdXMtbGdcIikgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuICBjb25zdCBuZXdQcm9tcHRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3UHJvbXB0TW9kYWxcIik7XG4gIGNvbnN0IG1vZGFsQ2xvc2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ld01vZGFsQ2xvc2VCdG5cIik7XG4gIGNvbnN0IGd1YXJkcmFpbENoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXctZ3VhcmRyYWlsLWNoZWNrYm94XCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsO1xuICBjb25zdCBndWFyZHJhaWxGaWVsZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1ndWFyZHJhaWwtZmllbGRzXCIpO1xuICBjb25zdCBuZXdQb3N0Rm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3UG9zdEZvcm1cIikgYXMgSFRNTEZvcm1FbGVtZW50IHwgbnVsbDtcblxuICBjb25zdCB0b2dnbGVQbHVzUm90YXRpb24gPSAoaXNSb3RhdGVkOiBib29sZWFuLCBvcHRpb25zOiB7IGFuaW1hdGU/OiBib29sZWFuIH0gPSB7fSkgPT4ge1xuICAgIGlmICghb3Blbk1vZGFsQnRuKSByZXR1cm47XG5cbiAgICBjb25zdCB7IGFuaW1hdGUgPSB0cnVlIH0gPSBvcHRpb25zO1xuXG4gICAgaWYgKCFhbmltYXRlICYmIHBsdXNJY29uKSB7XG4gICAgICBwbHVzSWNvbi5jbGFzc0xpc3QuYWRkKFwibm8tdHJhbnNpdGlvblwiKTtcbiAgICAgIG9wZW5Nb2RhbEJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtcm90YXRlZFwiLCBCb29sZWFuKGlzUm90YXRlZCkpO1xuXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBwbHVzSWNvbi5jbGFzc0xpc3QucmVtb3ZlKFwibm8tdHJhbnNpdGlvblwiKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG9wZW5Nb2RhbEJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtcm90YXRlZFwiLCBCb29sZWFuKGlzUm90YXRlZCkpO1xuICB9O1xuXG4gIGNvbnN0IGNsb3NlTW9kYWwgPSAob3B0aW9uczogeyBza2lwUm90YXRpb24/OiBib29sZWFuOyBhbmltYXRlUm90YXRpb24/OiBib29sZWFuIH0gPSB7fSkgPT4ge1xuICAgIGlmICghbmV3UHJvbXB0TW9kYWwpIHJldHVybjtcbiAgICBuZXdQcm9tcHRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcblxuICAgIGlmIChvcHRpb25zLnNraXBSb3RhdGlvbikge1xuICAgICAgaWYgKG9wZW5Nb2RhbEJ0bikge1xuICAgICAgICBvcGVuTW9kYWxCdG4uY2xhc3NMaXN0LnJlbW92ZShcImlzLXJvdGF0ZWRcIik7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdG9nZ2xlUGx1c1JvdGF0aW9uKGZhbHNlLCB7IGFuaW1hdGU6IEJvb2xlYW4ob3B0aW9ucy5hbmltYXRlUm90YXRpb24pIH0pO1xuICB9O1xuXG4gIGNvbnN0IG9wZW5Nb2RhbCA9IChvcHRpb25zPzogeyBhbmltYXRlUm90YXRpb24/OiBib29sZWFuIH0pID0+IHtcbiAgICBpZiAoIW5ld1Byb21wdE1vZGFsKSByZXR1cm47XG4gICAgbmV3UHJvbXB0TW9kYWwuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XG4gICAgdG9nZ2xlUGx1c1JvdGF0aW9uKHRydWUsIHsgYW5pbWF0ZTogQm9vbGVhbihvcHRpb25zPy5hbmltYXRlUm90YXRpb24pIH0pO1xuICB9O1xuXG4gIC8vIOWIneacn+ihqOekuuOBp+OBr+Wbnui7ouOCouODi+ODoeODvOOCt+ODp+ODs+OCkueZuueBq+OBleOBm+OBquOBhFxuICBpZiAobmV3UHJvbXB0TW9kYWw/LmNsYXNzTGlzdC5jb250YWlucyhcInNob3dcIikpIHtcbiAgICBjbG9zZU1vZGFsKHsgc2tpcFJvdGF0aW9uOiB0cnVlIH0pO1xuICB9IGVsc2UgaWYgKG9wZW5Nb2RhbEJ0bikge1xuICAgIG9wZW5Nb2RhbEJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtcm90YXRlZFwiKTtcbiAgfVxuXG4gIC8vIO+8i+ODnOOCv+ODs+OCkuaKvOOBmeOBqOODouODvOODgOODq+ihqOekulxuICBpZiAob3Blbk1vZGFsQnRuICYmIG5ld1Byb21wdE1vZGFsKSB7XG4gICAgb3Blbk1vZGFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKG5ld1Byb21wdE1vZGFsLmNsYXNzTGlzdC5jb250YWlucyhcInNob3dcIikpIHtcbiAgICAgICAgY2xvc2VNb2RhbCh7IGFuaW1hdGVSb3RhdGlvbjogdHJ1ZSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wZW5Nb2RhbCh7IGFuaW1hdGVSb3RhdGlvbjogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIOmWieOBmOOCi+ODnOOCv+ODs+OBp+ODouODvOODgOODq+OCkumWieOBmOOCi1xuICBpZiAobW9kYWxDbG9zZUJ0bikge1xuICAgIG1vZGFsQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjbG9zZU1vZGFsKCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyDjg6Ljg7zjg4Djg6vog4zmma/jgq/jg6rjg4Pjgq/jgafplonjgZjjgotcbiAgaWYgKG5ld1Byb21wdE1vZGFsKSB7XG4gICAgbmV3UHJvbXB0TW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZS50YXJnZXQgPT09IG5ld1Byb21wdE1vZGFsKSB7XG4gICAgICAgIGNsb3NlTW9kYWwoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIOOCrOODvOODieODrOODvOODq+ODgeOCp+ODg+OCr+ODnOODg+OCr+OCueOBp+WFpeWHuuWKm+S+i+mDqOWIhuOBruihqOekuuWIh+abv1xuICBpZiAoZ3VhcmRyYWlsQ2hlY2tib3ggJiYgZ3VhcmRyYWlsRmllbGRzKSB7XG4gICAgZ3VhcmRyYWlsQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBndWFyZHJhaWxGaWVsZHMuc3R5bGUuZGlzcGxheSA9IGd1YXJkcmFpbENoZWNrYm94LmNoZWNrZWQgPyBcImJsb2NrXCIgOiBcIm5vbmVcIjtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIOODouODvOODgOODq+WGheODleOCqeODvOODoOOBrumAgeS/oVxuICBpZiAobmV3UG9zdEZvcm0pIHtcbiAgICBuZXdQb3N0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGNvbnN0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1wcm9tcHQtdGl0bGVcIikgYXMgSFRNTElucHV0RWxlbWVudCB8IG51bGw7XG4gICAgICBjb25zdCBjb250ZW50SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1wcm9tcHQtY29udGVudFwiKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbDtcbiAgICAgIGlmICghdGl0bGVJbnB1dCB8fCAhY29udGVudElucHV0KSB7XG4gICAgICAgIGFsZXJ0KFwi5YWl5Yqb5qyE44GM6KaL44Gk44GL44KK44G+44Gb44KT44Gn44GX44Gf44CCXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIOWQhOWFpeWKm+mgheebruOBruWApOOCkuWPluW+l1xuICAgICAgY29uc3QgdGl0bGUgPSB0aXRsZUlucHV0LnZhbHVlO1xuICAgICAgY29uc3QgY29udGVudCA9IGNvbnRlbnRJbnB1dC52YWx1ZTtcbiAgICAgIGxldCBpbnB1dEV4YW1wbGUgPSBcIlwiO1xuICAgICAgbGV0IG91dHB1dEV4YW1wbGUgPSBcIlwiO1xuICAgICAgaWYgKGd1YXJkcmFpbENoZWNrYm94Py5jaGVja2VkKSB7XG4gICAgICAgIGNvbnN0IGlucHV0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1wcm9tcHQtaW5wdXQtZXhhbXBsZVwiKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgY29uc3Qgb3V0cHV0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1wcm9tcHQtb3V0cHV0LWV4YW1wbGVcIikgYXMgSFRNTFRleHRBcmVhRWxlbWVudCB8IG51bGw7XG4gICAgICAgIGlucHV0RXhhbXBsZSA9IGlucHV0RWwgPyBpbnB1dEVsLnZhbHVlIDogXCJcIjtcbiAgICAgICAgb3V0cHV0RXhhbXBsZSA9IG91dHB1dEVsID8gb3V0cHV0RWwudmFsdWUgOiBcIlwiO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgIHByb21wdF9jb250ZW50OiBjb250ZW50LFxuICAgICAgICBpbnB1dF9leGFtcGxlczogaW5wdXRFeGFtcGxlLFxuICAgICAgICBvdXRwdXRfZXhhbXBsZXM6IG91dHB1dEV4YW1wbGVcbiAgICAgIH07XG5cbiAgICAgIC8vIFBPU1Qg44Oq44Kv44Ko44K544OI44Gn44K144O844OQ44O844Gr6YCB5L+hXG4gICAgICBmZXRjaChcIi9hcGkvYWRkX3Rhc2tcIiwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgaWYgKHJlc3VsdC5tZXNzYWdlKSB7XG4gICAgICAgICAgICBhbGVydChyZXN1bHQubWVzc2FnZSk7XG4gICAgICAgICAgICBuZXdQb3N0Rm9ybS5yZXNldCgpO1xuICAgICAgICAgICAgaWYgKGd1YXJkcmFpbEZpZWxkcykgZ3VhcmRyYWlsRmllbGRzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIGNsb3NlTW9kYWwoKTtcblxuICAgICAgICAgICAgLy8g44GT44GT44Gn44K/44K544Kv5LiA6Kan44KS5pu05paw44GZ44KLXG4gICAgICAgICAgICBpZiAod2luZG93LmxvYWRUYXNrQ2FyZHMpIHdpbmRvdy5sb2FkVGFza0NhcmRzKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFsZXJ0KFwi44Ko44Op44O8OiBcIiArIHJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgYWxlcnQoXCLjgqjjg6njg7zjgYznmbrnlJ/jgZfjgb7jgZfjgZ86IFwiICsgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5pZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJsb2FkaW5nXCIpIHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgaW5pdE5ld1Byb21wdE1vZGFsKTtcbn0gZWxzZSB7XG4gIGluaXROZXdQcm9tcHRNb2RhbCgpO1xufVxuXG5leHBvcnQge307XG4iXSwibmFtZXMiOlsiaW5pdE5ld1Byb21wdE1vZGFsIiwib3Blbk1vZGFsQnRuIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInBsdXNJY29uIiwicXVlcnlTZWxlY3RvciIsIm5ld1Byb21wdE1vZGFsIiwibW9kYWxDbG9zZUJ0biIsImd1YXJkcmFpbENoZWNrYm94IiwiZ3VhcmRyYWlsRmllbGRzIiwibmV3UG9zdEZvcm0iLCJ0b2dnbGVQbHVzUm90YXRpb24iLCJpc1JvdGF0ZWQiLCJvcHRpb25zIiwiYW5pbWF0ZSIsImNsYXNzTGlzdCIsImFkZCIsInRvZ2dsZSIsIkJvb2xlYW4iLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyZW1vdmUiLCJjbG9zZU1vZGFsIiwic2tpcFJvdGF0aW9uIiwiYW5pbWF0ZVJvdGF0aW9uIiwib3Blbk1vZGFsIiwiY29udGFpbnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0Iiwic3R5bGUiLCJkaXNwbGF5IiwiY2hlY2tlZCIsInRpdGxlSW5wdXQiLCJjb250ZW50SW5wdXQiLCJhbGVydCIsInRpdGxlIiwidmFsdWUiLCJjb250ZW50IiwiaW5wdXRFeGFtcGxlIiwib3V0cHV0RXhhbXBsZSIsImlucHV0RWwiLCJvdXRwdXRFbCIsImRhdGEiLCJwcm9tcHRfY29udGVudCIsImlucHV0X2V4YW1wbGVzIiwib3V0cHV0X2V4YW1wbGVzIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwicmVzdWx0IiwibWVzc2FnZSIsInJlc2V0Iiwid2luZG93IiwibG9hZFRhc2tDYXJkcyIsImVycm9yIiwiY2F0Y2giLCJyZWFkeVN0YXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./scripts/setup/new_prompt_modal.ts\n"));

/***/ }),

/***/ "./scripts/setup/setup.ts":
/*!********************************!*\
  !*** ./scripts/setup/setup.ts ***!
  \********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/**\n * setup.ts\n *\n * ■ タスクカードの取得・表示 (loadTaskCards)\n *   - /api/tasks からタスク一覧を取得し、.prompt-card を動的生成\n *   - カード下向きアイコンでタスク詳細モーダル（プロンプトテンプレート／入出力例）を表示\n *\n * ■ セットアップ画面切替 (showSetupForm)\n *   - チャット画面を隠し、セットアップ画面を再表示\n *\n * ■ タスク選択でチャット開始 (handleTaskCardClick)\n *   - 「状況・作業環境」入力＋カードクリックで新規チャットルーム作成\n *   - 最初のメッセージを Bot に投げてチャットを開始\n *\n * ■ 「もっと見る」折り畳み機能 (initToggleTasks)\n *   - タスクが 6 件超えると 7 件目以降を折り畳み、展開／折り畳みボタンを生成\n */ // ▼ 1. タスクカード生成・詳細表示 -------------------------------------------------\nconst FALLBACK_TASKS = [\n    {\n        name: \"\\uD83D\\uDCE7 メール作成\",\n        prompt_template: \"状況や作業環境をもとに、メールを作成して。\",\n        input_examples: \"新製品リリースの案内のメール作成をしたい。\",\n        output_examples: \"件名：新製品発売のご案内\\n本文：拝啓　時下ますますご健勝のこととお慶び申し上げます。さて、この度弊社では画期的な新製品をリリースいたしましたので、ご案内申し上げます。つきましては、詳細資料を同封いたしましたのでご一読いただけますと幸甚です。今後とも何卒よろしくお願い申し上げます。\"\n    },\n    {\n        name: \"\\uD83D\\uDCA1 アイデア発想\",\n        prompt_template: \"独創的なアイデアの発想をしてほしい。\",\n        input_examples: \"店舗の集客を増やすためのアイデアを考えて。\",\n        output_examples: \"1. お得なクーポン付きSNSキャンペーンの実施 2. 店舗イベントの定期開催 3. 地域の他店舗と連携したスタンプラリー企画\"\n    },\n    {\n        name: \"\\uD83D\\uDCC4 要約\",\n        prompt_template: \"状況・作業環境に入力された文を要約して。\",\n        input_examples: \"長編小説のストーリーを簡潔にまとめたいので、要約して。\",\n        output_examples: \"本作品は、主人公が旅を通じて自分自身と向き合い、家族の絆を再確認する物語です。主要なテーマは成長と和解で、山場となるシーンでは過去の葛藤を乗り越える様子が描かれています。\"\n    },\n    {\n        name: \"\\uD83D\\uDEE0️ 問題解決\",\n        prompt_template: \"問題解決に協力してほしい。\",\n        input_examples: \"人事トラブル（メンバー同士の衝突）の問題解決をしたい。\",\n        output_examples: \"1. 当事者双方からヒアリングを行い、事実関係を整理する 2. 第三者が入る調整会議を設定し、意見をすり合わせる 3. 再発防止のためのコミュニケーションルールを策定\"\n    },\n    {\n        name: \"\\uD83D\\uDCCB 問題へ回答\",\n        prompt_template: \"問題へ回答するのを手伝ってほしい。\",\n        input_examples: \"物理の問題：自由落下の公式を教えてください。\",\n        output_examples: \"自由落下の距離を表す公式は、d = (1/2)gt^2 です（gは重力加速度、tは落下時間）。初速度が0の場合に適用できます。\"\n    },\n    {\n        name: \"ℹ️ 情報提供\",\n        prompt_template: \"状況・作業環境に入力されたものについての情報提供をしてほしい。\",\n        input_examples: \"新型コロナウイルスの最新情報が知りたい。\",\n        output_examples: \"現在の感染状況は地域によって大きく異なりますが、新しい変異株の動向やワクチン接種の進捗が焦点となっています。最新情報は厚生労働省の公式サイトやWHOのリリースを確認するのが望ましいです。\"\n    },\n    {\n        name: \"\\uD83C\\uDF73 レシピ\",\n        prompt_template: \"状況・作業環境に入力された情報をもとにレシピを考えて。\",\n        input_examples: \"野菜がメインで、ヘルシーな朝食のレシピが知りたい。\",\n        output_examples: \"グリル野菜と卵を使ったオーブン焼きはいかがでしょう。お好みの野菜（パプリカ、ズッキーニ、玉ねぎなど）をカットして卵と一緒に耐熱皿に入れ、オリーブオイルと塩コショウで調味。オーブンで焼けばヘルシーかつ手軽に作れます。\"\n    },\n    {\n        name: \"✈️ 旅行計画\",\n        prompt_template: \"状況・作業環境の内容をもとに、旅行計画を立ててほしい。\",\n        input_examples: \"国内旅行、2泊3日、温泉と自然を満喫したいので、旅行計画を考えて。\",\n        output_examples: \"草津温泉（群馬県）をおすすめします。1日目は湯畑周辺を散策し、温泉街を楽しむ。2日目は近隣の自然公園で軽いハイキングをして、夜は旅館で温泉三昧。3日目は地元の名物を堪能してから帰路へ。\"\n    },\n    {\n        name: \"\\uD83D\\uDCAC 悩み相談\",\n        prompt_template: \"悩み相談にのってほしい。\",\n        input_examples: \"恋愛で告白する勇気が出ないです。\",\n        output_examples: \"まずは自分の気持ちを素直に認めましょう。そして、相手とのコミュニケーションで小さなステップを積み重ね、信頼関係を築くことが大切です。失敗を恐れる気持ちはわかりますが、行動しなければ何も変わりません。勇気を出して一歩を踏み出すことで、状況が前向きに進む可能性があります。\"\n    },\n    {\n        name: \"\\uD83D\\uDCE8 メッセージへの返答\",\n        prompt_template: \"状況・作業環境の内容を踏まえて、メッセージへの返答を一緒に考えてほしい。\",\n        input_examples: \"上司から「すぐに会議室に来て」とLINEで連絡がきた場合にどのようにメッセージに返答すればよい？\",\n        output_examples: \"了解しました。すぐに向かいます。何か準備が必要なものはありますか？\"\n    },\n    {\n        name: \"\\uD83D\\uDC91 デート計画\",\n        prompt_template: \"状況・作業環境の内容を踏まえて、デートの計画を立ててほしい。\",\n        input_examples: \"花火大会に行く予定、夜メインで楽しみたいので、デート計画を立てて。\",\n        output_examples: \"夕方から浴衣で合流し、屋台で食べ歩きを楽しんだ後、花火をゆっくり観賞. その後は近くのバーで軽くドリンクを飲みながら余韻に浸るのはいかがでしょうか。\"\n    }\n];\nfunction getFallbackTasks() {\n    return FALLBACK_TASKS.map((task)=>({\n            ...task,\n            is_default: true\n        }));\n}\nfunction loadTaskCards() {\n    const ioModal = document.getElementById(\"io-modal\");\n    const ioModalContent = document.getElementById(\"io-modal-content\");\n    // モーダルを閉じるヘルパ\n    function closeIOModal() {\n        if (ioModal) ioModal.style.display = \"none\";\n    }\n    if (ioModal && ioModalContent && !ioModal.dataset.bound) {\n        ioModal.dataset.bound = \"true\";\n        // 画面クリックでモーダルを閉じる\n        document.addEventListener(\"click\", ()=>{\n            if (ioModal && ioModal.style.display === \"block\") closeIOModal();\n        });\n        // 内部クリックでは閉じない\n        if (ioModalContent) {\n            ioModalContent.addEventListener(\"click\", (e)=>e.stopPropagation());\n        }\n    }\n    const renderTaskCards = (tasks)=>{\n        const container = document.getElementById(\"task-selection\");\n        if (!container) return;\n        // コンテナをクリア\n        container.innerHTML = \"\";\n        // タスクが空の場合はメッセージを表示\n        if (!tasks || tasks.length === 0) {\n            container.innerHTML = \"<p>タスクが見つかりませんでした。</p>\";\n            return;\n        }\n        tasks.forEach((task)=>{\n            // task自体がnull/undefinedの場合はスキップ（念のため）\n            if (!task) return;\n            const taskName = typeof task.name === \"string\" && task.name.trim() ? task.name.trim() : task.name ? String(task.name) : \"無題\";\n            // ラッパー\n            const wrapper = document.createElement(\"div\");\n            wrapper.className = \"task-wrapper\";\n            // カード\n            const card = document.createElement(\"div\");\n            card.className = \"prompt-card\";\n            card.dataset.task = taskName;\n            card.dataset.prompt_template = task.prompt_template || \"プロンプトテンプレートはありません\";\n            card.dataset.input_examples = task.input_examples || \"入力例がありません\";\n            card.dataset.output_examples = task.output_examples || \"出力例がありません\";\n            card.dataset.is_default = task.is_default ? \"true\" : \"false\";\n            // ヘッダー（タイトル＋▼ボタン）\n            const headerContainer = document.createElement(\"div\");\n            headerContainer.className = \"header-container\";\n            const header = document.createElement(\"div\");\n            header.className = \"task-header\";\n            header.textContent = taskName.length > 8 ? taskName.substring(0, 8) + \"…\" : taskName;\n            const toggleBtn = document.createElement(\"button\");\n            toggleBtn.type = \"button\";\n            toggleBtn.classList.add(\"btn\", \"btn-outline-success\", \"btn-md\");\n            toggleBtn.innerHTML = '<i class=\"bi bi-caret-down\"></i>';\n            // ▼クリックで詳細モーダル\n            toggleBtn.addEventListener(\"click\", (e)=>{\n                e.stopPropagation();\n                if (!ioModal || !ioModalContent) return;\n                ioModalContent.innerHTML = '\\n          <h5 style=\"margin-bottom:1rem;\">タスク詳細</h5>\\n          <div style=\"margin-bottom:.5rem;font-weight:bold;\">タスク名</div>\\n          <div style=\"margin-bottom:1rem;\">'.concat(card.dataset.task, '</div>\\n          <div style=\"margin-bottom:.5rem;font-weight:bold;\">プロンプトテンプレート</div>\\n          <div style=\"margin-bottom:1rem;\">').concat(card.dataset.prompt_template, '</div>\\n          <div style=\"margin-bottom:.5rem;font-weight:bold;\">入力例</div>\\n          <div style=\"margin-bottom:1rem;\">').concat(card.dataset.input_examples, '</div>\\n          <div style=\"margin-bottom:.5rem;font-weight:bold;\">出力例</div>\\n          <div>').concat(card.dataset.output_examples, \"</div>\");\n                ioModal.style.display = \"block\";\n            });\n            headerContainer.append(header, toggleBtn);\n            card.appendChild(headerContainer);\n            wrapper.appendChild(card);\n            container.appendChild(wrapper);\n        });\n        // クリック／並び替え関係の初期化\n        initSetupTaskCards();\n        initToggleTasks();\n        if (typeof window.initTaskOrderEditing === \"function\") window.initTaskOrderEditing();\n    };\n    const applyTasks = (tasks)=>{\n        // タスクが空、もしくは配列でない場合はフォールバックを表示\n        if (!Array.isArray(tasks) || tasks.length === 0) {\n            renderTaskCards(getFallbackTasks());\n            return;\n        }\n        renderTaskCards(tasks);\n    };\n    // 初期ロード時: まずはフォールバックを表示しておく\n    renderTaskCards(getFallbackTasks());\n    // /api/tasks から取得\n    fetch(\"/api/tasks\").then((r)=>{\n        const contentType = r.headers.get(\"content-type\") || \"\";\n        if (!r.ok) {\n            throw new Error(\"tasks fetch failed: \".concat(r.status));\n        }\n        if (!contentType.includes(\"application/json\")) {\n            throw new Error(\"tasks response is not json\");\n        }\n        return r.json();\n    }).then((data)=>{\n        const tasks = Array.isArray(data === null || data === void 0 ? void 0 : data.tasks) ? data.tasks : [];\n        applyTasks(tasks);\n    }).catch((err)=>{\n        console.error(\"タスク読み込みに失敗:\", err);\n        // エラー時もフォールバックを表示\n        applyTasks([]);\n    });\n}\n// ▼ 2. セットアップ画面の表示 ------------------------------------------------------\nfunction showSetupForm() {\n    const chatContainer = document.getElementById(\"chat-container\");\n    const setupContainer = document.getElementById(\"setup-container\");\n    const setupInfoElement = document.getElementById(\"setup-info\");\n    if (chatContainer) chatContainer.style.display = \"none\";\n    if (setupContainer) setupContainer.style.display = \"block\";\n    if (setupInfoElement) setupInfoElement.value = \"\";\n    // サイドバーの状態をクリーンアップ\n    const sidebar = document.querySelector(\".sidebar\");\n    if (sidebar) {\n        sidebar.classList.remove(\"open\");\n    }\n    document.body.classList.remove(\"sidebar-visible\");\n    loadTaskCards();\n}\n// ▼ 3. タスクカード選択処理 --------------------------------------------------------\nfunction initSetupTaskCards() {\n    const container = document.getElementById(\"task-selection\");\n    if (!container) return;\n    container.removeEventListener(\"click\", handleTaskCardClick);\n    container.addEventListener(\"click\", handleTaskCardClick);\n}\nfunction handleTaskCardClick(e) {\n    if (window.isEditingOrder) return; // 並び替え中は無視\n    const target = e.target;\n    const card = target === null || target === void 0 ? void 0 : target.closest(\".prompt-card\");\n    if (!card) return;\n    const setupInfoElement = document.getElementById(\"setup-info\");\n    const aiModelSelect = document.getElementById(\"ai-model\");\n    const chatMessages = document.getElementById(\"chat-messages\");\n    // 入力フォームの値（空欄可）\n    const setupInfo = setupInfoElement ? setupInfoElement.value.trim() : \"\";\n    const aiModel = aiModelSelect ? aiModelSelect.value : \"gemini-2.5-flash\";\n    const prompt_template = card.dataset.prompt_template || \"\";\n    const inputExamples = card.dataset.input_examples || \"\";\n    const outputExamples = card.dataset.output_examples || \"\";\n    // 新チャットルーム ID とタイトル\n    const newRoomId = Date.now().toString();\n    const roomTitle = setupInfo || \"新規チャット\";\n    // currentChatRoomId はグローバルまたは他で定義されている前提\n    window.currentChatRoomId = newRoomId;\n    localStorage.setItem(\"currentChatRoomId\", newRoomId);\n    // ① ルームをサーバーに作成\n    if (typeof window.createNewChatRoom === \"function\") {\n        window.createNewChatRoom(newRoomId, roomTitle).then(()=>{\n            if (typeof window.showChatInterface === \"function\") window.showChatInterface();\n            // 新しいチャットではメッセージ表示をリセット\n            if (chatMessages) chatMessages.innerHTML = \"\";\n            if (typeof window.loadChatRooms === \"function\") window.loadChatRooms();\n            localStorage.removeItem(\"chatHistory_\".concat(newRoomId));\n            // ② 最初のメッセージ\n            const firstMsg = setupInfo ? \"【状況・作業環境】\".concat(setupInfo, \"\\n【リクエスト】\").concat(prompt_template, \"\\n\\n入力例:\\n\").concat(inputExamples, \"\\n\\n出力例:\\n\").concat(outputExamples) : \"【リクエスト】\".concat(prompt_template, \"\\n\\n入力例:\\n\").concat(inputExamples, \"\\n\\n出力例:\\n\").concat(outputExamples);\n            // ③ Bot 応答生成\n            if (typeof window.generateResponse === \"function\") window.generateResponse(firstMsg, aiModel);\n        }).catch((err)=>alert(\"チャットルーム作成に失敗: \" + err));\n    } else {\n        console.error(\"createNewChatRoom is not defined\");\n    }\n}\n// ▼ 4. 「もっと見る」ボタン生成 ----------------------------------------------------\nfunction initToggleTasks() {\n    const container = document.querySelector(\".task-selection\");\n    if (!container) return;\n    const oldBtn = document.getElementById(\"toggle-tasks-btn\");\n    if (oldBtn) oldBtn.remove();\n    const cards = document.querySelectorAll(\".task-selection .prompt-card\");\n    if (cards.length > 6) {\n        // 7枚目以降を非表示\n        [\n            ...cards\n        ].slice(6).forEach((c)=>c.style.display = \"none\");\n        // ボタン生成\n        const btn = document.createElement(\"button\");\n        btn.type = \"button\";\n        btn.id = \"toggle-tasks-btn\";\n        btn.className = \"primary-button\";\n        btn.style.width = \"100%\";\n        btn.style.marginTop = \"0.1rem\";\n        btn.innerHTML = '<i class=\"bi bi-chevron-down\"></i> もっと見る';\n        let expanded = false;\n        btn.addEventListener(\"click\", (e)=>{\n            e.preventDefault();\n            expanded = !expanded;\n            [\n                ...cards\n            ].slice(6).forEach((c)=>c.style.display = expanded ? \"flex\" : \"none\");\n            btn.innerHTML = expanded ? '<i class=\"bi bi-chevron-up\"></i> 閉じる' : '<i class=\"bi bi-chevron-down\"></i> もっと見る';\n        });\n        // ボタンをリストの末尾に追加\n        const selectionContainer = window.taskSelection || container;\n        selectionContainer.appendChild(btn);\n    }\n}\n// ---- グローバル公開 -------------------------------------------------------------\nwindow.showSetupForm = showSetupForm;\nwindow.initToggleTasks = initToggleTasks;\nwindow.initSetupTaskCards = initSetupTaskCards;\nwindow.loadTaskCards = loadTaskCards;\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHRzL3NldHVwL3NldHVwLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7OztDQWdCQyxHQVVELHVFQUF1RTtBQUN2RSxNQUFNQSxpQkFBNkI7SUFDakM7UUFDRUMsTUFBTTtRQUNOQyxpQkFBaUI7UUFDakJDLGdCQUFnQjtRQUNoQkMsaUJBQ0U7SUFDSjtJQUNBO1FBQ0VILE1BQU07UUFDTkMsaUJBQWlCO1FBQ2pCQyxnQkFBZ0I7UUFDaEJDLGlCQUNFO0lBQ0o7SUFDQTtRQUNFSCxNQUFNO1FBQ05DLGlCQUFpQjtRQUNqQkMsZ0JBQWdCO1FBQ2hCQyxpQkFDRTtJQUNKO0lBQ0E7UUFDRUgsTUFBTTtRQUNOQyxpQkFBaUI7UUFDakJDLGdCQUFnQjtRQUNoQkMsaUJBQ0U7SUFDSjtJQUNBO1FBQ0VILE1BQU07UUFDTkMsaUJBQWlCO1FBQ2pCQyxnQkFBZ0I7UUFDaEJDLGlCQUNFO0lBQ0o7SUFDQTtRQUNFSCxNQUFNO1FBQ05DLGlCQUFpQjtRQUNqQkMsZ0JBQWdCO1FBQ2hCQyxpQkFDRTtJQUNKO0lBQ0E7UUFDRUgsTUFBTTtRQUNOQyxpQkFBaUI7UUFDakJDLGdCQUFnQjtRQUNoQkMsaUJBQ0U7SUFDSjtJQUNBO1FBQ0VILE1BQU07UUFDTkMsaUJBQWlCO1FBQ2pCQyxnQkFBZ0I7UUFDaEJDLGlCQUNFO0lBQ0o7SUFDQTtRQUNFSCxNQUFNO1FBQ05DLGlCQUFpQjtRQUNqQkMsZ0JBQWdCO1FBQ2hCQyxpQkFDRTtJQUNKO0lBQ0E7UUFDRUgsTUFBTTtRQUNOQyxpQkFBaUI7UUFDakJDLGdCQUNFO1FBQ0ZDLGlCQUFpQjtJQUNuQjtJQUNBO1FBQ0VILE1BQU07UUFDTkMsaUJBQWlCO1FBQ2pCQyxnQkFBZ0I7UUFDaEJDLGlCQUNFO0lBQ0o7Q0FDRDtBQUVELFNBQVNDO0lBQ1AsT0FBT0wsZUFBZU0sR0FBRyxDQUFDLENBQUNDLE9BQVU7WUFDbkMsR0FBR0EsSUFBSTtZQUNQQyxZQUFZO1FBQ2Q7QUFDRjtBQUVBLFNBQVNDO0lBQ1AsTUFBTUMsVUFBVUMsU0FBU0MsY0FBYyxDQUFDO0lBQ3hDLE1BQU1DLGlCQUFpQkYsU0FBU0MsY0FBYyxDQUFDO0lBRS9DLGNBQWM7SUFDZCxTQUFTRTtRQUNQLElBQUlKLFNBQVNBLFFBQVFLLEtBQUssQ0FBQ0MsT0FBTyxHQUFHO0lBQ3ZDO0lBRUEsSUFBSU4sV0FBV0csa0JBQWtCLENBQUNILFFBQVFPLE9BQU8sQ0FBQ0MsS0FBSyxFQUFFO1FBQ3ZEUixRQUFRTyxPQUFPLENBQUNDLEtBQUssR0FBRztRQUN4QixrQkFBa0I7UUFDbEJQLFNBQVNRLGdCQUFnQixDQUFDLFNBQVM7WUFDakMsSUFBSVQsV0FBV0EsUUFBUUssS0FBSyxDQUFDQyxPQUFPLEtBQUssU0FBU0Y7UUFDcEQ7UUFDQSxlQUFlO1FBQ2YsSUFBSUQsZ0JBQWdCO1lBQ2xCQSxlQUFlTSxnQkFBZ0IsQ0FBQyxTQUFTLENBQUNDLElBQU1BLEVBQUVDLGVBQWU7UUFDbkU7SUFDRjtJQUVBLE1BQU1DLGtCQUFrQixDQUFDQztRQUN2QixNQUFNQyxZQUFZYixTQUFTQyxjQUFjLENBQUM7UUFDMUMsSUFBSSxDQUFDWSxXQUFXO1FBRWhCLFdBQVc7UUFDWEEsVUFBVUMsU0FBUyxHQUFHO1FBRXRCLG9CQUFvQjtRQUNwQixJQUFJLENBQUNGLFNBQVNBLE1BQU1HLE1BQU0sS0FBSyxHQUFHO1lBQ2hDRixVQUFVQyxTQUFTLEdBQUc7WUFDdEI7UUFDRjtRQUVBRixNQUFNSSxPQUFPLENBQUMsQ0FBQ3BCO1lBQ2Isc0NBQXNDO1lBQ3RDLElBQUksQ0FBQ0EsTUFBTTtZQUVYLE1BQU1xQixXQUNKLE9BQU9yQixLQUFLTixJQUFJLEtBQUssWUFBWU0sS0FBS04sSUFBSSxDQUFDNEIsSUFBSSxLQUMzQ3RCLEtBQUtOLElBQUksQ0FBQzRCLElBQUksS0FDZHRCLEtBQUtOLElBQUksR0FDUDZCLE9BQU92QixLQUFLTixJQUFJLElBQ2hCO1lBRVIsT0FBTztZQUNQLE1BQU04QixVQUFVcEIsU0FBU3FCLGFBQWEsQ0FBQztZQUN2Q0QsUUFBUUUsU0FBUyxHQUFHO1lBRXBCLE1BQU07WUFDTixNQUFNQyxPQUFPdkIsU0FBU3FCLGFBQWEsQ0FBQztZQUNwQ0UsS0FBS0QsU0FBUyxHQUFHO1lBQ2pCQyxLQUFLakIsT0FBTyxDQUFDVixJQUFJLEdBQUdxQjtZQUNwQk0sS0FBS2pCLE9BQU8sQ0FBQ2YsZUFBZSxHQUFHSyxLQUFLTCxlQUFlLElBQUk7WUFDdkRnQyxLQUFLakIsT0FBTyxDQUFDZCxjQUFjLEdBQUdJLEtBQUtKLGNBQWMsSUFBSTtZQUNyRCtCLEtBQUtqQixPQUFPLENBQUNiLGVBQWUsR0FBR0csS0FBS0gsZUFBZSxJQUFJO1lBQ3ZEOEIsS0FBS2pCLE9BQU8sQ0FBQ1QsVUFBVSxHQUFHRCxLQUFLQyxVQUFVLEdBQUcsU0FBUztZQUVyRCxrQkFBa0I7WUFDbEIsTUFBTTJCLGtCQUFrQnhCLFNBQVNxQixhQUFhLENBQUM7WUFDL0NHLGdCQUFnQkYsU0FBUyxHQUFHO1lBRTVCLE1BQU1HLFNBQVN6QixTQUFTcUIsYUFBYSxDQUFDO1lBQ3RDSSxPQUFPSCxTQUFTLEdBQUc7WUFDbkJHLE9BQU9DLFdBQVcsR0FBR1QsU0FBU0YsTUFBTSxHQUFHLElBQUlFLFNBQVNVLFNBQVMsQ0FBQyxHQUFHLEtBQUssTUFBTVY7WUFFNUUsTUFBTVcsWUFBWTVCLFNBQVNxQixhQUFhLENBQUM7WUFDekNPLFVBQVVDLElBQUksR0FBRztZQUNqQkQsVUFBVUUsU0FBUyxDQUFDQyxHQUFHLENBQUMsT0FBTyx1QkFBdUI7WUFDdERILFVBQVVkLFNBQVMsR0FBRztZQUV0QixlQUFlO1lBQ2ZjLFVBQVVwQixnQkFBZ0IsQ0FBQyxTQUFTLENBQUNDO2dCQUNuQ0EsRUFBRUMsZUFBZTtnQkFDakIsSUFBSSxDQUFDWCxXQUFXLENBQUNHLGdCQUFnQjtnQkFDakNBLGVBQWVZLFNBQVMsR0FBRywrS0FLVVMsT0FGQUEsS0FBS2pCLE9BQU8sQ0FBQ1YsSUFBSSxFQUFDLHVJQUlsQjJCLE9BRkFBLEtBQUtqQixPQUFPLENBQUNmLGVBQWUsRUFBQywrSEFJekRnQyxPQUY0QkEsS0FBS2pCLE9BQU8sQ0FBQ2QsY0FBYyxFQUFDLG1HQUUzQixPQUE3QitCLEtBQUtqQixPQUFPLENBQUNiLGVBQWUsRUFBQztnQkFDdENNLFFBQVFLLEtBQUssQ0FBQ0MsT0FBTyxHQUFHO1lBQzFCO1lBRUFtQixnQkFBZ0JRLE1BQU0sQ0FBQ1AsUUFBUUc7WUFDL0JMLEtBQUtVLFdBQVcsQ0FBQ1Q7WUFDakJKLFFBQVFhLFdBQVcsQ0FBQ1Y7WUFDcEJWLFVBQVVvQixXQUFXLENBQUNiO1FBQ3hCO1FBRUEsa0JBQWtCO1FBQ2xCYztRQUNBQztRQUNBLElBQUksT0FBT0MsT0FBT0Msb0JBQW9CLEtBQUssWUFBWUQsT0FBT0Msb0JBQW9CO0lBQ3BGO0lBRUEsTUFBTUMsYUFBYSxDQUFDMUI7UUFDbEIsK0JBQStCO1FBQy9CLElBQUksQ0FBQzJCLE1BQU1DLE9BQU8sQ0FBQzVCLFVBQVVBLE1BQU1HLE1BQU0sS0FBSyxHQUFHO1lBQy9DSixnQkFBZ0JqQjtZQUNoQjtRQUNGO1FBQ0FpQixnQkFBZ0JDO0lBQ2xCO0lBRUEsNEJBQTRCO0lBQzVCRCxnQkFBZ0JqQjtJQUVoQixrQkFBa0I7SUFDbEIrQyxNQUFNLGNBQ0hDLElBQUksQ0FBQyxDQUFDQztRQUNMLE1BQU1DLGNBQWNELEVBQUVFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG1CQUFtQjtRQUNyRCxJQUFJLENBQUNILEVBQUVJLEVBQUUsRUFBRTtZQUNULE1BQU0sSUFBSUMsTUFBTSx1QkFBZ0MsT0FBVEwsRUFBRU0sTUFBTTtRQUNqRDtRQUNBLElBQUksQ0FBQ0wsWUFBWU0sUUFBUSxDQUFDLHFCQUFxQjtZQUM3QyxNQUFNLElBQUlGLE1BQU07UUFDbEI7UUFDQSxPQUFPTCxFQUFFUSxJQUFJO0lBQ2YsR0FDQ1QsSUFBSSxDQUFDLENBQUNVO1FBQ0wsTUFBTXhDLFFBQW9CMkIsTUFBTUMsT0FBTyxDQUFDWSxpQkFBQUEsMkJBQUFBLEtBQU14QyxLQUFLLElBQUl3QyxLQUFLeEMsS0FBSyxHQUFHLEVBQUU7UUFDdEUwQixXQUFXMUI7SUFDYixHQUNDeUMsS0FBSyxDQUFDLENBQUNDO1FBQ05DLFFBQVFDLEtBQUssQ0FBQyxlQUFlRjtRQUM3QixrQkFBa0I7UUFDbEJoQixXQUFXLEVBQUU7SUFDZjtBQUNKO0FBRUEsMEVBQTBFO0FBQzFFLFNBQVNtQjtJQUNQLE1BQU1DLGdCQUFnQjFELFNBQVNDLGNBQWMsQ0FBQztJQUM5QyxNQUFNMEQsaUJBQWlCM0QsU0FBU0MsY0FBYyxDQUFDO0lBQy9DLE1BQU0yRCxtQkFBbUI1RCxTQUFTQyxjQUFjLENBQUM7SUFFakQsSUFBSXlELGVBQWVBLGNBQWN0RCxLQUFLLENBQUNDLE9BQU8sR0FBRztJQUNqRCxJQUFJc0QsZ0JBQWdCQSxlQUFldkQsS0FBSyxDQUFDQyxPQUFPLEdBQUc7SUFDbkQsSUFBSXVELGtCQUFrQkEsaUJBQWlCQyxLQUFLLEdBQUc7SUFFL0MsbUJBQW1CO0lBQ25CLE1BQU1DLFVBQVU5RCxTQUFTK0QsYUFBYSxDQUFDO0lBQ3ZDLElBQUlELFNBQVM7UUFDWEEsUUFBUWhDLFNBQVMsQ0FBQ2tDLE1BQU0sQ0FBQztJQUMzQjtJQUNBaEUsU0FBU2lFLElBQUksQ0FBQ25DLFNBQVMsQ0FBQ2tDLE1BQU0sQ0FBQztJQUUvQmxFO0FBQ0Y7QUFFQSwyRUFBMkU7QUFDM0UsU0FBU29DO0lBQ1AsTUFBTXJCLFlBQVliLFNBQVNDLGNBQWMsQ0FBQztJQUMxQyxJQUFJLENBQUNZLFdBQVc7SUFDaEJBLFVBQVVxRCxtQkFBbUIsQ0FBQyxTQUFTQztJQUN2Q3RELFVBQVVMLGdCQUFnQixDQUFDLFNBQVMyRDtBQUN0QztBQUVBLFNBQVNBLG9CQUFvQjFELENBQVE7SUFDbkMsSUFBSTJCLE9BQU9nQyxjQUFjLEVBQUUsUUFBUSxXQUFXO0lBRTlDLE1BQU1DLFNBQVM1RCxFQUFFNEQsTUFBTTtJQUN2QixNQUFNOUMsT0FBTzhDLG1CQUFBQSw2QkFBQUEsT0FBUUMsT0FBTyxDQUFDO0lBQzdCLElBQUksQ0FBQy9DLE1BQU07SUFFWCxNQUFNcUMsbUJBQW1CNUQsU0FBU0MsY0FBYyxDQUFDO0lBQ2pELE1BQU1zRSxnQkFBZ0J2RSxTQUFTQyxjQUFjLENBQUM7SUFDOUMsTUFBTXVFLGVBQWV4RSxTQUFTQyxjQUFjLENBQUM7SUFFN0MsZ0JBQWdCO0lBQ2hCLE1BQU13RSxZQUFZYixtQkFBbUJBLGlCQUFpQkMsS0FBSyxDQUFDM0MsSUFBSSxLQUFLO0lBQ3JFLE1BQU13RCxVQUFVSCxnQkFBZ0JBLGNBQWNWLEtBQUssR0FBRztJQUV0RCxNQUFNdEUsa0JBQWtCZ0MsS0FBS2pCLE9BQU8sQ0FBQ2YsZUFBZSxJQUFJO0lBQ3hELE1BQU1vRixnQkFBZ0JwRCxLQUFLakIsT0FBTyxDQUFDZCxjQUFjLElBQUk7SUFDckQsTUFBTW9GLGlCQUFpQnJELEtBQUtqQixPQUFPLENBQUNiLGVBQWUsSUFBSTtJQUV2RCxvQkFBb0I7SUFDcEIsTUFBTW9GLFlBQVlDLEtBQUtDLEdBQUcsR0FBR0MsUUFBUTtJQUNyQyxNQUFNQyxZQUFZUixhQUFhO0lBRS9CLHlDQUF5QztJQUN6Q3JDLE9BQU84QyxpQkFBaUIsR0FBR0w7SUFDM0JNLGFBQWFDLE9BQU8sQ0FBQyxxQkFBcUJQO0lBRTFDLGdCQUFnQjtJQUNoQixJQUFJLE9BQU96QyxPQUFPaUQsaUJBQWlCLEtBQUssWUFBWTtRQUNsRGpELE9BQU9pRCxpQkFBaUIsQ0FBQ1IsV0FBV0ksV0FDakN2QyxJQUFJLENBQUM7WUFDSixJQUFJLE9BQU9OLE9BQU9rRCxpQkFBaUIsS0FBSyxZQUFZbEQsT0FBT2tELGlCQUFpQjtZQUM1RSx3QkFBd0I7WUFDeEIsSUFBSWQsY0FBY0EsYUFBYTFELFNBQVMsR0FBRztZQUMzQyxJQUFJLE9BQU9zQixPQUFPbUQsYUFBYSxLQUFLLFlBQVluRCxPQUFPbUQsYUFBYTtZQUNwRUosYUFBYUssVUFBVSxDQUFDLGVBQXlCLE9BQVZYO1lBRXZDLGFBQWE7WUFDYixNQUFNWSxXQUFXaEIsWUFDYixZQUFpQ2xGLE9BQXJCa0YsV0FBVSxhQUF1Q0UsT0FBNUJwRixpQkFBZ0IsY0FBc0NxRixPQUExQkQsZUFBYyxjQUEyQixPQUFmQyxrQkFDdkYsVUFBc0NELE9BQTVCcEYsaUJBQWdCLGNBQXNDcUYsT0FBMUJELGVBQWMsY0FBMkIsT0FBZkM7WUFFcEUsYUFBYTtZQUNiLElBQUksT0FBT3hDLE9BQU9zRCxnQkFBZ0IsS0FBSyxZQUFZdEQsT0FBT3NELGdCQUFnQixDQUFDRCxVQUFVZjtRQUN2RixHQUNDckIsS0FBSyxDQUFDLENBQUNDLE1BQVFxQyxNQUFNLG1CQUFtQnJDO0lBQzdDLE9BQU87UUFDTEMsUUFBUUMsS0FBSyxDQUFDO0lBQ2hCO0FBQ0Y7QUFFQSx5RUFBeUU7QUFDekUsU0FBU3JCO0lBQ1AsTUFBTXRCLFlBQVliLFNBQVMrRCxhQUFhLENBQUM7SUFDekMsSUFBSSxDQUFDbEQsV0FBVztJQUNoQixNQUFNK0UsU0FBUzVGLFNBQVNDLGNBQWMsQ0FBQztJQUN2QyxJQUFJMkYsUUFBUUEsT0FBTzVCLE1BQU07SUFFekIsTUFBTTZCLFFBQVE3RixTQUFTOEYsZ0JBQWdCLENBQWM7SUFDckQsSUFBSUQsTUFBTTlFLE1BQU0sR0FBRyxHQUFHO1FBQ3BCLFlBQVk7UUFDWjtlQUFJOEU7U0FBTSxDQUFDRSxLQUFLLENBQUMsR0FBRy9FLE9BQU8sQ0FBQyxDQUFDZ0YsSUFBT0EsRUFBRTVGLEtBQUssQ0FBQ0MsT0FBTyxHQUFHO1FBRXRELFFBQVE7UUFDUixNQUFNNEYsTUFBTWpHLFNBQVNxQixhQUFhLENBQUM7UUFDbkM0RSxJQUFJcEUsSUFBSSxHQUFHO1FBQ1hvRSxJQUFJQyxFQUFFLEdBQUc7UUFDVEQsSUFBSTNFLFNBQVMsR0FBRztRQUNoQjJFLElBQUk3RixLQUFLLENBQUMrRixLQUFLLEdBQUc7UUFDbEJGLElBQUk3RixLQUFLLENBQUNnRyxTQUFTLEdBQUc7UUFDdEJILElBQUluRixTQUFTLEdBQUc7UUFFaEIsSUFBSXVGLFdBQVc7UUFDZkosSUFBSXpGLGdCQUFnQixDQUFDLFNBQVMsQ0FBQ0M7WUFDN0JBLEVBQUU2RixjQUFjO1lBQ2hCRCxXQUFXLENBQUNBO1lBQ1o7bUJBQUlSO2FBQU0sQ0FBQ0UsS0FBSyxDQUFDLEdBQUcvRSxPQUFPLENBQUMsQ0FBQ2dGLElBQU9BLEVBQUU1RixLQUFLLENBQUNDLE9BQU8sR0FBR2dHLFdBQVcsU0FBUztZQUMxRUosSUFBSW5GLFNBQVMsR0FBR3VGLFdBQVcseUNBQXlDO1FBQ3RFO1FBRUEsZ0JBQWdCO1FBQ2hCLE1BQU1FLHFCQUFxQm5FLE9BQU9vRSxhQUFhLElBQUkzRjtRQUNuRDBGLG1CQUFtQnRFLFdBQVcsQ0FBQ2dFO0lBQ2pDO0FBQ0Y7QUFFQSw2RUFBNkU7QUFDN0U3RCxPQUFPcUIsYUFBYSxHQUFHQTtBQUN2QnJCLE9BQU9ELGVBQWUsR0FBR0E7QUFDekJDLE9BQU9GLGtCQUFrQixHQUFHQTtBQUM1QkUsT0FBT3RDLGFBQWEsR0FBR0E7QUFFYiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zY3JpcHRzL3NldHVwL3NldHVwLnRzP2JlNjQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBzZXR1cC50c1xuICpcbiAqIOKWoCDjgr/jgrnjgq/jgqvjg7zjg4njga7lj5blvpfjg7vooajnpLogKGxvYWRUYXNrQ2FyZHMpXG4gKiAgIC0gL2FwaS90YXNrcyDjgYvjgonjgr/jgrnjgq/kuIDopqfjgpLlj5blvpfjgZfjgIEucHJvbXB0LWNhcmQg44KS5YuV55qE55Sf5oiQXG4gKiAgIC0g44Kr44O844OJ5LiL5ZCR44GN44Ki44Kk44Kz44Oz44Gn44K/44K544Kv6Kmz57Sw44Oi44O844OA44Or77yI44OX44Ot44Oz44OX44OI44OG44Oz44OX44Os44O844OI77yP5YWl5Ye65Yqb5L6L77yJ44KS6KGo56S6XG4gKlxuICog4pagIOOCu+ODg+ODiOOCouODg+ODl+eUu+mdouWIh+abvyAoc2hvd1NldHVwRm9ybSlcbiAqICAgLSDjg4Hjg6Pjg4Pjg4jnlLvpnaLjgpLpmqDjgZfjgIHjgrvjg4Pjg4jjgqLjg4Pjg5fnlLvpnaLjgpLlho3ooajnpLpcbiAqXG4gKiDilqAg44K/44K544Kv6YG45oqe44Gn44OB44Oj44OD44OI6ZaL5aeLIChoYW5kbGVUYXNrQ2FyZENsaWNrKVxuICogICAtIOOAjOeKtuazgeODu+S9nOalreeSsOWig+OAjeWFpeWKm++8i+OCq+ODvOODieOCr+ODquODg+OCr+OBp+aWsOimj+ODgeODo+ODg+ODiOODq+ODvOODoOS9nOaIkFxuICogICAtIOacgOWIneOBruODoeODg+OCu+ODvOOCuOOCkiBCb3Qg44Gr5oqV44GS44Gm44OB44Oj44OD44OI44KS6ZaL5aeLXG4gKlxuICog4pagIOOAjOOCguOBo+OBqOimi+OCi+OAjeaKmOOCiueVs+OBv+apn+iDvSAoaW5pdFRvZ2dsZVRhc2tzKVxuICogICAtIOOCv+OCueOCr+OBjCA2IOS7tui2heOBiOOCi+OBqCA3IOS7tuebruS7pemZjeOCkuaKmOOCiueVs+OBv+OAgeWxlemWi++8j+aKmOOCiueVs+OBv+ODnOOCv+ODs+OCkueUn+aIkFxuICovXG5cbnR5cGUgVGFza0l0ZW0gPSB7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIHByb21wdF90ZW1wbGF0ZT86IHN0cmluZztcbiAgaW5wdXRfZXhhbXBsZXM/OiBzdHJpbmc7XG4gIG91dHB1dF9leGFtcGxlcz86IHN0cmluZztcbiAgaXNfZGVmYXVsdD86IGJvb2xlYW47XG59O1xuXG4vLyDilrwgMS4g44K/44K544Kv44Kr44O844OJ55Sf5oiQ44O76Kmz57Sw6KGo56S6IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmNvbnN0IEZBTExCQUNLX1RBU0tTOiBUYXNrSXRlbVtdID0gW1xuICB7XG4gICAgbmFtZTogXCLwn5OnIOODoeODvOODq+S9nOaIkFwiLFxuICAgIHByb21wdF90ZW1wbGF0ZTogXCLnirbms4HjgoTkvZzmpa3nkrDlooPjgpLjgoLjgajjgavjgIHjg6Hjg7zjg6vjgpLkvZzmiJDjgZfjgabjgIJcIixcbiAgICBpbnB1dF9leGFtcGxlczogXCLmlrDoo73lk4Hjg6rjg6rjg7zjgrnjga7moYjlhoXjga7jg6Hjg7zjg6vkvZzmiJDjgpLjgZfjgZ/jgYTjgIJcIixcbiAgICBvdXRwdXRfZXhhbXBsZXM6XG4gICAgICBcIuS7tuWQje+8muaWsOijveWTgeeZuuWjsuOBruOBlOahiOWGhVxcbuacrOaWh++8muaLneWVk+OAgOaZguS4i+OBvuOBmeOBvuOBmeOBlOWBpeWLneOBruOBk+OBqOOBqOOBiuaFtuOBs+eUs+OBl+S4iuOBkuOBvuOBmeOAguOBleOBpuOAgeOBk+OBruW6puW8iuekvuOBp+OBr+eUu+acn+eahOOBquaWsOijveWTgeOCkuODquODquODvOOCueOBhOOBn+OBl+OBvuOBl+OBn+OBruOBp+OAgeOBlOahiOWGheeUs+OBl+S4iuOBkuOBvuOBmeOAguOBpOOBjeOBvuOBl+OBpuOBr+OAgeips+e0sOizh+aWmeOCkuWQjOWwgeOBhOOBn+OBl+OBvuOBl+OBn+OBruOBp+OBlOS4gOiqreOBhOOBn+OBoOOBkeOBvuOBmeOBqOW5uOeUmuOBp+OBmeOAguS7iuW+jOOBqOOCguS9leWNkuOCiOOCjeOBl+OBj+OBiumhmOOBhOeUs+OBl+S4iuOBkuOBvuOBmeOAglwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCLwn5KhIOOCouOCpOODh+OCoueZuuaDs1wiLFxuICAgIHByb21wdF90ZW1wbGF0ZTogXCLni6zlibXnmoTjgarjgqLjgqTjg4fjgqLjga7nmbrmg7PjgpLjgZfjgabjgbvjgZfjgYTjgIJcIixcbiAgICBpbnB1dF9leGFtcGxlczogXCLlupfoiJfjga7pm4blrqLjgpLlopfjgoTjgZnjgZ/jgoHjga7jgqLjgqTjg4fjgqLjgpLogIPjgYjjgabjgIJcIixcbiAgICBvdXRwdXRfZXhhbXBsZXM6XG4gICAgICBcIjEuIOOBiuW+l+OBquOCr+ODvOODneODs+S7mOOBjVNOU+OCreODo+ODs+ODmuODvOODs+OBruWun+aWvSAyLiDlupfoiJfjgqTjg5njg7Pjg4jjga7lrprmnJ/plovlgqwgMy4g5Zyw5Z+f44Gu5LuW5bqX6IiX44Go6YCj5pC644GX44Gf44K544K/44Oz44OX44Op44Oq44O85LyB55S7XCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIvCfk4Qg6KaB57SEXCIsXG4gICAgcHJvbXB0X3RlbXBsYXRlOiBcIueKtuazgeODu+S9nOalreeSsOWig+OBq+WFpeWKm+OBleOCjOOBn+aWh+OCkuimgee0hOOBl+OBpuOAglwiLFxuICAgIGlucHV0X2V4YW1wbGVzOiBcIumVt+e3qOWwj+iqrOOBruOCueODiOODvOODquODvOOCkuewoea9lOOBq+OBvuOBqOOCgeOBn+OBhOOBruOBp+OAgeimgee0hOOBl+OBpuOAglwiLFxuICAgIG91dHB1dF9leGFtcGxlczpcbiAgICAgIFwi5pys5L2c5ZOB44Gv44CB5Li75Lq65YWs44GM5peF44KS6YCa44GY44Gm6Ieq5YiG6Ieq6Lqr44Go5ZCR44GN5ZCI44GE44CB5a625peP44Gu57WG44KS5YaN56K66KqN44GZ44KL54mp6Kqe44Gn44GZ44CC5Li76KaB44Gq44OG44O844Oe44Gv5oiQ6ZW344Go5ZKM6Kej44Gn44CB5bGx5aC044Go44Gq44KL44K344O844Oz44Gn44Gv6YGO5Y6744Gu6JGb6Jek44KS5LmX44KK6LaK44GI44KL5qeY5a2Q44GM5o+P44GL44KM44Gm44GE44G+44GZ44CCXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIvCfm6DvuI8g5ZWP6aGM6Kej5rG6XCIsXG4gICAgcHJvbXB0X3RlbXBsYXRlOiBcIuWVj+mhjOino+axuuOBq+WNlOWKm+OBl+OBpuOBu+OBl+OBhOOAglwiLFxuICAgIGlucHV0X2V4YW1wbGVzOiBcIuS6uuS6i+ODiOODqeODluODq++8iOODoeODs+ODkOODvOWQjOWjq+OBruihneeqge+8ieOBruWVj+mhjOino+axuuOCkuOBl+OBn+OBhOOAglwiLFxuICAgIG91dHB1dF9leGFtcGxlczpcbiAgICAgIFwiMS4g5b2T5LqL6ICF5Y+M5pa544GL44KJ44OS44Ki44Oq44Oz44Kw44KS6KGM44GE44CB5LqL5a6f6Zai5L+C44KS5pW055CG44GZ44KLIDIuIOesrOS4ieiAheOBjOWFpeOCi+iqv+aVtOS8muitsOOCkuioreWumuOBl+OAgeaEj+imi+OCkuOBmeOCiuWQiOOCj+OBm+OCiyAzLiDlho3nmbrpmLLmraLjga7jgZ/jgoHjga7jgrPjg5/jg6Xjg4vjgrHjg7zjgrfjg6fjg7Pjg6vjg7zjg6vjgpLnrZblrppcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi8J+TiyDllY/poYzjgbjlm57nrZRcIixcbiAgICBwcm9tcHRfdGVtcGxhdGU6IFwi5ZWP6aGM44G45Zue562U44GZ44KL44Gu44KS5omL5Lyd44Gj44Gm44G744GX44GE44CCXCIsXG4gICAgaW5wdXRfZXhhbXBsZXM6IFwi54mp55CG44Gu5ZWP6aGM77ya6Ieq55Sx6JC95LiL44Gu5YWs5byP44KS5pWZ44GI44Gm44GP44Gg44GV44GE44CCXCIsXG4gICAgb3V0cHV0X2V4YW1wbGVzOlxuICAgICAgXCLoh6rnlLHokL3kuIvjga7ot53pm6LjgpLooajjgZnlhazlvI/jga/jgIFkID0gKDEvMilndF4yIOOBp+OBme+8iGfjga/ph43lipvliqDpgJ/luqbjgIF044Gv6JC95LiL5pmC6ZaT77yJ44CC5Yid6YCf5bqm44GMMOOBruWgtOWQiOOBq+mBqeeUqOOBp+OBjeOBvuOBmeOAglwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCLihLnvuI8g5oOF5aCx5o+Q5L6bXCIsXG4gICAgcHJvbXB0X3RlbXBsYXRlOiBcIueKtuazgeODu+S9nOalreeSsOWig+OBq+WFpeWKm+OBleOCjOOBn+OCguOBruOBq+OBpOOBhOOBpuOBruaDheWgseaPkOS+m+OCkuOBl+OBpuOBu+OBl+OBhOOAglwiLFxuICAgIGlucHV0X2V4YW1wbGVzOiBcIuaWsOWei+OCs+ODreODiuOCpuOCpOODq+OCueOBruacgOaWsOaDheWgseOBjOefpeOCiuOBn+OBhOOAglwiLFxuICAgIG91dHB1dF9leGFtcGxlczpcbiAgICAgIFwi54++5Zyo44Gu5oSf5p+T54q25rOB44Gv5Zyw5Z+f44Gr44KI44Gj44Gm5aSn44GN44GP55Ww44Gq44KK44G+44GZ44GM44CB5paw44GX44GE5aSJ55Ww5qCq44Gu5YuV5ZCR44KE44Ov44Kv44OB44Oz5o6l56iu44Gu6YCy5o2X44GM54Sm54K544Go44Gq44Gj44Gm44GE44G+44GZ44CC5pyA5paw5oOF5aCx44Gv5Y6a55Sf5Yq05YON55yB44Gu5YWs5byP44K144Kk44OI44KEV0hP44Gu44Oq44Oq44O844K544KS56K66KqN44GZ44KL44Gu44GM5pyb44G+44GX44GE44Gn44GZ44CCXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIvCfjbMg44Os44K344OUXCIsXG4gICAgcHJvbXB0X3RlbXBsYXRlOiBcIueKtuazgeODu+S9nOalreeSsOWig+OBq+WFpeWKm+OBleOCjOOBn+aDheWgseOCkuOCguOBqOOBq+ODrOOCt+ODlOOCkuiAg+OBiOOBpuOAglwiLFxuICAgIGlucHV0X2V4YW1wbGVzOiBcIumHjuiPnOOBjOODoeOCpOODs+OBp+OAgeODmOODq+OCt+ODvOOBquacnemjn+OBruODrOOCt+ODlOOBjOefpeOCiuOBn+OBhOOAglwiLFxuICAgIG91dHB1dF9leGFtcGxlczpcbiAgICAgIFwi44Kw44Oq44Or6YeO6I+c44Go5Y2144KS5L2/44Gj44Gf44Kq44O844OW44Oz54S844GN44Gv44GE44GL44GM44Gn44GX44KH44GG44CC44GK5aW944G/44Gu6YeO6I+c77yI44OR44OX44Oq44Kr44CB44K644OD44Kt44O844OL44CB546J44Gt44GO44Gq44Gp77yJ44KS44Kr44OD44OI44GX44Gm5Y2144Go5LiA57eS44Gr6ICQ54ax55q/44Gr5YWl44KM44CB44Kq44Oq44O844OW44Kq44Kk44Or44Go5aGp44Kz44K344On44Km44Gn6Kq/5ZGz44CC44Kq44O844OW44Oz44Gn54S844GR44Gw44OY44Or44K344O844GL44Gk5omL6Lu944Gr5L2c44KM44G+44GZ44CCXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIuKciO+4jyDml4XooYzoqIjnlLtcIixcbiAgICBwcm9tcHRfdGVtcGxhdGU6IFwi54q25rOB44O75L2c5qWt55Kw5aKD44Gu5YaF5a6544KS44KC44Go44Gr44CB5peF6KGM6KiI55S744KS56uL44Gm44Gm44G744GX44GE44CCXCIsXG4gICAgaW5wdXRfZXhhbXBsZXM6IFwi5Zu95YaF5peF6KGM44CBMuazijPml6XjgIHmuKnms4njgajoh6rnhLbjgpLmuoDllqvjgZfjgZ/jgYTjga7jgafjgIHml4XooYzoqIjnlLvjgpLogIPjgYjjgabjgIJcIixcbiAgICBvdXRwdXRfZXhhbXBsZXM6XG4gICAgICBcIuiNiea0pea4qeazie+8iOe+pOmmrOecjO+8ieOCkuOBiuOBmeOBmeOCgeOBl+OBvuOBmeOAgjHml6Xnm67jga/mua/nlZHlkajovrrjgpLmlaPnrZbjgZfjgIHmuKnms4nooZfjgpLmpb3jgZfjgoDjgIIy5pel55uu44Gv6L+R6Zqj44Gu6Ieq54S25YWs5ZyS44Gn6Lu944GE44OP44Kk44Kt44Oz44Kw44KS44GX44Gm44CB5aSc44Gv5peF6aSo44Gn5rip5rOJ5LiJ5pin44CCM+aXpeebruOBr+WcsOWFg+OBruWQjeeJqeOCkuWgquiDveOBl+OBpuOBi+OCieW4sOi3r+OBuOOAglwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCLwn5KsIOaCqeOBv+ebuOirh1wiLFxuICAgIHByb21wdF90ZW1wbGF0ZTogXCLmgqnjgb/nm7joq4fjgavjga7jgaPjgabjgbvjgZfjgYTjgIJcIixcbiAgICBpbnB1dF9leGFtcGxlczogXCLmgYvmhJvjgaflkYrnmb3jgZnjgovli4fmsJfjgYzlh7rjgarjgYTjgafjgZnjgIJcIixcbiAgICBvdXRwdXRfZXhhbXBsZXM6XG4gICAgICBcIuOBvuOBmuOBr+iHquWIhuOBruawl+aMgeOBoeOCkue0oOebtOOBq+iqjeOCgeOBvuOBl+OCh+OBhuOAguOBneOBl+OBpuOAgeebuOaJi+OBqOOBruOCs+ODn+ODpeODi+OCseODvOOCt+ODp+ODs+OBp+Wwj+OBleOBquOCueODhuODg+ODl+OCkuepjeOBv+mHjeOBreOAgeS/oemgvOmWouS/guOCkuevieOBj+OBk+OBqOOBjOWkp+WIh+OBp+OBmeOAguWkseaVl+OCkuaBkOOCjOOCi+awl+aMgeOBoeOBr+OCj+OBi+OCiuOBvuOBmeOBjOOAgeihjOWLleOBl+OBquOBkeOCjOOBsOS9leOCguWkieOCj+OCiuOBvuOBm+OCk+OAguWLh+awl+OCkuWHuuOBl+OBpuS4gOatqeOCkui4j+OBv+WHuuOBmeOBk+OBqOOBp+OAgeeKtuazgeOBjOWJjeWQkeOBjeOBq+mAsuOCgOWPr+iDveaAp+OBjOOBguOCiuOBvuOBmeOAglwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCLwn5OoIOODoeODg+OCu+ODvOOCuOOBuOOBrui/lOetlFwiLFxuICAgIHByb21wdF90ZW1wbGF0ZTogXCLnirbms4Hjg7vkvZzmpa3nkrDlooPjga7lhoXlrrnjgpLouI/jgb7jgYjjgabjgIHjg6Hjg4Pjgrvjg7zjgrjjgbjjga7ov5TnrZTjgpLkuIDnt5LjgavogIPjgYjjgabjgbvjgZfjgYTjgIJcIixcbiAgICBpbnB1dF9leGFtcGxlczpcbiAgICAgIFwi5LiK5Y+444GL44KJ44CM44GZ44GQ44Gr5Lya6K2w5a6k44Gr5p2l44Gm44CN44GoTElOReOBp+mAo+e1oeOBjOOBjeOBn+WgtOWQiOOBq+OBqeOBruOCiOOBhuOBq+ODoeODg+OCu+ODvOOCuOOBq+i/lOetlOOBmeOCjOOBsOOCiOOBhO+8n1wiLFxuICAgIG91dHB1dF9leGFtcGxlczogXCLkuobop6PjgZfjgb7jgZfjgZ/jgILjgZnjgZDjgavlkJHjgYvjgYTjgb7jgZnjgILkvZXjgYvmupblgpnjgYzlv4XopoHjgarjgoLjga7jga/jgYLjgorjgb7jgZnjgYvvvJ9cIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi8J+SkSDjg4fjg7zjg4joqIjnlLtcIixcbiAgICBwcm9tcHRfdGVtcGxhdGU6IFwi54q25rOB44O75L2c5qWt55Kw5aKD44Gu5YaF5a6544KS6LiP44G+44GI44Gm44CB44OH44O844OI44Gu6KiI55S744KS56uL44Gm44Gm44G744GX44GE44CCXCIsXG4gICAgaW5wdXRfZXhhbXBsZXM6IFwi6Iqx54Gr5aSn5Lya44Gr6KGM44GP5LqI5a6a44CB5aSc44Oh44Kk44Oz44Gn5qW944GX44G/44Gf44GE44Gu44Gn44CB44OH44O844OI6KiI55S744KS56uL44Gm44Gm44CCXCIsXG4gICAgb3V0cHV0X2V4YW1wbGVzOlxuICAgICAgXCLlpJXmlrnjgYvjgonmtbTooaPjgaflkIjmtYHjgZfjgIHlsYvlj7Djgafpo5/jgbnmranjgY3jgpLmpb3jgZfjgpPjgaDlvozjgIHoirHngavjgpLjgobjgaPjgY/jgoroprPos54uIOOBneOBruW+jOOBr+i/keOBj+OBruODkOODvOOBp+i7veOBj+ODieODquODs+OCr+OCkumjsuOBv+OBquOBjOOCieS9memfu+OBq+a1uOOCi+OBruOBr+OBhOOBi+OBjOOBp+OBl+OCh+OBhuOBi+OAglwiLFxuICB9LFxuXTtcblxuZnVuY3Rpb24gZ2V0RmFsbGJhY2tUYXNrcygpIHtcbiAgcmV0dXJuIEZBTExCQUNLX1RBU0tTLm1hcCgodGFzaykgPT4gKHtcbiAgICAuLi50YXNrLFxuICAgIGlzX2RlZmF1bHQ6IHRydWVcbiAgfSkpO1xufVxuXG5mdW5jdGlvbiBsb2FkVGFza0NhcmRzKCkge1xuICBjb25zdCBpb01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpby1tb2RhbFwiKTtcbiAgY29uc3QgaW9Nb2RhbENvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlvLW1vZGFsLWNvbnRlbnRcIik7XG5cbiAgLy8g44Oi44O844OA44Or44KS6ZaJ44GY44KL44OY44Or44ORXG4gIGZ1bmN0aW9uIGNsb3NlSU9Nb2RhbCgpIHtcbiAgICBpZiAoaW9Nb2RhbCkgaW9Nb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH1cblxuICBpZiAoaW9Nb2RhbCAmJiBpb01vZGFsQ29udGVudCAmJiAhaW9Nb2RhbC5kYXRhc2V0LmJvdW5kKSB7XG4gICAgaW9Nb2RhbC5kYXRhc2V0LmJvdW5kID0gXCJ0cnVlXCI7XG4gICAgLy8g55S76Z2i44Kv44Oq44OD44Kv44Gn44Oi44O844OA44Or44KS6ZaJ44GY44KLXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGlmIChpb01vZGFsICYmIGlvTW9kYWwuc3R5bGUuZGlzcGxheSA9PT0gXCJibG9ja1wiKSBjbG9zZUlPTW9kYWwoKTtcbiAgICB9KTtcbiAgICAvLyDlhoXpg6jjgq/jg6rjg4Pjgq/jgafjga/plonjgZjjgarjgYRcbiAgICBpZiAoaW9Nb2RhbENvbnRlbnQpIHtcbiAgICAgIGlvTW9kYWxDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcmVuZGVyVGFza0NhcmRzID0gKHRhc2tzOiBUYXNrSXRlbVtdKSA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLXNlbGVjdGlvblwiKTtcbiAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgLy8g44Kz44Oz44OG44OK44KS44Kv44Oq44KiXG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG5cbiAgICAvLyDjgr/jgrnjgq/jgYznqbrjga7loLTlkIjjga/jg6Hjg4Pjgrvjg7zjgrjjgpLooajnpLpcbiAgICBpZiAoIXRhc2tzIHx8IHRhc2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IFwiPHA+44K/44K544Kv44GM6KaL44Gk44GL44KK44G+44Gb44KT44Gn44GX44Gf44CCPC9wPlwiO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgIC8vIHRhc2voh6rkvZPjgYxudWxsL3VuZGVmaW5lZOOBruWgtOWQiOOBr+OCueOCreODg+ODl++8iOW/teOBruOBn+OCge+8iVxuICAgICAgaWYgKCF0YXNrKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IHRhc2tOYW1lID1cbiAgICAgICAgdHlwZW9mIHRhc2submFtZSA9PT0gXCJzdHJpbmdcIiAmJiB0YXNrLm5hbWUudHJpbSgpXG4gICAgICAgICAgPyB0YXNrLm5hbWUudHJpbSgpXG4gICAgICAgICAgOiB0YXNrLm5hbWVcbiAgICAgICAgICAgID8gU3RyaW5nKHRhc2submFtZSlcbiAgICAgICAgICAgIDogXCLnhKHpoYxcIjtcblxuICAgICAgLy8g44Op44OD44OR44O8XG4gICAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gXCJ0YXNrLXdyYXBwZXJcIjtcblxuICAgICAgLy8g44Kr44O844OJXG4gICAgICBjb25zdCBjYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNhcmQuY2xhc3NOYW1lID0gXCJwcm9tcHQtY2FyZFwiO1xuICAgICAgY2FyZC5kYXRhc2V0LnRhc2sgPSB0YXNrTmFtZTtcbiAgICAgIGNhcmQuZGF0YXNldC5wcm9tcHRfdGVtcGxhdGUgPSB0YXNrLnByb21wdF90ZW1wbGF0ZSB8fCBcIuODl+ODreODs+ODl+ODiOODhuODs+ODl+ODrOODvOODiOOBr+OBguOCiuOBvuOBm+OCk1wiO1xuICAgICAgY2FyZC5kYXRhc2V0LmlucHV0X2V4YW1wbGVzID0gdGFzay5pbnB1dF9leGFtcGxlcyB8fCBcIuWFpeWKm+S+i+OBjOOBguOCiuOBvuOBm+OCk1wiO1xuICAgICAgY2FyZC5kYXRhc2V0Lm91dHB1dF9leGFtcGxlcyA9IHRhc2sub3V0cHV0X2V4YW1wbGVzIHx8IFwi5Ye65Yqb5L6L44GM44GC44KK44G+44Gb44KTXCI7XG4gICAgICBjYXJkLmRhdGFzZXQuaXNfZGVmYXVsdCA9IHRhc2suaXNfZGVmYXVsdCA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiO1xuXG4gICAgICAvLyDjg5jjg4Pjg4Djg7zvvIjjgr/jgqTjg4jjg6vvvIvilrzjg5zjgr/jg7PvvIlcbiAgICAgIGNvbnN0IGhlYWRlckNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBoZWFkZXJDb250YWluZXIuY2xhc3NOYW1lID0gXCJoZWFkZXItY29udGFpbmVyXCI7XG5cbiAgICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBoZWFkZXIuY2xhc3NOYW1lID0gXCJ0YXNrLWhlYWRlclwiO1xuICAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gdGFza05hbWUubGVuZ3RoID4gOCA/IHRhc2tOYW1lLnN1YnN0cmluZygwLCA4KSArIFwi4oCmXCIgOiB0YXNrTmFtZTtcblxuICAgICAgY29uc3QgdG9nZ2xlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIHRvZ2dsZUJ0bi50eXBlID0gXCJidXR0b25cIjtcbiAgICAgIHRvZ2dsZUJ0bi5jbGFzc0xpc3QuYWRkKFwiYnRuXCIsIFwiYnRuLW91dGxpbmUtc3VjY2Vzc1wiLCBcImJ0bi1tZFwiKTtcbiAgICAgIHRvZ2dsZUJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJiaSBiaS1jYXJldC1kb3duXCI+PC9pPic7XG5cbiAgICAgIC8vIOKWvOOCr+ODquODg+OCr+OBp+ips+e0sOODouODvOODgOODq1xuICAgICAgdG9nZ2xlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBpZiAoIWlvTW9kYWwgfHwgIWlvTW9kYWxDb250ZW50KSByZXR1cm47XG4gICAgICAgIGlvTW9kYWxDb250ZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8aDUgc3R5bGU9XCJtYXJnaW4tYm90dG9tOjFyZW07XCI+44K/44K544Kv6Kmz57SwPC9oNT5cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbTouNXJlbTtmb250LXdlaWdodDpib2xkO1wiPuOCv+OCueOCr+WQjTwvZGl2PlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tYm90dG9tOjFyZW07XCI+JHtjYXJkLmRhdGFzZXQudGFza308L2Rpdj5cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbTouNXJlbTtmb250LXdlaWdodDpib2xkO1wiPuODl+ODreODs+ODl+ODiOODhuODs+ODl+ODrOODvOODiDwvZGl2PlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tYm90dG9tOjFyZW07XCI+JHtjYXJkLmRhdGFzZXQucHJvbXB0X3RlbXBsYXRlfTwvZGl2PlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tYm90dG9tOi41cmVtO2ZvbnQtd2VpZ2h0OmJvbGQ7XCI+5YWl5Yqb5L6LPC9kaXY+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1ib3R0b206MXJlbTtcIj4ke2NhcmQuZGF0YXNldC5pbnB1dF9leGFtcGxlc308L2Rpdj5cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbTouNXJlbTtmb250LXdlaWdodDpib2xkO1wiPuWHuuWKm+S+izwvZGl2PlxuICAgICAgICAgIDxkaXY+JHtjYXJkLmRhdGFzZXQub3V0cHV0X2V4YW1wbGVzfTwvZGl2PmA7XG4gICAgICAgIGlvTW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIH0pO1xuXG4gICAgICBoZWFkZXJDb250YWluZXIuYXBwZW5kKGhlYWRlciwgdG9nZ2xlQnRuKTtcbiAgICAgIGNhcmQuYXBwZW5kQ2hpbGQoaGVhZGVyQ29udGFpbmVyKTtcbiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoY2FyZCk7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG4gICAgfSk7XG5cbiAgICAvLyDjgq/jg6rjg4Pjgq/vvI/kuKbjgbPmm7/jgYjplqLkv4Ljga7liJ3mnJ/ljJZcbiAgICBpbml0U2V0dXBUYXNrQ2FyZHMoKTtcbiAgICBpbml0VG9nZ2xlVGFza3MoKTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdy5pbml0VGFza09yZGVyRWRpdGluZyA9PT0gXCJmdW5jdGlvblwiKSB3aW5kb3cuaW5pdFRhc2tPcmRlckVkaXRpbmcoKTtcbiAgfTtcblxuICBjb25zdCBhcHBseVRhc2tzID0gKHRhc2tzOiBUYXNrSXRlbVtdKSA9PiB7XG4gICAgLy8g44K/44K544Kv44GM56m644CB44KC44GX44GP44Gv6YWN5YiX44Gn44Gq44GE5aC05ZCI44Gv44OV44Kp44O844Or44OQ44OD44Kv44KS6KGo56S6XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHRhc2tzKSB8fCB0YXNrcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJlbmRlclRhc2tDYXJkcyhnZXRGYWxsYmFja1Rhc2tzKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZW5kZXJUYXNrQ2FyZHModGFza3MpO1xuICB9O1xuXG4gIC8vIOWIneacn+ODreODvOODieaZgjog44G+44Ga44Gv44OV44Kp44O844Or44OQ44OD44Kv44KS6KGo56S644GX44Gm44GK44GPXG4gIHJlbmRlclRhc2tDYXJkcyhnZXRGYWxsYmFja1Rhc2tzKCkpO1xuXG4gIC8vIC9hcGkvdGFza3Mg44GL44KJ5Y+W5b6XXG4gIGZldGNoKFwiL2FwaS90YXNrc1wiKVxuICAgIC50aGVuKChyKSA9PiB7XG4gICAgICBjb25zdCBjb250ZW50VHlwZSA9IHIuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIikgfHwgXCJcIjtcbiAgICAgIGlmICghci5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHRhc2tzIGZldGNoIGZhaWxlZDogJHtyLnN0YXR1c31gKTtcbiAgICAgIH1cbiAgICAgIGlmICghY29udGVudFR5cGUuaW5jbHVkZXMoXCJhcHBsaWNhdGlvbi9qc29uXCIpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInRhc2tzIHJlc3BvbnNlIGlzIG5vdCBqc29uXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHIuanNvbigpO1xuICAgIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGNvbnN0IHRhc2tzOiBUYXNrSXRlbVtdID0gQXJyYXkuaXNBcnJheShkYXRhPy50YXNrcykgPyBkYXRhLnRhc2tzIDogW107XG4gICAgICBhcHBseVRhc2tzKHRhc2tzKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKFwi44K/44K544Kv6Kqt44G/6L6844G/44Gr5aSx5pWXOlwiLCBlcnIpO1xuICAgICAgLy8g44Ko44Op44O85pmC44KC44OV44Kp44O844Or44OQ44OD44Kv44KS6KGo56S6XG4gICAgICBhcHBseVRhc2tzKFtdKTtcbiAgICB9KTtcbn1cblxuLy8g4pa8IDIuIOOCu+ODg+ODiOOCouODg+ODl+eUu+mdouOBruihqOekuiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmZ1bmN0aW9uIHNob3dTZXR1cEZvcm0oKSB7XG4gIGNvbnN0IGNoYXRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoYXQtY29udGFpbmVyXCIpO1xuICBjb25zdCBzZXR1cENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2V0dXAtY29udGFpbmVyXCIpO1xuICBjb25zdCBzZXR1cEluZm9FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZXR1cC1pbmZvXCIpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsO1xuXG4gIGlmIChjaGF0Q29udGFpbmVyKSBjaGF0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgaWYgKHNldHVwQ29udGFpbmVyKSBzZXR1cENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICBpZiAoc2V0dXBJbmZvRWxlbWVudCkgc2V0dXBJbmZvRWxlbWVudC52YWx1ZSA9IFwiXCI7XG5cbiAgLy8g44K144Kk44OJ44OQ44O844Gu54q25oWL44KS44Kv44Oq44O844Oz44Ki44OD44OXXG4gIGNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpZGViYXJcIik7XG4gIGlmIChzaWRlYmFyKSB7XG4gICAgc2lkZWJhci5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcbiAgfVxuICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJzaWRlYmFyLXZpc2libGVcIik7XG5cbiAgbG9hZFRhc2tDYXJkcygpO1xufVxuXG4vLyDilrwgMy4g44K/44K544Kv44Kr44O844OJ6YG45oqe5Yem55CGIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5mdW5jdGlvbiBpbml0U2V0dXBUYXNrQ2FyZHMoKSB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay1zZWxlY3Rpb25cIik7XG4gIGlmICghY29udGFpbmVyKSByZXR1cm47XG4gIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlVGFza0NhcmRDbGljayk7XG4gIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlVGFza0NhcmRDbGljayk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVRhc2tDYXJkQ2xpY2soZTogRXZlbnQpIHtcbiAgaWYgKHdpbmRvdy5pc0VkaXRpbmdPcmRlcikgcmV0dXJuOyAvLyDkuKbjgbPmm7/jgYjkuK3jga/nhKHoppZcblxuICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBFbGVtZW50IHwgbnVsbDtcbiAgY29uc3QgY2FyZCA9IHRhcmdldD8uY2xvc2VzdChcIi5wcm9tcHQtY2FyZFwiKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XG4gIGlmICghY2FyZCkgcmV0dXJuO1xuXG4gIGNvbnN0IHNldHVwSW5mb0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNldHVwLWluZm9cIikgYXMgSFRNTFRleHRBcmVhRWxlbWVudCB8IG51bGw7XG4gIGNvbnN0IGFpTW9kZWxTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpLW1vZGVsXCIpIGFzIEhUTUxTZWxlY3RFbGVtZW50IHwgbnVsbDtcbiAgY29uc3QgY2hhdE1lc3NhZ2VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGF0LW1lc3NhZ2VzXCIpO1xuXG4gIC8vIOWFpeWKm+ODleOCqeODvOODoOOBruWApO+8iOepuuashOWPr++8iVxuICBjb25zdCBzZXR1cEluZm8gPSBzZXR1cEluZm9FbGVtZW50ID8gc2V0dXBJbmZvRWxlbWVudC52YWx1ZS50cmltKCkgOiBcIlwiO1xuICBjb25zdCBhaU1vZGVsID0gYWlNb2RlbFNlbGVjdCA/IGFpTW9kZWxTZWxlY3QudmFsdWUgOiBcImdlbWluaS0yLjUtZmxhc2hcIjtcblxuICBjb25zdCBwcm9tcHRfdGVtcGxhdGUgPSBjYXJkLmRhdGFzZXQucHJvbXB0X3RlbXBsYXRlIHx8IFwiXCI7XG4gIGNvbnN0IGlucHV0RXhhbXBsZXMgPSBjYXJkLmRhdGFzZXQuaW5wdXRfZXhhbXBsZXMgfHwgXCJcIjtcbiAgY29uc3Qgb3V0cHV0RXhhbXBsZXMgPSBjYXJkLmRhdGFzZXQub3V0cHV0X2V4YW1wbGVzIHx8IFwiXCI7XG5cbiAgLy8g5paw44OB44Oj44OD44OI44Or44O844OgIElEIOOBqOOCv+OCpOODiOODq1xuICBjb25zdCBuZXdSb29tSWQgPSBEYXRlLm5vdygpLnRvU3RyaW5nKCk7XG4gIGNvbnN0IHJvb21UaXRsZSA9IHNldHVwSW5mbyB8fCBcIuaWsOimj+ODgeODo+ODg+ODiFwiO1xuXG4gIC8vIGN1cnJlbnRDaGF0Um9vbUlkIOOBr+OCsOODreODvOODkOODq+OBvuOBn+OBr+S7luOBp+Wumue+qeOBleOCjOOBpuOBhOOCi+WJjeaPkFxuICB3aW5kb3cuY3VycmVudENoYXRSb29tSWQgPSBuZXdSb29tSWQ7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudENoYXRSb29tSWRcIiwgbmV3Um9vbUlkKTtcblxuICAvLyDikaAg44Or44O844Og44KS44K144O844OQ44O844Gr5L2c5oiQXG4gIGlmICh0eXBlb2Ygd2luZG93LmNyZWF0ZU5ld0NoYXRSb29tID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB3aW5kb3cuY3JlYXRlTmV3Q2hhdFJvb20obmV3Um9vbUlkLCByb29tVGl0bGUpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93LnNob3dDaGF0SW50ZXJmYWNlID09PSBcImZ1bmN0aW9uXCIpIHdpbmRvdy5zaG93Q2hhdEludGVyZmFjZSgpO1xuICAgICAgICAvLyDmlrDjgZfjgYTjg4Hjg6Pjg4Pjg4jjgafjga/jg6Hjg4Pjgrvjg7zjgrjooajnpLrjgpLjg6rjgrvjg4Pjg4hcbiAgICAgICAgaWYgKGNoYXRNZXNzYWdlcykgY2hhdE1lc3NhZ2VzLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93LmxvYWRDaGF0Um9vbXMgPT09IFwiZnVuY3Rpb25cIikgd2luZG93LmxvYWRDaGF0Um9vbXMoKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYGNoYXRIaXN0b3J5XyR7bmV3Um9vbUlkfWApO1xuXG4gICAgICAgIC8vIOKRoSDmnIDliJ3jga7jg6Hjg4Pjgrvjg7zjgrhcbiAgICAgICAgY29uc3QgZmlyc3RNc2cgPSBzZXR1cEluZm9cbiAgICAgICAgICA/IGDjgJDnirbms4Hjg7vkvZzmpa3nkrDlooPjgJEke3NldHVwSW5mb31cXG7jgJDjg6rjgq/jgqjjgrnjg4jjgJEke3Byb21wdF90ZW1wbGF0ZX1cXG5cXG7lhaXlipvkvos6XFxuJHtpbnB1dEV4YW1wbGVzfVxcblxcbuWHuuWKm+S+izpcXG4ke291dHB1dEV4YW1wbGVzfWBcbiAgICAgICAgICA6IGDjgJDjg6rjgq/jgqjjgrnjg4jjgJEke3Byb21wdF90ZW1wbGF0ZX1cXG5cXG7lhaXlipvkvos6XFxuJHtpbnB1dEV4YW1wbGVzfVxcblxcbuWHuuWKm+S+izpcXG4ke291dHB1dEV4YW1wbGVzfWA7XG5cbiAgICAgICAgLy8g4pGiIEJvdCDlv5znrZTnlJ/miJBcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuZ2VuZXJhdGVSZXNwb25zZSA9PT0gXCJmdW5jdGlvblwiKSB3aW5kb3cuZ2VuZXJhdGVSZXNwb25zZShmaXJzdE1zZywgYWlNb2RlbCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IGFsZXJ0KFwi44OB44Oj44OD44OI44Or44O844Og5L2c5oiQ44Gr5aSx5pWXOiBcIiArIGVycikpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJjcmVhdGVOZXdDaGF0Um9vbSBpcyBub3QgZGVmaW5lZFwiKTtcbiAgfVxufVxuXG4vLyDilrwgNC4g44CM44KC44Gj44Go6KaL44KL44CN44Oc44K/44Oz55Sf5oiQIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmZ1bmN0aW9uIGluaXRUb2dnbGVUYXNrcygpIHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLXNlbGVjdGlvblwiKTtcbiAgaWYgKCFjb250YWluZXIpIHJldHVybjtcbiAgY29uc3Qgb2xkQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2dnbGUtdGFza3MtYnRuXCIpO1xuICBpZiAob2xkQnRuKSBvbGRCdG4ucmVtb3ZlKCk7XG5cbiAgY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PihcIi50YXNrLXNlbGVjdGlvbiAucHJvbXB0LWNhcmRcIik7XG4gIGlmIChjYXJkcy5sZW5ndGggPiA2KSB7XG4gICAgLy8gN+aemuebruS7pemZjeOCkumdnuihqOekulxuICAgIFsuLi5jYXJkc10uc2xpY2UoNikuZm9yRWFjaCgoYykgPT4gKGMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiKSk7XG5cbiAgICAvLyDjg5zjgr/jg7PnlJ/miJBcbiAgICBjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGJ0bi50eXBlID0gXCJidXR0b25cIjtcbiAgICBidG4uaWQgPSBcInRvZ2dsZS10YXNrcy1idG5cIjtcbiAgICBidG4uY2xhc3NOYW1lID0gXCJwcmltYXJ5LWJ1dHRvblwiO1xuICAgIGJ0bi5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgIGJ0bi5zdHlsZS5tYXJnaW5Ub3AgPSBcIjAuMXJlbVwiO1xuICAgIGJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJiaSBiaS1jaGV2cm9uLWRvd25cIj48L2k+IOOCguOBo+OBqOimi+OCiyc7XG5cbiAgICBsZXQgZXhwYW5kZWQgPSBmYWxzZTtcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBleHBhbmRlZCA9ICFleHBhbmRlZDtcbiAgICAgIFsuLi5jYXJkc10uc2xpY2UoNikuZm9yRWFjaCgoYykgPT4gKGMuc3R5bGUuZGlzcGxheSA9IGV4cGFuZGVkID8gXCJmbGV4XCIgOiBcIm5vbmVcIikpO1xuICAgICAgYnRuLmlubmVySFRNTCA9IGV4cGFuZGVkID8gJzxpIGNsYXNzPVwiYmkgYmktY2hldnJvbi11cFwiPjwvaT4g6ZaJ44GY44KLJyA6ICc8aSBjbGFzcz1cImJpIGJpLWNoZXZyb24tZG93blwiPjwvaT4g44KC44Gj44Go6KaL44KLJztcbiAgICB9KTtcblxuICAgIC8vIOODnOOCv+ODs+OCkuODquOCueODiOOBruacq+WwvuOBq+i/veWKoFxuICAgIGNvbnN0IHNlbGVjdGlvbkNvbnRhaW5lciA9IHdpbmRvdy50YXNrU2VsZWN0aW9uIHx8IGNvbnRhaW5lcjtcbiAgICBzZWxlY3Rpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoYnRuKTtcbiAgfVxufVxuXG4vLyAtLS0tIOOCsOODreODvOODkOODq+WFrOmWiyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG53aW5kb3cuc2hvd1NldHVwRm9ybSA9IHNob3dTZXR1cEZvcm07XG53aW5kb3cuaW5pdFRvZ2dsZVRhc2tzID0gaW5pdFRvZ2dsZVRhc2tzO1xud2luZG93LmluaXRTZXR1cFRhc2tDYXJkcyA9IGluaXRTZXR1cFRhc2tDYXJkcztcbndpbmRvdy5sb2FkVGFza0NhcmRzID0gbG9hZFRhc2tDYXJkcztcblxuZXhwb3J0IHt9O1xuIl0sIm5hbWVzIjpbIkZBTExCQUNLX1RBU0tTIiwibmFtZSIsInByb21wdF90ZW1wbGF0ZSIsImlucHV0X2V4YW1wbGVzIiwib3V0cHV0X2V4YW1wbGVzIiwiZ2V0RmFsbGJhY2tUYXNrcyIsIm1hcCIsInRhc2siLCJpc19kZWZhdWx0IiwibG9hZFRhc2tDYXJkcyIsImlvTW9kYWwiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW9Nb2RhbENvbnRlbnQiLCJjbG9zZUlPTW9kYWwiLCJzdHlsZSIsImRpc3BsYXkiLCJkYXRhc2V0IiwiYm91bmQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsInJlbmRlclRhc2tDYXJkcyIsInRhc2tzIiwiY29udGFpbmVyIiwiaW5uZXJIVE1MIiwibGVuZ3RoIiwiZm9yRWFjaCIsInRhc2tOYW1lIiwidHJpbSIsIlN0cmluZyIsIndyYXBwZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiY2FyZCIsImhlYWRlckNvbnRhaW5lciIsImhlYWRlciIsInRleHRDb250ZW50Iiwic3Vic3RyaW5nIiwidG9nZ2xlQnRuIiwidHlwZSIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZCIsImFwcGVuZENoaWxkIiwiaW5pdFNldHVwVGFza0NhcmRzIiwiaW5pdFRvZ2dsZVRhc2tzIiwid2luZG93IiwiaW5pdFRhc2tPcmRlckVkaXRpbmciLCJhcHBseVRhc2tzIiwiQXJyYXkiLCJpc0FycmF5IiwiZmV0Y2giLCJ0aGVuIiwiciIsImNvbnRlbnRUeXBlIiwiaGVhZGVycyIsImdldCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJpbmNsdWRlcyIsImpzb24iLCJkYXRhIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJzaG93U2V0dXBGb3JtIiwiY2hhdENvbnRhaW5lciIsInNldHVwQ29udGFpbmVyIiwic2V0dXBJbmZvRWxlbWVudCIsInZhbHVlIiwic2lkZWJhciIsInF1ZXJ5U2VsZWN0b3IiLCJyZW1vdmUiLCJib2R5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZVRhc2tDYXJkQ2xpY2siLCJpc0VkaXRpbmdPcmRlciIsInRhcmdldCIsImNsb3Nlc3QiLCJhaU1vZGVsU2VsZWN0IiwiY2hhdE1lc3NhZ2VzIiwic2V0dXBJbmZvIiwiYWlNb2RlbCIsImlucHV0RXhhbXBsZXMiLCJvdXRwdXRFeGFtcGxlcyIsIm5ld1Jvb21JZCIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsInJvb21UaXRsZSIsImN1cnJlbnRDaGF0Um9vbUlkIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImNyZWF0ZU5ld0NoYXRSb29tIiwic2hvd0NoYXRJbnRlcmZhY2UiLCJsb2FkQ2hhdFJvb21zIiwicmVtb3ZlSXRlbSIsImZpcnN0TXNnIiwiZ2VuZXJhdGVSZXNwb25zZSIsImFsZXJ0Iiwib2xkQnRuIiwiY2FyZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2xpY2UiLCJjIiwiYnRuIiwiaWQiLCJ3aWR0aCIsIm1hcmdpblRvcCIsImV4cGFuZGVkIiwicHJldmVudERlZmF1bHQiLCJzZWxlY3Rpb25Db250YWluZXIiLCJ0YXNrU2VsZWN0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./scripts/setup/setup.ts\n"));

/***/ }),

/***/ "./scripts/setup/task_manager.ts":
/*!***************************************!*\
  !*** ./scripts/setup/task_manager.ts ***!
  \***************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n// Task title updater\nfunction updateTaskTitle(card, newTitle) {\n    const truncatedTitle = newTitle.length > 8 ? newTitle.substring(0, 8) + \"…\" : newTitle;\n    // 既存のヘッダーがある場合はテキストだけを更新\n    const header = card.querySelector(\".task-header\");\n    if (header) {\n        header.textContent = truncatedTitle;\n    } else if (typeof window.loadTaskCards === \"function\") {\n        // ヘッダーが存在しない異常状態では一覧を再描画して整える\n        window.loadTaskCards();\n        return;\n    }\n    // 過去に生成された task-title 要素が残っている場合は削除しておく\n    card.querySelectorAll(\".task-title\").forEach((elem)=>elem.remove());\n}\n// Task edit modal\nfunction showModal(modalEl1) {\n    if (!modalEl1) return;\n    modalEl1.style.display = \"flex\";\n}\nfunction hideModal(modalEl1) {\n    if (!modalEl1) return;\n    modalEl1.style.display = \"none\";\n}\nconst initTaskManager = ()=>{\n    const modalEl1 = document.getElementById(\"taskEditModal\");\n    const closeBtn = document.getElementById(\"closeTaskEditModal\");\n    const cancelBtn = document.getElementById(\"cancelTaskEditModal\");\n    const saveBtn = document.getElementById(\"saveTaskChanges\");\n    // モーダルの閉じる操作\n    closeBtn === null || closeBtn === void 0 ? void 0 : closeBtn.addEventListener(\"click\", ()=>hideModal(modalEl1));\n    cancelBtn === null || cancelBtn === void 0 ? void 0 : cancelBtn.addEventListener(\"click\", ()=>hideModal(modalEl1));\n    if (!saveBtn) return;\n    saveBtn.addEventListener(\"click\", ()=>{\n        const taskNameEl = document.getElementById(\"taskName\");\n        const promptTemplateEl = document.getElementById(\"promptTemplate\");\n        const inputExamplesEl = document.getElementById(\"inputExamples\");\n        const outputExamplesEl = document.getElementById(\"outputExamples\");\n        if (!taskNameEl || !promptTemplateEl || !inputExamplesEl || !outputExamplesEl) {\n            alert(\"入力欄が見つかりませんでした。\");\n            return;\n        }\n        // 1. モーダル内の入力値取得\n        const taskName = taskNameEl.value.trim();\n        const promptTemplate = promptTemplateEl.value.trim();\n        const inputExamples = inputExamplesEl.value.trim();\n        const outputExamples = outputExamplesEl.value.trim();\n        // 2. 編集前のタスク名を dataset から取得\n        const editingCard = window.currentEditingCard;\n        if (!editingCard) {\n            alert(\"編集対象が見つかりませんでした。\");\n            return;\n        }\n        const oldTask = editingCard.dataset.task;\n        if (!oldTask) {\n            alert(\"編集対象のタスク情報が見つかりませんでした。\");\n            return;\n        }\n        // 3. サーバー送信用ペイロード\n        const payload = {\n            old_task: oldTask,\n            new_task: taskName,\n            prompt_template: promptTemplate,\n            input_examples: inputExamples,\n            output_examples: outputExamples\n        };\n        // 4. API 呼び出し\n        fetch(\"/api/edit_task\", {\n            method: \"POST\",\n            credentials: \"same-origin\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(payload)\n        }).then((response)=>{\n            const ct = response.headers.get(\"Content-Type\") || \"\";\n            if (ct.includes(\"application/json\")) {\n                // 正常 or JSON エラー(JSON.stringify された {\"error\":...})\n                return response.json().then((data)=>{\n                    if (!response.ok) throw new Error(data.error || \"更新に失敗しました\");\n                    return data;\n                });\n            } else {\n                // HTML の 500 ページなどが返ってきた場合\n                return response.text().then((text)=>{\n                    console.error(\"非JSONレスポンス:\", text);\n                    throw new Error(\"サーバーエラー: \".concat(response.status));\n                });\n            }\n        }).then(()=>{\n            // 5. 成功したら data- 属性を更新\n            const card = editingCard;\n            card.dataset.task = taskName;\n            card.dataset.prompt_template = promptTemplate;\n            card.dataset.input_examples = inputExamples;\n            card.dataset.output_examples = outputExamples;\n            // 6. タイトルを書き換え\n            updateTaskTitle(card, taskName);\n            // 7. モーダル閉じる\n            hideModal(modalEl1);\n        }).catch((error)=>{\n            alert(\"更新に失敗しました: \" + error.message);\n            console.error(\"edit_task error:\", error);\n        });\n    });\n};\nif (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", initTaskManager);\n} else {\n    initTaskManager();\n}\n// Task ordering and editing\nlet isEditingOrder = false;\nlet editButton;\nlet draggingTask = null;\nlet taskPlaceholder = null;\nlet taskOffsetX = 0;\nlet taskOffsetY = 0;\n// タスクカード読み込み後に並び替え編集ボタンを追加する処理\nfunction initTaskOrderEditing() {\n    if (!window.loggedIn) return; // ★ 未ログインなら何もしない\n    // ヘッダー要素を取得\n    const header = document.querySelector(\".task-selection-header\");\n    if (!header) return;\n    // 既存のボタンがあれば削除\n    if (editButton) editButton.remove();\n    // ボタン作成\n    editButton = document.createElement(\"button\");\n    editButton.id = \"edit-task-order-btn\";\n    editButton.className = \"primary-button\";\n    // インライン表示に合わせるため余白は不要\n    editButton.style.margin = \"0\";\n    editButton.type = \"button\"; // フォーム送信を防止\n    // Bootstrapのアイコンをセット（ここでは例としてbi-arrows-moveを使用）\n    editButton.innerHTML = '<i class=\"bi bi-arrows-move\"></i>';\n    editButton.title = \"並び替え編集\"; // ツールチップ用\n    editButton.addEventListener(\"click\", toggleTaskOrderEditing);\n    // ヘッダー内にボタンを追加\n    header.appendChild(editButton);\n}\n// 編集モードの ON/OFF 切替\nfunction toggleTaskOrderEditing() {\n    // 編集モードをトグルする\n    isEditingOrder = !isEditingOrder;\n    window.isEditingOrder = isEditingOrder;\n    if (isEditingOrder) {\n        // 編集モード開始時：\n        // ボタンを押した瞬間にアイコンをチェックマークに変更し、タイトルを「完了」にする\n        if (editButton) {\n            editButton.title = \"完了\";\n            editButton.innerHTML = '<i class=\"bi bi-check\"></i>';\n        }\n        // タスクカード表示の設定やドラッグ＆ドロップを有効化\n        document.querySelectorAll(\".task-selection .prompt-card\").forEach((card)=>{\n            card.style.display = \"flex\";\n            card.style.position = \"relative\";\n        });\n        const toggleBtn = document.getElementById(\"toggle-tasks-btn\");\n        if (toggleBtn) {\n            toggleBtn.style.display = \"none\";\n        }\n        enableTaskDragAndDrop();\n        document.querySelectorAll(\".prompt-card\").forEach((card)=>{\n            // 既にボタンが存在する場合は削除（念のため）\n            const existingDeleteContainer = card.querySelector(\".delete-container\");\n            const existingEditContainer = card.querySelector(\".edit-container\");\n            if (existingDeleteContainer) existingDeleteContainer.remove();\n            if (existingEditContainer) existingEditContainer.remove();\n            // 削除ボタンコンテナ（左上・カード外側に配置）\n            const deleteContainer = document.createElement(\"div\");\n            deleteContainer.className = \"delete-container\";\n            deleteContainer.style.position = \"absolute\";\n            deleteContainer.style.top = \"-10px\";\n            deleteContainer.style.left = \"-10px\";\n            deleteContainer.style.zIndex = \"10\";\n            // 削除ボタン\n            const deleteBtn = document.createElement(\"button\");\n            deleteBtn.type = \"button\"; // 追加：フォーム送信を防ぐ\n            deleteBtn.className = \"card-delete-btn\";\n            deleteBtn.style.width = \"24px\";\n            deleteBtn.style.height = \"24px\";\n            deleteBtn.style.borderRadius = \"50%\";\n            deleteBtn.style.border = \"none\";\n            deleteBtn.style.backgroundColor = \"#dc3545\";\n            deleteBtn.style.color = \"white\";\n            deleteBtn.style.fontSize = \"14px\";\n            deleteBtn.style.display = \"flex\";\n            deleteBtn.style.alignItems = \"center\";\n            deleteBtn.style.justifyContent = \"center\";\n            deleteBtn.innerHTML = '<i class=\"bi bi-trash\"></i>';\n            // ボタン押下時にタスクカードのクリックイベントと区別するためイベント伝播を停止\n            deleteBtn.addEventListener(\"click\", function(e) {\n                var _e_currentTarget;\n                e.stopPropagation();\n                const targetCard = (_e_currentTarget = e.currentTarget) === null || _e_currentTarget === void 0 ? void 0 : _e_currentTarget.closest(\".prompt-card\");\n                if (!targetCard) return;\n                if (confirm(\"このタスクを削除してもよろしいですか？\")) {\n                    const taskName = targetCard.getAttribute(\"data-task\");\n                    fetch(\"/api/delete_task\", {\n                        method: \"POST\",\n                        headers: {\n                            \"Content-Type\": \"application/json\"\n                        },\n                        body: JSON.stringify({\n                            task: taskName\n                        })\n                    }).then((response)=>{\n                        if (!response.ok) {\n                            return response.json().then((errorData)=>{\n                                throw new Error(errorData.error || \"削除に失敗しました\");\n                            });\n                        }\n                        return response.json();\n                    }).then(()=>{\n                        // 削除が成功した場合、対応するラッパー要素を削除し、並び順保存のためのAPI呼び出しも非同期で行う\n                        const wrapper = targetCard.closest(\".task-wrapper\");\n                        if (wrapper) {\n                            wrapper.remove();\n                        }\n                        // 並び順の更新は非同期で行うので、ここでページ再読み込みは行わずにDOM上を更新\n                        saveTaskOrder();\n                    }).catch((err)=>{\n                        alert(\"削除に失敗しました: \" + err.message);\n                    });\n                }\n            });\n            // 削除ボタン用ツールチップ\n            const deleteTooltip = document.createElement(\"span\");\n            deleteTooltip.textContent = \"削除\";\n            deleteTooltip.style.position = \"absolute\";\n            deleteTooltip.style.bottom = \"100%\";\n            deleteTooltip.style.left = \"50%\";\n            deleteTooltip.style.transform = \"translateX(-50%)\";\n            deleteTooltip.style.marginBottom = \"4px\";\n            deleteTooltip.style.backgroundColor = \"rgba(0, 0, 0, 0.75)\";\n            deleteTooltip.style.color = \"white\";\n            deleteTooltip.style.padding = \"2px 4px\";\n            deleteTooltip.style.borderRadius = \"4px\";\n            deleteTooltip.style.fontSize = \"10px\";\n            deleteTooltip.style.whiteSpace = \"nowrap\";\n            deleteTooltip.style.opacity = \"0\";\n            deleteTooltip.style.transition = \"opacity 0.2s\";\n            // ホバー時の挙動（削除ボタン）\n            deleteContainer.addEventListener(\"mouseenter\", ()=>{\n                deleteTooltip.style.opacity = \"1\";\n                deleteBtn.style.transform = \"scale(1.1)\";\n            });\n            deleteContainer.addEventListener(\"mouseleave\", ()=>{\n                deleteTooltip.style.opacity = \"0\";\n                deleteBtn.style.transform = \"\";\n            });\n            deleteContainer.appendChild(deleteBtn);\n            deleteContainer.appendChild(deleteTooltip);\n            // 編集ボタンコンテナ（右上・カード外側に配置）\n            const editContainer = document.createElement(\"div\");\n            editContainer.className = \"edit-container\";\n            editContainer.style.position = \"absolute\";\n            editContainer.style.top = \"-10px\";\n            editContainer.style.right = \"-10px\";\n            editContainer.style.zIndex = \"10\";\n            // 編集ボタン\n            const editBtn = document.createElement(\"button\");\n            editBtn.type = \"button\"; // 追加：フォーム送信を防ぐ\n            editBtn.className = \"card-edit-btn\";\n            editBtn.style.width = \"24px\";\n            editBtn.style.height = \"24px\";\n            editBtn.style.borderRadius = \"50%\";\n            editBtn.style.border = \"none\";\n            editBtn.style.backgroundColor = \"#007bff\";\n            editBtn.style.color = \"white\";\n            editBtn.style.fontSize = \"14px\";\n            editBtn.style.display = \"flex\";\n            editBtn.style.alignItems = \"center\";\n            editBtn.style.justifyContent = \"center\";\n            editBtn.innerHTML = '<i class=\"bi bi-pencil\"></i>';\n            // 編集ボタン押下時の処理\n            editBtn.addEventListener(\"click\", function(e) {\n                var _e_currentTarget;\n                e.stopPropagation();\n                const targetCard = (_e_currentTarget = e.currentTarget) === null || _e_currentTarget === void 0 ? void 0 : _e_currentTarget.closest(\".prompt-card\");\n                if (!targetCard) return;\n                // 対象カードの data 属性から値を取得してモーダルのフォームにセット\n                window.currentEditingCard = targetCard;\n                const taskNameEl = document.getElementById(\"taskName\");\n                const promptTemplateEl = document.getElementById(\"promptTemplate\");\n                const inputExamplesEl = document.getElementById(\"inputExamples\");\n                const outputExamplesEl = document.getElementById(\"outputExamples\");\n                if (taskNameEl) taskNameEl.value = targetCard.getAttribute(\"data-task\") || \"\";\n                if (promptTemplateEl) promptTemplateEl.value = targetCard.getAttribute(\"data-prompt_template\") || \"\";\n                if (inputExamplesEl) inputExamplesEl.value = targetCard.getAttribute(\"data-input_examples\") || \"\";\n                if (outputExamplesEl) outputExamplesEl.value = targetCard.getAttribute(\"data-output_examples\") || \"\";\n                // カスタムモーダルを表示\n                showModal(modalEl);\n            });\n            // 編集ボタン用ツールチップ\n            const editTooltip = document.createElement(\"span\");\n            editTooltip.textContent = \"編集\";\n            editTooltip.style.position = \"absolute\";\n            editTooltip.style.bottom = \"100%\";\n            editTooltip.style.left = \"50%\";\n            editTooltip.style.transform = \"translateX(-50%)\";\n            editTooltip.style.marginBottom = \"4px\";\n            editTooltip.style.backgroundColor = \"rgba(0, 0, 0, 0.75)\";\n            editTooltip.style.color = \"white\";\n            editTooltip.style.padding = \"2px 4px\";\n            editTooltip.style.borderRadius = \"4px\";\n            editTooltip.style.fontSize = \"10px\";\n            editTooltip.style.whiteSpace = \"nowrap\";\n            editTooltip.style.opacity = \"0\";\n            editTooltip.style.transition = \"opacity 0.2s\";\n            editContainer.addEventListener(\"mouseenter\", ()=>{\n                editTooltip.style.opacity = \"1\";\n                editBtn.style.transform = \"scale(1.1)\";\n            });\n            editContainer.addEventListener(\"mouseleave\", ()=>{\n                editTooltip.style.opacity = \"0\";\n                editBtn.style.transform = \"\";\n            });\n            editContainer.appendChild(editBtn);\n            editContainer.appendChild(editTooltip);\n            // カードにボタンコンテナを追加\n            card.appendChild(deleteContainer);\n            card.appendChild(editContainer);\n        });\n    } else {\n        // 編集モード終了時：各種ボタン要素を削除し、ドラッグ＆ドロップを無効化\n        document.querySelectorAll(\".delete-container\").forEach((container)=>container.remove());\n        document.querySelectorAll(\".edit-container\").forEach((container)=>container.remove());\n        disableTaskDragAndDrop();\n        saveTaskOrder();\n        // 編集モードで変更した表示をリセットし、折り畳みボタンを再生成\n        document.querySelectorAll(\".task-selection .prompt-card\").forEach((card)=>{\n            card.style.display = \"\";\n            card.style.position = \"\";\n        });\n        if (typeof window.initToggleTasks === \"function\") {\n            window.initToggleTasks();\n        }\n        // 画面全体の再読み込みは行わず、必要な部分のみDOMの更新を行う\n        // ※もしタスク一覧全体の更新が必要なら、非同期で新たにタスク一覧をfetchして再レンダリングする処理をここに追加\n        if (editButton) {\n            editButton.title = \"並び替え編集\";\n            editButton.innerHTML = '<i class=\"bi bi-arrows-move\"></i>';\n        }\n    }\n}\n// ドラッグ＆ドロップ用イベントを有効化（各カードに .editable クラス追加）\nfunction enableTaskDragAndDrop() {\n    const wrappers = document.querySelectorAll(\".task-wrapper\");\n    wrappers.forEach((wrapper, index)=>{\n        wrapper.classList.add(\"editable\"); // ラッパーに追加\n        // 内部のカードにも追加\n        const card = wrapper.querySelector(\".prompt-card\");\n        if (card) {\n            card.classList.add(\"editable\");\n            // 各カードのアニメーション開始タイミングをずらす（例: 0.1秒刻み）\n            card.style.animationDelay = \"\".concat(index * 0.1, \"s\");\n        }\n        wrapper.style.touchAction = \"none\";\n        wrapper.addEventListener(\"pointerdown\", onTaskPointerDown);\n    });\n}\n// イベント解除\nfunction disableTaskDragAndDrop() {\n    const wrappers = document.querySelectorAll(\".task-wrapper\");\n    wrappers.forEach((wrapper)=>{\n        wrapper.classList.remove(\"editable\");\n        const card = wrapper.querySelector(\".prompt-card\");\n        if (card) {\n            card.classList.remove(\"editable\");\n        }\n        wrapper.removeEventListener(\"pointerdown\", onTaskPointerDown);\n    });\n    document.removeEventListener(\"pointermove\", onTaskPointerMove);\n    document.removeEventListener(\"pointerup\", onTaskPointerUp);\n    if (draggingTask) {\n        draggingTask.style.position = \"\";\n        draggingTask.style.zIndex = \"\";\n    }\n}\n// pointerdown イベント\nfunction onTaskPointerDown(e) {\n    if (e.button !== 0) return;\n    const target = e.target;\n    if ((target === null || target === void 0 ? void 0 : target.closest(\".card-delete-btn\")) || (target === null || target === void 0 ? void 0 : target.closest(\".card-edit-btn\")) || (target === null || target === void 0 ? void 0 : target.closest(\".delete-container\")) || (target === null || target === void 0 ? void 0 : target.closest(\".edit-container\"))) {\n        // 編集・削除ボタンが押された場合は何もせず終了\n        return;\n    }\n    draggingTask = e.currentTarget; // task-wrapper をドラッグ対象にする\n    if (!draggingTask) return;\n    draggingTask.classList.add(\"dragging\");\n    const rect = draggingTask.getBoundingClientRect();\n    // 絶対配置に変更\n    draggingTask.style.position = \"absolute\";\n    draggingTask.style.width = rect.width + \"px\";\n    draggingTask.style.height = rect.height + \"px\";\n    draggingTask.style.zIndex = \"1000\";\n    const container = document.querySelector(\".task-selection\");\n    if (!container) return;\n    const containerRect = container.getBoundingClientRect();\n    draggingTask.style.left = e.clientX - containerRect.left - rect.width / 2 + \"px\";\n    draggingTask.style.top = e.clientY - containerRect.top - rect.height / 2 + \"px\";\n    // プレースホルダーを作成（task-wrapper 用）\n    taskPlaceholder = document.createElement(\"div\");\n    taskPlaceholder.className = \"task-wrapper placeholder\";\n    taskPlaceholder.style.width = rect.width + \"px\";\n    taskPlaceholder.style.height = rect.height + \"px\";\n    taskPlaceholder.style.border = \"1px dashed #aaa\";\n    container.insertBefore(taskPlaceholder, draggingTask.nextSibling);\n    document.addEventListener(\"pointermove\", onTaskPointerMove);\n    document.addEventListener(\"pointerup\", onTaskPointerUp);\n}\nfunction onTaskPointerMove(e) {\n    if (!draggingTask) return;\n    const container = document.querySelector(\".task-selection\");\n    if (!container) return;\n    const containerRect = container.getBoundingClientRect();\n    const cardWidth = draggingTask.offsetWidth;\n    const cardHeight = draggingTask.offsetHeight;\n    draggingTask.style.left = e.clientX - containerRect.left - cardWidth / 2 + \"px\";\n    draggingTask.style.top = e.clientY - containerRect.top - cardHeight / 2 + \"px\";\n    // プレースホルダーの位置更新（wrapper単位で）\n    const wrappers = Array.from(container.querySelectorAll(\".task-wrapper:not(.dragging)\"));\n    let placed = false;\n    for (let wrapper of wrappers){\n        const rect = wrapper.getBoundingClientRect();\n        const centerY = rect.top + rect.height / 2;\n        if (e.clientY < centerY) {\n            if (taskPlaceholder) {\n                container.insertBefore(taskPlaceholder, wrapper);\n            }\n            placed = true;\n            break;\n        }\n    }\n    if (!placed && taskPlaceholder) {\n        container.appendChild(taskPlaceholder);\n    }\n}\nfunction onTaskPointerUp() {\n    if (!draggingTask) return;\n    const container = document.querySelector(\".task-selection\");\n    if (!container || !taskPlaceholder) return;\n    container.insertBefore(draggingTask, taskPlaceholder);\n    draggingTask.classList.remove(\"dragging\");\n    // スタイルリセット\n    draggingTask.style.position = \"\";\n    draggingTask.style.left = \"\";\n    draggingTask.style.top = \"\";\n    draggingTask.style.width = \"\";\n    draggingTask.style.height = \"\";\n    draggingTask.style.zIndex = \"\";\n    taskPlaceholder.remove();\n    taskPlaceholder = null;\n    draggingTask = null;\n    document.removeEventListener(\"pointermove\", onTaskPointerMove);\n    document.removeEventListener(\"pointerup\", onTaskPointerUp);\n}\n// 並び順をサーバーに保存する関数\nfunction saveTaskOrder() {\n    const wrappers = document.querySelectorAll(\".task-wrapper\");\n    const newOrder = Array.from(wrappers).map((wrapper)=>{\n        const card = wrapper.querySelector(\".prompt-card\");\n        if (!card || card.dataset.is_default === \"true\") {\n            return null;\n        }\n        return card.getAttribute(\"data-task\");\n    }).filter(Boolean);\n    if (newOrder.length === 0) {\n        return;\n    }\n    fetch(\"/api/update_tasks_order\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            order: newOrder\n        })\n    }).then((res)=>res.json()).then((data)=>{\n        if (data.error) {\n            alert(\"並び順の保存に失敗: \" + data.error);\n        }\n    }).catch((err)=>{\n        alert(\"並び順の保存に失敗: \" + err.toString());\n    });\n}\n// エクスポート（他のスクリプトから利用できるように）\nwindow.initTaskOrderEditing = initTaskOrderEditing;\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUlKLFNBQVM3SixNQUFNLEtBQUssR0FBRztRQUN6QjtJQUNGO0lBRUE2QyxNQUFNLDJCQUEyQjtRQUMvQkMsUUFBUTtRQUNSRSxTQUFTO1lBQUUsZ0JBQWdCO1FBQW1CO1FBQzlDQyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7WUFBRStHLE9BQU9MO1FBQVM7SUFDekMsR0FDR3pHLElBQUksQ0FBQyxDQUFDK0csTUFBUUEsSUFBSTFHLElBQUksSUFDdEJMLElBQUksQ0FBQyxDQUFDTTtRQUNMLElBQUlBLEtBQUtHLEtBQUssRUFBRTtZQUNkbEMsTUFBTSxnQkFBZ0IrQixLQUFLRyxLQUFLO1FBQ2xDO0lBQ0YsR0FDQ0ksS0FBSyxDQUFDLENBQUNpRDtRQUNOdkYsTUFBTSxnQkFBZ0J1RixJQUFJa0QsUUFBUTtJQUNwQztBQUNKO0FBRUEsNEJBQTRCO0FBQzVCL0osT0FBT3FFLG9CQUFvQixHQUFHQTtBQUVwQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zY3JpcHRzL3NldHVwL3Rhc2tfbWFuYWdlci50cz83YWY4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRhc2sgdGl0bGUgdXBkYXRlclxuXG5mdW5jdGlvbiB1cGRhdGVUYXNrVGl0bGUoY2FyZDogSFRNTEVsZW1lbnQsIG5ld1RpdGxlOiBzdHJpbmcpIHtcbiAgY29uc3QgdHJ1bmNhdGVkVGl0bGUgPSBuZXdUaXRsZS5sZW5ndGggPiA4ID8gbmV3VGl0bGUuc3Vic3RyaW5nKDAsIDgpICsgXCLigKZcIiA6IG5ld1RpdGxlO1xuXG4gIC8vIOaXouWtmOOBruODmOODg+ODgOODvOOBjOOBguOCi+WgtOWQiOOBr+ODhuOCreOCueODiOOBoOOBkeOCkuabtOaWsFxuICBjb25zdCBoZWFkZXIgPSBjYXJkLnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KFwiLnRhc2staGVhZGVyXCIpO1xuICBpZiAoaGVhZGVyKSB7XG4gICAgaGVhZGVyLnRleHRDb250ZW50ID0gdHJ1bmNhdGVkVGl0bGU7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdy5sb2FkVGFza0NhcmRzID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAvLyDjg5jjg4Pjg4Djg7zjgYzlrZjlnKjjgZfjgarjgYTnlbDluLjnirbmhYvjgafjga/kuIDopqfjgpLlho3mj4/nlLvjgZfjgabmlbTjgYjjgotcbiAgICB3aW5kb3cubG9hZFRhc2tDYXJkcygpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIOmBjuWOu+OBq+eUn+aIkOOBleOCjOOBnyB0YXNrLXRpdGxlIOimgee0oOOBjOaui+OBo+OBpuOBhOOCi+WgtOWQiOOBr+WJiumZpOOBl+OBpuOBiuOBj1xuICBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFzay10aXRsZVwiKS5mb3JFYWNoKChlbGVtKSA9PiBlbGVtLnJlbW92ZSgpKTtcbn1cblxuLy8gVGFzayBlZGl0IG1vZGFsXG5cbmZ1bmN0aW9uIHNob3dNb2RhbChtb2RhbEVsOiBIVE1MRWxlbWVudCB8IG51bGwpIHtcbiAgaWYgKCFtb2RhbEVsKSByZXR1cm47XG4gIG1vZGFsRWwuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xufVxuXG5mdW5jdGlvbiBoaWRlTW9kYWwobW9kYWxFbDogSFRNTEVsZW1lbnQgfCBudWxsKSB7XG4gIGlmICghbW9kYWxFbCkgcmV0dXJuO1xuICBtb2RhbEVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbn1cblxuY29uc3QgaW5pdFRhc2tNYW5hZ2VyID0gKCkgPT4ge1xuICBjb25zdCBtb2RhbEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrRWRpdE1vZGFsXCIpO1xuICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xvc2VUYXNrRWRpdE1vZGFsXCIpO1xuICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbmNlbFRhc2tFZGl0TW9kYWxcIik7XG4gIGNvbnN0IHNhdmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNhdmVUYXNrQ2hhbmdlc1wiKTtcblxuICAvLyDjg6Ljg7zjg4Djg6vjga7plonjgZjjgovmk43kvZxcbiAgY2xvc2VCdG4/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBoaWRlTW9kYWwobW9kYWxFbCkpO1xuICBjYW5jZWxCdG4/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBoaWRlTW9kYWwobW9kYWxFbCkpO1xuXG4gIGlmICghc2F2ZUJ0bikgcmV0dXJuO1xuXG4gIHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjb25zdCB0YXNrTmFtZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTmFtZVwiKSBhcyBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbDtcbiAgICBjb25zdCBwcm9tcHRUZW1wbGF0ZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9tcHRUZW1wbGF0ZVwiKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbDtcbiAgICBjb25zdCBpbnB1dEV4YW1wbGVzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlucHV0RXhhbXBsZXNcIikgYXMgSFRNTFRleHRBcmVhRWxlbWVudCB8IG51bGw7XG4gICAgY29uc3Qgb3V0cHV0RXhhbXBsZXNFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3V0cHV0RXhhbXBsZXNcIikgYXMgSFRNTFRleHRBcmVhRWxlbWVudCB8IG51bGw7XG4gICAgaWYgKCF0YXNrTmFtZUVsIHx8ICFwcm9tcHRUZW1wbGF0ZUVsIHx8ICFpbnB1dEV4YW1wbGVzRWwgfHwgIW91dHB1dEV4YW1wbGVzRWwpIHtcbiAgICAgIGFsZXJ0KFwi5YWl5Yqb5qyE44GM6KaL44Gk44GL44KK44G+44Gb44KT44Gn44GX44Gf44CCXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDEuIOODouODvOODgOODq+WGheOBruWFpeWKm+WApOWPluW+l1xuICAgIGNvbnN0IHRhc2tOYW1lID0gdGFza05hbWVFbC52YWx1ZS50cmltKCk7XG4gICAgY29uc3QgcHJvbXB0VGVtcGxhdGUgPSBwcm9tcHRUZW1wbGF0ZUVsLnZhbHVlLnRyaW0oKTtcbiAgICBjb25zdCBpbnB1dEV4YW1wbGVzID0gaW5wdXRFeGFtcGxlc0VsLnZhbHVlLnRyaW0oKTtcbiAgICBjb25zdCBvdXRwdXRFeGFtcGxlcyA9IG91dHB1dEV4YW1wbGVzRWwudmFsdWUudHJpbSgpO1xuXG4gICAgLy8gMi4g57eo6ZuG5YmN44Gu44K/44K544Kv5ZCN44KSIGRhdGFzZXQg44GL44KJ5Y+W5b6XXG4gICAgY29uc3QgZWRpdGluZ0NhcmQgPSB3aW5kb3cuY3VycmVudEVkaXRpbmdDYXJkO1xuICAgIGlmICghZWRpdGluZ0NhcmQpIHtcbiAgICAgIGFsZXJ0KFwi57eo6ZuG5a++6LGh44GM6KaL44Gk44GL44KK44G+44Gb44KT44Gn44GX44Gf44CCXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvbGRUYXNrID0gZWRpdGluZ0NhcmQuZGF0YXNldC50YXNrO1xuICAgIGlmICghb2xkVGFzaykge1xuICAgICAgYWxlcnQoXCLnt6jpm4blr77osaHjga7jgr/jgrnjgq/mg4XloLHjgYzopovjgaTjgYvjgorjgb7jgZvjgpPjgafjgZfjgZ/jgIJcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gMy4g44K144O844OQ44O86YCB5L+h55So44Oa44Kk44Ot44O844OJXG4gICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgIG9sZF90YXNrOiBvbGRUYXNrLFxuICAgICAgbmV3X3Rhc2s6IHRhc2tOYW1lLFxuICAgICAgcHJvbXB0X3RlbXBsYXRlOiBwcm9tcHRUZW1wbGF0ZSxcbiAgICAgIGlucHV0X2V4YW1wbGVzOiBpbnB1dEV4YW1wbGVzLFxuICAgICAgb3V0cHV0X2V4YW1wbGVzOiBvdXRwdXRFeGFtcGxlc1xuICAgIH07XG5cbiAgICAvLyA0LiBBUEkg5ZG844Gz5Ye644GXXG4gICAgZmV0Y2goXCIvYXBpL2VkaXRfdGFza1wiLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIiwgLy8gQ29va2llIOOCkumAgeS/oVxuICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZClcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGNvbnN0IGN0ID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJDb250ZW50LVR5cGVcIikgfHwgXCJcIjtcbiAgICAgICAgaWYgKGN0LmluY2x1ZGVzKFwiYXBwbGljYXRpb24vanNvblwiKSkge1xuICAgICAgICAgIC8vIOato+W4uCBvciBKU09OIOOCqOODqeODvChKU09OLnN0cmluZ2lmeSDjgZXjgozjgZ8ge1wiZXJyb3JcIjouLi59KVxuICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKGRhdGEuZXJyb3IgfHwgXCLmm7TmlrDjgavlpLHmlZfjgZfjgb7jgZfjgZ9cIik7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBIVE1MIOOBriA1MDAg44Oa44O844K444Gq44Gp44GM6L+U44Gj44Gm44GN44Gf5aC05ZCIXG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKS50aGVuKCh0ZXh0KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwi6Z2eSlNPTuODrOOCueODneODs+OCuTpcIiwgdGV4dCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOOCteODvOODkOODvOOCqOODqeODvDogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIC8vIDUuIOaIkOWKn+OBl+OBn+OCiSBkYXRhLSDlsZ7mgKfjgpLmm7TmlrBcbiAgICAgICAgY29uc3QgY2FyZCA9IGVkaXRpbmdDYXJkO1xuICAgICAgICBjYXJkLmRhdGFzZXQudGFzayA9IHRhc2tOYW1lO1xuICAgICAgICBjYXJkLmRhdGFzZXQucHJvbXB0X3RlbXBsYXRlID0gcHJvbXB0VGVtcGxhdGU7XG4gICAgICAgIGNhcmQuZGF0YXNldC5pbnB1dF9leGFtcGxlcyA9IGlucHV0RXhhbXBsZXM7XG4gICAgICAgIGNhcmQuZGF0YXNldC5vdXRwdXRfZXhhbXBsZXMgPSBvdXRwdXRFeGFtcGxlcztcblxuICAgICAgICAvLyA2LiDjgr/jgqTjg4jjg6vjgpLmm7jjgY3mj5vjgYhcbiAgICAgICAgdXBkYXRlVGFza1RpdGxlKGNhcmQsIHRhc2tOYW1lKTtcblxuICAgICAgICAvLyA3LiDjg6Ljg7zjg4Djg6vplonjgZjjgotcbiAgICAgICAgaGlkZU1vZGFsKG1vZGFsRWwpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgYWxlcnQoXCLmm7TmlrDjgavlpLHmlZfjgZfjgb7jgZfjgZ86IFwiICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJlZGl0X3Rhc2sgZXJyb3I6XCIsIGVycm9yKTtcbiAgICAgIH0pO1xuICB9KTtcbn07XG5cbmlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImxvYWRpbmdcIikge1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBpbml0VGFza01hbmFnZXIpO1xufSBlbHNlIHtcbiAgaW5pdFRhc2tNYW5hZ2VyKCk7XG59XG5cbi8vIFRhc2sgb3JkZXJpbmcgYW5kIGVkaXRpbmdcblxubGV0IGlzRWRpdGluZ09yZGVyID0gZmFsc2U7XG5sZXQgZWRpdEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsO1xubGV0IGRyYWdnaW5nVGFzazogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbmxldCB0YXNrUGxhY2Vob2xkZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5sZXQgdGFza09mZnNldFggPSAwO1xubGV0IHRhc2tPZmZzZXRZID0gMDtcblxuLy8g44K/44K544Kv44Kr44O844OJ6Kqt44G/6L6844G/5b6M44Gr5Lim44Gz5pu/44GI57eo6ZuG44Oc44K/44Oz44KS6L+95Yqg44GZ44KL5Yem55CGXG5mdW5jdGlvbiBpbml0VGFza09yZGVyRWRpdGluZygpIHtcbiAgaWYgKCF3aW5kb3cubG9nZ2VkSW4pIHJldHVybjsgLy8g4piFIOacquODreOCsOOCpOODs+OBquOCieS9leOCguOBl+OBquOBhFxuXG4gIC8vIOODmOODg+ODgOODvOimgee0oOOCkuWPluW+l1xuICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stc2VsZWN0aW9uLWhlYWRlclwiKTtcbiAgaWYgKCFoZWFkZXIpIHJldHVybjtcblxuICAvLyDml6LlrZjjga7jg5zjgr/jg7PjgYzjgYLjgozjgbDliYrpmaRcbiAgaWYgKGVkaXRCdXR0b24pIGVkaXRCdXR0b24ucmVtb3ZlKCk7XG5cbiAgLy8g44Oc44K/44Oz5L2c5oiQXG4gIGVkaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBlZGl0QnV0dG9uLmlkID0gXCJlZGl0LXRhc2stb3JkZXItYnRuXCI7XG4gIGVkaXRCdXR0b24uY2xhc3NOYW1lID0gXCJwcmltYXJ5LWJ1dHRvblwiO1xuICAvLyDjgqTjg7Pjg6njgqTjg7PooajnpLrjgavlkIjjgo/jgZvjgovjgZ/jgoHkvZnnmb3jga/kuI3opoFcbiAgZWRpdEJ1dHRvbi5zdHlsZS5tYXJnaW4gPSBcIjBcIjtcbiAgZWRpdEJ1dHRvbi50eXBlID0gXCJidXR0b25cIjsgLy8g44OV44Kp44O844Og6YCB5L+h44KS6Ziy5q2iXG4gIC8vIEJvb3RzdHJhcOOBruOCouOCpOOCs+ODs+OCkuOCu+ODg+ODiO+8iOOBk+OBk+OBp+OBr+S+i+OBqOOBl+OBpmJpLWFycm93cy1tb3Zl44KS5L2/55So77yJXG4gIGVkaXRCdXR0b24uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiYmkgYmktYXJyb3dzLW1vdmVcIj48L2k+JztcbiAgZWRpdEJ1dHRvbi50aXRsZSA9IFwi5Lim44Gz5pu/44GI57eo6ZuGXCI7IC8vIOODhOODvOODq+ODgeODg+ODl+eUqFxuXG4gIGVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRvZ2dsZVRhc2tPcmRlckVkaXRpbmcpO1xuICAvLyDjg5jjg4Pjg4Djg7zlhoXjgavjg5zjgr/jg7PjgpLov73liqBcbiAgaGVhZGVyLmFwcGVuZENoaWxkKGVkaXRCdXR0b24pO1xufVxuXG4vLyDnt6jpm4bjg6Ljg7zjg4njga4gT04vT0ZGIOWIh+abv1xuZnVuY3Rpb24gdG9nZ2xlVGFza09yZGVyRWRpdGluZygpIHtcbiAgLy8g57eo6ZuG44Oi44O844OJ44KS44OI44Kw44Or44GZ44KLXG4gIGlzRWRpdGluZ09yZGVyID0gIWlzRWRpdGluZ09yZGVyO1xuICB3aW5kb3cuaXNFZGl0aW5nT3JkZXIgPSBpc0VkaXRpbmdPcmRlcjtcblxuICBpZiAoaXNFZGl0aW5nT3JkZXIpIHtcbiAgICAvLyDnt6jpm4bjg6Ljg7zjg4nplovlp4vmmYLvvJpcbiAgICAvLyDjg5zjgr/jg7PjgpLmirzjgZfjgZ/nnqzplpPjgavjgqLjgqTjgrPjg7PjgpLjg4Hjgqfjg4Pjgq/jg57jg7zjgq/jgavlpInmm7TjgZfjgIHjgr/jgqTjg4jjg6vjgpLjgIzlrozkuobjgI3jgavjgZnjgotcbiAgICBpZiAoZWRpdEJ1dHRvbikge1xuICAgICAgZWRpdEJ1dHRvbi50aXRsZSA9IFwi5a6M5LqGXCI7XG4gICAgICBlZGl0QnV0dG9uLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImJpIGJpLWNoZWNrXCI+PC9pPic7XG4gICAgfVxuXG4gICAgLy8g44K/44K544Kv44Kr44O844OJ6KGo56S644Gu6Kit5a6a44KE44OJ44Op44OD44Kw77yG44OJ44Ot44OD44OX44KS5pyJ5Yq55YyWXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oXCIudGFzay1zZWxlY3Rpb24gLnByb21wdC1jYXJkXCIpLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIGNhcmQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgY2FyZC5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcbiAgICB9KTtcbiAgICBjb25zdCB0b2dnbGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZ2dsZS10YXNrcy1idG5cIik7XG4gICAgaWYgKHRvZ2dsZUJ0bikge1xuICAgICAgdG9nZ2xlQnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG4gICAgZW5hYmxlVGFza0RyYWdBbmREcm9wKCk7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PihcIi5wcm9tcHQtY2FyZFwiKS5mb3JFYWNoKChjYXJkKSA9PiB7XG4gICAgICAvLyDml6Ljgavjg5zjgr/jg7PjgYzlrZjlnKjjgZnjgovloLTlkIjjga/liYrpmaTvvIjlv7Xjga7jgZ/jgoHvvIlcbiAgICAgIGNvbnN0IGV4aXN0aW5nRGVsZXRlQ29udGFpbmVyID0gY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmRlbGV0ZS1jb250YWluZXJcIik7XG4gICAgICBjb25zdCBleGlzdGluZ0VkaXRDb250YWluZXIgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1jb250YWluZXJcIik7XG4gICAgICBpZiAoZXhpc3RpbmdEZWxldGVDb250YWluZXIpIGV4aXN0aW5nRGVsZXRlQ29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgaWYgKGV4aXN0aW5nRWRpdENvbnRhaW5lcikgZXhpc3RpbmdFZGl0Q29udGFpbmVyLnJlbW92ZSgpO1xuXG4gICAgICAvLyDliYrpmaTjg5zjgr/jg7PjgrPjg7Pjg4bjg4rvvIjlt6bkuIrjg7vjgqvjg7zjg4nlpJblgbTjgavphY3nva7vvIlcbiAgICAgIGNvbnN0IGRlbGV0ZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBkZWxldGVDb250YWluZXIuY2xhc3NOYW1lID0gXCJkZWxldGUtY29udGFpbmVyXCI7XG4gICAgICBkZWxldGVDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICBkZWxldGVDb250YWluZXIuc3R5bGUudG9wID0gXCItMTBweFwiO1xuICAgICAgZGVsZXRlQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBcIi0xMHB4XCI7XG4gICAgICBkZWxldGVDb250YWluZXIuc3R5bGUuekluZGV4ID0gXCIxMFwiO1xuXG4gICAgICAvLyDliYrpmaTjg5zjgr/jg7NcbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICBkZWxldGVCdG4udHlwZSA9IFwiYnV0dG9uXCI7IC8vIOi/veWKoO+8muODleOCqeODvOODoOmAgeS/oeOCkumYsuOBkFxuICAgICAgZGVsZXRlQnRuLmNsYXNzTmFtZSA9IFwiY2FyZC1kZWxldGUtYnRuXCI7XG4gICAgICBkZWxldGVCdG4uc3R5bGUud2lkdGggPSBcIjI0cHhcIjtcbiAgICAgIGRlbGV0ZUJ0bi5zdHlsZS5oZWlnaHQgPSBcIjI0cHhcIjtcbiAgICAgIGRlbGV0ZUJ0bi5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjUwJVwiO1xuICAgICAgZGVsZXRlQnRuLnN0eWxlLmJvcmRlciA9IFwibm9uZVwiO1xuICAgICAgZGVsZXRlQnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2RjMzU0NVwiO1xuICAgICAgZGVsZXRlQnRuLnN0eWxlLmNvbG9yID0gXCJ3aGl0ZVwiO1xuICAgICAgZGVsZXRlQnRuLnN0eWxlLmZvbnRTaXplID0gXCIxNHB4XCI7XG4gICAgICBkZWxldGVCdG4uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgZGVsZXRlQnRuLnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuICAgICAgZGVsZXRlQnRuLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcbiAgICAgIGRlbGV0ZUJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJiaSBiaS10cmFzaFwiPjwvaT4nO1xuICAgICAgLy8g44Oc44K/44Oz5oq85LiL5pmC44Gr44K/44K544Kv44Kr44O844OJ44Gu44Kv44Oq44OD44Kv44Kk44OZ44Oz44OI44Go5Yy65Yil44GZ44KL44Gf44KB44Kk44OZ44Oz44OI5Lyd5pKt44KS5YGc5q2iXG4gICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGNvbnN0IHRhcmdldENhcmQgPSAoZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50IHwgbnVsbCk/LmNsb3Nlc3QoXCIucHJvbXB0LWNhcmRcIikgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgICAgICBpZiAoIXRhcmdldENhcmQpIHJldHVybjtcbiAgICAgICAgaWYgKGNvbmZpcm0oXCLjgZPjga7jgr/jgrnjgq/jgpLliYrpmaTjgZfjgabjgoLjgojjgo3jgZfjgYTjgafjgZnjgYvvvJ9cIikpIHtcbiAgICAgICAgICBjb25zdCB0YXNrTmFtZSA9IHRhcmdldENhcmQuZ2V0QXR0cmlidXRlKFwiZGF0YS10YXNrXCIpO1xuICAgICAgICAgIGZldGNoKFwiL2FwaS9kZWxldGVfdGFza1wiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB0YXNrOiB0YXNrTmFtZSB9KVxuICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkudGhlbigoZXJyb3JEYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JEYXRhLmVycm9yIHx8IFwi5YmK6Zmk44Gr5aSx5pWX44GX44G+44GX44GfXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAvLyDliYrpmaTjgYzmiJDlip/jgZfjgZ/loLTlkIjjgIHlr77lv5zjgZnjgovjg6njg4Pjg5Hjg7zopoHntKDjgpLliYrpmaTjgZfjgIHkuKbjgbPpoIbkv53lrZjjga7jgZ/jgoHjga5BUEnlkbzjgbPlh7rjgZfjgoLpnZ7lkIzmnJ/jgafooYzjgYZcbiAgICAgICAgICAgICAgY29uc3Qgd3JhcHBlciA9IHRhcmdldENhcmQuY2xvc2VzdChcIi50YXNrLXdyYXBwZXJcIik7XG4gICAgICAgICAgICAgIGlmICh3cmFwcGVyKSB7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyDkuKbjgbPpoIbjga7mm7TmlrDjga/pnZ7lkIzmnJ/jgafooYzjgYbjga7jgafjgIHjgZPjgZPjgafjg5rjg7zjgrjlho3oqq3jgb/ovrzjgb/jga/ooYzjgo/jgZrjgatET03kuIrjgpLmm7TmlrBcbiAgICAgICAgICAgICAgc2F2ZVRhc2tPcmRlcigpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgIGFsZXJ0KFwi5YmK6Zmk44Gr5aSx5pWX44GX44G+44GX44GfOiBcIiArIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8g5YmK6Zmk44Oc44K/44Oz55So44OE44O844Or44OB44OD44OXXG4gICAgICBjb25zdCBkZWxldGVUb29sdGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICBkZWxldGVUb29sdGlwLnRleHRDb250ZW50ID0gXCLliYrpmaRcIjtcbiAgICAgIGRlbGV0ZVRvb2x0aXAuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICBkZWxldGVUb29sdGlwLnN0eWxlLmJvdHRvbSA9IFwiMTAwJVwiO1xuICAgICAgZGVsZXRlVG9vbHRpcC5zdHlsZS5sZWZ0ID0gXCI1MCVcIjtcbiAgICAgIGRlbGV0ZVRvb2x0aXAuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVYKC01MCUpXCI7XG4gICAgICBkZWxldGVUb29sdGlwLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiNHB4XCI7XG4gICAgICBkZWxldGVUb29sdGlwLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiYSgwLCAwLCAwLCAwLjc1KVwiO1xuICAgICAgZGVsZXRlVG9vbHRpcC5zdHlsZS5jb2xvciA9IFwid2hpdGVcIjtcbiAgICAgIGRlbGV0ZVRvb2x0aXAuc3R5bGUucGFkZGluZyA9IFwiMnB4IDRweFwiO1xuICAgICAgZGVsZXRlVG9vbHRpcC5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjRweFwiO1xuICAgICAgZGVsZXRlVG9vbHRpcC5zdHlsZS5mb250U2l6ZSA9IFwiMTBweFwiO1xuICAgICAgZGVsZXRlVG9vbHRpcC5zdHlsZS53aGl0ZVNwYWNlID0gXCJub3dyYXBcIjtcbiAgICAgIGRlbGV0ZVRvb2x0aXAuc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgICAgZGVsZXRlVG9vbHRpcC5zdHlsZS50cmFuc2l0aW9uID0gXCJvcGFjaXR5IDAuMnNcIjtcblxuICAgICAgLy8g44Ob44OQ44O85pmC44Gu5oyZ5YuV77yI5YmK6Zmk44Oc44K/44Oz77yJXG4gICAgICBkZWxldGVDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgKCkgPT4ge1xuICAgICAgICBkZWxldGVUb29sdGlwLnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcbiAgICAgICAgZGVsZXRlQnRuLnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGUoMS4xKVwiO1xuICAgICAgfSk7XG4gICAgICBkZWxldGVDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgKCkgPT4ge1xuICAgICAgICBkZWxldGVUb29sdGlwLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgICAgICAgZGVsZXRlQnRuLnN0eWxlLnRyYW5zZm9ybSA9IFwiXCI7XG4gICAgICB9KTtcblxuICAgICAgZGVsZXRlQ29udGFpbmVyLmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XG4gICAgICBkZWxldGVDb250YWluZXIuYXBwZW5kQ2hpbGQoZGVsZXRlVG9vbHRpcCk7XG5cbiAgICAgIC8vIOe3qOmbhuODnOOCv+ODs+OCs+ODs+ODhuODiu+8iOWPs+S4iuODu+OCq+ODvOODieWkluWBtOOBq+mFjee9ru+8iVxuICAgICAgY29uc3QgZWRpdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBlZGl0Q29udGFpbmVyLmNsYXNzTmFtZSA9IFwiZWRpdC1jb250YWluZXJcIjtcbiAgICAgIGVkaXRDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICBlZGl0Q29udGFpbmVyLnN0eWxlLnRvcCA9IFwiLTEwcHhcIjtcbiAgICAgIGVkaXRDb250YWluZXIuc3R5bGUucmlnaHQgPSBcIi0xMHB4XCI7XG4gICAgICBlZGl0Q29udGFpbmVyLnN0eWxlLnpJbmRleCA9IFwiMTBcIjtcblxuICAgICAgLy8g57eo6ZuG44Oc44K/44OzXG4gICAgICBjb25zdCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIGVkaXRCdG4udHlwZSA9IFwiYnV0dG9uXCI7IC8vIOi/veWKoO+8muODleOCqeODvOODoOmAgeS/oeOCkumYsuOBkFxuICAgICAgZWRpdEJ0bi5jbGFzc05hbWUgPSBcImNhcmQtZWRpdC1idG5cIjtcbiAgICAgIGVkaXRCdG4uc3R5bGUud2lkdGggPSBcIjI0cHhcIjtcbiAgICAgIGVkaXRCdG4uc3R5bGUuaGVpZ2h0ID0gXCIyNHB4XCI7XG4gICAgICBlZGl0QnRuLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNTAlXCI7XG4gICAgICBlZGl0QnRuLnN0eWxlLmJvcmRlciA9IFwibm9uZVwiO1xuICAgICAgZWRpdEJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiMwMDdiZmZcIjtcbiAgICAgIGVkaXRCdG4uc3R5bGUuY29sb3IgPSBcIndoaXRlXCI7XG4gICAgICBlZGl0QnRuLnN0eWxlLmZvbnRTaXplID0gXCIxNHB4XCI7XG4gICAgICBlZGl0QnRuLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgIGVkaXRCdG4uc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XG4gICAgICBlZGl0QnRuLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcbiAgICAgIGVkaXRCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiYmkgYmktcGVuY2lsXCI+PC9pPic7XG5cbiAgICAgIC8vIOe3qOmbhuODnOOCv+ODs+aKvOS4i+aZguOBruWHpueQhlxuICAgICAgZWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0Q2FyZCA9IChlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQgfCBudWxsKT8uY2xvc2VzdChcIi5wcm9tcHQtY2FyZFwiKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XG4gICAgICAgIGlmICghdGFyZ2V0Q2FyZCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIOWvvuixoeOCq+ODvOODieOBriBkYXRhIOWxnuaAp+OBi+OCieWApOOCkuWPluW+l+OBl+OBpuODouODvOODgOODq+OBruODleOCqeODvOODoOOBq+OCu+ODg+ODiFxuICAgICAgICB3aW5kb3cuY3VycmVudEVkaXRpbmdDYXJkID0gdGFyZ2V0Q2FyZDtcbiAgICAgICAgY29uc3QgdGFza05hbWVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza05hbWVcIikgYXMgSFRNTElucHV0RWxlbWVudCB8IG51bGw7XG4gICAgICAgIGNvbnN0IHByb21wdFRlbXBsYXRlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb21wdFRlbXBsYXRlXCIpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsO1xuICAgICAgICBjb25zdCBpbnB1dEV4YW1wbGVzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlucHV0RXhhbXBsZXNcIikgYXMgSFRNTFRleHRBcmVhRWxlbWVudCB8IG51bGw7XG4gICAgICAgIGNvbnN0IG91dHB1dEV4YW1wbGVzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm91dHB1dEV4YW1wbGVzXCIpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsO1xuICAgICAgICBpZiAodGFza05hbWVFbCkgdGFza05hbWVFbC52YWx1ZSA9IHRhcmdldENhcmQuZ2V0QXR0cmlidXRlKFwiZGF0YS10YXNrXCIpIHx8IFwiXCI7XG4gICAgICAgIGlmIChwcm9tcHRUZW1wbGF0ZUVsKSBwcm9tcHRUZW1wbGF0ZUVsLnZhbHVlID0gdGFyZ2V0Q2FyZC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXByb21wdF90ZW1wbGF0ZVwiKSB8fCBcIlwiO1xuICAgICAgICBpZiAoaW5wdXRFeGFtcGxlc0VsKSBpbnB1dEV4YW1wbGVzRWwudmFsdWUgPSB0YXJnZXRDYXJkLmdldEF0dHJpYnV0ZShcImRhdGEtaW5wdXRfZXhhbXBsZXNcIikgfHwgXCJcIjtcbiAgICAgICAgaWYgKG91dHB1dEV4YW1wbGVzRWwpIG91dHB1dEV4YW1wbGVzRWwudmFsdWUgPSB0YXJnZXRDYXJkLmdldEF0dHJpYnV0ZShcImRhdGEtb3V0cHV0X2V4YW1wbGVzXCIpIHx8IFwiXCI7XG5cbiAgICAgICAgLy8g44Kr44K544K/44Og44Oi44O844OA44Or44KS6KGo56S6XG4gICAgICAgIHNob3dNb2RhbChtb2RhbEVsKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyDnt6jpm4bjg5zjgr/jg7PnlKjjg4Tjg7zjg6vjg4Hjg4Pjg5dcbiAgICAgIGNvbnN0IGVkaXRUb29sdGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICBlZGl0VG9vbHRpcC50ZXh0Q29udGVudCA9IFwi57eo6ZuGXCI7XG4gICAgICBlZGl0VG9vbHRpcC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgIGVkaXRUb29sdGlwLnN0eWxlLmJvdHRvbSA9IFwiMTAwJVwiO1xuICAgICAgZWRpdFRvb2x0aXAuc3R5bGUubGVmdCA9IFwiNTAlXCI7XG4gICAgICBlZGl0VG9vbHRpcC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVgoLTUwJSlcIjtcbiAgICAgIGVkaXRUb29sdGlwLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiNHB4XCI7XG4gICAgICBlZGl0VG9vbHRpcC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJnYmEoMCwgMCwgMCwgMC43NSlcIjtcbiAgICAgIGVkaXRUb29sdGlwLnN0eWxlLmNvbG9yID0gXCJ3aGl0ZVwiO1xuICAgICAgZWRpdFRvb2x0aXAuc3R5bGUucGFkZGluZyA9IFwiMnB4IDRweFwiO1xuICAgICAgZWRpdFRvb2x0aXAuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI0cHhcIjtcbiAgICAgIGVkaXRUb29sdGlwLnN0eWxlLmZvbnRTaXplID0gXCIxMHB4XCI7XG4gICAgICBlZGl0VG9vbHRpcC5zdHlsZS53aGl0ZVNwYWNlID0gXCJub3dyYXBcIjtcbiAgICAgIGVkaXRUb29sdGlwLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgICAgIGVkaXRUb29sdGlwLnN0eWxlLnRyYW5zaXRpb24gPSBcIm9wYWNpdHkgMC4yc1wiO1xuXG4gICAgICBlZGl0Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsICgpID0+IHtcbiAgICAgICAgZWRpdFRvb2x0aXAuc3R5bGUub3BhY2l0eSA9IFwiMVwiO1xuICAgICAgICBlZGl0QnRuLnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGUoMS4xKVwiO1xuICAgICAgfSk7XG4gICAgICBlZGl0Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsICgpID0+IHtcbiAgICAgICAgZWRpdFRvb2x0aXAuc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgICAgICBlZGl0QnRuLnN0eWxlLnRyYW5zZm9ybSA9IFwiXCI7XG4gICAgICB9KTtcblxuICAgICAgZWRpdENvbnRhaW5lci5hcHBlbmRDaGlsZChlZGl0QnRuKTtcbiAgICAgIGVkaXRDb250YWluZXIuYXBwZW5kQ2hpbGQoZWRpdFRvb2x0aXApO1xuXG4gICAgICAvLyDjgqvjg7zjg4njgavjg5zjgr/jg7PjgrPjg7Pjg4bjg4rjgpLov73liqBcbiAgICAgIGNhcmQuYXBwZW5kQ2hpbGQoZGVsZXRlQ29udGFpbmVyKTtcbiAgICAgIGNhcmQuYXBwZW5kQ2hpbGQoZWRpdENvbnRhaW5lcik7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgLy8g57eo6ZuG44Oi44O844OJ57WC5LqG5pmC77ya5ZCE56iu44Oc44K/44Oz6KaB57Sg44KS5YmK6Zmk44GX44CB44OJ44Op44OD44Kw77yG44OJ44Ot44OD44OX44KS54Sh5Yq55YyWXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5kZWxldGUtY29udGFpbmVyXCIpLmZvckVhY2goKGNvbnRhaW5lcikgPT4gY29udGFpbmVyLnJlbW92ZSgpKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmVkaXQtY29udGFpbmVyXCIpLmZvckVhY2goKGNvbnRhaW5lcikgPT4gY29udGFpbmVyLnJlbW92ZSgpKTtcblxuICAgIGRpc2FibGVUYXNrRHJhZ0FuZERyb3AoKTtcbiAgICBzYXZlVGFza09yZGVyKCk7XG5cbiAgICAvLyDnt6jpm4bjg6Ljg7zjg4njgaflpInmm7TjgZfjgZ/ooajnpLrjgpLjg6rjgrvjg4Pjg4jjgZfjgIHmipjjgornlbPjgb/jg5zjgr/jg7PjgpLlho3nlJ/miJBcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PihcIi50YXNrLXNlbGVjdGlvbiAucHJvbXB0LWNhcmRcIikuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY2FyZC5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgIGNhcmQuc3R5bGUucG9zaXRpb24gPSBcIlwiO1xuICAgIH0pO1xuICAgIGlmICh0eXBlb2Ygd2luZG93LmluaXRUb2dnbGVUYXNrcyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB3aW5kb3cuaW5pdFRvZ2dsZVRhc2tzKCk7XG4gICAgfVxuXG4gICAgLy8g55S76Z2i5YWo5L2T44Gu5YaN6Kqt44G/6L6844G/44Gv6KGM44KP44Ga44CB5b+F6KaB44Gq6YOo5YiG44Gu44G/RE9N44Gu5pu05paw44KS6KGM44GGXG4gICAgLy8g4oC744KC44GX44K/44K544Kv5LiA6Kan5YWo5L2T44Gu5pu05paw44GM5b+F6KaB44Gq44KJ44CB6Z2e5ZCM5pyf44Gn5paw44Gf44Gr44K/44K544Kv5LiA6Kan44KSZmV0Y2jjgZfjgablho3jg6zjg7Pjg4Djg6rjg7PjgrDjgZnjgovlh6bnkIbjgpLjgZPjgZPjgavov73liqBcblxuICAgIGlmIChlZGl0QnV0dG9uKSB7XG4gICAgICBlZGl0QnV0dG9uLnRpdGxlID0gXCLkuKbjgbPmm7/jgYjnt6jpm4ZcIjtcbiAgICAgIGVkaXRCdXR0b24uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiYmkgYmktYXJyb3dzLW1vdmVcIj48L2k+JztcbiAgICB9XG4gIH1cbn1cblxuLy8g44OJ44Op44OD44Kw77yG44OJ44Ot44OD44OX55So44Kk44OZ44Oz44OI44KS5pyJ5Yq55YyW77yI5ZCE44Kr44O844OJ44GrIC5lZGl0YWJsZSDjgq/jg6njgrnov73liqDvvIlcbmZ1bmN0aW9uIGVuYWJsZVRhc2tEcmFnQW5kRHJvcCgpIHtcbiAgY29uc3Qgd3JhcHBlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PihcIi50YXNrLXdyYXBwZXJcIik7XG4gIHdyYXBwZXJzLmZvckVhY2goKHdyYXBwZXIsIGluZGV4KSA9PiB7XG4gICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiZWRpdGFibGVcIik7IC8vIOODqeODg+ODkeODvOOBq+i/veWKoFxuICAgIC8vIOWGhemDqOOBruOCq+ODvOODieOBq+OCgui/veWKoFxuICAgIGNvbnN0IGNhcmQgPSB3cmFwcGVyLnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KFwiLnByb21wdC1jYXJkXCIpO1xuICAgIGlmIChjYXJkKSB7XG4gICAgICBjYXJkLmNsYXNzTGlzdC5hZGQoXCJlZGl0YWJsZVwiKTtcbiAgICAgIC8vIOWQhOOCq+ODvOODieOBruOCouODi+ODoeODvOOCt+ODp+ODs+mWi+Wni+OCv+OCpOODn+ODs+OCsOOCkuOBmuOCieOBme+8iOS+izogMC4x56eS5Yi744G/77yJXG4gICAgICBjYXJkLnN0eWxlLmFuaW1hdGlvbkRlbGF5ID0gYCR7aW5kZXggKiAwLjF9c2A7XG4gICAgfVxuICAgIHdyYXBwZXIuc3R5bGUudG91Y2hBY3Rpb24gPSBcIm5vbmVcIjtcbiAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCBvblRhc2tQb2ludGVyRG93bik7XG4gIH0pO1xufVxuXG4vLyDjgqTjg5njg7Pjg4jop6PpmaRcbmZ1bmN0aW9uIGRpc2FibGVUYXNrRHJhZ0FuZERyb3AoKSB7XG4gIGNvbnN0IHdyYXBwZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oXCIudGFzay13cmFwcGVyXCIpO1xuICB3cmFwcGVycy5mb3JFYWNoKCh3cmFwcGVyKSA9PiB7XG4gICAgd3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKFwiZWRpdGFibGVcIik7XG4gICAgY29uc3QgY2FyZCA9IHdyYXBwZXIucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oXCIucHJvbXB0LWNhcmRcIik7XG4gICAgaWYgKGNhcmQpIHtcbiAgICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZShcImVkaXRhYmxlXCIpO1xuICAgIH1cbiAgICB3cmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCBvblRhc2tQb2ludGVyRG93bik7XG4gIH0pO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgb25UYXNrUG9pbnRlck1vdmUpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIG9uVGFza1BvaW50ZXJVcCk7XG4gIGlmIChkcmFnZ2luZ1Rhc2spIHtcbiAgICBkcmFnZ2luZ1Rhc2suc3R5bGUucG9zaXRpb24gPSBcIlwiO1xuICAgIGRyYWdnaW5nVGFzay5zdHlsZS56SW5kZXggPSBcIlwiO1xuICB9XG59XG5cbi8vIHBvaW50ZXJkb3duIOOCpOODmeODs+ODiFxuZnVuY3Rpb24gb25UYXNrUG9pbnRlckRvd24oZTogUG9pbnRlckV2ZW50KSB7XG4gIGlmIChlLmJ1dHRvbiAhPT0gMCkgcmV0dXJuO1xuICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBFbGVtZW50IHwgbnVsbDtcbiAgaWYgKFxuICAgIHRhcmdldD8uY2xvc2VzdChcIi5jYXJkLWRlbGV0ZS1idG5cIikgfHxcbiAgICB0YXJnZXQ/LmNsb3Nlc3QoXCIuY2FyZC1lZGl0LWJ0blwiKSB8fFxuICAgIHRhcmdldD8uY2xvc2VzdChcIi5kZWxldGUtY29udGFpbmVyXCIpIHx8XG4gICAgdGFyZ2V0Py5jbG9zZXN0KFwiLmVkaXQtY29udGFpbmVyXCIpXG4gICkge1xuICAgIC8vIOe3qOmbhuODu+WJiumZpOODnOOCv+ODs+OBjOaKvOOBleOCjOOBn+WgtOWQiOOBr+S9leOCguOBm+OBmue1guS6hlxuICAgIHJldHVybjtcbiAgfVxuXG4gIGRyYWdnaW5nVGFzayA9IGUuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCB8IG51bGw7IC8vIHRhc2std3JhcHBlciDjgpLjg4njg6njg4PjgrDlr77osaHjgavjgZnjgotcbiAgaWYgKCFkcmFnZ2luZ1Rhc2spIHJldHVybjtcbiAgZHJhZ2dpbmdUYXNrLmNsYXNzTGlzdC5hZGQoXCJkcmFnZ2luZ1wiKTtcbiAgY29uc3QgcmVjdCA9IGRyYWdnaW5nVGFzay5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAvLyDntbblr77phY3nva7jgavlpInmm7RcbiAgZHJhZ2dpbmdUYXNrLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICBkcmFnZ2luZ1Rhc2suc3R5bGUud2lkdGggPSByZWN0LndpZHRoICsgXCJweFwiO1xuICBkcmFnZ2luZ1Rhc2suc3R5bGUuaGVpZ2h0ID0gcmVjdC5oZWlnaHQgKyBcInB4XCI7XG4gIGRyYWdnaW5nVGFzay5zdHlsZS56SW5kZXggPSBcIjEwMDBcIjtcblxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stc2VsZWN0aW9uXCIpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgaWYgKCFjb250YWluZXIpIHJldHVybjtcbiAgY29uc3QgY29udGFpbmVyUmVjdCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgZHJhZ2dpbmdUYXNrLnN0eWxlLmxlZnQgPSBlLmNsaWVudFggLSBjb250YWluZXJSZWN0LmxlZnQgLSByZWN0LndpZHRoIC8gMiArIFwicHhcIjtcbiAgZHJhZ2dpbmdUYXNrLnN0eWxlLnRvcCA9IGUuY2xpZW50WSAtIGNvbnRhaW5lclJlY3QudG9wIC0gcmVjdC5oZWlnaHQgLyAyICsgXCJweFwiO1xuXG4gIC8vIOODl+ODrOODvOOCueODm+ODq+ODgOODvOOCkuS9nOaIkO+8iHRhc2std3JhcHBlciDnlKjvvIlcbiAgdGFza1BsYWNlaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgdGFza1BsYWNlaG9sZGVyLmNsYXNzTmFtZSA9IFwidGFzay13cmFwcGVyIHBsYWNlaG9sZGVyXCI7XG4gIHRhc2tQbGFjZWhvbGRlci5zdHlsZS53aWR0aCA9IHJlY3Qud2lkdGggKyBcInB4XCI7XG4gIHRhc2tQbGFjZWhvbGRlci5zdHlsZS5oZWlnaHQgPSByZWN0LmhlaWdodCArIFwicHhcIjtcbiAgdGFza1BsYWNlaG9sZGVyLnN0eWxlLmJvcmRlciA9IFwiMXB4IGRhc2hlZCAjYWFhXCI7XG4gIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUodGFza1BsYWNlaG9sZGVyLCBkcmFnZ2luZ1Rhc2submV4dFNpYmxpbmcpO1xuXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCBvblRhc2tQb2ludGVyTW92ZSk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgb25UYXNrUG9pbnRlclVwKTtcbn1cblxuZnVuY3Rpb24gb25UYXNrUG9pbnRlck1vdmUoZTogUG9pbnRlckV2ZW50KSB7XG4gIGlmICghZHJhZ2dpbmdUYXNrKSByZXR1cm47XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1zZWxlY3Rpb25cIikgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuICBjb25zdCBjb250YWluZXJSZWN0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICBjb25zdCBjYXJkV2lkdGggPSBkcmFnZ2luZ1Rhc2sub2Zmc2V0V2lkdGg7XG4gIGNvbnN0IGNhcmRIZWlnaHQgPSBkcmFnZ2luZ1Rhc2sub2Zmc2V0SGVpZ2h0O1xuICBkcmFnZ2luZ1Rhc2suc3R5bGUubGVmdCA9IGUuY2xpZW50WCAtIGNvbnRhaW5lclJlY3QubGVmdCAtIGNhcmRXaWR0aCAvIDIgKyBcInB4XCI7XG4gIGRyYWdnaW5nVGFzay5zdHlsZS50b3AgPSBlLmNsaWVudFkgLSBjb250YWluZXJSZWN0LnRvcCAtIGNhcmRIZWlnaHQgLyAyICsgXCJweFwiO1xuXG4gIC8vIOODl+ODrOODvOOCueODm+ODq+ODgOODvOOBruS9jee9ruabtOaWsO+8iHdyYXBwZXLljZjkvY3jgafvvIlcbiAgY29uc3Qgd3JhcHBlcnMgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PihcIi50YXNrLXdyYXBwZXI6bm90KC5kcmFnZ2luZylcIikpO1xuICBsZXQgcGxhY2VkID0gZmFsc2U7XG4gIGZvciAobGV0IHdyYXBwZXIgb2Ygd3JhcHBlcnMpIHtcbiAgICBjb25zdCByZWN0ID0gd3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCBjZW50ZXJZID0gcmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDI7XG4gICAgaWYgKGUuY2xpZW50WSA8IGNlbnRlclkpIHtcbiAgICAgIGlmICh0YXNrUGxhY2Vob2xkZXIpIHtcbiAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZSh0YXNrUGxhY2Vob2xkZXIsIHdyYXBwZXIpO1xuICAgICAgfVxuICAgICAgcGxhY2VkID0gdHJ1ZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBpZiAoIXBsYWNlZCAmJiB0YXNrUGxhY2Vob2xkZXIpIHtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGFza1BsYWNlaG9sZGVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBvblRhc2tQb2ludGVyVXAoKSB7XG4gIGlmICghZHJhZ2dpbmdUYXNrKSByZXR1cm47XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1zZWxlY3Rpb25cIik7XG4gIGlmICghY29udGFpbmVyIHx8ICF0YXNrUGxhY2Vob2xkZXIpIHJldHVybjtcbiAgY29udGFpbmVyLmluc2VydEJlZm9yZShkcmFnZ2luZ1Rhc2ssIHRhc2tQbGFjZWhvbGRlcik7XG4gIGRyYWdnaW5nVGFzay5jbGFzc0xpc3QucmVtb3ZlKFwiZHJhZ2dpbmdcIik7XG4gIC8vIOOCueOCv+OCpOODq+ODquOCu+ODg+ODiFxuICBkcmFnZ2luZ1Rhc2suc3R5bGUucG9zaXRpb24gPSBcIlwiO1xuICBkcmFnZ2luZ1Rhc2suc3R5bGUubGVmdCA9IFwiXCI7XG4gIGRyYWdnaW5nVGFzay5zdHlsZS50b3AgPSBcIlwiO1xuICBkcmFnZ2luZ1Rhc2suc3R5bGUud2lkdGggPSBcIlwiO1xuICBkcmFnZ2luZ1Rhc2suc3R5bGUuaGVpZ2h0ID0gXCJcIjtcbiAgZHJhZ2dpbmdUYXNrLnN0eWxlLnpJbmRleCA9IFwiXCI7XG4gIHRhc2tQbGFjZWhvbGRlci5yZW1vdmUoKTtcbiAgdGFza1BsYWNlaG9sZGVyID0gbnVsbDtcbiAgZHJhZ2dpbmdUYXNrID0gbnVsbDtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIG9uVGFza1BvaW50ZXJNb3ZlKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBvblRhc2tQb2ludGVyVXApO1xufVxuXG4vLyDkuKbjgbPpoIbjgpLjgrXjg7zjg5Djg7zjgavkv53lrZjjgZnjgovplqLmlbBcbmZ1bmN0aW9uIHNhdmVUYXNrT3JkZXIoKSB7XG4gIGNvbnN0IHdyYXBwZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oXCIudGFzay13cmFwcGVyXCIpO1xuICBjb25zdCBuZXdPcmRlciA9IEFycmF5LmZyb20od3JhcHBlcnMpXG4gICAgLm1hcCgod3JhcHBlcikgPT4ge1xuICAgICAgY29uc3QgY2FyZCA9IHdyYXBwZXIucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oXCIucHJvbXB0LWNhcmRcIik7XG4gICAgICBpZiAoIWNhcmQgfHwgY2FyZC5kYXRhc2V0LmlzX2RlZmF1bHQgPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhcmQuZ2V0QXR0cmlidXRlKFwiZGF0YS10YXNrXCIpO1xuICAgIH0pXG4gICAgLmZpbHRlcihCb29sZWFuKTtcblxuICBpZiAobmV3T3JkZXIubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZmV0Y2goXCIvYXBpL3VwZGF0ZV90YXNrc19vcmRlclwiLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBvcmRlcjogbmV3T3JkZXIgfSlcbiAgfSlcbiAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBpZiAoZGF0YS5lcnJvcikge1xuICAgICAgICBhbGVydChcIuS4puOBs+mghuOBruS/neWtmOOBq+WkseaVlzogXCIgKyBkYXRhLmVycm9yKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBhbGVydChcIuS4puOBs+mghuOBruS/neWtmOOBq+WkseaVlzogXCIgKyBlcnIudG9TdHJpbmcoKSk7XG4gICAgfSk7XG59XG5cbi8vIOOCqOOCr+OCueODneODvOODiO+8iOS7luOBruOCueOCr+ODquODl+ODiOOBi+OCieWIqeeUqOOBp+OBjeOCi+OCiOOBhuOBq++8iVxud2luZG93LmluaXRUYXNrT3JkZXJFZGl0aW5nID0gaW5pdFRhc2tPcmRlckVkaXRpbmc7XG5cbmV4cG9ydCB7fTtcbiJdLCJuYW1lcyI6WyJ1cGRhdGVUYXNrVGl0bGUiLCJjYXJkIiwibmV3VGl0bGUiLCJ0cnVuY2F0ZWRUaXRsZSIsImxlbmd0aCIsInN1YnN0cmluZyIsImhlYWRlciIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsIndpbmRvdyIsImxvYWRUYXNrQ2FyZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsZW0iLCJyZW1vdmUiLCJzaG93TW9kYWwiLCJtb2RhbEVsIiwic3R5bGUiLCJkaXNwbGF5IiwiaGlkZU1vZGFsIiwiaW5pdFRhc2tNYW5hZ2VyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNsb3NlQnRuIiwiY2FuY2VsQnRuIiwic2F2ZUJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXNrTmFtZUVsIiwicHJvbXB0VGVtcGxhdGVFbCIsImlucHV0RXhhbXBsZXNFbCIsIm91dHB1dEV4YW1wbGVzRWwiLCJhbGVydCIsInRhc2tOYW1lIiwidmFsdWUiLCJ0cmltIiwicHJvbXB0VGVtcGxhdGUiLCJpbnB1dEV4YW1wbGVzIiwib3V0cHV0RXhhbXBsZXMiLCJlZGl0aW5nQ2FyZCIsImN1cnJlbnRFZGl0aW5nQ2FyZCIsIm9sZFRhc2siLCJkYXRhc2V0IiwidGFzayIsInBheWxvYWQiLCJvbGRfdGFzayIsIm5ld190YXNrIiwicHJvbXB0X3RlbXBsYXRlIiwiaW5wdXRfZXhhbXBsZXMiLCJvdXRwdXRfZXhhbXBsZXMiLCJmZXRjaCIsIm1ldGhvZCIsImNyZWRlbnRpYWxzIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGhlbiIsInJlc3BvbnNlIiwiY3QiLCJnZXQiLCJpbmNsdWRlcyIsImpzb24iLCJkYXRhIiwib2siLCJFcnJvciIsImVycm9yIiwidGV4dCIsImNvbnNvbGUiLCJzdGF0dXMiLCJjYXRjaCIsIm1lc3NhZ2UiLCJyZWFkeVN0YXRlIiwiaXNFZGl0aW5nT3JkZXIiLCJlZGl0QnV0dG9uIiwiZHJhZ2dpbmdUYXNrIiwidGFza1BsYWNlaG9sZGVyIiwidGFza09mZnNldFgiLCJ0YXNrT2Zmc2V0WSIsImluaXRUYXNrT3JkZXJFZGl0aW5nIiwibG9nZ2VkSW4iLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJjbGFzc05hbWUiLCJtYXJnaW4iLCJ0eXBlIiwiaW5uZXJIVE1MIiwidGl0bGUiLCJ0b2dnbGVUYXNrT3JkZXJFZGl0aW5nIiwiYXBwZW5kQ2hpbGQiLCJwb3NpdGlvbiIsInRvZ2dsZUJ0biIsImVuYWJsZVRhc2tEcmFnQW5kRHJvcCIsImV4aXN0aW5nRGVsZXRlQ29udGFpbmVyIiwiZXhpc3RpbmdFZGl0Q29udGFpbmVyIiwiZGVsZXRlQ29udGFpbmVyIiwidG9wIiwibGVmdCIsInpJbmRleCIsImRlbGV0ZUJ0biIsIndpZHRoIiwiaGVpZ2h0IiwiYm9yZGVyUmFkaXVzIiwiYm9yZGVyIiwiYmFja2dyb3VuZENvbG9yIiwiY29sb3IiLCJmb250U2l6ZSIsImFsaWduSXRlbXMiLCJqdXN0aWZ5Q29udGVudCIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJ0YXJnZXRDYXJkIiwiY3VycmVudFRhcmdldCIsImNsb3Nlc3QiLCJjb25maXJtIiwiZ2V0QXR0cmlidXRlIiwiZXJyb3JEYXRhIiwid3JhcHBlciIsInNhdmVUYXNrT3JkZXIiLCJlcnIiLCJkZWxldGVUb29sdGlwIiwiYm90dG9tIiwidHJhbnNmb3JtIiwibWFyZ2luQm90dG9tIiwicGFkZGluZyIsIndoaXRlU3BhY2UiLCJvcGFjaXR5IiwidHJhbnNpdGlvbiIsImVkaXRDb250YWluZXIiLCJyaWdodCIsImVkaXRCdG4iLCJlZGl0VG9vbHRpcCIsImNvbnRhaW5lciIsImRpc2FibGVUYXNrRHJhZ0FuZERyb3AiLCJpbml0VG9nZ2xlVGFza3MiLCJ3cmFwcGVycyIsImluZGV4IiwiY2xhc3NMaXN0IiwiYWRkIiwiYW5pbWF0aW9uRGVsYXkiLCJ0b3VjaEFjdGlvbiIsIm9uVGFza1BvaW50ZXJEb3duIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uVGFza1BvaW50ZXJNb3ZlIiwib25UYXNrUG9pbnRlclVwIiwiYnV0dG9uIiwidGFyZ2V0IiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImNvbnRhaW5lclJlY3QiLCJjbGllbnRYIiwiY2xpZW50WSIsImluc2VydEJlZm9yZSIsIm5leHRTaWJsaW5nIiwiY2FyZFdpZHRoIiwib2Zmc2V0V2lkdGgiLCJjYXJkSGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiQXJyYXkiLCJmcm9tIiwicGxhY2VkIiwiY2VudGVyWSIsIm5ld09yZGVyIiwibWFwIiwiaXNfZGVmYXVsdCIsImZpbHRlciIsIkJvb2xlYW4iLCJvcmRlciIsInJlcyIsInRvU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./scripts/setup/task_manager.ts\n"));

/***/ })

}]);